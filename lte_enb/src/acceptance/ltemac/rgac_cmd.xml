#
#/********************************************************************20**
#
#     Name:    LTEMAC
#
#     Type:    XML Test File
#
#     Desc:    XML Based Test Cases
#
#     File:    rgac_cmd.xml
#
#     Sid:      rgac_cmd.xml@@/main/3 - Sat Jul 30 02:22:25 2011
#
#     Prg:     Group Commands  
#
#*********************************************************************21*/

#
#
#       Command: tapa.rg.macInit
#
#       Desc:    Layer Manager Commands to LTEMAC
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.macInit">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Layer Manager Commands to LTEMAC
      </tapa.desc>

      <tapa.longdesc>
         "Sending General Configuration, RGR SAP Configuration and CRG SAP
         configuration to LTEMAC"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      # Send General Configuration for LTEMAC
      <tapa.send>
         <tapa.lrg.cfg.gen tmrRes="10"/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.lrg.cfgcfm/>
      </tapa.expect>

      #Send CRG SSAP Configuration to LTEMAC */
      <tapa.send>
         <tapa.lrg.cfg.crgsap/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.lrg.cfgcfm/>
      </tapa.expect>

      #Send RGR SSAP Configuration to LTEMAC */
      <tapa.send>
         <tapa.lrg.cfg.schins numSaps="1" instId="5" rgr_suId="0" rgr_spId="0"
            rgm_suId="0" rgm_spId="0" tfu_suId="0" tfu_spId="1" bndTimerValue="5" />
      </tapa.send>

      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.lrg.schcfgcfm instId="5"/>
      </tapa.expect>

      #Send TFU SSAP Configuration to LTEMAC */
      <tapa.send>
         <tapa.lrg.cfg.tfusap/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.lrg.cfgcfm/>
      </tapa.expect>
      
      #Send RGU  SSAP Configuration to LTEMAC */
      <tapa.send>
         <tapa.lrg.cfg.rgusap/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.lrg.cfgcfm/>
      </tapa.expect>

   </tapa.steps>

</tapa.command>
#
#
#       Command: tapa.rg.macDeInit
#
#       Desc:    Layer Manager Commands to LTEMAC for Layer Shutdown
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.macDeInit">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Layer Manager Commands to LTEMAC for Layer Shutdown"
      </tapa.desc>

      <tapa.longdesc>
         "Sending Control request to LTEMAC for Shutdown amd then send UnBind Request 
         to RGR, CRG, and RGU SAp's"
         sending a cron LTEMAC"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      # Send UnBind Request to RGU SAP
      <tapa.send>
         <tapa.rgu.ubndreq/>
      </tapa.send>
      
      # Send UnBind Request to CRG SAP
      <tapa.send>
         <tapa.crg.ubndreq/>
      </tapa.send>
      
      # Send UnBind Request to SCH SAP
      <tapa.send>
         <tapa.lrg.schcntrlreq instId="5" elmntType="STGEN" action="ASHUTDOWN"/>
      </tapa.send>
      
      #Send Control Request to LTEMAC for ShutDown 
      <tapa.send>
         <tapa.lrg.cntrlreq action="ASHUTDOWN" elmntType="STGEN" />
      </tapa.send>
      # Expect Dummy TFU UnBind Request
      <tapa.expect>
         <tapa.tfu.sch.ubndreq instId="5" spId="1"/>
      </tapa.expect>

      <tapa.expect>
         <tapa.lrg.schcntrlcfm/>
      </tapa.expect>


      # Expect Dummy TFU UnBind Request
      <tapa.expect>
         <tapa.tfu.ubndreq/>
      </tapa.expect>

      # Expect Cntrl Confirm
      <tapa.expect>
         <tapa.lrg.cntrlcfm/>
      </tapa.expect>

      <tapa.delay delay="1"/>      
   </tapa.steps>
</tapa.command>


#
#
#       Command: tapa.rg.cellInit
#
#       Desc:    Commands to LTEMAC to Initialize CELL
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.cellInit">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize CELL
      </tapa.desc>

      <tapa.longdesc>
         "Binding RGR and CRG SAPS, Creatting CELL in CRG Interface, creating 
         common logical channels(BCCH/BCH, BCCH/DLSCH, PCCH, CCCH) and RGR
         CELL configuration for schedular related information"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      #Send Bind Request for CRG SAP 
      <tapa.send>
         <tapa.crg.bndreq/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.crg.bndcfm/>
      </tapa.expect>
      
      #Send Bind Request for RGR SAP 
      <tapa.send>
         <tapa.rgr.bndreq instId="5"/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgr.bndcfm/>
      </tapa.expect>
      #Send Bind Request for RGR SAP 
      <tapa.send>
         <tapa.rgu.bndreq/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgu.bndcfm/>
      </tapa.expect>
<!--
      #Send Bind Request for RGM SAP 
      <tapa.send>
         <tapa.rgm.bndreq/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgm.bndcfm/>
      </tapa.expect>
 -->
      #<tapa.rg.dbgInitAll/>
      #Expect NOK_DONE Control Confirm from LTE MAC
      #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.cntrlreq suId="0" spId="0" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>
      
      <tapa.expect>
         <tapa.lrg.cntrlcfm status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL"/>
      </tapa.expect>


      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.bndreq instId="0"/>
      </tapa.expect>
      
      #<tapa.rg.dbgDeInitAll/>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.bndcfm suId="0" instId="0"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm/>
      </tapa.expect>

      #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.schcntrlreq instId="5" suId="0" spId="0" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.schcntrlcfm status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL" instId="5"/>
      </tapa.expect>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.sch.bndreq instId="5" spId="1"/>
      </tapa.expect>
      
      #<tapa.rg.dbgDeInitAll/>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.sch.bndcfm suId="0" instId="5" spId="1"/>
      </tapa.send>

      
      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm instId="5"/>
      </tapa.expect>

      #Send CRG Cell Configuration
      <tapa.send>
         <tapa.crg.cfgreq.cfg.cell/>
      </tapa.send>
      

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #<tapa.rg.dbgDeInitAll/>

      #Send Common Logical Channel Configuration BCCH->BCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="1" dir="1" lcType="1" dlTrchType="1"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH1
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="2" dir="1" lcType="1"
            dlTrchType="3"/>
      </tapa.send>
      
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>
      
      #Send Common Logical Channel Configuration PCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  crnti="1234" lcId="3" dir="1" lcType="2"/>
      </tapa.send>
     
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration CCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  crnti="1234" lcId="4" dir="3" lcType="3"
            dlTrchType="3" ulTrchType="5"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH2
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="5" dir="1" lcType="1"
            dlTrchType="3"/>
      </tapa.send>
      
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Sending RGR ENB Configuration
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.enb instId="5"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

      #Sending RGR CELL Configuration
      #cmnLcInfo = "lcId:lcType:dir:dlTrchType:ulTrchType:...."
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.cell instId="5" numCmnLc="5"
         cmnLcInfo="1:1:1:1:0:2:1:1:3:0:3:2:1:0:0:4:3:3:3:5:5:1:1:3:0" />
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

   </tapa.steps>

</tapa.command>
#
#
#       Command: tapa.rg.UeInit
#
#       Desc:    Commands to LTEMAC to Initialize UE
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.UeInit">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize UE
      </tapa.desc>

      <tapa.longdesc>
         "This command will finish complete RA process and does the UE
         Configuration"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>

      <tapa.tfu.directive ulDeltaPrsnt="TRUE"/>
         # Send RaReqInd for one rapId 
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>
      <tapa.send>
         <tapa.tfu.rareq.ind numRaRnti="1" suId="0">
            <tapa.tfu.rareq  numRapId="1" rapIds="1" timingAdvs="3"
               tpcs="1" cqiPres="TRUE" cqis="4"/>
         </tapa.tfu.rareq.ind>
      </tapa.send>

      # Ue starts expecting raResp after 3 subframes within the raResp window.
      # In this TC, it shall expect raResp in the first subframe after 3 Ttis.
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>
      
      # Expect RaResp for the rapId sent in RaReq
      <tapa.expset>
        <tapa.tfu.dat.req datReqs="1">
           <tapa.tfu.rarsp.req />
        </tapa.tfu.dat.req>
        <tapa.tfu.cntrl.req numCntrlReq="1" spId="1">
           <tapa.tfu.pdcch.cntrl.req/>
        </tapa.tfu.cntrl.req>
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="6"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req numRntis="1" spId="1" >
            <tapa.tfu.msg3.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>
   
   <tapa.send>
      <tapa.tfu.tti.ind numTti="3"/>
   </tapa.send>

   #Send CRC for Msg3
   <tapa.send>
      <tapa.tfu.crc.ind>
         <tapa.tfu.crc isFailure="FALSE"/>
      </tapa.tfu.crc.ind>
   </tapa.send>

   <tapa.send>
      <tapa.tfu.tti.ind numTti="1"/>
   </tapa.send>

   # Expect HARQ ACK in PHICH For MSG3
   <tapa.expect>
      <tapa.tfu.cntrl.req numCntrlReq="1" spId="1">
         <tapa.tfu.phich.cntrl.req isAck="TRUE"/>
      </tapa.tfu.cntrl.req>
   </tapa.expect>

   # Send Message3 after receiving Message3 reception req.
   # rg004.201 Fixed the CCCH sdu size 
   <tapa.send>
       <tapa.tfu.dat.ind datInds="1">
          <tapa.tfu.dat isCcchSdu="TRUE" sduSize="6" addPhr="TRUE" phr="46" />
       </tapa.tfu.dat.ind>      
   </tapa.send>   
   

   # Expect Message3 datReq on CCCH at RGU.
   <tapa.expect>
      <tapa.rgu.cdatind lcId="4"/>
   </tapa.expect>
   
    # Send BO for Msg4 on RGU. 
    <tapa.send>
       <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"/>
    </tapa.send>

   <tapa.send>
      <tapa.tfu.tti.ind numTti="1"/> 
   </tapa.send>

   # Expect CStatInd For MSG4
   <tapa.expset>
      <tapa.rgu.cstaind lcId="4"/>
   </tapa.expset>

   # Send Msg4 on RGU. 
   <tapa.send>
      <tapa.rgu.cdatreq lcId="4" lcType="3" />
   </tapa.send>

   <tapa.send>
      <tapa.tfu.tti.ind numTti="1"/>
   </tapa.send>

   # Expect Msg4 from MAC to PHY.
   <tapa.expset>
     <tapa.tfu.dat.req datReqs="1">
        <tapa.tfu.pdsch.dat.req use="1" validate="FALSE"/>
     </tapa.tfu.dat.req>   
     <tapa.tfu.cntrl.req numCntrlReq="1" spId="1">
        <tapa.tfu.pdcch.cntrl.req saveTo="1"/>
     </tapa.tfu.cntrl.req>
   </tapa.expset>

   <tapa.send>
      <tapa.tfu.tti.ind numTti="4"/>
   </tapa.send>
  
   # Recv Hq Recp Req for Msg4. 
   <tapa.expect>
     <tapa.tfu.recp.req numRntis="1" spId="1">
        <tapa.tfu.hq.recp.req/>
     </tapa.tfu.recp.req>   
   </tapa.expect>

   <tapa.send>
      <tapa.tfu.tti.ind numTti="3" />
   </tapa.send>

   # Send ACK as feedback for Msg4. 
   <tapa.send>
     <tapa.tfu.hq.ind hqInds="1">
        <tapa.tfu.hq />
     </tapa.tfu.hq.ind>   
  </tapa.send>

   # Send UE config request
   <tapa.send>
     <tapa.crg.cfgreq.cfg.ue/>
   </tapa.send>

   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.crg.cfgcfm/>
   </tapa.expect>

   # Send UE config request
   <tapa.send>
     <tapa.rgr.cfgreq.cfg.ue instId="5"/>
   </tapa.send>


   # Send TTI to apply the config
   <tapa.send>
      <tapa.tfu.tti.ind/>
   </tapa.send>

   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.rgr.cfgCfm instId="5"/>
   </tapa.expect>

   
   #<tapa.rg.dbgDeInitAll/>
   </tapa.steps>

</tapa.command>

#rg003.301 - ccpu00118352 - MOD
# rg002.301 - ccpu00118352 - ADD - Added a command for UE Initialization needed
# with respect to the change brought in by UL Scheduling at CRC Indication.
#
#
#       Command: tapa.rg.UeInit2
#
#       Desc:    Commands to LTEMAC to Initialize UE
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.UeInit2">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize UE
      </tapa.desc>

      <tapa.longdesc>
         "This command will finish complete RA process and does the UE
         Configuration"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>

      <tapa.tfu.directive ulDeltaPrsnt="TRUE"/>
         # Send RaReqInd for one rapId 
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>
      <tapa.send>
         <tapa.tfu.rareq.ind numRaRnti="1" suId="0">
            <tapa.tfu.rareq  numRapId="1" rapIds="1" timingAdvs="3"
               tpcs="1" cqiPres="TRUE" cqis="4"/>
         </tapa.tfu.rareq.ind>
      </tapa.send>

      # Ue starts expecting raResp after 3 subframes within the raResp window.
      # In this TC, it shall expect raResp in the first subframe after 3 Ttis.
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>
      
      # Expect RaResp for the rapId sent in RaReq
      <tapa.expset>
        <tapa.tfu.dat.req datReqs="1">
           <tapa.tfu.rarsp.req />
        </tapa.tfu.dat.req>
        <tapa.tfu.cntrl.req numCntrlReq="1" spId="1">
           <tapa.tfu.pdcch.cntrl.req/>
        </tapa.tfu.cntrl.req>
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="6"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req numRntis="1" spId="1" >
            <tapa.tfu.msg3.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>
   
   <tapa.send>
      <tapa.tfu.tti.ind numTti="4"/>
   </tapa.send>

   #Send CRC for Msg3
   <tapa.send>
      <tapa.tfu.crc.ind>
         <tapa.tfu.crc isFailure="FALSE"/>
      </tapa.tfu.crc.ind>
   </tapa.send>

   # Expect HARQ ACK in PHICH For MSG3
   <tapa.expect>
      <tapa.tfu.cntrl.req numCntrlReq="1" spId="1">
         <tapa.tfu.phich.cntrl.req isAck="TRUE"/>
      </tapa.tfu.cntrl.req>
   </tapa.expect>

   <tapa.send>
      <tapa.tfu.tti.ind numTti="1"/>
   </tapa.send>

   # Send Message3 after receiving Message3 reception req.
   # rg004.201 Fixed the CCCH sdu size 
   <tapa.send>
       <tapa.tfu.dat.ind datInds="1">
          <tapa.tfu.dat isCcchSdu="TRUE" sduSize="6" />
       </tapa.tfu.dat.ind>      
   </tapa.send>   
   

   # Expect Message3 datReq on CCCH at RGU.
   <tapa.expect>
      <tapa.rgu.cdatind lcId="4"/>
   </tapa.expect>
   
    # Send BO for Msg4 on RGU. 
    <tapa.send>
       <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"/>
    </tapa.send>

   <tapa.send>
      <tapa.tfu.tti.ind numTti="1"/> 
   </tapa.send>

   # Expect CStatInd For MSG4
   <tapa.expset>
      <tapa.rgu.cstaind lcId="4"/>
   </tapa.expset>

   # Send Msg4 on RGU. 
   <tapa.send>
      <tapa.rgu.cdatreq lcId="4" lcType="3" />
   </tapa.send>

   <tapa.send>
      <tapa.tfu.tti.ind numTti="1"/>
   </tapa.send>

   # Expect Msg4 from MAC to PHY.
   <tapa.expset>
     <tapa.tfu.dat.req datReqs="1">
        <tapa.tfu.pdsch.dat.req use="1" validate="FALSE"/>
     </tapa.tfu.dat.req>   
     <tapa.tfu.cntrl.req numCntrlReq="1" spId="1">
        <tapa.tfu.pdcch.cntrl.req saveTo="1"/>
     </tapa.tfu.cntrl.req>
   </tapa.expset>

   <tapa.send>
      <tapa.tfu.tti.ind numTti="4"/>
   </tapa.send>
  
   # Recv Hq Recp Req for Msg4. 
   <tapa.expect>
     <tapa.tfu.recp.req numRntis="1" spId="1">
        <tapa.tfu.hq.recp.req/>
     </tapa.tfu.recp.req>   
   </tapa.expect>

   <tapa.send>
      <tapa.tfu.tti.ind numTti="3" />
   </tapa.send>

   # Send ACK as feedback for Msg4. 
   <tapa.send>
     <tapa.tfu.hq.ind hqInds="1">
        <tapa.tfu.hq />
     </tapa.tfu.hq.ind>   
  </tapa.send>

   # Send UE config request
   <tapa.send>
     <tapa.crg.cfgreq.cfg.ue/>
   </tapa.send>

   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.crg.cfgcfm/>
   </tapa.expect>

   # Send UE config request
   <tapa.send>
     <tapa.rgr.cfgreq.cfg.ue instId="5"/>
   </tapa.send>


   # Send TTI to apply the config
   <tapa.send>
      <tapa.tfu.tti.ind/>
   </tapa.send>

   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.rgr.cfgCfm instId="5"/>
   </tapa.expect>

   
   #<tapa.rg.dbgDeInitAll/>
   </tapa.steps>

</tapa.command>


#
#
#       Command: tapa.rg.cellInit.dlSched
#
#       Desc:    Commands to LTEMAC to Initialize CELL
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.cellInit.dlSched">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize CELL
      </tapa.desc>

      <tapa.longdesc>
         "Binding RGR and CRG SAPS, Creatting CELL in CRG Interface, creating 
         common logical channels(BCCH/BCH, BCCH/DLSCH, PCCH, CCCH) and RGR
         CELL configuration for schedular related information"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      #Send Bind Request for CRG SAP 
      <tapa.send>
         <tapa.crg.bndreq/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.crg.bndcfm/>
      </tapa.expect>


      #Send Bind Request for RGR SAP 
      <tapa.send>
         <tapa.rgr.bndreq instId="5"/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgr.bndcfm/>
      </tapa.expect>

 
      #Send Bind Request for RGR SAP 
      <tapa.send>
         <tapa.rgu.bndreq/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgu.bndcfm/>
      </tapa.expect>

 
      #<tapa.rg.dbgInitAll/>
      #Expect NOK_DONE Control Confirm from LTE MAC
      #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.cntrlreq suId="0" spId="0" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.cntrlcfm status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL"/>
      </tapa.expect>
      
      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.bndreq/>
      </tapa.expect>
      
      #<tapa.rg.dbgDeInitAll/>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.bndcfm suId="0"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm/>
      </tapa.expect>

      #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.schcntrlreq instId="5" suId="0" spId="0" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.schcntrlcfm status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL" instId="5"/>
      </tapa.expect>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.sch.bndreq instId="5" spId="1"/>
      </tapa.expect>
      
      #<tapa.rg.dbgDeInitAll/>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.sch.bndcfm suId="0" instId="5" spId="1"/>
      </tapa.send>

      
      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm instId="5"/>
      </tapa.expect>

      #Send CRG Cell Configuration
      <tapa.send>
         <tapa.crg.cfgreq.cfg.cell dlTotalBw="100" ulTotalBw="50"/>
      </tapa.send>
      

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #<tapa.rg.dbgDeInitAll/>

      #Send Common Logical Channel Configuration BCCH->BCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="1" dir="1" lcType="1" dlTrchType="1"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="2" dir="1" lcType="1"
            dlTrchType="3"/>
      </tapa.send>
      
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>
      
      #Send Common Logical Channel Configuration PCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  crnti="1234" lcId="3" dir="1" lcType="2"/>
      </tapa.send>
     
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration CCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  crnti="1234" lcId="4" dir="3" lcType="3"
            dlTrchType="3" ulTrchType="5"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="5" dir="1" lcType="1"
            dlTrchType="3"/>
      </tapa.send>
      
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Sending RGR ENB Configuration
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.enb instId="5"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

      #Sending RGR CELL Configuration
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.cell instId="5" dlTotalBw="100" ulTotalBw="50"  numCmnLc="5"
         cmnLcInfo="1:1:1:1:0:2:1:1:3:0:3:2:1:0:0:4:3:3:3:3:5:1:1:3:0" raOccSubFrameNum="1:6" raOccSize = "2" />
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

   </tapa.steps>

</tapa.command>

#
#
#       Command: tapa.rg.cellInit.dlfs
#
#       Desc:    Commands to LTEMAC to Initialize CELL
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.cellInit.dlfs">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize CELL
      </tapa.desc>

      <tapa.longdesc>
         "Binding RGR and CRG SAPS, Creatting CELL in CRG Interface, creating 
         common logical channels(BCCH/BCH, BCCH/DLSCH, PCCH, CCCH) and RGR
         CELL configuration for schedular related information"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      #Send Bind Request for CRG SAP 
      <tapa.send>
         <tapa.crg.bndreq/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.crg.bndcfm/>
      </tapa.expect>


      #Send Bind Request for RGR SAP 
      <tapa.send>
         <tapa.rgr.bndreq instId="5"/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgr.bndcfm/>
      </tapa.expect>

 
      #Send Bind Request for RGR SAP 
      <tapa.send>
         <tapa.rgu.bndreq/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgu.bndcfm/>
      </tapa.expect>

 
      #<tapa.rg.dbgInitAll/>
      #Expect NOK_DONE Control Confirm from LTE MAC
      #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.cntrlreq suId="0" spId="0" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.cntrlcfm status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL"/>
      </tapa.expect>
      
      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.bndreq/>
      </tapa.expect>
      
      #<tapa.rg.dbgDeInitAll/>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.bndcfm suId="0"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm/>
      </tapa.expect>

      #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.schcntrlreq instId="5" suId="0" spId="0" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.schcntrlcfm status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL" instId="5"/>
      </tapa.expect>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.sch.bndreq instId="5" spId="1"/>
      </tapa.expect>
      
      #<tapa.rg.dbgDeInitAll/>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.sch.bndcfm suId="0" instId="5" spId="1"/>
      </tapa.send>

      
      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm instId="5"/>
      </tapa.expect>

      #Send CRG Cell Configuration
      <tapa.send>
         <tapa.crg.cfgreq.cfg.cell/>
      </tapa.send>
      

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #<tapa.rg.dbgDeInitAll/>

      #Send Common Logical Channel Configuration BCCH->BCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="1" dir="1" lcType="1" dlTrchType="1"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="2" dir="1" lcType="1"
            dlTrchType="3"/>
      </tapa.send>
      
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>
      
      #Send Common Logical Channel Configuration PCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  crnti="1234" lcId="3" dir="1" lcType="2"/>
      </tapa.send>
     
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration CCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  crnti="1234" lcId="4" dir="3" lcType="3"
            dlTrchType="3" ulTrchType="5"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="5" dir="1" lcType="1"
            dlTrchType="3"/>
      </tapa.send>
      
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Sending RGR ENB Configuration
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.enb instId="5"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

      #Sending RGR CELL Configuration
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.cell instId="5" numCmnLc="5"
            cmnLcInfo="1:1:1:1:0:2:1:1:3:0:3:2:1:0:0:4:3:3:3:3:5:1:1:3:0" 
            raOccSubFrameNum="1:6" raOccSize = "2" isDlFreqSel="1"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

   </tapa.steps>

</tapa.command> 

#
#
#       Command: tapa.rg.dlfs.aprdcqiTrg
#
#       Desc:    Commands to LTEMAC to Initialize CELL
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.dlfs.aprdcqiTrg">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to Trigger Aperiodic CQI
      </tapa.desc>

      <tapa.longdesc>
         "Commands to Trigger Aperiodic CQI based on the 
         triggering criteria"
      </tapa.longdesc>

   </tapa.doc>

   # Test Steps subsection
   <tapa.steps> 
      # Configure bi-directional DCCH for default UE
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      # Expect configuration confirm after the TTI
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      # Configure bi-directional DTCH for default UE
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch lcId="4" lcgId="0" dir="3" lcType="4" />
      </tapa.send>

      # Expect configuration confirm after the TTI
      <tapa.expect>
         <tapa.crg.cfgcfm status="0"/>
      </tapa.expect>

      <!--- on RGR interface -->
      # Configure bi-directional DCCH for default UE
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch lcId="1" dir="1" lcType="5" instId="5"/>
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # Expect configuration confirm
      <tapa.expect>
         <tapa.rgr.cfgCfm status="0"/>
      </tapa.expect>

      # Configure UL LCG on RGR for UE
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lcg lcgId="0" instId="5"/>
      </tapa.send>

      # Configure bi-directional DTCH for default UE
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch lcId="4" dir="1" lcType="4" instId="5"/>
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      #Expect configuration confirm
      <tapa.expect>
         <tapa.rgr.cfgCfm status="0" />
      </tapa.expect>    

      # DATA --->1  
      <tapa.send>
         # Send BO for the created logical channel on RGU.
         <tapa.rgu.dstarsp lcId="4" lcType="4" bo="50"/>
      </tapa.send>

      <tapa.send>
         # Send a Tti to get the transmission scheduled.
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # Expect configuration confirm
      <tapa.expect>
         <tapa.rgr.cfgCfm status="0"/>
      </tapa.expect>

      # DATA --->1 
      <tapa.expect>
         # Expect staInd from MAC to RLC
         <tapa.rgu.dstaind lchTb1Data="4" saveTo="2"/>
      </tapa.expect>

      <tapa.send>
         # Send data with size equal to the allocated size on RGU.
         <tapa.rgu.ddatreq lchTb1Data="4" lcType="5"/>
      </tapa.send>

      # DATA --->2  
      <tapa.send>
         # Send BO for the created logical channel on RGU.
         <tapa.rgu.dstarsp lcId="4" lcType="4" bo="50"/>
      </tapa.send>

      <tapa.send>
         # Send 1 Tti to get the MAC PDU at PHY.
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # DATA --->2 
      <tapa.expect>
         # Expect staInd from MAC to RLC
         <tapa.rgu.dstaind lchTb1Data="4" saveTo="2"/>
      </tapa.expect>

      <tapa.send>
         # Send data with size equal to the allocated size on RGU.
         <tapa.rgu.ddatreq lchTb1Data="2" lcType="5"/>
      </tapa.send>  

      # DATA --->1 at (3,7) for DL SF (3,9)
      <tapa.expset>
         <tapa.tfu.cntrl.req expCntrlReq="1">
            <tapa.tfu.pdcch.cntrl.req saveTo="9" vldDciFrmt="TRUE" isFormat2a="TRUE" transMode="TFU_UE_TM_3"/>
         </tapa.tfu.cntrl.req>
         <tapa.tfu.dat.req datReqs="1">
            <tapa.tfu.pdsch.dat.req  use="9" lcId="4" chkSdu="TRUE"/>
         </tapa.tfu.dat.req>
      </tapa.expset>

      <tapa.send>
         # Send 1 Tti to get the MAC PDU at PHY.
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # DATA --->2 at (3,8) for DL SF (4,0)
      <tapa.expset>
         <tapa.tfu.cntrl.req expCntrlReq="1">
            <tapa.tfu.pdcch.cntrl.req saveTo="9" vldDciFrmt="TRUE" isFormat2a="TRUE" transMode="TFU_UE_TM_3"/>
         </tapa.tfu.cntrl.req>
         <tapa.tfu.dat.req datReqs="1">
            <tapa.tfu.pdsch.dat.req  use="9" lcId="4" chkSdu="TRUE"/>
         </tapa.tfu.dat.req>
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="3"/>
      </tapa.send>

      # DATA --->1: expect Recp Req at (4,1)
      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="1">
            <tapa.tfu.hq.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="3" />
      </tapa.send>

      #1 DATA --->1: Send Hq Ind at (4,4) for UL Subframe (4,3)
      <tapa.send>
         <tapa.tfu.hq.ind hqInds="1">
            <tapa.tfu.hq  isAckLst="FALSE"/>
         </tapa.tfu.hq.ind>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1" />
      </tapa.send>

      # DATA --->2: expect Recp Req at (4,5)
      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="1">
            <tapa.tfu.hq.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect> 

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2" />
      </tapa.send>

      # DATA --->1 Retx at (4,7) for DL SF (4,9)
      <tapa.expset>
         <tapa.tfu.cntrl.req expCntrlReq="1">
            <tapa.tfu.pdcch.cntrl.req saveTo="9"  validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.cntrl.req>
         <tapa.tfu.dat.req datReqs="1">
            <tapa.tfu.pdsch.dat.req  use="9" lcId="4" chkSdu="TRUE" 
               isRetx="TRUE" retxUse="5" validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.dat.req>
      </tapa.expset>   

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1" />
      </tapa.send>

      #2 DATA --->2: Send Hq Ind at (4,8) for UL Subframe (4,7)
      <tapa.send>
         <tapa.tfu.hq.ind hqInds="1">
            <tapa.tfu.hq isAckLst="FALSE"/>
         </tapa.tfu.hq.ind>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="3"/>
      </tapa.send>

      # DATA --->1(Retx): expect Recp Req at (5,1)
      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="1">
            <tapa.tfu.hq.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # DATA --->2 Retx at (5,2) for DL SF (5,4)
      <tapa.expset>
         <tapa.tfu.cntrl.req expCntrlReq="1">
            <tapa.tfu.pdcch.cntrl.req saveTo="9"  validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.cntrl.req>
         <tapa.tfu.dat.req datReqs="1">
            <tapa.tfu.pdsch.dat.req  use="9" lcId="4" chkSdu="TRUE" 
               isRetx="TRUE" retxUse="5" validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.dat.req>
      </tapa.expset> 

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2" />
      </tapa.send>

      #3 DATA --->1(Retx): Send Hq Ind at (5,4) for UL Subframe (5,3)
      <tapa.send>
         <tapa.tfu.hq.ind hqInds="1">
            <tapa.tfu.hq isAckLst="FALSE"/>
         </tapa.tfu.hq.ind>
      </tapa.send> 

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2" />
      </tapa.send>

      # DATA --->2(Retx): expect Recp Req at (5,6)
      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="1">
            <tapa.tfu.hq.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect> 

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1" />
      </tapa.send>

      # DATA --->1 Retx at (5,7) for DL SF (5,9)
      <tapa.expset>
         <tapa.tfu.cntrl.req expCntrlReq="1">
            <tapa.tfu.pdcch.cntrl.req saveTo="9"  validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.cntrl.req>
         <tapa.tfu.dat.req datReqs="1">
            <tapa.tfu.pdsch.dat.req  use="9" lcId="4" chkSdu="TRUE" 
               isRetx="TRUE" retxUse="5" validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.dat.req>
      </tapa.expset>    

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2" />
      </tapa.send>

      #4 DATA --->2(Retx): Send Hq Ind at (5,9) for UL Subframe (5,8)
      <tapa.send>
         <tapa.tfu.hq.ind hqInds="1">
            <tapa.tfu.hq isAckLst="FALSE"/>
         </tapa.tfu.hq.ind>
      </tapa.send>  

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2" />
      </tapa.send>

      # DATA --->1(Retx): expect Recp Req at (6,1)
      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="1">
            <tapa.tfu.hq.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>  

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1" />
      </tapa.send>

      # DATA --->2 Retx at (6,2) for DL SF (6,4)
      <tapa.expset>
         <tapa.tfu.cntrl.req expCntrlReq="1">
            <tapa.tfu.pdcch.cntrl.req saveTo="9" validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.cntrl.req>
         <tapa.tfu.dat.req datReqs="1">
            <tapa.tfu.pdsch.dat.req  use="9" lcId="4" chkSdu="TRUE" 
               isRetx="TRUE" retxUse="5" validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.dat.req>
      </tapa.expset>     

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2" />
      </tapa.send>

      #5 DATA --->1(Retx): Send Hq Ind at (6,4) for UL Subframe (6,3)
      <tapa.send>
         <tapa.tfu.hq.ind hqInds="1">
            <tapa.tfu.hq  isAckLst="FALSE"/>
         </tapa.tfu.hq.ind>
      </tapa.send> 

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2" />
      </tapa.send>

      # DATA --->2(Retx): expect Recp Req at (6,6)
      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="1">
            <tapa.tfu.hq.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>  

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1" />
      </tapa.send>

      # DATA --->1 Retx at (6,7) for DL SF (6,9)
      <tapa.expset>
         <tapa.tfu.cntrl.req expCntrlReq="1">
            <tapa.tfu.pdcch.cntrl.req saveTo="9"  validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.cntrl.req>
         <tapa.tfu.dat.req datReqs="1">
            <tapa.tfu.pdsch.dat.req  use="9" lcId="4" chkSdu="TRUE" 
               isRetx="TRUE" retxUse="5" validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.dat.req>
      </tapa.expset>     

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2" />
      </tapa.send>

      #6 DATA --->2(Retx): Send Hq Ind at (6,9) for UL Subframe (6,8)
      <tapa.send>
         <tapa.tfu.hq.ind hqInds="1">
            <tapa.tfu.hq  isAckLst="FALSE"/>
         </tapa.tfu.hq.ind>
      </tapa.send> 

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2" />
      </tapa.send>

      # DATA --->1(Retx): expect Recp Req at (7,1)
      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="1">
            <tapa.tfu.hq.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>  

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1" />
      </tapa.send>

      # DATA --->2 Retx at (7,2) for DL SF (7,4)
      <tapa.expset>
         <tapa.tfu.cntrl.req expCntrlReq="1">
            <tapa.tfu.pdcch.cntrl.req saveTo="9"  validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.cntrl.req>
         <tapa.tfu.dat.req datReqs="1">
            <tapa.tfu.pdsch.dat.req  use="9" lcId="4" chkSdu="TRUE" 
               isRetx="TRUE" retxUse="5" validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.dat.req>
      </tapa.expset>     

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2" />
      </tapa.send>

      #7 DATA --->1(Retx): Send Hq Ind at (7,4) for UL Subframe (7,3)
      <tapa.send>
         <tapa.tfu.hq.ind hqInds="1">
            <tapa.tfu.hq  isAckLst="FALSE"/>
         </tapa.tfu.hq.ind>
      </tapa.send>  

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2" />
      </tapa.send>

      # DATA --->1(Retx): expect Recp Req at (7,6)
      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="1">
            <tapa.tfu.hq.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>  

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1" />
      </tapa.send>

      # DATA --->2 Retx at (7,7) for DL SF (7,9)
      <tapa.expset>
         <tapa.tfu.cntrl.req expCntrlReq="1">
            <tapa.tfu.pdcch.cntrl.req saveTo="9"  validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.cntrl.req>
         <tapa.tfu.dat.req datReqs="1">
            <tapa.tfu.pdsch.dat.req  use="9" lcId="4" chkSdu="TRUE" 
               isRetx="TRUE" retxUse="5" validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.dat.req>
      </tapa.expset>     

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2"/>
      </tapa.send>

      #8 DATA --->1(Retx): Send Hq Ind at (7,9) for UL Subframe (7,8)
      <tapa.send>
         <tapa.tfu.hq.ind hqInds="1">
            <tapa.tfu.hq  isAckLst="FALSE"/>
         </tapa.tfu.hq.ind>
      </tapa.send>   

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2" />
      </tapa.send>

      # DATA --->2(Retx): expect Recp Req at (8,1)
      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="1">
            <tapa.tfu.hq.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>  

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1" />
      </tapa.send>

      # DATA --->2 Retx at (8,2) for DL SF (8,4)
      <tapa.expset>
         <tapa.tfu.cntrl.req expCntrlReq="1">
            <tapa.tfu.pdcch.cntrl.req saveTo="9"  validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.cntrl.req>
         <tapa.tfu.dat.req datReqs="1">
            <tapa.tfu.pdsch.dat.req  use="9" lcId="4" chkSdu="TRUE" 
               isRetx="TRUE" retxUse="5" validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.dat.req>
      </tapa.expset>     

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2"/>
      </tapa.send>

      #9 DATA --->1(Retx): Send Hq Ind at (8,4) for UL Subframe (8,3)
      <tapa.send>
         <tapa.tfu.hq.ind hqInds="1">
            <tapa.tfu.hq  isAckLst="TRUE"/>
         </tapa.tfu.hq.ind>
      </tapa.send>    

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>  

      # Expect DCI format 0
      <tapa.expect>
         <tapa.tfu.cntrl.req expCntrlReq="1">
            <tapa.tfu.pdcch.cntrl.req saveTo="1" isUlGrant="TRUE" 
                vldtGrant="TRUE" vldtTx="TRUE" cqiReq="1"/>
         </tapa.tfu.cntrl.req>
      </tapa.expect>   

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1" />
      </tapa.send>

      # DATA --->2(Retx): expect Recp Req at (8,6)
      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="1">
            <tapa.tfu.hq.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>  

      <tapa.send>
         <tapa.tfu.tti.ind numTti="3"/>
      </tapa.send>

      #10 DATA --->1(Retx): Send Hq Ind at (8,9) for UL Subframe (8,8)
      <tapa.send>
         <tapa.tfu.hq.ind hqInds="1">
            <tapa.tfu.hq  isAckLst="TRUE"/>
         </tapa.tfu.hq.ind>
      </tapa.send>   

   </tapa.steps>
</tapa.command> 

#
#
#       Command: tapa.rg.dlfs.aprdcqiTrgMultiCell
#
#       Desc:    Commands to LTEMAC to Initialize CELL
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.dlfs.aprdcqiTrgMultiCell">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to Trigger Aperiodic CQI
      </tapa.desc>

      <tapa.longdesc>
         "Commands to Trigger Aperiodic CQI based on the 
         triggering criteria"
      </tapa.longdesc>

   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>

      <tapa.send>
         # Configure a GBR dedicated logical channel (DTCH) for the UE1
         <tapa.crg.cfgreq.cfg.lch ueId="0" lcId="5" lcgId="0" dir="3" lcType="4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm/>
      </tapa.expect>

	  # Configure a GBR dedicated logical channel (DTCH) for the created UE with
      # QCI = 1 for UE1
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="0" lcId="5" dir="1" lcType="4"
            dlQci="1" instId="5" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expset>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expset>

      #Steps for BO Updation
      #Send BO for UE1 on instance 0
      <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="0" cellId="3"  ueId="0" lcId="5" bo="50"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

	  <tapa.expect>
         <tapa.rgu.dstaind instId="0" ueId="0" cellId="3" numLchTb1="1" lchTb1Data="5" valdtTrue="1" />
      </tapa.expect>

      <tapa.send>
         # Send DDatReq for 1st Ue on inst 0
          <tapa.rgu.ddatreq  instId="0" cellId="3" ueId="0" numLchTb1="1" lchTb1Data="5"/>
      </tapa.send>


      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expset>
      	<tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="0">
      		<tapa.tfu.pdcch.cntrl.req cellId="3" ueId="0" saveTo="0"/>
     	</tapa.tfu.cntrl.req>
      
        <tapa.tfu.dat.req macInstId="0" spId="0">
      		<tapa.tfu.pdsch.dat.req ueId="0" use="0" validate="TRUE"/>
      	</tapa.tfu.dat.req>
      </tapa.expset>      
	  
	  <tapa.repeat.start repeatCount="3"/>
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

	  <tapa.expset>
	    <tapa.tfu.recp.req schInstId="5" spId="0" ueId="0" >
               <tapa.tfu.hq.recp.req/>
        </tapa.tfu.recp.req>
      </tapa.expset>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.hq.ind hqInds="1" cellId="3" suId="0" schInstId="5">
             <tapa.tfu.hq ueId="0" isAck="FALSE"/>
         </tapa.tfu.hq.ind>   
      </tapa.send>

	  <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="2" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

	  <tapa.expset>
      	<tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="0">
      		<tapa.tfu.pdcch.cntrl.req cellId="3" ueId="0" saveTo="0"/>
     	</tapa.tfu.cntrl.req>
      
        <tapa.tfu.dat.req macInstId="0" spId="0">
      		<tapa.tfu.pdsch.dat.req ueId="0" validate="TRUE" isRetx="TRUE" retxUse="0"/>
      	</tapa.tfu.dat.req>
      </tapa.expset>
	  <tapa.repeat.end/>

	  <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

	  <tapa.expset>
	    <tapa.tfu.recp.req schInstId="5" spId="0" ueId="0" >
               <tapa.tfu.hq.recp.req/>
        </tapa.tfu.recp.req>
      </tapa.expset>

	  # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.hq.ind hqInds="1" cellId="3" suId="0" schInstId="5">
             <tapa.tfu.hq ueId="0" isAck="FALSE"/>
         </tapa.tfu.hq.ind>   
      </tapa.send>

#################################################
#Steps for BO Updation
      #Send BO for UE1 on instance 0
      <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="0" cellId="3"  ueId="0" lcId="5" bo="50"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

	  <tapa.expect>
         <tapa.rgu.dstaind instId="0" ueId="0" cellId="3" numLchTb1="1" lchTb1Data="5" valdtTrue="1" />
      </tapa.expect>

      <tapa.send>
         # Send DDatReq for 1st Ue on inst 0
          <tapa.rgu.ddatreq  instId="0" cellId="3" ueId="0" numLchTb1="1" lchTb1Data="5"/>
      </tapa.send>


      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expset>
      	<tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="0">
      		<tapa.tfu.pdcch.cntrl.req cellId="3" ueId="0" saveTo="0"/>
     	</tapa.tfu.cntrl.req>
      
        <tapa.tfu.dat.req macInstId="0" spId="0">
      		<tapa.tfu.pdsch.dat.req ueId="0" use="0" validate="TRUE"/>
      	</tapa.tfu.dat.req>
      </tapa.expset>      
	  
	  <tapa.repeat.start repeatCount="3"/>
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

	  <tapa.expset>
	    <tapa.tfu.recp.req schInstId="5" spId="0" ueId="0" >
               <tapa.tfu.hq.recp.req/>
        </tapa.tfu.recp.req>
      </tapa.expset>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.hq.ind hqInds="1" cellId="3" suId="0" schInstId="5">
             <tapa.tfu.hq ueId="0" isAck="FALSE"/>
         </tapa.tfu.hq.ind>   
      </tapa.send>

	  <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="2" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

	  <tapa.expset>
      	<tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="0">
      		<tapa.tfu.pdcch.cntrl.req cellId="3" ueId="0" saveTo="0"/>
     	</tapa.tfu.cntrl.req>
      
        <tapa.tfu.dat.req macInstId="0" spId="0">
      		<tapa.tfu.pdsch.dat.req ueId="0" validate="TRUE" isRetx="TRUE" retxUse="0"/>
      	</tapa.tfu.dat.req>
      </tapa.expset>
	  <tapa.repeat.end/>

	  <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

	  <tapa.expset>
	    <tapa.tfu.recp.req schInstId="5" spId="0" ueId="0" >
               <tapa.tfu.hq.recp.req/>
        </tapa.tfu.recp.req>
      </tapa.expset>

	  # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.hq.ind hqInds="1" cellId="3" suId="0" schInstId="5">
             <tapa.tfu.hq ueId="0" isAck="FALSE"/>
         </tapa.tfu.hq.ind>   
      </tapa.send>

	  <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="0" cellId="3"  ueId="0" lcId="5" bo="50"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

	  <tapa.expect>
         <tapa.rgu.dstaind instId="0" ueId="0" cellId="3" numLchTb1="1" lchTb1Data="5" valdtTrue="1" />
      </tapa.expect>

      <tapa.send>
         # Send DDatReq for 1st Ue on inst 0
          <tapa.rgu.ddatreq  instId="0" cellId="3" ueId="0" numLchTb1="1" lchTb1Data="5"/>
      </tapa.send>


      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expset>
      	<tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="0">
      		<tapa.tfu.pdcch.cntrl.req cellId="3" ueId="0" saveTo="0"/>
     	</tapa.tfu.cntrl.req>
      
        <tapa.tfu.dat.req macInstId="0" spId="0">
      		<tapa.tfu.pdsch.dat.req ueId="0" use="0" validate="TRUE"/>
      	</tapa.tfu.dat.req>
      </tapa.expset>      
	  
	  <tapa.repeat.start repeatCount="3"/>
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

	  <tapa.expset>
	    <tapa.tfu.recp.req schInstId="5" spId="0" ueId="0" >
               <tapa.tfu.hq.recp.req/>
        </tapa.tfu.recp.req>
      </tapa.expset>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.hq.ind hqInds="1" cellId="3" suId="0" schInstId="5">
             <tapa.tfu.hq ueId="0" isAck="TRUE"/>
         </tapa.tfu.hq.ind>   
      </tapa.send>

	  <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

	  # Expect DCI format 0 for ACQI
      <tapa.expect>
         <tapa.tfu.cntrl.req expCntrlReq="1" spId="0">
            <tapa.tfu.pdcch.cntrl.req saveTo="1" isUlGrant="TRUE" 
                vldtGrant="TRUE" vldtTx="TRUE" cqiReq="1" numCqiBit="1"/>
         </tapa.tfu.cntrl.req>
      </tapa.expect>

	  <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

	  <tapa.expset>
         <tapa.tfu.recp.req spId="0" ueId="0">
            <tapa.tfu.dlcqi.recp.req />
         </tapa.tfu.recp.req>
      </tapa.expset>

   </tapa.steps>
</tapa.command> 


#
#
#       Command: tapa.rg.dlfs.aprdcqiTrg.puschdata
#
#       Desc:    Commands to LTEMAC to Initialize CELL
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.dlfs.aprdcqiTrg.puschdata">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to Trigger Aperiodic CQI
      </tapa.desc>

      <tapa.longdesc>
         "Commands to Trigger Aperiodic CQI based on the 
         triggering criteria"
      </tapa.longdesc>

   </tapa.doc>

   # Test Steps subsection
   <tapa.steps> 

      # Configure bi-directional DCCH for default UE
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      # Expect configuration confirm after the TTI
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      # Configure bi-directional DTCH for default UE
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch lcId="4" lcgId="0" dir="3" lcType="4" />
      </tapa.send>

      # Expect configuration confirm after the TTI
      <tapa.expect>
         <tapa.crg.cfgcfm status="0"/>
      </tapa.expect>

      <!--- on RGR interface -->
      # Configure bi-directional DCCH for default UE
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch lcId="1" dir="1" lcType="5" instId="5"/>
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # Expect configuration confirm
      <tapa.expect>
         <tapa.rgr.cfgCfm status="0"/>
      </tapa.expect>

      # Configure UL LCG on RGR for UE
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lcg lcgId="0" instId="5"/>
      </tapa.send>

      # Configure bi-directional DTCH for default UE
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch lcId="4" dir="1" lcType="4" instId="5"/>
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      #Expect configuration confirm
      <tapa.expect>
         <tapa.rgr.cfgCfm status="0" />
      </tapa.expect>   


      # DATA --->1  
      <tapa.send>
         # Send BO for the created logical channel on RGU.
         <tapa.rgu.dstarsp lcId="4" lcType="4" bo="50"/>
      </tapa.send>

      <tapa.send>
         # Send a Tti to get the transmission scheduled.
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      #Expect configuration confirm
      <tapa.expect>
         <tapa.rgr.cfgCfm status="0" />
      </tapa.expect>  

      # DATA --->1 
      <tapa.expect>
         # Expect staInd from MAC to RLC
         <tapa.rgu.dstaind lchTb1Data="4" saveTo="2"/>
      </tapa.expect>

      <tapa.send>
         # Send data with size equal to the allocated size on RGU.
         <tapa.rgu.ddatreq lchTb1Data="4" lcType="5"/>
      </tapa.send>

      # DATA --->2  
      <tapa.send>
         # Send BO for the created logical channel on RGU.
         <tapa.rgu.dstarsp lcId="4" lcType="4" bo="50"/>
      </tapa.send>

      <tapa.send>
         # Send 1 Tti to get the MAC PDU at PHY.
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # DATA --->2 
      <tapa.expect>
         # Expect staInd from MAC to RLC
         <tapa.rgu.dstaind lchTb1Data="4" saveTo="2"/>
      </tapa.expect>

      <tapa.send>
         # Send data with size equal to the allocated size on RGU.
         <tapa.rgu.ddatreq lchTb1Data="2" lcType="5"/>
      </tapa.send>  

      # DATA --->1 at (3,7) for DL SF (3,9)
      <tapa.expset>
         <tapa.tfu.cntrl.req expCntrlReq="1">
            <tapa.tfu.pdcch.cntrl.req saveTo="9" vldDciFrmt="TRUE" isFormat2a="TRUE" transMode="TFU_UE_TM_3"/>
         </tapa.tfu.cntrl.req>
         <tapa.tfu.dat.req datReqs="1">
            <tapa.tfu.pdsch.dat.req  use="9" lcId="4" chkSdu="TRUE"/>
         </tapa.tfu.dat.req>
      </tapa.expset>

      <tapa.send>
         # Send 1 Tti to get the MAC PDU at PHY.
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # DATA --->2 at (3,8) for DL SF (4,0)
      <tapa.expset>
         <tapa.tfu.cntrl.req expCntrlReq="1">
            <tapa.tfu.pdcch.cntrl.req saveTo="9" vldDciFrmt="TRUE" isFormat2a="TRUE" transMode="TFU_UE_TM_3"/>
         </tapa.tfu.cntrl.req>
         <tapa.tfu.dat.req datReqs="1">
            <tapa.tfu.pdsch.dat.req  use="9" lcId="4" chkSdu="TRUE"/>
         </tapa.tfu.dat.req>
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="3"/>
      </tapa.send>

      # DATA --->1: expect Recp Req at (4,1)
      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="1">
            <tapa.tfu.hq.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="3" />
      </tapa.send>

      #1 DATA --->1: Send Hq Ind at (4,4) for UL Subframe (4,3)
      <tapa.send>
         <tapa.tfu.hq.ind hqInds="1">
            <tapa.tfu.hq  isAckLst="FALSE"/>
         </tapa.tfu.hq.ind>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1" />
      </tapa.send>

      # DATA --->2: expect Recp Req at (4,5)
      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="1">
            <tapa.tfu.hq.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect> 

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2" />
      </tapa.send>

      # DATA --->1 Retx at (4,7) for DL SF (4,9)
      <tapa.expset>
         <tapa.tfu.cntrl.req expCntrlReq="1">
            <tapa.tfu.pdcch.cntrl.req saveTo="9"  validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.cntrl.req>
         <tapa.tfu.dat.req datReqs="1">
            <tapa.tfu.pdsch.dat.req  use="9" lcId="4" chkSdu="TRUE" 
               isRetx="TRUE" retxUse="5" validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.dat.req>
      </tapa.expset>   

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1" />
      </tapa.send>

      #2 DATA --->2: Send Hq Ind at (4,8) for UL Subframe (4,7)
      <tapa.send>
         <tapa.tfu.hq.ind hqInds="1">
            <tapa.tfu.hq isAckLst="FALSE"/>
         </tapa.tfu.hq.ind>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="3"/>
      </tapa.send>

      # DATA --->1(Retx): expect Recp Req at (5,1)
      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="1">
            <tapa.tfu.hq.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # DATA --->2 Retx at (5,2) for DL SF (5,4)
      <tapa.expset>
         <tapa.tfu.cntrl.req expCntrlReq="1">
            <tapa.tfu.pdcch.cntrl.req saveTo="9"  validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.cntrl.req>
         <tapa.tfu.dat.req datReqs="1">
            <tapa.tfu.pdsch.dat.req  use="9" lcId="4" chkSdu="TRUE" 
               isRetx="TRUE" retxUse="5" validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.dat.req>
      </tapa.expset> 

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2" />
      </tapa.send>

      #3 DATA --->1(Retx): Send Hq Ind at (5,4) for UL Subframe (5,3)
      <tapa.send>
         <tapa.tfu.hq.ind hqInds="1">
            <tapa.tfu.hq isAckLst="FALSE"/>
         </tapa.tfu.hq.ind>
      </tapa.send> 

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2" />
      </tapa.send>

      # DATA --->2(Retx): expect Recp Req at (5,6)
      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="1">
            <tapa.tfu.hq.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect> 

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1" />
      </tapa.send>

      # DATA --->1 Retx at (5,7) for DL SF (5,9)
      <tapa.expset>
         <tapa.tfu.cntrl.req expCntrlReq="1">
            <tapa.tfu.pdcch.cntrl.req saveTo="9"  validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.cntrl.req>
         <tapa.tfu.dat.req datReqs="1">
            <tapa.tfu.pdsch.dat.req  use="9" lcId="4" chkSdu="TRUE" 
               isRetx="TRUE" retxUse="5" validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.dat.req>
      </tapa.expset>    

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2" />
      </tapa.send>

      #4 DATA --->2(Retx): Send Hq Ind at (5,9) for UL Subframe (5,8)
      <tapa.send>
         <tapa.tfu.hq.ind hqInds="1">
            <tapa.tfu.hq isAckLst="FALSE"/>
         </tapa.tfu.hq.ind>
      </tapa.send>  

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2" />
      </tapa.send>

      # DATA --->1(Retx): expect Recp Req at (6,1)
      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="1">
            <tapa.tfu.hq.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>  

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1" />
      </tapa.send>

      # DATA --->2 Retx at (6,2) for DL SF (6,4)
      <tapa.expset>
         <tapa.tfu.cntrl.req expCntrlReq="1">
            <tapa.tfu.pdcch.cntrl.req saveTo="9" validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.cntrl.req>
         <tapa.tfu.dat.req datReqs="1">
            <tapa.tfu.pdsch.dat.req  use="9" lcId="4" chkSdu="TRUE" 
               isRetx="TRUE" retxUse="5" validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.dat.req>
      </tapa.expset>     

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2" />
      </tapa.send>

      #5 DATA --->1(Retx): Send Hq Ind at (6,4) for UL Subframe (6,3)
      <tapa.send>
         <tapa.tfu.hq.ind hqInds="1">
            <tapa.tfu.hq  isAckLst="FALSE"/>
         </tapa.tfu.hq.ind>
      </tapa.send> 

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2" />
      </tapa.send>

      # DATA --->2(Retx): expect Recp Req at (6,6)
      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="1">
            <tapa.tfu.hq.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>  

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1" />
      </tapa.send>

      # DATA --->1 Retx at (6,7) for DL SF (6,9)
      <tapa.expset>
         <tapa.tfu.cntrl.req expCntrlReq="1">
            <tapa.tfu.pdcch.cntrl.req saveTo="9"  validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.cntrl.req>
         <tapa.tfu.dat.req datReqs="1">
            <tapa.tfu.pdsch.dat.req  use="9" lcId="4" chkSdu="TRUE" 
               isRetx="TRUE" retxUse="5" validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.dat.req>
      </tapa.expset>     

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2" />
      </tapa.send>

      #6 DATA --->2(Retx): Send Hq Ind at (6,9) for UL Subframe (6,8)
      <tapa.send>
         <tapa.tfu.hq.ind hqInds="1">
            <tapa.tfu.hq  isAckLst="FALSE"/>
         </tapa.tfu.hq.ind>
      </tapa.send> 

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2" />
      </tapa.send>

      # DATA --->1(Retx): expect Recp Req at (7,1)
      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="1">
            <tapa.tfu.hq.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>  

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1" />
      </tapa.send>

      # DATA --->2 Retx at (7,2) for DL SF (7,4)
      <tapa.expset>
         <tapa.tfu.cntrl.req expCntrlReq="1">
            <tapa.tfu.pdcch.cntrl.req saveTo="9"  validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.cntrl.req>
         <tapa.tfu.dat.req datReqs="1">
            <tapa.tfu.pdsch.dat.req  use="9" lcId="4" chkSdu="TRUE" 
               isRetx="TRUE" retxUse="5" validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.dat.req>
      </tapa.expset>     

      # Send SR Indication for UE
      <tapa.send>
         <tapa.tfu.sr.ind>
            <tapa.tfu.sr />
         </tapa.tfu.sr.ind>
      </tapa.send> 

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1" />
      </tapa.send>

       <tapa.expset>
        <tapa.tfu.cntrl.req expCntrlReq="1">
           <tapa.tfu.pdcch.cntrl.req  isUlGrant="TRUE" vldtGrant="TRUE"
              vldtTx="TRUE" vldtDai="TRUE" dai="1"/>
        </tapa.tfu.cntrl.req>
      </tapa.expset> 

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1" />
      </tapa.send>

      #7 DATA --->1(Retx): Send Hq Ind at (7,4) for UL Subframe (7,3)
      <tapa.send>
         <tapa.tfu.hq.ind hqInds="1">
            <tapa.tfu.hq  isAckLst="FALSE"/>
         </tapa.tfu.hq.ind>
      </tapa.send>  

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2" />
      </tapa.send>

      # DATA --->1(Retx): expect Recp Req at (7,6)
      # Expect data reception request for UE
      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="1">
            <tapa.tfu.pusch.recp.req />
         </tapa.tfu.recp.req>
      </tapa.expect> 

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1" />
      </tapa.send>

      # DATA --->1 Retx at (7,7) for DL SF (7,9)
      <tapa.expset>
         <tapa.tfu.cntrl.req expCntrlReq="1">
            <tapa.tfu.pdcch.cntrl.req saveTo="9"  validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.cntrl.req>
         <tapa.tfu.dat.req datReqs="1">
            <tapa.tfu.pdsch.dat.req  use="9" lcId="4" chkSdu="TRUE" 
               isRetx="TRUE" retxUse="5" validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.dat.req>
      </tapa.expset>     

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2"/>
      </tapa.send>

      #8 DATA --->1(Retx): Send Hq Ind at (7,9) for UL Subframe (7,8)
      <tapa.send>
         <tapa.tfu.hq.ind hqInds="1">
            <tapa.tfu.hq  isAckLst="FALSE"/>
         </tapa.tfu.hq.ind>
      </tapa.send>   

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1" />
      </tapa.send>

      #Send CRC for Msg for UE
      <tapa.send>
         <tapa.tfu.crc.ind>
            <tapa.tfu.crc isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>   

      # DATA --->2(Retx): expect Recp Req at (8,1)
      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="1">
            <tapa.tfu.hq.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>  

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1" />
      </tapa.send>

      # DATA --->2 Retx at (8,2) for DL SF (8,4)
      <tapa.expset>
         <tapa.tfu.cntrl.req expCntrlReq="1">
            <tapa.tfu.pdcch.cntrl.req saveTo="9"  validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.cntrl.req>
         <tapa.tfu.dat.req datReqs="1">
            <tapa.tfu.pdsch.dat.req  use="9" lcId="4" chkSdu="TRUE" 
               isRetx="TRUE" retxUse="5" validate="TRUE" vldtRetx="TRUE"/>
         </tapa.tfu.dat.req>
      </tapa.expset>     

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # Send BSR for UE
      <tapa.send>
         <tapa.tfu.dat.ind datInds="1">
            <tapa.tfu.dat lcgId="0" addShortBsr="TRUE" bsr="19" />
         </tapa.tfu.dat.ind>
      </tapa.send>   

      # Expect PHICH for UE
      <tapa.expset>
         <tapa.tfu.cntrl.req expCntrlReq="1" spId="1">
            <tapa.tfu.phich.cntrl.req isAck="TRUE" />
         </tapa.tfu.cntrl.req>
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      #9 DATA --->1(Retx): Send Hq Ind at (8,4) for UL Subframe (8,3)
      <tapa.send>
         <tapa.tfu.hq.ind hqInds="1">
            <tapa.tfu.hq  isAckLst="TRUE"/>
         </tapa.tfu.hq.ind>
      </tapa.send>    

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>  

      # Expect DCI format 0
      <tapa.expect>
         <tapa.tfu.cntrl.req expCntrlReq="1">
            <tapa.tfu.pdcch.cntrl.req saveTo="1" isUlGrant="TRUE" 
                vldtGrant="TRUE" vldtTx="TRUE" cqiReq="1"/>
         </tapa.tfu.cntrl.req>
      </tapa.expect>   

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1" />
      </tapa.send>

      # DATA --->2(Retx): expect Recp Req at (8,6)
      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="1">
            <tapa.tfu.hq.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>  

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      #10 DATA --->1(Retx): Send Hq Ind at (8,9) for UL Subframe (8,8)
      <tapa.send>
         <tapa.tfu.hq.ind hqInds="1">
            <tapa.tfu.hq  isAckLst="TRUE"/>
         </tapa.tfu.hq.ind>
      </tapa.send>   

   </tapa.steps>
</tapa.command>  


#
#
#
#       Command: tapa.rg.2UeInit
#
#       Desc:    Commands to LTEMAC to Initialize UE
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.2UeInit">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize UE
      </tapa.desc>

      <tapa.longdesc>
         "This command will finish complete RA process and does the UE
         Configuration"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
         # Send RaReqInd for one rapId 
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.rareq.ind numRaRnti="2" suId="0">
            <tapa.tfu.rareq raRnti="10" numRapId="2" numRaReq="2" rapIds="1:2" timingAdvs="3:3" 
            tpcs="1:1" cqiPres="TRUE:TRUE" cqis="4:4"/>
         </tapa.tfu.rareq.ind>
      </tapa.send>

      # Ue starts expecting raResp after 3 subframes within the raResp window.
      # The number of subframes to wait for receiving the RA RSP is maximum of
      # RA RSP window and the scheduling delta RG_DL_DELTA (=3) minus the 
      # TFU_DELTA (=2) from the next TTI. This makes the number of TTIs 2 (3 - 2
      # + 1).
      <tapa.send>
         <tapa.tfu.tti.ind numTti="2"/>
      </tapa.send>
      
      # Expect RaResp for the rapId sent in RaReq
      <tapa.expset>
        <tapa.tfu.dat.req datReqs="1">
           <tapa.tfu.rarsp.req raRnti="10" rapIds="1:2"/>
        </tapa.tfu.dat.req>
        <tapa.tfu.cntrl.req numCntrlReq="1">
           <tapa.tfu.pdcch.cntrl.req/>
        </tapa.tfu.cntrl.req>
      </tapa.expset>

      # Counting the TTIs, RA RSP was received by PHY at sf = (0,2). PHY tranmits
      # the RA RSP in sf = (0, 4). UE will transmit the MSG3 at sf = (1, 0). We 
      # must receive data reception request at sf = (0, 8). Current TTI = (0, 2)
      # and hence we must send 6 TTIs.
      <tapa.send>
         <tapa.tfu.tti.ind numTti="6"/>
      </tapa.send>

      <tapa.expset>
         <tapa.tfu.recp.req numRntis="2">
            <tapa.tfu.msg3.recp.req ueId="0"/>
            <tapa.tfu.msg3.recp.req ueId="1"/>
         </tapa.tfu.recp.req>
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="3"/>
      </tapa.send>

      #Send CRC for Msg3
      <tapa.send>
         <tapa.tfu.crc.ind>
            <tapa.tfu.crc ueId="0" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="1" isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # Expect HARQ ACK in PHICH For MSG3
      <tapa.expect>
         <tapa.tfu.cntrl.req numCntrlReq="2" spId="1">
            <tapa.tfu.phich.cntrl.req ueId="0" isAck="TRUE"/>
            <tapa.tfu.phich.cntrl.req ueId="1" isAck="TRUE"/>
         </tapa.tfu.cntrl.req>
      </tapa.expect>

      # Send Message3 after receiving Message3 reception req.
      <tapa.send>
       <tapa.tfu.dat.ind datInds="2">
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="0"/>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="1"/>
       </tapa.tfu.dat.ind>      
      </tapa.send>   

      # Expect Message3 datReq on CCCH at RGU.
      <tapa.expset>
         <tapa.rgu.cdatind ueId="0" lcId="4"/>
         <tapa.rgu.cdatind ueId="1" lcId="4"/>
      </tapa.expset>

      # Send BO for Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="0"/>
      </tapa.send>

      # Send BO for Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="1"/>
      </tapa.send>

   <tapa.send>
      <tapa.tfu.tti.ind numTti="1"/>
   </tapa.send>

   # Expect staInd from MAC to RLC for Msg4 
   <tapa.expect>
      <tapa.rgu.cstaind lcId="4"/>
   </tapa.expect>
   
   # Expect staInd from MAC to RLC for Msg4 
   <tapa.expect>
      <tapa.rgu.cstaind lcId="4"/>
   </tapa.expect>
   
   #<tapa.rg.dbgInitAll/>

   # Send Msg4 on RGU. 
   <tapa.send>
      <tapa.rgu.cdatreq ueId="0" lcId="4" lcType="3" />
   </tapa.send>

   # Send Msg4 on RGU. 
   <tapa.send>
      <tapa.rgu.cdatreq ueId="1" lcId="4" lcType="3" />
   </tapa.send>

   #<tapa.rg.dbgDeInitAll/>
   
   <tapa.send>
      <tapa.tfu.tti.ind numTti="1"/>
   </tapa.send>

   # Expect Msg4 from MAC to PHY.
   <tapa.expset>
     <tapa.tfu.cntrl.req numCntrlReq="2">
        <tapa.tfu.pdcch.cntrl.req ueId="0" saveTo="1"/>
        <tapa.tfu.pdcch.cntrl.req ueId="1" saveTo="2"/>
     </tapa.tfu.cntrl.req>
   # Expect Msg4 from MAC to PHY.
     <tapa.tfu.dat.req datReqs="2">
        <tapa.tfu.pdsch.dat.req saveTo="3" use="1" ueId="0" chkCcchSh="TRUE"/>
        <tapa.tfu.pdsch.dat.req saveTo="4" use="2" ueId="1" chkCcchSh="TRUE"/>
     </tapa.tfu.dat.req>   
   </tapa.expset>

   <tapa.send>
      <tapa.tfu.tti.ind numTti="2" op="RG_ACC_PLUS" numTfuDelta="1"/>
   </tapa.send>
   
   <tapa.expset>
     <tapa.tfu.recp.req numRntis="4">
        <tapa.tfu.hq.recp.req ueId="0"/>
        <tapa.tfu.hq.recp.req ueId="1"/>
     </tapa.tfu.recp.req>   
   </tapa.expset>
   <tapa.send>
      <tapa.tfu.tti.ind numTti="2" />
   </tapa.send>

   # Send ACK as feedback for Msg4. 
   <tapa.send>
     <tapa.tfu.hq.ind hqInds="2">
        <tapa.tfu.hq ueId="0"/>
        <tapa.tfu.hq ueId="1"/>
     </tapa.tfu.hq.ind>   
   </tapa.send>

   #<tapa.rg.dbgInitAll/>
   # Send UE config request
   <tapa.send>
     <tapa.crg.cfgreq.cfg.ue />
   </tapa.send>

   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.crg.cfgcfm/>
   </tapa.expect>
   
   <tapa.send>
     <tapa.crg.cfgreq.cfg.ue ueId="1" />
   </tapa.send>

   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.crg.cfgcfm/>
   </tapa.expect>

   # Send UE config request
   <tapa.send>
     <tapa.rgr.cfgreq.cfg.ue instId="5" />
   </tapa.send>


   # Send TTI to apply the config
   <tapa.send>
      <tapa.tfu.tti.ind/>
   </tapa.send>

   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.rgr.cfgCfm/>
   </tapa.expect>
   
   <tapa.send>
     <tapa.rgr.cfgreq.cfg.ue ueId="1" instId="5" />
   </tapa.send>


   # Send TTI to apply the config
   <tapa.send>
      <tapa.tfu.tti.ind/>
   </tapa.send>

   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.rgr.cfgCfm instId="5"/>
   </tapa.expect>

   #<tapa.rg.dbgDeInitAll/>
   </tapa.steps>

</tapa.command>

#
#
#       Command: tapa.rg.2UeInitNoUeCfg.dlSched
#
#       Desc:    Commands to LTEMAC to Initialize UE
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.2UeInitNoUeCfg.dlSched">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize UE
      </tapa.desc>

      <tapa.longdesc>
         "This command will finish complete RA process and does the UE
         Configuration"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
         # Send RaReqInd for one rapId 
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.rareq.ind numRaRnti="1" suId="0">
            <tapa.tfu.rareq raRnti="9" numRapId="2" rapIds="1:2" timingAdvs="3:3"
               tpcs="1:1" cqiPres="TRUE:TRUE" cqis="4:4"/>
         </tapa.tfu.rareq.ind>
      </tapa.send>

      # Ue starts expecting raResp after 3 subframes within the raResp window.
      # The number of subframes to wait for receiving the RA RSP is maximum of
      # RA RSP window and the scheduling delta RG_DL_DELTA (=3) minus the 
      # TFU_DELTA (=2) from the next TTI. This makes the number of TTIs 2 (3 - 2
      # + 1).
      <tapa.send>
         <tapa.tfu.tti.ind numTti="2"/>
      </tapa.send>
      
      # Expect RaResp for the rapId sent in RaReq
      <tapa.expset>
        <tapa.tfu.dat.req datReqs="1">
           <tapa.tfu.rarsp.req raRnti="9" rapIds="1:2"/>
        </tapa.tfu.dat.req>
        <tapa.tfu.cntrl.req numCntrlReq="1" spId="1">
           <tapa.tfu.pdcch.cntrl.req/>
        </tapa.tfu.cntrl.req>
      </tapa.expset>

      # Counting the TTIs, RA RSP was received by PHY at sf = (0,2). PHY tranmits
      # the RA RSP in sf = (0, 4). UE will transmit the MSG3 at sf = (1, 0). We 
      # must receive data reception request at sf = (0, 8). Current TTI = (0, 2)
      # and hence we must send 6 TTIs.
      <tapa.send>
         <tapa.tfu.tti.ind numTti="6"/>
      </tapa.send>

      <tapa.expset>
         <tapa.tfu.recp.req numRntis="2">
            <tapa.tfu.msg3.recp.req ueId="0"/>
            <tapa.tfu.msg3.recp.req ueId="1"/>
         </tapa.tfu.recp.req>
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2"/>
      </tapa.send>
      
      # Send Message3 after receiving Message3 reception req.
      <tapa.send>
       <tapa.tfu.dat.ind datInds="2">
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="0"/>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="1"/>
       </tapa.tfu.dat.ind>      
      </tapa.send>

      # Expect Message3 datReq on CCCH at RGU.
      <tapa.expset>
         <tapa.rgu.cdatind ueId="0" lcId="4"/>
         <tapa.rgu.cdatind ueId="1" lcId="4"/>
      </tapa.expset>

      # Send BO for Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="0"/>
      </tapa.send>

      # Send BO for Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="1"/>
      </tapa.send>

   <tapa.send>
      <tapa.tfu.tti.ind numTti="1"/>
   </tapa.send>

   # Expect staInd from MAC to RLC for Msg4 
   <tapa.expect>
      <tapa.rgu.cstaind lcId="4"/>
   </tapa.expect>
   
   # Expect staInd from MAC to RLC for Msg4 
   <tapa.expect>
      <tapa.rgu.cstaind lcId="4"/>
   </tapa.expect>
   
   #<tapa.rg.dbgInitAll/>

   # Send Msg4 on RGU. 
   <tapa.send>
      <tapa.rgu.cdatreq ueId="0" lcId="4" lcType="3" />
   </tapa.send>

   # Send Msg4 on RGU. 
   <tapa.send>
      <tapa.rgu.cdatreq ueId="1" lcId="4" lcType="3" />
   </tapa.send>

   #<tapa.rg.dbgDeInitAll/>
   
   <tapa.send>
      <tapa.tfu.tti.ind numTti="1"/>
   </tapa.send>

   # Expect Msg4 from MAC to PHY.
   <tapa.expset>
     <tapa.tfu.cntrl.req numCntrlReq="2">
        <tapa.tfu.pdcch.cntrl.req ueId="0" saveTo="1"/>
        <tapa.tfu.pdcch.cntrl.req ueId="1" saveTo="1"/>
     </tapa.tfu.cntrl.req>
   # Expect Msg4 from MAC to PHY.
     <tapa.tfu.dat.req datReqs="2">
        <tapa.tfu.pdsch.dat.req saveTo="1" use="1" ueId="0" chkCcchSh="TRUE"/>
        <tapa.tfu.pdsch.dat.req saveTo="1" use="1" ueId="1" chkCcchSh="TRUE"/>
     </tapa.tfu.dat.req>   
   </tapa.expset>

   <tapa.send>
      <tapa.tfu.tti.ind numTti="2" op="RG_ACC_PLUS" numTfuDelta="1"/>
   </tapa.send>
   
   <tapa.expect>
     <tapa.tfu.recp.req numRntis="4">
        <tapa.tfu.hq.recp.req ueId="0"/>
        <tapa.tfu.pusch.recp.req ueId="0"/>
        <tapa.tfu.hq.recp.req ueId="1"/>
        <tapa.tfu.pusch.recp.req ueId="1"/>
     </tapa.tfu.recp.req>   
   </tapa.expect>
   <tapa.send>
      <tapa.tfu.tti.ind numTti="2" />
   </tapa.send>

   # Send ACK as feedback for Msg4. 
   <tapa.send>
     <tapa.tfu.hq.ind hqInds="2">
        <tapa.tfu.hq ueId="0"/>
        <tapa.tfu.hq ueId="1"/>
     </tapa.tfu.hq.ind>   
   </tapa.send>

   #<tapa.rg.dbgInitAll/>

   #<tapa.rg.dbgDeInitAll/>
   </tapa.steps>

</tapa.command>

#
#
#       Command: tapa.rg.dbgInitAll
#
#       Desc:    Enable All Debug Levels for LTEMAC
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.dbgInitAll">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Enable All Debug Levels for LTEMAC
      </tapa.desc>

      <tapa.longdesc>
         "Sending Control request to enable param priniting, error priniting and
         general info printing to LTEMAC"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      
      #Send Control Request to Enable Error Debugs
      <tapa.send>
         <tapa.lrg.cntrlreq action="AENA" subAction="SADBG" elmntType="STGEN" dbgMask="LLX_DBGMASK_FLOW"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm/>
      </tapa.expect>
            
      #Send Control Request to Enable Param Debugs
      <tapa.send>
         <tapa.lrg.cntrlreq action="AENA" subAction="SADBG" elmntType="STGEN"
            dbgMask="LLX_DBGMASK_DBG"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm/>
      </tapa.expect>

      #Send Control Request to Enable Param Debugs
      <tapa.send>
         <tapa.lrg.cntrlreq action="AENA" subAction="SADBG" elmntType="STGEN"
            dbgMask="LLX_DBGMASK_MSG"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm/>
      </tapa.expect>

      #Send Control Request to Enable Error Debugs
      <tapa.send>
         <tapa.lrg.schcntrlreq action="AENA" subAction="SADBG" elmntType="STGEN" dbgMask="LLX_DBGMASK_FLOW"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm/>
      </tapa.expect>
            
      #Send Control Request to Enable Param Debugs
      <tapa.send>
         <tapa.lrg.schcntrlreq action="AENA" subAction="SADBG" elmntType="STGEN"
            dbgMask="LLX_DBGMASK_DBG"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm/>
      </tapa.expect>

      #Send Control Request to Enable Param Debugs
      <tapa.send>
         <tapa.lrg.schcntrlreq action="AENA" subAction="SADBG" elmntType="STGEN"
            dbgMask="LLX_DBGMASK_MSG"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm/>
      </tapa.expect>

   </tapa.steps>
</tapa.command>

#
#
#       Command: tapa.rg.dbgInitErr
#
#       Desc:    Enable Error Debug printing for LTEMAC
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.dbgInitErr">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Enable Error Debug printing for LTEMAC"
      </tapa.desc>

      <tapa.longdesc>
         "Sending Control request to enable Error priniting to LTEMAC"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      
      #Send Control Request to Enable Error Debugs
      <tapa.send>
         <tapa.lrg.cntrlreq action="AENA" subAction="SADBG" elmntType="STGEN" dbgMask="LLX_DBGMASK_FLOW"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm/>
      </tapa.expect>

      #Send Control Request to Enable Error Debugs
      <tapa.send>
         <tapa.lrg.schcntrlreq action="AENA" subAction="SADBG" elmntType="STGEN" dbgMask="LLX_DBGMASK_FLOW"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm/>
      </tapa.expect>
      
   </tapa.steps>
</tapa.command>

#
#
#       Command: tapa.rg.dbgInitParm
#
#       Desc:    Enable Parameter Debug printing for LTEMAC
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.dbgInitParm">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Enable Parameter Debug printing for LTEMAC"
      </tapa.desc>

      <tapa.longdesc>
         "Sending Control request to enable parameter priniting to LTEMAC"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      
      #Send Control Request to Enable Param Debugs
      <tapa.send>
         <tapa.lrg.cntrlreq action="AENA" subAction="SADBG" elmntType="STGEN"
            dbgMask="LLX_DBGMASK_DBG"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm/>
      </tapa.expect>

      #Send Control Request to Enable Param Debugs
      <tapa.send>
         <tapa.lrg.schcntrlreq action="AENA" subAction="SADBG" elmntType="STGEN"
            dbgMask="LLX_DBGMASK_DBG"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm/>
      </tapa.expect>

   </tapa.steps>
</tapa.command>

#
#
#       Command: tapa.rg.dbgInitInfo
#
#       Desc:    Enable Information Debug printing for LTEMAC
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.dbgInitInfo">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Enable Information Debug printing for LTEMAC"
      </tapa.desc>

      <tapa.longdesc>
         "Sending Control request to enable information  priniting to LTEMAC"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      #Send Control Request to Enable Param Debugs
      <tapa.send>
         <tapa.lrg.cntrlreq action="AENA" subAction="SADBG" elmntType="STGEN"
            dbgMask="LLX_DBGMASK_MSG"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm/>
      </tapa.expect>

      #Send Control Request to Enable Param Debugs
      <tapa.send>
         <tapa.lrg.schcntrlreq action="AENA" subAction="SADBG" elmntType="STGEN"
            dbgMask="LLX_DBGMASK_MSG"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm/>
      </tapa.expect>

   </tapa.steps>
</tapa.command>
#
#
#       Command: tapa.rg.dbgDeInitAll
#
#       Desc:    Disable All Debug Levels for LTEMAC
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.dbgDeInitAll">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Disable All Debug Levels for LTEMAC
      </tapa.desc>

      <tapa.longdesc>
         "Sending Control request to disable param priniting, error priniting and
         general info printing to LTEMAC"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      
      #Send Control Request to Disable Error Debugs
      <tapa.send>
         <tapa.lrg.cntrlreq action="ADISIMM" subAction="SADBG" elmntType="STGEN" dbgMask="LLX_DBGMASK_FLOW"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm/>
      </tapa.expect>
            
      #Send Control Request to Disable Param Debugs
      <tapa.send>
         <tapa.lrg.cntrlreq action="ADISIMM" subAction="SADBG" elmntType="STGEN"
            dbgMask="LLX_DBGMASK_DBG"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm/>
      </tapa.expect>

      #Send Control Request to Disable Param Debugs
      <tapa.send>
         <tapa.lrg.cntrlreq action="ADISIMM" subAction="SADBG" elmntType="STGEN"
            dbgMask="LLX_DBGMASK_MSG"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm/>
      </tapa.expect>


      #Send Control Request to Disable Error Debugs
      <tapa.send>
         <tapa.lrg.schcntrlreq action="ADISIMM" subAction="SADBG" elmntType="STGEN" dbgMask="LLX_DBGMASK_FLOW"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm/>
      </tapa.expect>
            
      #Send Control Request to Disable Param Debugs
      <tapa.send>
         <tapa.lrg.schcntrlreq action="ADISIMM" subAction="SADBG" elmntType="STGEN"
            dbgMask="LLX_DBGMASK_DBG"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm/>
      </tapa.expect>

      #Send Control Request to Disable Param Debugs
      <tapa.send>
         <tapa.lrg.schcntrlreq action="ADISIMM" subAction="SADBG" elmntType="STGEN"
            dbgMask="LLX_DBGMASK_MSG"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm/>
      </tapa.expect>
      
   </tapa.steps>
</tapa.command>

#
#
#       Command: tapa.rg.dbgDeInitErr
#
#       Desc:    Disable Error Debug printing for LTEMAC
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.dbgDeInitErr">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Disable Error Debug printing for LTEMAC"
      </tapa.desc>

      <tapa.longdesc>
         "Sending Control request to disable Error priniting to LTEMAC"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      
      #Send Control Request to Disable Error Debugs
      <tapa.send>
         <tapa.lrg.cntrlreq action="ADISIMM" subAction="SADBG" elmntType="STGEN" dbgMask="LLX_DBGMASK_FLOW"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm/>
      </tapa.expect>

      #Send Control Request to Disable Error Debugs
      <tapa.send>
         <tapa.lrg.schcntrlreq action="ADISIMM" subAction="SADBG" elmntType="STGEN" dbgMask="LLX_DBGMASK_FLOW"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm/>
      </tapa.expect>
      
   </tapa.steps>
</tapa.command>

#
#
#       Command: tapa.rg.dbgDeInitParm
#
#       Desc:    Disable Parameter Debug printing for LTEMAC
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.dbgDeInitParm">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Disable Parameter Debug printing for LTEMAC"
      </tapa.desc>

      <tapa.longdesc>
         "Sending Control request to disable parameter priniting to LTEMAC"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      
      #Send Control Request to Disable Param Debugs
      <tapa.send>
         <tapa.lrg.cntrlreq action="ADISIMM" subAction="SADBG" elmntType="STGEN"
            dbgMask="LLX_DBGMASK_DBG"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm/>
      </tapa.expect>

      #Send Control Request to Disable Param Debugs
      <tapa.send>
         <tapa.lrg.schcntrlreq action="ADISIMM" subAction="SADBG" elmntType="STGEN"
            dbgMask="LLX_DBGMASK_DBG"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm/>
      </tapa.expect>
      
   </tapa.steps>
</tapa.command>

#
#
#       Command: tapa.rg.dbgDeInitInfo
#
#       Desc:    Disable Information Debug printing for LTEMAC
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.dbgDeInitInfo">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Disable Information Debug printing for LTEMAC"
      </tapa.desc>

      <tapa.longdesc>
         "Sending Control request to disable information  priniting to LTEMAC"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      #Send Control Request to Disable Param Debugs
      <tapa.send>
         <tapa.lrg.cntrlreq action="ADISIMM" subAction="SADBG" elmntType="STGEN"
            dbgMask="LLX_DBGMASK_MSG"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm/>
      </tapa.expect>

      #Send Control Request to Disable Param Debugs
      <tapa.send>
         <tapa.lrg.schcntrlreq action="ADISIMM" subAction="SADBG" elmntType="STGEN"
            dbgMask="LLX_DBGMASK_MSG"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm/>
      </tapa.expect>
   </tapa.steps>
</tapa.command>


#
#
#       Command: tapa.rg.cellInit.trgCqi4
#
#       Desc:    Commands to LTEMAC to Initialize CELL
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.cellInit.trgCqi4">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize CELL
      </tapa.desc>

      <tapa.longdesc>
         "Binding RGR and CRG SAPS, Creatting CELL in CRG Interface, creating 
         common logical channels(BCCH/BCH, BCCH/DLSCH, PCCH, CCCH) and RGR
         CELL configuration for schedular related information"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      #Send Bind Request for CRG SAP 
      <tapa.send>
         <tapa.crg.bndreq/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.crg.bndcfm/>
      </tapa.expect>

      #Send Bind Request for RGR SAP 
      <tapa.send>
         <tapa.rgr.bndreq instId="5"/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgr.bndcfm/>
      </tapa.expect>

      #Send Bind Request for RGR SAP 
      <tapa.send>
         <tapa.rgu.bndreq/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgu.bndcfm/>
      </tapa.expect>

 
      #<tapa.rg.dbgInitAll/>
      #Expect NOK_DONE Control Confirm from LTE MAC
      #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.cntrlreq suId="0" spId="0" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.bndreq/>
      </tapa.expect>
      
      #<tapa.rg.dbgDeInitAll/>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.bndcfm suId="0"/>
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.cntrlcfm status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL"/>
      </tapa.expect>
      
      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm/>
      </tapa.expect>

            #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.schcntrlreq instId="5" suId="0" spId="0" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.schcntrlcfm status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL" instId="5"/>
      </tapa.expect>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.sch.bndreq instId="5" spId="1"/>
      </tapa.expect>
      
      #<tapa.rg.dbgDeInitAll/>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.sch.bndcfm suId="0" instId="5" spId="1"/>
      </tapa.send>

      
      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm instId="5"/>
      </tapa.expect>

      #Send CRG Cell Configuration
      <tapa.send>
         <tapa.crg.cfgreq.cfg.cell/>
      </tapa.send>
      

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #<tapa.rg.dbgDeInitAll/>

      #Send Common Logical Channel Configuration BCCH->BCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="1" dir="1" lcType="1" dlTrchType="1"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="2" dir="1" lcType="1"
            dlTrchType="3"/>
      </tapa.send>
      
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>
      
      #Send Common Logical Channel Configuration PCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  crnti="1234" lcId="3" dir="1" lcType="2"/>
      </tapa.send>
     
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration CCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  crnti="1234" lcId="4" dir="3" lcType="3"
            dlTrchType="3" ulTrchType="5"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Sending RGR ENB Configuration
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.enb instId="5"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

      #Sending RGR CELL Configuration
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.cell trgCqi="4" numCmnLc="5"
         cmnLcInfo="1:1:1:1:0:2:1:1:3:0:3:2:1:0:0:4:3:3:3:3:5:1:1:3:0"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm/>
      </tapa.expect>

   </tapa.steps>

</tapa.command>

#
#
#       Command: tapa.rg.cellInit.trgCqi8
#
#       Desc:    Commands to LTEMAC to Initialize CELL
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.cellInit.trgCqi8">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize CELL
      </tapa.desc>

      <tapa.longdesc>
         "Binding RGR and CRG SAPS, Creatting CELL in CRG Interface, creating 
         common logical channels(BCCH/BCH, BCCH/DLSCH, PCCH, CCCH) and RGR
         CELL configuration for schedular related information"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      #Send Bind Request for CRG SAP 
      <tapa.send>
         <tapa.crg.bndreq/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.crg.bndcfm/>
      </tapa.expect>

      #Send Bind Request for RGR SAP 
      <tapa.send>
         <tapa.rgr.bndreq instId="5"/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgr.bndcfm/>
      </tapa.expect>

      #Send Bind Request for RGR SAP 
      <tapa.send>
         <tapa.rgu.bndreq/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgu.bndcfm/>
      </tapa.expect>

 
      #<tapa.rg.dbgInitAll/>
      #Expect NOK_DONE Control Confirm from LTE MAC
      #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.cntrlreq suId="0" spId="0" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.bndreq/>
      </tapa.expect>
      
      #<tapa.rg.dbgDeInitAll/>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.bndcfm suId="0"/>
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.cntrlcfm status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL"/>
      </tapa.expect>
      
      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm/>
      </tapa.expect>

            #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.schcntrlreq instId="5" suId="0" spId="0" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.schcntrlcfm status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL" instId="5"/>
      </tapa.expect>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.sch.bndreq instId="5" spId="1"/>
      </tapa.expect>
      
      #<tapa.rg.dbgDeInitAll/>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.sch.bndcfm suId="0" instId="5"/>
      </tapa.send>
      
      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm instId="5"/>
      </tapa.expect>

      #Send CRG Cell Configuration
      <tapa.send>
         <tapa.crg.cfgreq.cfg.cell/>
      </tapa.send>
      

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #<tapa.rg.dbgDeInitAll/>

      #Send Common Logical Channel Configuration BCCH->BCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="1" dir="1" lcType="1" dlTrchType="1"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="2" dir="1" lcType="1"
            dlTrchType="3"/>
      </tapa.send>
      
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>
      
      #Send Common Logical Channel Configuration PCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  crnti="1234" lcId="3" dir="1" lcType="2"/>
      </tapa.send>
     
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration CCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  crnti="1234" lcId="4" dir="3" lcType="3"
            dlTrchType="3" ulTrchType="5"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Sending RGR ENB Configuration
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.enb instId="5"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

      #Sending RGR CELL Configuration
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.cell trgCqi="8" numCmnLc="5"
         cmnLcInfo="1:1:1:1:0:2:1:1:3:0:3:2:1:0:0:4:3:3:3:3:5:1:1:3:0"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm/>
      </tapa.expect>

   </tapa.steps>

</tapa.command>



#
#
#       Command: tapa.rg.4UeInit.dlSched
#
#       Desc:    Commands to LTEMAC to Initialize UE
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.4UeInit.dlSched">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize UE
      </tapa.desc>

      <tapa.longdesc>
         "This command will finish complete RA process and does the UE
         Configuration"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
         # Send RaReqInd for one rapId 
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.rareq.ind numRaRnti="1" suId="0">
            <tapa.tfu.rareq raRnti="9" numRapId="4" rapIds="1:2:3:4" timingAdvs="3:3:3:3" tpcs="1:1:1:1" cqiPres="TRUE:TRUE:TRUE:TRUE" cqis="4:4:4:4"/>
         </tapa.tfu.rareq.ind>
      </tapa.send>

      # Ue starts expecting raResp after 3 subframes within the raResp window.
      # The number of subframes to wait for receiving the RA RSP is maximum of
      # RA RSP window and the scheduling delta RG_DL_DELTA (=3) minus the 
      # TFU_DELTA (=2) from the next TTI. This makes the number of TTIs 2 (3 - 2
      # + 1).
      <tapa.send>
         <tapa.tfu.tti.ind numTti="2"/>
      </tapa.send>
      
      # Expect RaResp for the rapId sent in RaReq
      <tapa.expset>
        <tapa.tfu.dat.req datReqs="1">
           <tapa.tfu.rarsp.req raRnti="9" rapIds="1:2:3:4"/>
        </tapa.tfu.dat.req>
        <tapa.tfu.cntrl.req numCntrlReq="1">
           <tapa.tfu.pdcch.cntrl.req/>
        </tapa.tfu.cntrl.req>
      </tapa.expset>

      # Counting the TTIs, RA RSP was received by PHY at sf = (0,2). PHY tranmits
      # the RA RSP in sf = (0, 4). UE will transmit the MSG3 at sf = (1, 0). We 
      # must receive data reception request at sf = (0, 8). Current TTI = (0, 2)
      # and hence we must send 6 TTIs.
      <tapa.send>
         <tapa.tfu.tti.ind numTti="6"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req numRntis="4">
            <tapa.tfu.msg3.recp.req ueId="0"/>
            <tapa.tfu.msg3.recp.req ueId="1"/>
            <tapa.tfu.msg3.recp.req ueId="2"/>
            <tapa.tfu.msg3.recp.req ueId="3"/>
         </tapa.tfu.recp.req>
      </tapa.expect>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2"/>
      </tapa.send>

      # Send Message3 after receiving Message3 reception req.
      <tapa.send>
       <tapa.tfu.dat.ind datInds="4">
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="0"/>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="1"/>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="2"/>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="3"/>
       </tapa.tfu.dat.ind>      
      </tapa.send>  

      # Expect Message3 datReq on CCCH at RGU.
      <tapa.expect>
         <tapa.rgu.cdatind ueId="0" lcId="4"/>
      </tapa.expect>

      # Expect Message3 datReq on CCCH at RGU.
      <tapa.expect>
         <tapa.rgu.cdatind ueId="1" lcId="4"/>
      </tapa.expect>

      # Expect Message3 datReq on CCCH at RGU.
      <tapa.expect>
         <tapa.rgu.cdatind ueId="2" lcId="4"/>
      </tapa.expect>

      # Expect Message3 datReq on CCCH at RGU.
      <tapa.expect>
         <tapa.rgu.cdatind ueId="3" lcId="4"/>
      </tapa.expect>

      # Send BO for Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="0"/>
      </tapa.send>

      # Send BO for Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="1"/>
      </tapa.send>

      # Send BO for Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="2"/>
      </tapa.send>

      # Send BO for Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="3"/>
      </tapa.send>

   <tapa.send>
      <tapa.tfu.tti.ind numTti="1"/>
   </tapa.send>

   # Expect staInd from MAC to RLC for Msg4 
   <tapa.expset>
      <tapa.rgu.cstaind lcId="4" ueId="0"/>
      <tapa.rgu.cstaind lcId="4" ueId="1"/>
      <tapa.rgu.cstaind lcId="4" ueId="2"/>
      <tapa.rgu.cstaind lcId="4" ueId="3"/>
   </tapa.expset>
   
   #<tapa.rg.dbgInitAll/>

   # Send Msg4 on RGU. 
   <tapa.send>
      <tapa.rgu.cdatreq ueId="0" lcId="4" lcType="3" />
   </tapa.send>

   # Send Msg4 on RGU. 
   <tapa.send>
      <tapa.rgu.cdatreq ueId="1" lcId="4" lcType="3" />
   </tapa.send>

   # Send Msg4 on RGU. 
   <tapa.send>
      <tapa.rgu.cdatreq ueId="2" lcId="4" lcType="3" />
   </tapa.send>

   # Send Msg4 on RGU. 
   <tapa.send>
      <tapa.rgu.cdatreq ueId="3" lcId="4" lcType="3" />
   </tapa.send>

   #<tapa.rg.dbgDeInitAll/>
   
   <tapa.send>
      <tapa.tfu.tti.ind numTti="1"/>
   </tapa.send>

   # Expect Msg4 from MAC to PHY.
   <tapa.expset>
     <tapa.tfu.cntrl.req numCntrlReq="4">
        <tapa.tfu.pdcch.cntrl.req saveTo="1" ueId="0"/>
        <tapa.tfu.pdcch.cntrl.req saveTo="2" ueId="1"/>
        <tapa.tfu.pdcch.cntrl.req saveTo="3" ueId="2"/>
        <tapa.tfu.pdcch.cntrl.req saveTo="4" ueId="3"/>
     </tapa.tfu.cntrl.req>
   # Expect Msg4 from MAC to PHY.
     <tapa.tfu.dat.req datReqs="4">
        <tapa.tfu.pdsch.dat.req use="1" ueId="0" chkCcchSh="TRUE"/>
        <tapa.tfu.pdsch.dat.req use="2" ueId="1" chkCcchSh="TRUE"/>
        <tapa.tfu.pdsch.dat.req use="3" ueId="2" chkCcchSh="TRUE"/>
        <tapa.tfu.pdsch.dat.req use="4" ueId="3" chkCcchSh="TRUE"/>
     </tapa.tfu.dat.req>   
   </tapa.expset>

   <tapa.send>
      <tapa.tfu.tti.ind numTti="2" op="RG_ACC_PLUS" numTfuDelta="1"/>
   </tapa.send>
   
   <tapa.expect>
     <tapa.tfu.recp.req numRntis="4">
        <tapa.tfu.hq.recp.req ueId="0"/>
        <tapa.tfu.pusch.recp.req ueId="0"/>
        <tapa.tfu.hq.recp.req ueId="1"/>
        <tapa.tfu.pusch.recp.req ueId="1"/>
        <tapa.tfu.hq.recp.req ueId="2"/>
        <tapa.tfu.pusch.recp.req ueId="2"/>
        <tapa.tfu.hq.recp.req ueId="3"/>
        <tapa.tfu.pusch.recp.req ueId="3"/>
     </tapa.tfu.recp.req>   
   </tapa.expect>
   <tapa.send>
      <tapa.tfu.tti.ind numTti="2" />
   </tapa.send>

   # Send ACK as feedback for Msg4. 
   <tapa.send>
     <tapa.tfu.hq.ind hqInds="4">
        <tapa.tfu.hq ueId="0"/>
        <tapa.tfu.hq ueId="1"/>
        <tapa.tfu.hq ueId="2"/>
        <tapa.tfu.hq ueId="3"/>
     </tapa.tfu.hq.ind>   
   </tapa.send>

   #<tapa.rg.dbgInitAll/>
   # Send UE config request
   <tapa.send>
     <tapa.crg.cfgreq.cfg.ue dlAmbr="1024"/>
   </tapa.send>


   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.crg.cfgcfm/>
   </tapa.expect>
   
   <tapa.send>
     <tapa.crg.cfgreq.cfg.ue ueId="1" dlAmbr="1024" />
   </tapa.send>


   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.crg.cfgcfm/>
   </tapa.expect>

   <tapa.send>
     <tapa.crg.cfgreq.cfg.ue ueId="2" dlAmbr="1024" />
   </tapa.send>


   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.crg.cfgcfm/>
   </tapa.expect>

   <tapa.send>
     <tapa.crg.cfgreq.cfg.ue ueId="3" dlAmbr="1024" />
   </tapa.send>


   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.crg.cfgcfm/>
   </tapa.expect>


   # Send UE config request
   <tapa.send>
     <tapa.rgr.cfgreq.cfg.ue dlAmbr="1024"/>
   </tapa.send>


   # Send TTI to apply the config
   <tapa.send>
      <tapa.tfu.tti.ind/>
   </tapa.send>

   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.rgr.cfgCfm/>
   </tapa.expect>
   
   <tapa.send>
     <tapa.rgr.cfgreq.cfg.ue ueId="1" dlAmbr="1024" />
   </tapa.send>


   # Send TTI to apply the config
   <tapa.send>
      <tapa.tfu.tti.ind/>
   </tapa.send>

   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.rgr.cfgCfm/>
   </tapa.expect>

      <tapa.send>
     <tapa.rgr.cfgreq.cfg.ue ueId="2" dlAmbr="1024" />
   </tapa.send>


   # Send TTI to apply the config
   <tapa.send>
      <tapa.tfu.tti.ind/>
   </tapa.send>

   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.rgr.cfgCfm/>
   </tapa.expect>

   <tapa.send>
     <tapa.rgr.cfgreq.cfg.ue ueId="3" dlAmbr="1024" />
   </tapa.send>


   # Send TTI to apply the config
   <tapa.send>
      <tapa.tfu.tti.ind/>
   </tapa.send>

   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.rgr.cfgCfm/>
   </tapa.expect>


   #<tapa.rg.dbgDeInitAll/>
   </tapa.steps>

</tapa.command>


#
#
#       Command: tapa.rg.cellInit.dlSched2
#
#       Desc:    Commands to LTEMAC to Initialize CELL
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.cellInit.dlSched2">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize CELL
      </tapa.desc>

      <tapa.longdesc>
         "Binding RGR and CRG SAPS, Creatting CELL in CRG Interface, creating 
         common logical channels(BCCH/BCH, BCCH/DLSCH, PCCH, CCCH) and RGR
         CELL configuration for schedular related information"
      </tapa.longdesc>
         

   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>

      #Send Bind Request for CRG SAP 
      <tapa.send>
         <tapa.crg.bndreq/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.crg.bndcfm/>
      </tapa.expect>

      #Send Bind Request for RGR SAP 
      #<tapa.send>
      #   <tapa.lrg.schcntrlreq instId="5" suId="0" spId="0" action="ABND" elmntType="STRGRSAP" />
      #</tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      #<tapa.expect>
      #   <tapa.lrg.schcntrlcfm instId="5"/>
      #</tapa.expect>

      #Send Bind Request for RGR SAP 
      <tapa.send>
         <tapa.rgr.bndreq instId="5"/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgr.bndcfm/>
      </tapa.expect>

      #Send Bind Request for RGR SAP 
      <tapa.send>
         <tapa.rgu.bndreq/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgu.bndcfm/>
      </tapa.expect>

 
      #<tapa.rg.dbgInitAll/>
      #Expect NOK_DONE Control Confirm from LTE MAC
      #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.cntrlreq suId="0" spId="0" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.cntrlcfm status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL"/>
      </tapa.expect>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.bndreq instId="0"/>
      </tapa.expect>
      
      #<tapa.rg.dbgDeInitAll/>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.bndcfm suId="0" instId="0"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm/>
      </tapa.expect>

      #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.schcntrlreq instId="5" suId="0" spId="0" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>
      
      <tapa.expect>
         <tapa.lrg.schcntrlcfm status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL" instId="5"/>
      </tapa.expect>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.sch.bndreq instId="5" spId="1"/>
      </tapa.expect>
      
      #<tapa.rg.dbgDeInitAll/>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.sch.bndcfm suId="0" instId="5" spId="1"/>
      </tapa.send>

      
      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm instId="5"/>
      </tapa.expect>

      #Send CRG Cell Configuration
      <tapa.send>
         <tapa.crg.cfgreq.cfg.cell  dlTotalBw="100" ulTotalBw="100"/>
      </tapa.send>
      

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #<tapa.rg.dbgDeInitAll/>

      #Send Common Logical Channel Configuration BCCH->BCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="1" dir="1" lcType="1" dlTrchType="1"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="2" dir="1" lcType="1"
            dlTrchType="3"/>
      </tapa.send>
      
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>
      
      #Send Common Logical Channel Configuration PCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  crnti="1234" lcId="3" dir="1" lcType="2"/>
      </tapa.send>
     
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration CCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  crnti="1234" lcId="4" dir="3" lcType="3"
            dlTrchType="3" ulTrchType="5"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="5" dir="1" lcType="1"
            dlTrchType="3"/>
      </tapa.send>
      
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Sending RGR ENB Configuration
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.enb instId="5"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

      #Sending RGR CELL Configuration
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.cell   dlTotalBw="100" ulTotalBw="100" numCmnLc="5"
         cmnLcInfo="1:1:1:1:0:2:1:1:3:0:3:2:1:0:0:4:3:3:3:3:5:1:1:3:0"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm/>
      </tapa.expect>

   </tapa.steps>

</tapa.command>


#
#
#       Command: tapa.rg.4MoreUeInit.dlSched
#
#       Desc:    Commands to LTEMAC to Initialize UE
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.4MoreUeInit.dlSched">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize UE
      </tapa.desc>

      <tapa.longdesc>
         "This command will finish complete RA process and does the UE
         Configuration"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
         # Send RaReqInd for one rapId 
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.rareq.ind numRaRnti="1" suId="0">
            <tapa.tfu.rareq raRnti="2" numRapId="4" rapIds="1:2:3:4" timingAdvs="3:3:3:3" tpcs="1:1:1:1" cqiPres="TRUE:TRUE:TRUE:TRUE" cqis="4:4:4:4"/>
         </tapa.tfu.rareq.ind>
      </tapa.send>

      # Ue starts expecting raResp after 3 subframes within the raResp window.
      # The number of subframes to wait for receiving the RA RSP is maximum of
      # RA RSP window and the scheduling delta RG_DL_DELTA (=3) minus the 
      # TFU_DELTA (=2) from the next TTI. This makes the number of TTIs 2 (3 - 2
      # + 1).
      <tapa.send>
         <tapa.tfu.tti.ind numTti="2"/>
      </tapa.send>
      
# Expect RaResp for the rapId sent in RaReq
      <tapa.expset>
        <tapa.tfu.dat.req datReqs="1">
           <tapa.tfu.rarsp.req raRnti="2" rapIds="1:2:3:4"/>
        </tapa.tfu.dat.req>
        <tapa.tfu.cntrl.req numCntrlReq="1">
           <tapa.tfu.pdcch.cntrl.req/>
        </tapa.tfu.cntrl.req>
      </tapa.expset>

      # Counting the TTIs, RA RSP was received by PHY at sf = (0,2). PHY tranmits
      # the RA RSP in sf = (0, 4). UE will transmit the MSG3 at sf = (1, 0). We 
      # must receive data reception request at sf = (0, 8). Current TTI = (0, 2)
      # and hence we must send 6 TTIs.
      <tapa.send>
         <tapa.tfu.tti.ind numTti="6"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req numRntis="4">
            <tapa.tfu.msg3.recp.req ueId="4"/>
            <tapa.tfu.msg3.recp.req ueId="5"/>
            <tapa.tfu.msg3.recp.req ueId="6"/>
            <tapa.tfu.msg3.recp.req ueId="7"/>
         </tapa.tfu.recp.req>
      </tapa.expect>


      <tapa.send>
         <tapa.tfu.tti.ind numTti="2"/>
      </tapa.send>

      # Send Message3 after receiving Message3 reception req.
      <tapa.send>
       <tapa.tfu.dat.ind datInds="4">
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="4"/>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="5"/>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="6"/>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="7"/>
       </tapa.tfu.dat.ind>      
      </tapa.send>

      # Expect Message3 datReq on CCCH at RGU.
      <tapa.expect>
         <tapa.rgu.cdatind ueId="4" lcId="4"/>
      </tapa.expect>

      # Expect Message3 datReq on CCCH at RGU.
      <tapa.expect>
         <tapa.rgu.cdatind ueId="5" lcId="4"/>
      </tapa.expect>

      # Expect Message3 datReq on CCCH at RGU.
      <tapa.expect>
         <tapa.rgu.cdatind ueId="6" lcId="4"/>
      </tapa.expect>

      # Expect Message3 datReq on CCCH at RGU.
      <tapa.expect>
         <tapa.rgu.cdatind ueId="7" lcId="4"/>
      </tapa.expect>

      # Send BO for Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="4"/>
      </tapa.send>

      # Send BO for Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="5"/>
      </tapa.send>

      # Send BO for Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="6"/>
      </tapa.send>

      # Send BO for Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="7"/>
      </tapa.send>

   <tapa.send>
      <tapa.tfu.tti.ind numTti="1"/>
   </tapa.send>

   # Expect staInd from MAC to RLC for Msg4 
   <tapa.expset>
      <tapa.rgu.cstaind lcId="4" ueId="4"/>
      <tapa.rgu.cstaind lcId="4" ueId="5"/>
      <tapa.rgu.cstaind lcId="4" ueId="6"/>
      <tapa.rgu.cstaind lcId="4" ueId="7"/>
   </tapa.expset>
   
   #<tapa.rg.dbgInitAll/>

   # Send Msg4 on RGU. 
   <tapa.send>
      <tapa.rgu.cdatreq ueId="4" lcId="4" lcType="3" />
   </tapa.send>

   # Send Msg4 on RGU. 
   <tapa.send>
      <tapa.rgu.cdatreq ueId="5" lcId="4" lcType="3" />
   </tapa.send>

   # Send Msg4 on RGU. 
   <tapa.send>
      <tapa.rgu.cdatreq ueId="6" lcId="4" lcType="3" />
   </tapa.send>

   # Send Msg4 on RGU. 
   <tapa.send>
      <tapa.rgu.cdatreq ueId="7" lcId="4" lcType="3" />
   </tapa.send>

   #<tapa.rg.dbgDeInitAll/>
   
   <tapa.send>
      <tapa.tfu.tti.ind numTti="1"/>
   </tapa.send>

   # Expect Msg4 from MAC to PHY.
   <tapa.expset>
     <tapa.tfu.cntrl.req numCntrlReq="4">
        <tapa.tfu.pdcch.cntrl.req saveTo="1" ueId="4"/>
        <tapa.tfu.pdcch.cntrl.req saveTo="2" ueId="5"/>
        <tapa.tfu.pdcch.cntrl.req saveTo="3" ueId="6"/>
        <tapa.tfu.pdcch.cntrl.req saveTo="4" ueId="7"/>
     </tapa.tfu.cntrl.req>
   # Expect Msg4 from MAC to PHY.
     <tapa.tfu.dat.req datReqs="4">
        <tapa.tfu.pdsch.dat.req use="1" ueId="4" chkCcchSh="TRUE"/>
        <tapa.tfu.pdsch.dat.req use="2" ueId="5" chkCcchSh="TRUE"/>
        <tapa.tfu.pdsch.dat.req use="3" ueId="6" chkCcchSh="TRUE"/>
        <tapa.tfu.pdsch.dat.req use="4" ueId="7" chkCcchSh="TRUE"/>
     </tapa.tfu.dat.req>    
   </tapa.expset>

   <tapa.send>
      <tapa.tfu.tti.ind numTti="2" op="RG_ACC_PLUS" numTfuDelta="1"/>
   </tapa.send>
   
   <tapa.expset>
     <tapa.tfu.recp.req numRntis="4">
        <tapa.tfu.hq.recp.req ueId="4"/>
        <tapa.tfu.pusch.recp.req ueId="4"/>
        <tapa.tfu.hq.recp.req ueId="5"/>
        <tapa.tfu.pusch.recp.req ueId="5"/>
        <tapa.tfu.hq.recp.req ueId="6"/>
        <tapa.tfu.pusch.recp.req ueId="6"/>
        <tapa.tfu.hq.recp.req ueId="7"/>
        <tapa.tfu.pusch.recp.req ueId="7"/>
     </tapa.tfu.recp.req>   
   </tapa.expset>
   <tapa.send>
      <tapa.tfu.tti.ind numTti="2" />
   </tapa.send>

   # Send ACK as feedback for Msg4. 
   <tapa.send>
     <tapa.tfu.hq.ind hqInds="4">
        <tapa.tfu.hq ueId="4"/>
        <tapa.tfu.hq ueId="5"/>
        <tapa.tfu.hq ueId="6"/>
        <tapa.tfu.hq ueId="7"/>
     </tapa.tfu.hq.ind>   
   </tapa.send>


   #<tapa.rg.dbgInitAll/>
   # Send UE config request
   <tapa.send>
     <tapa.crg.cfgreq.cfg.ue ueId="4" ambrPres="TRUE" dlAmbr="1024"/>
   </tapa.send>

   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.crg.cfgcfm/>
   </tapa.expect>
   
   <tapa.send>
     <tapa.crg.cfgreq.cfg.ue ueId="5" ambrPres="TRUE" dlAmbr="1024" />
   </tapa.send>


   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.crg.cfgcfm/>
   </tapa.expect>

      <tapa.send>
     <tapa.crg.cfgreq.cfg.ue ueId="6" ambrPres="TRUE" dlAmbr="1024" />
   </tapa.send>


   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.crg.cfgcfm/>
   </tapa.expect>

   <tapa.send>
     <tapa.crg.cfgreq.cfg.ue ueId="7" ambrPres="TRUE" dlAmbr="1024" />
   </tapa.send>


   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.crg.cfgcfm/>
   </tapa.expect>




   # Send UE config request
   <tapa.send>
     <tapa.rgr.cfgreq.cfg.ue ueId="4" ambrPres="TRUE" dlAmbr="1024"/>
   </tapa.send>


   # Send TTI to apply the config
   <tapa.send>
      <tapa.tfu.tti.ind/>
   </tapa.send>

   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.rgr.cfgCfm/>
   </tapa.expect>
   
   <tapa.send>
     <tapa.rgr.cfgreq.cfg.ue ueId="5" ambrPres="TRUE" dlAmbr="1024" />
   </tapa.send>


   # Send TTI to apply the config
   <tapa.send>
      <tapa.tfu.tti.ind/>
   </tapa.send>

   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.rgr.cfgCfm/>
   </tapa.expect>

      <tapa.send>
     <tapa.rgr.cfgreq.cfg.ue ueId="6" ambrPres="TRUE" dlAmbr="1024" />
   </tapa.send>


   # Send TTI to apply the config
   <tapa.send>
      <tapa.tfu.tti.ind/>
   </tapa.send>

   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.rgr.cfgCfm/>
   </tapa.expect>

   <tapa.send>
     <tapa.rgr.cfgreq.cfg.ue ueId="7" ambrPres="TRUE" dlAmbr="1024" />
   </tapa.send>


   # Send TTI to apply the config
   <tapa.send>
      <tapa.tfu.tti.ind/>
   </tapa.send>

   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.rgr.cfgCfm/>
   </tapa.expect>

   #<tapa.rg.dbgDeInitAll/>
   </tapa.steps>

</tapa.command>


#JUNK
#
#
#       Command: tapa.rg.3UeInit.dlSched
#
#       Desc:    Commands to LTEMAC to Initialize UE
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.3UeInit.dlSched">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize UE
      </tapa.desc>

      <tapa.longdesc>
         "This command will finish complete RA process and does the UE
         Configuration"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
         # Send RaReqInd for one rapId 
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.rareq.ind numRaRnti="1" raRntis="9" numRapIds="3" numRaReq="3" 
         rapIds="1:2:3" timingAdvs="3:3:3" tpcs="1:1:1" cqiPres="TRUE:TRUE:TRUE" cqis="4:4:4"/>
      </tapa.send>

      # Ue starts expecting raResp after 3 subframes within the raResp window.
      # The number of subframes to wait for receiving the RA RSP is maximum of
      # RA RSP window and the scheduling delta RG_DL_DELTA (=3) minus the 
      # TFU_DELTA (=2) from the next TTI. This makes the number of TTIs 2 (3 - 2
      # + 1).
      <tapa.send>
         <tapa.tfu.tti.ind numTti="2"/>
      </tapa.send>
      
      # Expect RaResp for the rapId sent in RaReq
      <tapa.expset>
        <tapa.tfu.dat.req datReqs="1">
           <tapa.tfu.rarsp.req raRnti="9" rapIds="1:2:3"/>
        </tapa.tfu.dat.req>
        <tapa.tfu.cntrl.req numCntrlReq="1">
           <tapa.tfu.pdcch/>
        </tapa.tfu.cntrl.req>
      </tapa.expset>
      
      # Counting the TTIs, RA RSP was received by PHY at sf = (0,2). PHY tranmits
      # the RA RSP in sf = (0, 4). UE will transmit the MSG3 at sf = (1, 0). We 
      # must receive data reception request at sf = (0, 8). Current TTI = (0, 2)
      # and hence we must send 6 TTIs.
      <tapa.send>
         <tapa.tfu.tti.ind numTti="6"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req numRntis="3">
            <tapa.tfu.msg3.recp.req ueId="0"/>
            <tapa.tfu.msg3.recp.req ueId="1"/>
            <tapa.tfu.msg3.recp.req ueId="2"/>
         </tapa.tfu.recp.req>
      </tapa.expect>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2"/>
      </tapa.send>

      # Send Message3 after receiving Message3 reception req.
      <tapa.send>
       <tapa.tfu.dat.ind datInds="3">
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="0"/>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="1"/>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="2"/>
       </tapa.tfu.dat.ind>      
      </tapa.send>  

      # Expect Message3 datReq on CCCH at RGU.
      <tapa.expect>
         <tapa.rgu.cdatind ueId="0" lcId="4"/>
      </tapa.expect>

      # Expect Message3 datReq on CCCH at RGU.
      <tapa.expect>
         <tapa.rgu.cdatind ueId="1" lcId="4"/>
      </tapa.expect>

      # Expect Message3 datReq on CCCH at RGU.
      <tapa.expect>
         <tapa.rgu.cdatind ueId="2" lcId="4"/>
      </tapa.expect>

      # Send BO for Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="0"/>
      </tapa.send>

      # Send BO for Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="1"/>
      </tapa.send>

      # Send BO for Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="2"/>
      </tapa.send>

   <tapa.send>
      <tapa.tfu.tti.ind numTti="1"/>
   </tapa.send>

   # Expect staInd from MAC to RLC for Msg4 
   <tapa.expset>
      <tapa.rgu.cstaind lcId="4" ueId="0"/>
      <tapa.rgu.cstaind lcId="4" ueId="1"/>
      <tapa.rgu.cstaind lcId="4" ueId="2"/>
   </tapa.expset>
   
   #<tapa.rg.dbgInitAll/>

   # Send Msg4 on RGU. 
   <tapa.send>
      <tapa.rgu.cdatreq ueId="0" lcId="4" lcType="3" />
   </tapa.send>

   # Send Msg4 on RGU. 
   <tapa.send>
      <tapa.rgu.cdatreq ueId="1" lcId="4" lcType="3" />
   </tapa.send>

   # Send Msg4 on RGU. 
   <tapa.send>
      <tapa.rgu.cdatreq ueId="2" lcId="4" lcType="3" />
   </tapa.send>

   #<tapa.rg.dbgDeInitAll/>
   
   <tapa.send>
      <tapa.tfu.tti.ind numTti="1"/>
   </tapa.send>

   # Expect Msg4 from MAC to PHY.
   <tapa.expset>
     <tapa.tfu.cntrl.req numCntrlReq="3">
        <tapa.tfu.pdcch saveTo="1" ueId="0"/>
        <tapa.tfu.pdcch saveTo="2" ueId="1"/>
        <tapa.tfu.pdcch saveTo="3" ueId="2"/>
     </tapa.tfu.cntrl.req>
   # Expect Msg4 from MAC to PHY.
     <tapa.tfu.dat.req datReqs="3">
        <tapa.tfu.pdsch.dat.req use="1" ueId="0" chkCcchSh="TRUE"/>
        <tapa.tfu.pdsch.dat.req use="2" ueId="1" chkCcchSh="TRUE"/>
        <tapa.tfu.pdsch.dat.req use="3" ueId="2" chkCcchSh="TRUE"/>
     </tapa.tfu.dat.req>   
   </tapa.expset>


   <tapa.send>
      <tapa.tfu.tti.ind numTti="2" op="RG_ACC_PLUS" numTfuDelta="1"/>
   </tapa.send>
   
   <tapa.expset>
     <tapa.tfu.recp.req numRntis="3">
        <tapa.tfu.hq.recp.req ueId="0"/>
        <tapa.tfu.pusch.recp.req ueId="0"/>
        <tapa.tfu.hq.recp.req ueId="1"/>
        <tapa.tfu.pusch.recp.req ueId="1"/>
        <tapa.tfu.hq.recp.req ueId="2"/>
        <tapa.tfu.pusch.recp.req ueId="2"/>
     </tapa.tfu.recp.req>   
   </tapa.expset>
   <tapa.send>
      <tapa.tfu.tti.ind numTti="2" />
   </tapa.send>

   # Send ACK as feedback for Msg4. 
   <tapa.send>
     <tapa.tfu.hq.ind hqInds="3">
        <tapa.tfu.hq ueId="0"/>
        <tapa.tfu.hq ueId="1"/>
        <tapa.tfu.hq ueId="2"/>
     </tapa.tfu.hq.ind>   
   </tapa.send>

   #<tapa.rg.dbgInitAll/>
   # Send UE config request
   <tapa.send>
     <tapa.crg.cfgreq.cfg.ue dlAmbr="1024"/>
   </tapa.send>


   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.crg.cfgcfm/>
   </tapa.expect>
   
   <tapa.send>
     <tapa.crg.cfgreq.cfg.ue ueId="1" dlAmbr="1024" />
   </tapa.send>


   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.crg.cfgcfm/>
   </tapa.expect>

      <tapa.send>
     <tapa.crg.cfgreq.cfg.ue ueId="2" dlAmbr="1024" />
   </tapa.send>


   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.crg.cfgcfm/>
   </tapa.expect>

   # Send UE config request
   <tapa.send>
     <tapa.rgr.cfgreq.cfg.ue dlAmbr="1024"/>
   </tapa.send>


   # Send TTI to apply the config
   <tapa.send>
      <tapa.tfu.tti.ind/>
   </tapa.send>

   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.rgr.cfgCfm/>
   </tapa.expect>
   
   <tapa.send>
     <tapa.rgr.cfgreq.cfg.ue ueId="1" dlAmbr="1024" />
   </tapa.send>


   # Send TTI to apply the config
   <tapa.send>
      <tapa.tfu.tti.ind/>
   </tapa.send>

   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.rgr.cfgCfm/>
   </tapa.expect>

      <tapa.send>
     <tapa.rgr.cfgreq.cfg.ue ueId="2" dlAmbr="1024" />
   </tapa.send>


   # Send TTI to apply the config
   <tapa.send>
      <tapa.tfu.tti.ind/>
   </tapa.send>

   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.rgr.cfgCfm/>
   </tapa.expect>

   #<tapa.rg.dbgDeInitAll/>
   </tapa.steps>

</tapa.command>
#
#
#       Command: tapa.rg.2macInit
#
#       Desc:    Layer Manager Commands to LTEMAC for TWO CELLS
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.2macInit">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Layer Manager Commands to LTEMAC for TWO cells
      </tapa.desc>

      <tapa.longdesc>
         "Sending General Configuration, RGR SAP Configuration and CRG SAP
         configuration to LTEMAC"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      # Send General Configuration for LTEMAC
      <tapa.send>
         <tapa.lrg.cfg.gen tmrRes="10"/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.lrg.cfgcfm/>
      </tapa.expect>

      #Send CRG SSAP Configuration to LTEMAC */
      <tapa.send>
         <tapa.lrg.cfg.crgsap/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.lrg.cfgcfm/>
      </tapa.expect>

      #Send RGR SSAP Configuration to LTEMAC */
      <tapa.send>
         <tapa.lrg.cfg.schins numSaps="2" instId="5" rgr_suId="0:1"
            rgr_spId="0:1" tfu_suId="0:1" tfu_spId="1:2" bndTimerValue="5" />
      </tapa.send>

      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.lrg.schcfgcfm instId="5"/>
      </tapa.expect>

      #Send TFU SSAP Configuration to LTEMAC */
      <tapa.send>
         <tapa.lrg.cfg.tfusap/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.lrg.cfgcfm/>
      </tapa.expect>
      
      #Send RGU  SSAP Configuration to LTEMAC */
      <tapa.send>
         <tapa.lrg.cfg.rgusap/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.lrg.cfgcfm/>
      </tapa.expect>

   </tapa.steps>

</tapa.command>

#
#
#       Command: tapa.rg.2cellInit
#
#       Desc:    Commands to LTEMAC to Initialize CELL
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.2cellInit">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize CELL
      </tapa.desc>

      <tapa.longdesc>
         "Binding RGR and CRG SAPS, Creatting CELL in CRG Interface, creating 
         common logical channels(BCCH/BCH, BCCH/DLSCH, PCCH, CCCH) and RGR
         CELL configuration for schedular related information"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      #Send Bind Request for CRG SAP 
      <tapa.send>
         <tapa.crg.bndreq/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.crg.bndcfm/>
      </tapa.expect>
      
      #Send Bind Request for RGR SAP for Cell 1 
      <tapa.send>
         <tapa.rgr.bndreq instId="5" spId="0" suId="0"/>
      </tapa.send>
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgr.bndcfm />
      </tapa.expect>
      
      #Send Bind Request for RGR SAP for Cell 2 
      <tapa.send>
         <tapa.rgr.bndreq instId="5" spId="1" suId="1"/>
      </tapa.send>
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgr.bndcfm spId="1" suId="1"/>
      </tapa.expect>

      #Send Bind Request for RGR SAP 
      <tapa.send>
         <tapa.rgu.bndreq/>
      </tapa.send>
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgu.bndcfm/>
      </tapa.expect>
 
      #Expect NOK_DONE Control Confirm from LTE MAC
      #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.cntrlreq suId="0" spId="0" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.cntrlcfm status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL"/>
      </tapa.expect>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.bndreq instId="0"/>
      </tapa.expect>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.bndcfm suId="0" instId="0"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm/>
      </tapa.expect>

      #Send Control Request to Enable TFU SAP for Cell 1
      <tapa.send>
         <tapa.lrg.schcntrlreq instId="5" suId="0" spId="0" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.schcntrlcfm status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL" instId="5"/>
      </tapa.expect>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.sch.bndreq instId="5" spId="1"/>
      </tapa.expect>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.sch.bndcfm suId="0" instId="5" spId="1"/>
      </tapa.send>
      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm instId="5"/>
      </tapa.expect>

      
      #Send Control Request to Enable TFU SAP for Cell 2
      <tapa.send>
         <tapa.lrg.schcntrlreq instId="5" suId="1" spId="2" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.schcntrlcfm status="LCM_PRIM_OK_NDONE"
            reason="LCM_REASON_NOT_APPL" instId="5" spId="2"/>
      </tapa.expect>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.sch.bndreq instId="5" spId="2"/>
      </tapa.expect>
      
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.sch.bndcfm suId="1" instId="5" spId="2"/>
      </tapa.send>
      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm instId="5" spId="2"/>
      </tapa.expect>

      #Send CRG Cell Configuration
      <tapa.send>
         <tapa.crg.cfgreq.cfg.cell/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>


      #Send Common Logical Channel Configuration BCCH->BCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch cellId="3" crnti="1234" lcId="1" dir="1" lcType="1" dlTrchType="1"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch cellId="3" crnti="1234" lcId="2" dir="1" lcType="1"
            dlTrchType="3"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>
      
      #Send Common Logical Channel Configuration PCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  cellId="3" crnti="1234" lcId="3" dir="1" lcType="2"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration CCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  cellId="3" crnti="1234" lcId="4" dir="3" lcType="3"
            dlTrchType="3" ulTrchType="5"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Sending RGR ENB Configuration
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.enb instId="5"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

      #Sending RGR CELL Configuration for cell 1
      #cmnLcInfo = "lcId:lcType:dir:dlTrchType:ulTrchType:...."
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.cell instId="5" maxDlRetxBw="100" numCmnLc="5"
         cmnLcInfo="1:1:1:1:0:2:1:1:3:0:3:2:1:0:0:4:3:3:3:3:5:1:1:3:0"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>
   </tapa.steps>

</tapa.command>

#
#
#
#       Command: tapa.rg.2UeRrInit
#
#       Desc:    Commands to LTEMAC to Initialize UE
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.2UeRrInit">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize UE
      </tapa.desc>

      <tapa.longdesc>
         "This command will finish complete RA process and does the UE
         Configuration"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      <tapa.tfu.directive ulDeltaPrsnt="TRUE"/>
         # Send RaReqInd for one rapId 
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.rareq.ind numRaRnti="1" suId="0">
            <tapa.tfu.rareq raRnti="10" numRapId="2" rapIds="1:2" timingAdvs="3:3"
               tpcs="1:1" cqiPres="TRUE:TRUE" cqis="4:4"/>
         </tapa.tfu.rareq.ind>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2"/>
      </tapa.send>

      # Expect RaResp for the rapId sent in RaReq
      <tapa.expset>
        <tapa.tfu.dat.req>
           <tapa.tfu.rarsp.req raRnti="10" rapIds="1:2"/>
        </tapa.tfu.dat.req>
        <tapa.tfu.cntrl.req spId="1">
           <tapa.tfu.pdcch.cntrl.req/>
        </tapa.tfu.cntrl.req>
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="6"/>
      </tapa.send>

      #Msg3 Recp Req
      <tapa.expset>
         <tapa.tfu.recp.req numRntis="2">
            <tapa.tfu.msg3.recp.req ueId="0"/>
            <tapa.tfu.msg3.recp.req ueId="1"/>
         </tapa.tfu.recp.req>
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="3"/>
      </tapa.send>

      #Send CRC for Msg3
      <tapa.send>
         <tapa.tfu.crc.ind>
            <tapa.tfu.crc ueId="0" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="1" isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # Expect HARQ ACK in PHICH For MSG3
      <tapa.expect>
         <tapa.tfu.cntrl.req spId="1">
            <tapa.tfu.phich.cntrl.req isAck="TRUE" ueId="0"/>
            <tapa.tfu.phich.cntrl.req isAck="TRUE" ueId="1"/>
         </tapa.tfu.cntrl.req>
      </tapa.expect>

      # Send Message3 after receiving Message3 reception req.
      <tapa.send>
       <tapa.tfu.dat.ind>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="0"/>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="1"/>
       </tapa.tfu.dat.ind>      
      </tapa.send>   

      # Expect Message3 datReq on CCCH at RGU.
      <tapa.expset>
         <tapa.rgu.cdatind ueId="0" lcId="4"/>
         <tapa.rgu.cdatind ueId="1" lcId="4"/>
      </tapa.expset>

      # Send BO for Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="0"/>
      </tapa.send>
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="1"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # Expect staInd from MAC to RLC for Msg4 
      <tapa.expset>
         <tapa.rgu.cstaind lcId="4" ueId="0"/>
         <tapa.rgu.cstaind lcId="4" ueId="1"/>
      </tapa.expset>
      
      # Send Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cdatreq ueId="0" lcId="4" lcType="3" />
      </tapa.send>
      <tapa.send>
         <tapa.rgu.cdatreq ueId="1" lcId="4" lcType="3" />
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # Expect Msg4 from MAC to PHY.
      <tapa.expset>
        <tapa.tfu.cntrl.req spId="1">
           <tapa.tfu.pdcch.cntrl.req ueId="0" saveTo="1"/>
           <tapa.tfu.pdcch.cntrl.req ueId="1" saveTo="2"/>
        </tapa.tfu.cntrl.req>
        <tapa.tfu.dat.req>
           <tapa.tfu.pdsch.dat.req saveTo="3" use="1" ueId="0" chkCcchSh="TRUE"/>
           <tapa.tfu.pdsch.dat.req saveTo="4" use="2" ueId="1" chkCcchSh="TRUE"/>
        </tapa.tfu.dat.req>   
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="4"/>
      </tapa.send>
     
      #Recv Hq Recp Req for Msg4 
      <tapa.expset>
        <tapa.tfu.recp.req numRntis="2">
           <tapa.tfu.hq.recp.req ueId="0"/>
           <tapa.tfu.hq.recp.req ueId="1"/>
        </tapa.tfu.recp.req>   
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="3" />
      </tapa.send>

      # Send ACK as feedback for Msg4. 
      <tapa.send>
        <tapa.tfu.hq.ind>
           <tapa.tfu.hq ueId="0"/>
           <tapa.tfu.hq ueId="1"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>

      # Send UE config request
      <tapa.send>
        <tapa.crg.cfgreq.cfg.ue ueId="0"/>
      </tapa.send>
      <tapa.send>
        <tapa.crg.cfgreq.cfg.ue ueId="1" />
      </tapa.send>

      # Expect success in cfg cfm
      <tapa.expset>
         <tapa.crg.cfgcfm ueId="0"/>
         <tapa.crg.cfgcfm ueId="1"/>
      </tapa.expset>
      
      # Send UE config request
      <tapa.send>
        <tapa.rgr.cfgreq.cfg.ue ueId="0" instId="5" prdBsrTmr="65535" />
      </tapa.send>
      <tapa.send>
        <tapa.rgr.cfgreq.cfg.ue ueId="1" instId="5" prdBsrTmr="65535"/>
      </tapa.send>

      # Send TTI to apply the config
      <tapa.send>
         <tapa.tfu.tti.ind/>
      </tapa.send>

      # Expect success in cfg cfm
      <tapa.expset>
         <tapa.rgr.cfgCfm ueId="0" instId="5"/>
         <tapa.rgr.cfgCfm ueId="1" instId="5"/>
      </tapa.expset>
   
   </tapa.steps>

</tapa.command>

#
#
#
#       Command: tapa.rg.3UeRrInit
#
#       Desc:    Commands to LTEMAC to Initialize UE
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.3UeRrInit">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize UE
      </tapa.desc>

      <tapa.longdesc>
         "This command will finish complete RA process and does the UE
         Configuration"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      <tapa.tfu.directive ulDeltaPrsnt="TRUE"/>
         # Send RaReqInd for one rapId 
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.rareq.ind numRaRnti="1" suId="0">
            <tapa.tfu.rareq raRnti="10" numRapId="3" rapIds="1:2:3" timingAdvs="3:3:3"
               tpcs="1:1:1" cqiPres="TRUE:TRUE:TRUE" cqis="4:6:8"/>
         </tapa.tfu.rareq.ind>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2"/>
      </tapa.send>

      # Expect RaResp for the rapId sent in RaReq
      <tapa.expset>
        <tapa.tfu.dat.req>
           <tapa.tfu.rarsp.req raRnti="10" rapIds="1:2:3"/>
        </tapa.tfu.dat.req>
        <tapa.tfu.cntrl.req spId="1">
           <tapa.tfu.pdcch.cntrl.req/>
        </tapa.tfu.cntrl.req>
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="6"/>
      </tapa.send>

      #Msg3 Recp Req
      <tapa.expset>
         <tapa.tfu.recp.req numRntis="3">
            <tapa.tfu.msg3.recp.req ueId="0"/>
            <tapa.tfu.msg3.recp.req ueId="1"/>
            <tapa.tfu.msg3.recp.req ueId="2"/>
         </tapa.tfu.recp.req>
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="3"/>
      </tapa.send>

      #Send CRC for Msg3
      <tapa.send>
         <tapa.tfu.crc.ind>
            <tapa.tfu.crc ueId="0" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="1" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="2" isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # Expect HARQ ACK in PHICH For MSG3
      <tapa.expect>
         <tapa.tfu.cntrl.req spId="1">
            <tapa.tfu.phich.cntrl.req isAck="TRUE" ueId="0"/>
            <tapa.tfu.phich.cntrl.req isAck="TRUE" ueId="1"/>
            <tapa.tfu.phich.cntrl.req isAck="TRUE" ueId="2"/>
         </tapa.tfu.cntrl.req>
      </tapa.expect>

      # Send Message3 after receiving Message3 reception req.
      <tapa.send>
       <tapa.tfu.dat.ind>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="0"/>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="1"/>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="2"/>
       </tapa.tfu.dat.ind>      
      </tapa.send>   

      # Expect Message3 datInd on CCCH at RGU.
      <tapa.expset>
         <tapa.rgu.cdatind ueId="0" lcId="4"/>
         <tapa.rgu.cdatind ueId="1" lcId="4"/>
         <tapa.rgu.cdatind ueId="2" lcId="4"/>
      </tapa.expset>

      # Send BO for Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="0"/>
      </tapa.send>
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="1"/>
      </tapa.send>
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="2"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # Expect staInd from MAC to RLC for Msg4 
      <tapa.expset>
         <tapa.rgu.cstaind lcId="4" ueId="0"/>
         <tapa.rgu.cstaind lcId="4" ueId="1"/>
         <tapa.rgu.cstaind lcId="4" ueId="2"/>
      </tapa.expset>
      
      # Send Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cdatreq ueId="0" lcId="4" lcType="3" />
      </tapa.send>
      <tapa.send>
         <tapa.rgu.cdatreq ueId="1" lcId="4" lcType="3" />
      </tapa.send>
      <tapa.send>
         <tapa.rgu.cdatreq ueId="2" lcId="4" lcType="3" />
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # Expect Msg4 from MAC to PHY.
      <tapa.expset>
        <tapa.tfu.cntrl.req spId="1">
           <tapa.tfu.pdcch.cntrl.req ueId="0" saveTo="1"/>
           <tapa.tfu.pdcch.cntrl.req ueId="1" saveTo="2"/>
           <tapa.tfu.pdcch.cntrl.req ueId="2" saveTo="3"/>
        </tapa.tfu.cntrl.req>
        <tapa.tfu.dat.req>
           <tapa.tfu.pdsch.dat.req saveTo="4" use="1" ueId="0" chkCcchSh="TRUE"/>
           <tapa.tfu.pdsch.dat.req saveTo="5" use="2" ueId="1" chkCcchSh="TRUE"/>
           <tapa.tfu.pdsch.dat.req saveTo="6" use="3" ueId="2" chkCcchSh="TRUE"/>
        </tapa.tfu.dat.req>   
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="4"/>
      </tapa.send>
     
      #Recv Hq Recp Req for Msg4 
      <tapa.expset>
        <tapa.tfu.recp.req numRntis="3">
           <tapa.tfu.hq.recp.req ueId="0"/>
           <tapa.tfu.hq.recp.req ueId="1"/>
           <tapa.tfu.hq.recp.req ueId="2"/>
        </tapa.tfu.recp.req>   
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="3" />
      </tapa.send>

      # Send ACK as feedback for Msg4. 
      <tapa.send>
        <tapa.tfu.hq.ind>
           <tapa.tfu.hq ueId="0"/>
           <tapa.tfu.hq ueId="1"/>
           <tapa.tfu.hq ueId="2"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>

      # Send UE config request
      <tapa.send>
        <tapa.crg.cfgreq.cfg.ue ueId="0"/>
      </tapa.send>
      <tapa.send>
        <tapa.crg.cfgreq.cfg.ue ueId="1" />
      </tapa.send>
      <tapa.send>
        <tapa.crg.cfgreq.cfg.ue ueId="2" />
      </tapa.send>

      # Expect success in cfg cfm
      <tapa.expset>
         <tapa.crg.cfgcfm ueId="0"/>
         <tapa.crg.cfgcfm ueId="1"/>
         <tapa.crg.cfgcfm ueId="2"/>
      </tapa.expset>
      
      # Send UE config request
      <tapa.send>
        <tapa.rgr.cfgreq.cfg.ue ueId="0" instId="5" />
      </tapa.send>
      <tapa.send>
        <tapa.rgr.cfgreq.cfg.ue ueId="1" instId="5" />
      </tapa.send>
      <tapa.send>
        <tapa.rgr.cfgreq.cfg.ue ueId="2" instId="5" />
      </tapa.send>

      # Send TTI to apply the config
      <tapa.send>
         <tapa.tfu.tti.ind/>
      </tapa.send>

      # Expect success in cfg cfm
      <tapa.expset>
         <tapa.rgr.cfgCfm ueId="0" instId="5"/>
         <tapa.rgr.cfgCfm ueId="1" instId="5"/>
         <tapa.rgr.cfgCfm ueId="2" instId="5"/>
      </tapa.expset>
   
   </tapa.steps>

</tapa.command>


#
#
#
#       Command: tapa.rg.4UeRrInit
#
#       Desc:    Commands to LTEMAC to Initialize UE
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.4UeRrInit">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize UE
      </tapa.desc>

      <tapa.longdesc>
         "This command will finish complete RA process and does the UE
         Configuration"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      <tapa.tfu.directive ulDeltaPrsnt="TRUE"/>
         # Send RaReqInd for one rapId 
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.rareq.ind numRaRnti="1" suId="0">
            <tapa.tfu.rareq raRnti="10" numRapId="4" rapIds="1:2:3:4" timingAdvs="3:3:3:3"
               tpcs="1:1:1:1" cqiPres="TRUE:TRUE:TRUE:TRUE" cqis="4:6:8:10"/>
         </tapa.tfu.rareq.ind>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2"/>
      </tapa.send>

      # Expect RaResp for the rapId sent in RaReq
      <tapa.expset>
        <tapa.tfu.dat.req>
           <tapa.tfu.rarsp.req raRnti="10" rapIds="1:2:3:4"/>
        </tapa.tfu.dat.req>
        <tapa.tfu.cntrl.req spId="1">
           <tapa.tfu.pdcch.cntrl.req/>
        </tapa.tfu.cntrl.req>
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="6"/>
      </tapa.send>

      #Msg3 Recp Req
      <tapa.expset>
         <tapa.tfu.recp.req numRntis="4">
            <tapa.tfu.msg3.recp.req ueId="0"/>
            <tapa.tfu.msg3.recp.req ueId="1"/>
            <tapa.tfu.msg3.recp.req ueId="2"/>
            <tapa.tfu.msg3.recp.req ueId="3"/>
         </tapa.tfu.recp.req>
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="3"/>
      </tapa.send>

      #Send CRC for Msg3
      <tapa.send>
         <tapa.tfu.crc.ind>
            <tapa.tfu.crc ueId="0" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="1" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="2" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="3" isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # Expect HARQ ACK in PHICH For MSG3
      <tapa.expect>
         <tapa.tfu.cntrl.req spId="1">
            <tapa.tfu.phich.cntrl.req isAck="TRUE" ueId="0"/>
            <tapa.tfu.phich.cntrl.req isAck="TRUE" ueId="1"/>
            <tapa.tfu.phich.cntrl.req isAck="TRUE" ueId="2"/>
            <tapa.tfu.phich.cntrl.req isAck="TRUE" ueId="3"/>
         </tapa.tfu.cntrl.req>
      </tapa.expect>

      # Send Message3 after receiving Message3 reception req.
      <tapa.send>
       <tapa.tfu.dat.ind>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="0"/>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="1"/>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="2"/>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="3"/>
       </tapa.tfu.dat.ind>      
      </tapa.send>   

      # Expect Message3 datInd on CCCH at RGU.
      <tapa.expset>
         <tapa.rgu.cdatind ueId="0" lcId="4"/>
         <tapa.rgu.cdatind ueId="1" lcId="4"/>
         <tapa.rgu.cdatind ueId="2" lcId="4"/>
         <tapa.rgu.cdatind ueId="3" lcId="4"/>
      </tapa.expset>

      # Send BO for Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="0"/>
      </tapa.send>
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="1"/>
      </tapa.send>
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="2"/>
      </tapa.send>
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="3"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # Expect staInd from MAC to RLC for Msg4 
      <tapa.expset>
         <tapa.rgu.cstaind lcId="4" ueId="0"/>
         <tapa.rgu.cstaind lcId="4" ueId="1"/>
         <tapa.rgu.cstaind lcId="4" ueId="2"/>
         <tapa.rgu.cstaind lcId="4" ueId="3"/>
      </tapa.expset>
      
      # Send Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cdatreq ueId="0" lcId="4" lcType="3" />
      </tapa.send>
      <tapa.send>
         <tapa.rgu.cdatreq ueId="1" lcId="4" lcType="3" />
      </tapa.send>
      <tapa.send>
         <tapa.rgu.cdatreq ueId="2" lcId="4" lcType="3" />
      </tapa.send>
      <tapa.send>
         <tapa.rgu.cdatreq ueId="3" lcId="4" lcType="3" />
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # Expect Msg4 from MAC to PHY.
      <tapa.expset>
        <tapa.tfu.cntrl.req spId="1">
           <tapa.tfu.pdcch.cntrl.req ueId="0" saveTo="1"/>
           <tapa.tfu.pdcch.cntrl.req ueId="1" saveTo="2"/>
           <tapa.tfu.pdcch.cntrl.req ueId="2" saveTo="3"/>
           <tapa.tfu.pdcch.cntrl.req ueId="3" saveTo="4"/>
        </tapa.tfu.cntrl.req>
        <tapa.tfu.dat.req>
           <tapa.tfu.pdsch.dat.req saveTo="5" use="1" ueId="0" chkCcchSh="TRUE"/>
           <tapa.tfu.pdsch.dat.req saveTo="6" use="2" ueId="1" chkCcchSh="TRUE"/>
           <tapa.tfu.pdsch.dat.req saveTo="7" use="3" ueId="2" chkCcchSh="TRUE"/>
           <tapa.tfu.pdsch.dat.req saveTo="8" use="4" ueId="3" chkCcchSh="TRUE"/>
        </tapa.tfu.dat.req>   
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="4"/>
      </tapa.send>
     
      #Recv Hq Recp Req for Msg4 
      <tapa.expset>
        <tapa.tfu.recp.req numRntis="4">
           <tapa.tfu.hq.recp.req ueId="0"/>
           <tapa.tfu.hq.recp.req ueId="1"/>
           <tapa.tfu.hq.recp.req ueId="2"/>
           <tapa.tfu.hq.recp.req ueId="3"/>
        </tapa.tfu.recp.req>   
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="3" />
      </tapa.send>

      # Send ACK as feedback for Msg4. 
      <tapa.send>
        <tapa.tfu.hq.ind>
           <tapa.tfu.hq ueId="0"/>
           <tapa.tfu.hq ueId="1"/>
           <tapa.tfu.hq ueId="2"/>
           <tapa.tfu.hq ueId="3"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>

      # Send UE config request
      <tapa.send>
        <tapa.crg.cfgreq.cfg.ue ueId="0"/>
      </tapa.send>
      <tapa.send>
        <tapa.crg.cfgreq.cfg.ue ueId="1" />
      </tapa.send>
      <tapa.send>
        <tapa.crg.cfgreq.cfg.ue ueId="2" />
      </tapa.send>
      <tapa.send>
        <tapa.crg.cfgreq.cfg.ue ueId="3" />
      </tapa.send>

      # Expect success in cfg cfm
      <tapa.expset>
         <tapa.crg.cfgcfm ueId="0"/>
         <tapa.crg.cfgcfm ueId="1"/>
         <tapa.crg.cfgcfm ueId="2"/>
         <tapa.crg.cfgcfm ueId="3"/>
      </tapa.expset>
      
      # Send UE config request
      <tapa.send>
        <tapa.rgr.cfgreq.cfg.ue ueId="0" instId="5" />
      </tapa.send>
      <tapa.send>
        <tapa.rgr.cfgreq.cfg.ue ueId="1" instId="5" />
      </tapa.send>
      <tapa.send>
        <tapa.rgr.cfgreq.cfg.ue ueId="2" instId="5" />
      </tapa.send>
      <tapa.send>
        <tapa.rgr.cfgreq.cfg.ue ueId="3" instId="5" />
      </tapa.send>

      # Send TTI to apply the config
      <tapa.send>
         <tapa.tfu.tti.ind/>
      </tapa.send>

      # Expect success in cfg cfm
      <tapa.expset>
         <tapa.rgr.cfgCfm ueId="0" instId="5"/>
         <tapa.rgr.cfgCfm ueId="1" instId="5"/>
         <tapa.rgr.cfgCfm ueId="2" instId="5"/>
         <tapa.rgr.cfgCfm ueId="3" instId="5"/>
      </tapa.expset>
   
   </tapa.steps>

</tapa.command>

#
#
#
#       Command: tapa.rg.3UeDlfsInit
#
#       Desc:    Commands to LTEMAC to Initialize UE
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.3UeDlfsInit">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize UE
      </tapa.desc>

      <tapa.longdesc>
         "This command will finish complete RA process and does the UE
         Configuration"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      <tapa.tfu.directive ulDeltaPrsnt="TRUE"/>
         # Send RaReqInd for one rapId 
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.rareq.ind numRaRnti="1" suId="0">
            <tapa.tfu.rareq raRnti="10" numRapId="3" rapIds="1:2:3" timingAdvs="3:3:3"
               tpcs="1:1:1" cqiPres="TRUE:TRUE:TRUE" cqis="4:6:8"/>
         </tapa.tfu.rareq.ind>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2"/>
      </tapa.send>

      # Expect RaResp for the rapId sent in RaReq
      <tapa.expset>
        <tapa.tfu.dat.req>
           <tapa.tfu.rarsp.req raRnti="10" rapIds="1:2:3"/>
        </tapa.tfu.dat.req>
        <tapa.tfu.cntrl.req spId="1">
           <tapa.tfu.pdcch.cntrl.req/>
        </tapa.tfu.cntrl.req>
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="6"/>
      </tapa.send>

      #Msg3 Recp Req
      <tapa.expset>
         <tapa.tfu.recp.req numRntis="3">
            <tapa.tfu.msg3.recp.req ueId="0"/>
            <tapa.tfu.msg3.recp.req ueId="1"/>
            <tapa.tfu.msg3.recp.req ueId="2"/>
         </tapa.tfu.recp.req>
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="3"/>
      </tapa.send>

      #Send CRC for Msg3
      <tapa.send>
         <tapa.tfu.crc.ind>
            <tapa.tfu.crc ueId="0" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="1" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="2" isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # Expect HARQ ACK in PHICH For MSG3
      <tapa.expect>
         <tapa.tfu.cntrl.req spId="1">
            <tapa.tfu.phich.cntrl.req isAck="TRUE" ueId="0"/>
            <tapa.tfu.phich.cntrl.req isAck="TRUE" ueId="1"/>
            <tapa.tfu.phich.cntrl.req isAck="TRUE" ueId="2"/>
         </tapa.tfu.cntrl.req>
      </tapa.expect>

      # Send Message3 after receiving Message3 reception req.
      <tapa.send>
       <tapa.tfu.dat.ind>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="0"/>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="1"/>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="2"/>
       </tapa.tfu.dat.ind>      
      </tapa.send>   

      # Expect Message3 datInd on CCCH at RGU.
      <tapa.expset>
         <tapa.rgu.cdatind ueId="0" lcId="4"/>
         <tapa.rgu.cdatind ueId="1" lcId="4"/>
         <tapa.rgu.cdatind ueId="2" lcId="4"/>
      </tapa.expset>

      # Send BO for Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="0"/>
      </tapa.send>
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="1"/>
      </tapa.send>
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="2"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # Expect staInd from MAC to RLC for Msg4 
      <tapa.expset>
         <tapa.rgu.cstaind lcId="4" ueId="0"/>
         <tapa.rgu.cstaind lcId="4" ueId="1"/>
         <tapa.rgu.cstaind lcId="4" ueId="2"/>
      </tapa.expset>
      
      # Send Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cdatreq ueId="0" lcId="4" lcType="3" />
      </tapa.send>
      <tapa.send>
         <tapa.rgu.cdatreq ueId="1" lcId="4" lcType="3" />
      </tapa.send>
      <tapa.send>
         <tapa.rgu.cdatreq ueId="2" lcId="4" lcType="3" />
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # Expect Msg4 from MAC to PHY.
      <tapa.expset>
        <tapa.tfu.cntrl.req spId="1">
           <tapa.tfu.pdcch.cntrl.req ueId="0" saveTo="1"/>
           <tapa.tfu.pdcch.cntrl.req ueId="1" saveTo="2"/>
           <tapa.tfu.pdcch.cntrl.req ueId="2" saveTo="3"/>
        </tapa.tfu.cntrl.req>
        <tapa.tfu.dat.req>
           <tapa.tfu.pdsch.dat.req saveTo="4" use="1" ueId="0" chkCcchSh="TRUE"/>
           <tapa.tfu.pdsch.dat.req saveTo="5" use="2" ueId="1" chkCcchSh="TRUE"/>
           <tapa.tfu.pdsch.dat.req saveTo="6" use="3" ueId="2" chkCcchSh="TRUE"/>
        </tapa.tfu.dat.req>   
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="4"/>
      </tapa.send>
     
      #Recv Hq Recp Req for Msg4 
      <tapa.expset>
        <tapa.tfu.recp.req numRntis="3">
           <tapa.tfu.hq.recp.req ueId="0"/>
           <tapa.tfu.hq.recp.req ueId="1"/>
           <tapa.tfu.hq.recp.req ueId="2"/>
        </tapa.tfu.recp.req>   
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="3" />
      </tapa.send>

      # Send ACK as feedback for Msg4. 
      <tapa.send>
        <tapa.tfu.hq.ind>
           <tapa.tfu.hq ueId="0"/>
           <tapa.tfu.hq ueId="1"/>
           <tapa.tfu.hq ueId="2"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>

      # Send UE config request
      <tapa.send>
        <tapa.crg.cfgreq.cfg.ue ueId="0"/>
      </tapa.send>
      <tapa.send>
        <tapa.crg.cfgreq.cfg.ue ueId="1" />
      </tapa.send>
      <tapa.send>
        <tapa.crg.cfgreq.cfg.ue ueId="2" />
      </tapa.send>

      # Expect success in cfg cfm
      <tapa.expset>
         <tapa.crg.cfgcfm ueId="0"/>
         <tapa.crg.cfgcfm ueId="1"/>
         <tapa.crg.cfgcfm ueId="2"/>
      </tapa.expset>
      
      # Send UE config request
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.ue ueId="0" instId="5" 
            aprdModeEnumPres = "TRUE" aprdModeEnum="RGAC_RGR_APRD_CQI_MOD20" />
      </tapa.send>
      <tapa.send>
        <tapa.rgr.cfgreq.cfg.ue ueId="1" instId="5"
            aprdModeEnumPres = "TRUE" aprdModeEnum="RGAC_RGR_APRD_CQI_MOD20" />
      </tapa.send>
      <tapa.send>
        <tapa.rgr.cfgreq.cfg.ue ueId="2" instId="5"
            aprdModeEnumPres = "TRUE" aprdModeEnum="RGAC_RGR_APRD_CQI_MOD30" />
      </tapa.send>

      # Send TTI to apply the config
      <tapa.send>
         <tapa.tfu.tti.ind/>
      </tapa.send>

      # Expect success in cfg cfm
      <tapa.expset>
         <tapa.rgr.cfgCfm ueId="0" instId="5"/>
         <tapa.rgr.cfgCfm ueId="1" instId="5"/>
         <tapa.rgr.cfgCfm ueId="2" instId="5"/>
      </tapa.expset>
   
   </tapa.steps>

</tapa.command>

#
#
#       Command: tapa.rg.cellInit.allRaOccns
#
#       Desc:    Commands to LTEMAC to Initialize CELL
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.cellInit.allRaOccns">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize CELL
      </tapa.desc>

      <tapa.longdesc>
         "Binding RGR and CRG SAPS, Creatting CELL in CRG Interface, creating 
         common logical channels(BCCH/BCH, BCCH/DLSCH, PCCH, CCCH) and RGR
         CELL configuration for schedular related information"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      #Send Bind Request for CRG SAP 
      <tapa.send>
         <tapa.crg.bndreq/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.crg.bndcfm/>
      </tapa.expect>
      
      #Send Bind Request for RGR SAP 
      <tapa.send>
         <tapa.rgr.bndreq instId="5"/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgr.bndcfm/>
      </tapa.expect>
      #Send Bind Request for RGR SAP 
      <tapa.send>
         <tapa.rgu.bndreq/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgu.bndcfm/>
      </tapa.expect>

 
      #<tapa.rg.dbgInitAll/>
      #Expect NOK_DONE Control Confirm from LTE MAC
      #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.cntrlreq suId="0" spId="0" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>
      
      <tapa.expect>
         <tapa.lrg.cntrlcfm status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL"/>
      </tapa.expect>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.bndreq instId="0"/>
      </tapa.expect>
      
      #<tapa.rg.dbgDeInitAll/>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.bndcfm suId="0" instId="0"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm/>
      </tapa.expect>

      #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.schcntrlreq instId="5" suId="0" spId="0" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>
      
      <tapa.expect>
         <tapa.lrg.schcntrlcfm status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL" instId="5"/>
      </tapa.expect>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.sch.bndreq instId="5" spId="1"/>
      </tapa.expect>
      
      #<tapa.rg.dbgDeInitAll/>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.sch.bndcfm suId="0" instId="5" spId="1"/>
      </tapa.send>

      
      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm instId="5"/>
      </tapa.expect>

      #Send CRG Cell Configuration
      <tapa.send>
         <tapa.crg.cfgreq.cfg.cell/>
      </tapa.send>
      

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #<tapa.rg.dbgDeInitAll/>

      #Send Common Logical Channel Configuration BCCH->BCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="1" dir="1" lcType="1" dlTrchType="1"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="2" dir="1" lcType="1"
            dlTrchType="3"/>
      </tapa.send>
      
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>
      
      #Send Common Logical Channel Configuration PCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  crnti="1234" lcId="3" dir="1" lcType="2"/>
      </tapa.send>
     
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration CCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  crnti="1234" lcId="4" dir="3" lcType="3"
            dlTrchType="3" ulTrchType="5"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="5" dir="1" lcType="1"
            dlTrchType="3"/>
      </tapa.send>
      
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Sending RGR ENB Configuration
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.enb instId="5"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

      #Sending RGR CELL Configuration
      #cmnLcInfo = "lcId:lcType:dir:dlTrchType:ulTrchType:...."
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.cell instId="5" numCmnLc="5"
         cmnLcInfo="1:1:1:1:0:2:1:1:3:0:3:2:1:0:0:4:3:3:3:3:5:1:1:3:0" raOccSubFrameNum="0:1:2:3:4:5:6:7:8:9"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

   </tapa.steps>

</tapa.command>

#
#
#       Command: tapa.rg.cellInit.oneRaOccn
#
#       Desc:    Commands to LTEMAC to Initialize CELL
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.cellInit.oneRaOccn">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize CELL
      </tapa.desc>

      <tapa.longdesc>
         "Binding RGR and CRG SAPS, Creatting CELL in CRG Interface, creating 
         common logical channels(BCCH/BCH, BCCH/DLSCH, PCCH, CCCH) and RGR
         CELL configuration for schedular related information"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      #Send Bind Request for CRG SAP 
      <tapa.send>
         <tapa.crg.bndreq/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.crg.bndcfm/>
      </tapa.expect>
      
      #Send Bind Request for RGR SAP 
      <tapa.send>
         <tapa.rgr.bndreq instId="5"/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgr.bndcfm/>
      </tapa.expect>
      #Send Bind Request for RGR SAP 
      <tapa.send>
         <tapa.rgu.bndreq/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgu.bndcfm/>
      </tapa.expect>

 
      #<tapa.rg.dbgInitAll/>
      #Expect NOK_DONE Control Confirm from LTE MAC
      #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.cntrlreq suId="0" spId="0" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.cntrlcfm status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL"/>
      </tapa.expect>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.bndreq instId="0"/>
      </tapa.expect>
      
      #<tapa.rg.dbgDeInitAll/>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.bndcfm suId="0" instId="0"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm/>
      </tapa.expect>

      #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.schcntrlreq instId="5" suId="0" spId="0" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>
      
      <tapa.expect>
         <tapa.lrg.schcntrlcfm status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL" instId="5"/>
      </tapa.expect>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.sch.bndreq instId="5" spId="1"/>
      </tapa.expect>
      
      #<tapa.rg.dbgDeInitAll/>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.sch.bndcfm suId="0" instId="5" spId="1"/>
      </tapa.send>

      
      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm instId="5"/>
      </tapa.expect>

      #Send CRG Cell Configuration
      <tapa.send>
         <tapa.crg.cfgreq.cfg.cell/>
      </tapa.send>
      

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #<tapa.rg.dbgDeInitAll/>

      #Send Common Logical Channel Configuration BCCH->BCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="1" dir="1" lcType="1" dlTrchType="1"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="2" dir="1" lcType="1"
            dlTrchType="3"/>
      </tapa.send>
      
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>
      
      #Send Common Logical Channel Configuration PCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  crnti="1234" lcId="3" dir="1" lcType="2"/>
      </tapa.send>
     
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration CCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  crnti="1234" lcId="4" dir="3" lcType="3"
            dlTrchType="3" ulTrchType="5"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="5" dir="1" lcType="1"
            dlTrchType="3"/>
      </tapa.send>
      
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Sending RGR ENB Configuration
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.enb instId="5"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

      #Sending RGR CELL Configuration
      #cmnLcInfo = "lcId:lcType:dir:dlTrchType:ulTrchType:...."
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.cell instId="5" numCmnLc="5"
         cmnLcInfo="1:1:1:1:0:2:1:1:3:0:3:2:1:0:0:4:3:3:3:3:5:1:1:3:0" raOccSubFrameNum="3"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

   </tapa.steps>

</tapa.command>

#
#
#       Command: tapa.rg.cellInit.dlSched.tddraocc
#
#       Desc:    Commands to LTEMAC to Initialize CELL 
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.cellInit.dlSched.tddraocc">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize CELL
      </tapa.desc>

      <tapa.longdesc>
         "Binding RGR and CRG SAPS, Creatting CELL in CRG Interface, creating 
         common logical channels(BCCH/BCH, BCCH/DLSCH, PCCH, CCCH) and RGR
         CELL configuration for schedular related information"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      #Send Bind Request for CRG SAP 
      <tapa.send>
         <tapa.crg.bndreq/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.crg.bndcfm/>
      </tapa.expect>

      #Send Bind Request for RGR SAP 
      <tapa.send>
         <tapa.rgr.bndreq instId="5"/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgr.bndcfm/>
      </tapa.expect>

 
      #Send Bind Request for RGR SAP 
      <tapa.send>
         <tapa.rgu.bndreq/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgu.bndcfm/>
      </tapa.expect>

 
      #<tapa.rg.dbgInitAll/>
      #Expect NOK_DONE Control Confirm from LTE MAC
      #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.cntrlreq suId="0" spId="0" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.cntrlcfm status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL"/>
      </tapa.expect>
      
      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.bndreq/>
      </tapa.expect>
      
      #<tapa.rg.dbgDeInitAll/>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.bndcfm suId="0"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm/>
      </tapa.expect>

      #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.schcntrlreq instId="5" suId="0" spId="0" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>
      
      <tapa.expect>
         <tapa.lrg.schcntrlcfm status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL" instId="5"/>
      </tapa.expect>
      

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.sch.bndreq instId="5" spId="1"/>
      </tapa.expect>
      
      #<tapa.rg.dbgDeInitAll/>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.sch.bndcfm suId="0" instId="5" spId="1"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm instId="5"/>
      </tapa.expect>

      #Send CRG Cell Configuration
      <tapa.send>
         <tapa.crg.cfgreq.cfg.cell dlTotalBw="100" ulTotalBw="50"/>
      </tapa.send>
      

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #<tapa.rg.dbgDeInitAll/>

      #Send Common Logical Channel Configuration BCCH->BCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="1" dir="1" lcType="1" dlTrchType="1"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="2" dir="1" lcType="1"
            dlTrchType="3"/>
      </tapa.send>
      
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>
      
      #Send Common Logical Channel Configuration PCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  crnti="1234" lcId="3" dir="1" lcType="2"/>
      </tapa.send>
     
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration CCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  crnti="1234" lcId="4" dir="3" lcType="3"
            dlTrchType="3" ulTrchType="5"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="5" dir="1" lcType="1"
            dlTrchType="3"/>
      </tapa.send>
      
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Sending RGR ENB Configuration
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.enb instId="5"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

      #Sending RGR CELL Configuration
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.cell instId="5" dlTotalBw="100" ulTotalBw="50"  numCmnLc="5"
         cmnLcInfo="1:1:1:1:0:2:1:1:3:0:3:2:1:0:0:4:3:3:3:3:5:1:1:3:0"
         numRsc="2" freqIdxLst="0:0" sfnLst="1:1" halfFrmLst="0:1"
         ulStartSfIdxLst="0:0" />
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

   </tapa.steps>

</tapa.command>

#
#
#       Command: tapa.rg.cellInit.dlSched.tddsplraocc
#
#       Desc:    Commands to LTEMAC to Initialize CELL 
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.cellInit.dlSched.tddsplraocc">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize CELL
      </tapa.desc>

      <tapa.longdesc>
         "Binding RGR and CRG SAPS, Creatting CELL in CRG Interface, creating 
         common logical channels(BCCH/BCH, BCCH/DLSCH, PCCH, CCCH) and RGR
         CELL configuration for schedular related information"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      #Send Bind Request for CRG SAP 
      <tapa.send>
         <tapa.crg.bndreq/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.crg.bndcfm/>
      </tapa.expect>

      #Send Bind Request for RGR SAP 
      <tapa.send>
         <tapa.rgr.bndreq instId="5"/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgr.bndcfm/>
      </tapa.expect>

 
      #Send Bind Request for RGR SAP 
      <tapa.send>
         <tapa.rgu.bndreq/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgu.bndcfm/>
      </tapa.expect>

 
      #<tapa.rg.dbgInitAll/>
      #Expect NOK_DONE Control Confirm from LTE MAC
      #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.cntrlreq suId="0" spId="0" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.cntrlcfm status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL"/>
      </tapa.expect>
      
      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.bndreq/>
      </tapa.expect>
      
      #<tapa.rg.dbgDeInitAll/>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.bndcfm suId="0"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm/>
      </tapa.expect>

      #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.schcntrlreq instId="5" suId="0" spId="0" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>
      
      <tapa.expect>
         <tapa.lrg.schcntrlcfm status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL" instId="5"/>
      </tapa.expect>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.sch.bndreq instId="5" spId="1"/>
      </tapa.expect>
      
      #<tapa.rg.dbgDeInitAll/>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.sch.bndcfm suId="0" instId="5" spId="1"/>
      </tapa.send>

      
      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm instId="5"/>
      </tapa.expect>

      #Send CRG Cell Configuration
      <tapa.send>
         <tapa.crg.cfgreq.cfg.cell dlTotalBw="100" ulTotalBw="50"/>
      </tapa.send>
      

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #<tapa.rg.dbgDeInitAll/>

      #Send Common Logical Channel Configuration BCCH->BCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="1" dir="1" lcType="1" dlTrchType="1"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="2" dir="1" lcType="1"
            dlTrchType="3"/>
      </tapa.send>
      
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>
      
      #Send Common Logical Channel Configuration PCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  crnti="1234" lcId="3" dir="1" lcType="2"/>
      </tapa.send>
     
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration CCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  crnti="1234" lcId="4" dir="3" lcType="3"
            dlTrchType="3" ulTrchType="5"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="5" dir="1" lcType="1"
            dlTrchType="3"/>
      </tapa.send>
      
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Sending RGR ENB Configuration
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.enb instId="5"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

      #Sending RGR CELL Configuration
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.cell instId="5" dlTotalBw="100" ulTotalBw="50"  numCmnLc="5"
         cmnLcInfo="1:1:1:1:0:2:1:1:3:0:3:2:1:0:0:4:3:3:3:3:5:1:1:3:0"
         numRsc="2" freqIdxLst="0:0" sfnLst="1:1" halfFrmLst="0:1"
         ulStartSfIdxLst="10:10" />
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

   </tapa.steps>

</tapa.command>

#
#
#       Command: tapa.rg.UeInitOpt
#
#       Desc:    Commands to LTEMAC to Initialize UE for DL UE timing Optimization
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.UeInitOpt">

# Document subsection
<tapa.doc>

   <tapa.desc>
      "Commands to LTEMAC to Initialize UE for DL UE timing Optimization"
   </tapa.desc>

   <tapa.longdesc>
      "This command will finish complete RA process and does the UE
      Configuration"
   </tapa.longdesc>
      
</tapa.doc>


# Test section
<tapa.steps>

<tapa.tfu.directive ulDeltaPrsnt="TRUE"/>

# Send RaReqInd for one rapId 
# PHY --> MAC
<tapa.send>
 <tapa.tfu.tti.ind TTI="1" numTti="1"/>
</tapa.send>

# PHY --> MAC
<tapa.send>
  <tapa.tfu.rareq.ind numRaRnti="1" suId="0">
    <tapa.tfu.rareq  numRapId="1" rapIds="1" timingAdvs="3"
         tpcs="1" cqiPres="TRUE" cqis="4"/>
  </tapa.tfu.rareq.ind>
</tapa.send>

# Ue starts expecting raResp after 3 subframes within the raResp window.
# In this TC, it shall expect raResp in the first subframe after 3 Ttis.
# PHY --> MAC
<tapa.send>
  <tapa.tfu.tti.ind TTI="2" numTti="1"/>
</tapa.send>

# Expect RaResp for the rapId sent in RaReq
# MAC --> PHY 
<tapa.expset>

 <tapa.tfu.cntrl.req numCntrlReq="1" spId="1">
   <tapa.tfu.pdcch.cntrl.req/>
 </tapa.tfu.cntrl.req>
 
 <tapa.tfu.dat.req datReqs="1">
   <tapa.tfu.rarsp.req />
 </tapa.tfu.dat.req>

</tapa.expset>

# PHY --> MAC
<tapa.send>
<tapa.tfu.tti.ind TTI="8" numTti="6"/>
</tapa.send>

# MAC --> PHY 
<tapa.expect>
  
 <tapa.tfu.recp.req numRntis="1" spId="1" >
   <tapa.tfu.msg3.recp.req/>
 </tapa.tfu.recp.req>

</tapa.expect>

# PHY --> MAC
<tapa.send>
   <tapa.tfu.tti.ind TTI="11" numTti="3"/>
</tapa.send>

#Send CRC for Msg3
# PHY --> MAC
<tapa.send>
 <tapa.tfu.crc.ind>
  <tapa.tfu.crc isFailure="FALSE"/>
 </tapa.tfu.crc.ind>
</tapa.send>

# PHY --> MAC
<tapa.send>
   <tapa.tfu.tti.ind TTI="12" numTti="1"/>
</tapa.send>

# Expect HARQ ACK in PHICH For MSG3
# MAC --> PHY
<tapa.expect>
   <tapa.tfu.cntrl.req numCntrlReq="1" spId="1">
      <tapa.tfu.phich.cntrl.req isAck="TRUE"/>
   </tapa.tfu.cntrl.req>
</tapa.expect>

# Send Message3 after receiving Message3 reception req.
# rg004.201 Fixed the CCCH sdu size 
# PHY --> MAC
<tapa.send>
    <tapa.tfu.dat.ind datInds="1">
       <tapa.tfu.dat isCcchSdu="TRUE" sduSize="6" />
    </tapa.tfu.dat.ind>      
</tapa.send>   


# Expect Message3 datReq on CCCH at RGU.
# MAC --> RLC
<tapa.expect>
   <tapa.rgu.cdatind lcId="4"/>
</tapa.expect>

# Send BO for Msg4 on RGU. 
# RLC --> MAC
 <tapa.send>
    <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"/>
 </tapa.send>

 #RNT:changed here numTti to 2 from 1
 # PHY -->. MAC
<tapa.send>
   <tapa.tfu.tti.ind TTI="13" numTti="1"/> 
</tapa.send>

# Expect CStatInd For MSG4
# MAC --> RLC
<tapa.expset>
   <tapa.rgu.cstaind lcId="4"/>
</tapa.expset>

# Send Msg4 on RGU. 
# RLC --> MAC
<tapa.send>
   <tapa.rgu.cdatreq lcId="4" lcType="3" />
</tapa.send>

# Expect Msg4 from MAC to PHY.
# MAC --> PHY
<tapa.expset>
  <tapa.tfu.cntrl.req numCntrlReq="1" spId="1">
     <tapa.tfu.pdcch.cntrl.req saveTo="1"/>
  </tapa.tfu.cntrl.req>
  <tapa.tfu.dat.req datReqs="1">
     <tapa.tfu.pdsch.dat.req use="1" validate="FALSE"/>
  </tapa.tfu.dat.req>   
</tapa.expset>

<tapa.send>
   <tapa.tfu.tti.ind TTI="17" numTti="4"/>
</tapa.send>

# Recv Hq Recp Req for Msg4.
# MAC --> PHY
<tapa.expect>
  <tapa.tfu.recp.req numRntis="1" spId="1">
     <tapa.tfu.hq.recp.req/>
  </tapa.tfu.recp.req>   
</tapa.expect>

#RNT:changed here numTti to 2 from 3
# PHY -->MAC
<tapa.send>
   <tapa.tfu.tti.ind TTI="20" numTti="3" />
</tapa.send>

# Send ACK as feedback for Msg4. 
# PHY -->MAC
<tapa.send>
 <tapa.tfu.hq.ind hqInds="1">
  <tapa.tfu.hq />
 </tapa.tfu.hq.ind>   
</tapa.send>

# Send UE config request
# RRC -->MAC
<tapa.send>
 <tapa.crg.cfgreq.cfg.ue/>
</tapa.send>

# Expect success in cfg cfm
<tapa.expect>
 <tapa.crg.cfgcfm/>
</tapa.expect>

# Send UE config request
<tapa.send>
 <tapa.rgr.cfgreq.cfg.ue instId="5"/>
</tapa.send>


# Send TTI to apply the config
<tapa.send>
 <tapa.tfu.tti.ind numTti="1"/>
</tapa.send>

# Expect success in cfg cfm
<tapa.expect>
 <tapa.rgr.cfgCfm instId="5"/>
</tapa.expect>

</tapa.steps>
</tapa.command>
#
#
#       Command: tapa.rg.UeInit.grp16
#
#       Desc:    Commands to LTEMAC to Initialize UE
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd16.xml
#
#
<tapa.command id="tapa.rg.UeInit.grp16">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize UE
      </tapa.desc>

      <tapa.longdesc>
         "This command will finish complete RA process and does the UE
         Configuration"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>

      <tapa.tfu.directive ulDeltaPrsnt="TRUE"/>
         # Send RaReqInd for one rapId 
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>
      <tapa.send>
         <tapa.tfu.rareq.ind numRaRnti="1" suId="0">
            <tapa.tfu.rareq  numRapId="1" rapIds="1" timingAdvs="3"
               tpcs="1" cqiPres="TRUE" cqis="4"/>
         </tapa.tfu.rareq.ind>
      </tapa.send>

      # Ue starts expecting raResp after 3 subframes within the raResp window.
      # In this TC, it shall expect raResp in the first subframe after 3 Ttis.
      <tapa.send lc="TRUE">
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>
      <tapa.send lc="TRUE">
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>
      
      # Expect RaResp for the rapId sent in RaReq
      <tapa.expset>
        <tapa.tfu.dat.req datReqs="1">
           <tapa.tfu.rarsp.req />
        </tapa.tfu.dat.req>
        <tapa.tfu.cntrl.req numCntrlReq="1" spId="1">
           <tapa.tfu.pdcch.cntrl.req/>
        </tapa.tfu.cntrl.req>
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="6"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req numRntis="1" spId="1" >
            <tapa.tfu.msg3.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>
   
   <tapa.send>
      <tapa.tfu.tti.ind numTti="3"/>
   </tapa.send>

   #Send CRC for Msg3
   <tapa.send>
      <tapa.tfu.crc.ind>
         <tapa.tfu.crc isFailure="FALSE"/>
      </tapa.tfu.crc.ind>
   </tapa.send>

   <tapa.send lc="TRUE">
      <tapa.tfu.tti.ind numTti="1"/>
   </tapa.send>

   # Expect HARQ ACK in PHICH For MSG3
   <tapa.expect>
      <tapa.tfu.cntrl.req numCntrlReq="1" spId="1">
         <tapa.tfu.phich.cntrl.req isAck="TRUE"/>
      </tapa.tfu.cntrl.req>
   </tapa.expect>

   # Send Message3 after receiving Message3 reception req.
   <tapa.send>
       <tapa.tfu.dat.ind datInds="1">
          <tapa.tfu.dat isCcchSdu="TRUE" sduSize="6"  addPhr="TRUE" phr="46" />
       </tapa.tfu.dat.ind>      
   </tapa.send>   
   

   # Expect Message3 datReq on CCCH at RGU.
   <tapa.expect>
      <tapa.rgu.cdatind lcId="4"/>
   </tapa.expect>
   
    # Send BO for Msg4 on RGU. 
    <tapa.send lc="TRUE">
       <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"/>
    </tapa.send>

   <tapa.send lc="TRUE">
      <tapa.tfu.tti.ind numTti="1"/> 
   </tapa.send>

   # Expect CStatInd For MSG4
   <tapa.expset>
      <tapa.rgu.cstaind lcId="4"/>
   </tapa.expset>

   # Send Msg4 on RGU. 
   <tapa.send>
      <tapa.rgu.cdatreq lcId="4" lcType="3" />
   </tapa.send>

   <tapa.send lc="TRUE">
      <tapa.tfu.tti.ind numTti="1"/>
   </tapa.send>

   # Expect Msg4 from MAC to PHY.
   <tapa.expset>
     <tapa.tfu.dat.req datReqs="1">
        <tapa.tfu.pdsch.dat.req use="1" validate="FALSE"/>
     </tapa.tfu.dat.req>   
     <tapa.tfu.cntrl.req numCntrlReq="1" spId="1">
        <tapa.tfu.pdcch.cntrl.req saveTo="1"/>
     </tapa.tfu.cntrl.req>
   </tapa.expset>

   <tapa.send>
      <tapa.tfu.tti.ind numTti="4"/>
   </tapa.send>
  
   # Recv Hq Recp Req for Msg4. 
   <tapa.expect>
     <tapa.tfu.recp.req numRntis="1" spId="1">
        <tapa.tfu.hq.recp.req/>
     </tapa.tfu.recp.req>   
   </tapa.expect>

   <tapa.send>
      <tapa.tfu.tti.ind numTti="3" />
   </tapa.send>

   # Send ACK as feedback for Msg4. 
   <tapa.send>
     <tapa.tfu.hq.ind hqInds="1">
        <tapa.tfu.hq />
     </tapa.tfu.hq.ind>   
  </tapa.send>

   # Send UE config request
   <tapa.send>
     <tapa.crg.cfgreq.cfg.ue/>
   </tapa.send>

   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.crg.cfgcfm/>
   </tapa.expect>

   # Send UE config request
   <tapa.send>
     <tapa.rgr.cfgreq.cfg.ue instId="5"/>
   </tapa.send>


   # Send TTI to apply the config
   <tapa.send>
      <tapa.tfu.tti.ind/>
   </tapa.send>

   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.rgr.cfgCfm instId="5"/>
   </tapa.expect>

   
   #<tapa.rg.dbgDeInitAll/>
   </tapa.steps>

</tapa.command>

#
#
#       Command: tapa.rg.macDeInit.grp16
#
#       Desc:    Layer Manager Commands to LTEMAC for Layer Shutdown
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.macDeInit.grp16">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Layer Manager Commands to LTEMAC for Layer Shutdown"
      </tapa.desc>

      <tapa.longdesc>
         "Sending Control request to LTEMAC for Shutdown amd then send UnBind Request 
         to RGR, CRG, and RGU SAp's"
         sending a cron LTEMAC"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      # Send UnBind Request to RGU SAP
      <tapa.send>
         <tapa.rgu.ubndreq/>
      </tapa.send>
      
      # Send UnBind Request to CRG SAP
      <tapa.send>
         <tapa.crg.ubndreq/>
      </tapa.send>
      
      # Send UnBind Request to SCH SAP
      <tapa.send lc="TRUE">
         <tapa.lrg.schcntrlreq instId="5" elmntType="STGEN" action="ASHUTDOWN"/>
      </tapa.send>
      
      #Send Control Request to LTEMAC for ShutDown 
      <tapa.send lc="TRUE">
         <tapa.lrg.cntrlreq action="ASHUTDOWN" elmntType="STGEN" />
      </tapa.send>

      # Expect Dummy TFU UnBind Request
      <tapa.expect>
         <tapa.tfu.sch.ubndreq instId="5" spId="1"/>
      </tapa.expect>

      <tapa.expect>
         <tapa.lrg.schcntrlcfm/>
      </tapa.expect>

      # Expect Dummy TFU UnBind Request
      <tapa.expect>
         <tapa.tfu.ubndreq/>
      </tapa.expect>

      # Expect Cntrl Confirm
      <tapa.expect>
         <tapa.lrg.cntrlcfm/>
      </tapa.expect>

      <tapa.delay delay="1"/>      
   </tapa.steps>
</tapa.command>

#
#
#       Command: tapa.rg.rach.grp16
#       
#       Desc:    Commands to LTEMAC to perform RACH
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.rach.grp16">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to perform RACH
      </tapa.desc>

      <tapa.longdesc>
         "This command will finish complete RA process"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      <tapa.tfu.directive ulDeltaPrsnt="TRUE"/>
         # Send RaReqInd for one rapId 
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.rareq.ind numRaRnti="1" suId="0">
            <tapa.tfu.rareq raRnti="10" numRapId="1" rapIds="1" timingAdvs="3"
               tpcs="1" cqiPres="TRUE" cqis="4"/>
         </tapa.tfu.rareq.ind>
      </tapa.send>

      # Ue starts expecting raResp after 3 subframes within the raResp window.
      # In this TC, it shall expect raResp in the first subframe after 3 Ttis.
      <tapa.send lc="TRUE">
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>
      
      <tapa.send lc="TRUE">
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>
      
      # Expect RaResp for the rapId sent in RaReq
      <tapa.expset>
        <tapa.tfu.dat.req datReqs="1">
           <tapa.tfu.rarsp.req raRnti="10"/>
        </tapa.tfu.dat.req>
        <tapa.tfu.cntrl.req numCntrlReq="1" spId="1">
           <tapa.tfu.pdcch.cntrl.req/>
        </tapa.tfu.cntrl.req>
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="6"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req numRntis="1" spId="1" >
            <tapa.tfu.msg3.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>
   
   <tapa.send>
      <tapa.tfu.tti.ind numTti="3"/>
   </tapa.send>

   #Send CRC for Msg3
   <tapa.send>
      <tapa.tfu.crc.ind>
         <tapa.tfu.crc ueId="0" isFailure="FALSE"/>
      </tapa.tfu.crc.ind>
   </tapa.send>

   <tapa.send>
      <tapa.tfu.tti.ind numTti="1"/>
   </tapa.send>

   # Expect HARQ ACK in PHICH For MSG3
   <tapa.expect>
      <tapa.tfu.cntrl.req numCntrlReq="1" spId="1">
         <tapa.tfu.phich.cntrl.req isAck="TRUE"/>
      </tapa.tfu.cntrl.req>
   </tapa.expect>

   # Send Message3 after receiving Message3 reception req.
   <tapa.send>
       <tapa.tfu.dat.ind datInds="1">
          <tapa.tfu.dat isCcchSdu="TRUE" sduSize="6" ueId="0"/>
       </tapa.tfu.dat.ind>      
   </tapa.send>   
   

   # Expect Message3 datReq on CCCH at RGU.
   <tapa.expect>
      <tapa.rgu.cdatind ueId="0" lcId="4"/>
   </tapa.expect>
   
    # Send BO for Msg4 on RGU. 
    <tapa.send lc="TRUE">
       <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"/>
    </tapa.send>

   <tapa.send lc="TRUE">
      <tapa.tfu.tti.ind numTti="1"/> 
   </tapa.send>

   # Expect CStatInd For MSG4
   <tapa.expset>
      <tapa.rgu.cstaind lcId="4"/>
   </tapa.expset>

   # Send Msg4 on RGU. 
   <tapa.send lc="TRUE">
      <tapa.rgu.cdatreq ueId="0" lcId="4" lcType="3" />
   </tapa.send>

   <tapa.send lc="TRUE">
      <tapa.tfu.tti.ind numTti="1"/>
   </tapa.send>

   # Expect Msg4 from MAC to PHY.
   <tapa.expset>
     <tapa.tfu.dat.req datReqs="1">
        <tapa.tfu.pdsch.dat.req use="1" validate="FALSE"/>
     </tapa.tfu.dat.req>   
     <tapa.tfu.cntrl.req numCntrlReq="1" spId="1">
        <tapa.tfu.pdcch.cntrl.req saveTo="1"/>
     </tapa.tfu.cntrl.req>
   </tapa.expset>

   <tapa.send>
      <tapa.tfu.tti.ind numTti="4"/>
   </tapa.send>
  
   # Recv Hq Recp Req for Msg4. 
   <tapa.expect>
     <tapa.tfu.recp.req numRntis="1" spId="1">
        <tapa.tfu.hq.recp.req/>
     </tapa.tfu.recp.req>   
   </tapa.expect>

   <tapa.send>
      <tapa.tfu.tti.ind numTti="3" />
   </tapa.send>

   # Send ACK as feedback for Msg4. 
   <tapa.send>
     <tapa.tfu.hq.ind hqInds="1">
        <tapa.tfu.hq ueId="0"/>
     </tapa.tfu.hq.ind>   
  </tapa.send>
   
   </tapa.steps>

</tapa.command>

#
#
#       Command: tapa.rg.cellInit.upd
#
#       Desc:    Commands to LTEMAC to Initialize CELL
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.cellInit.upd">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize CELL
      </tapa.desc>

      <tapa.longdesc>
         "Binding RGR and CRG SAPS, Creatting CELL in CRG Interface, creating 
         common logical channels(BCCH/BCH, BCCH/DLSCH, PCCH, CCCH) and RGR
         CELL configuration for schedular related information"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      #Send Bind Request for CRG SAP 
      <tapa.send>
         <tapa.crg.bndreq/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.crg.bndcfm/>
      </tapa.expect>
      
      #Send Bind Request for RGR SAP 
      <tapa.send>
         <tapa.rgr.bndreq instId="5"/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgr.bndcfm/>
      </tapa.expect>
      #Send Bind Request for RGR SAP 
      <tapa.send>
         <tapa.rgu.bndreq/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgu.bndcfm/>
      </tapa.expect>

 
      #<tapa.rg.dbgInitAll/>
      #Expect NOK_DONE Control Confirm from LTE MAC
      #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.cntrlreq suId="0" spId="0" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>
      
      <tapa.expect>
         <tapa.lrg.cntrlcfm status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL"/>
      </tapa.expect>


      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.bndreq instId="0"/>
      </tapa.expect>
      
      #<tapa.rg.dbgDeInitAll/>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.bndcfm suId="0" instId="0"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm/>
      </tapa.expect>

      #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.schcntrlreq instId="5" suId="0" spId="0" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.schcntrlcfm status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL" instId="5"/>
      </tapa.expect>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.sch.bndreq instId="5" spId="1"/>
      </tapa.expect>
      
      #<tapa.rg.dbgDeInitAll/>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.sch.bndcfm suId="0" instId="5" spId="1"/>
      </tapa.send>

      
      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm instId="5"/>
      </tapa.expect>

      #Send CRG Cell Configuration
      <tapa.send>
         <tapa.crg.cfgreq.cfg.cell/>
      </tapa.send>
      

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #<tapa.rg.dbgDeInitAll/>

      #Send Common Logical Channel Configuration BCCH->BCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="1" dir="1" lcType="1" dlTrchType="1"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH1
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="2" dir="1" lcType="1"
            dlTrchType="3"/>
      </tapa.send>
      
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>
      
      #Send Common Logical Channel Configuration PCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  crnti="1234" lcId="3" dir="1" lcType="2"/>
      </tapa.send>
     
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration CCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  crnti="1234" lcId="4" dir="3" lcType="3"
            dlTrchType="3" ulTrchType="5"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH2
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="5" dir="1" lcType="1"
            dlTrchType="3"/>
      </tapa.send>
      
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Sending RGR ENB Configuration
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.enb instId="5"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

      #Sending RGR CELL Configuration
      #cmnLcInfo = "lcId:lcType:dir:dlTrchType:ulTrchType:...."
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.cell instId="5" numCmnLc="5"
         cmnLcInfo="1:1:1:1:0:2:1:1:3:0:3:2:1:0:0:4:3:3:3:5:5:1:1:3:0"
         numSubbands="8" subbandStart="1" msgSizeGrpA="100"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

   </tapa.steps>

</tapa.command>
#
#
#       Command: tapa.rg.cellInit.mwcDemo
#
#       Desc:    Commands to LTEMAC to Initialize CELL for demo purpose
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.cellInit.mwcDemo">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize CELL
      </tapa.desc>

      <tapa.longdesc>
         "Binding RGR and CRG SAPS, Creatting CELL in CRG Interface, creating 
         common logical channels(BCCH/BCH, BCCH/DLSCH, PCCH, CCCH) and RGR
         CELL configuration for schedular related information"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      #Send Bind Request for CRG SAP 
      <tapa.send>
         <tapa.crg.bndreq/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.crg.bndcfm/>
      </tapa.expect>
      
      #Send Bind Request for RGR SAP 
      <tapa.send>
         <tapa.rgr.bndreq instId="5"/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgr.bndcfm/>
      </tapa.expect>
      #Send Bind Request for RGR SAP 
      <tapa.send>
         <tapa.rgu.bndreq/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgu.bndcfm/>
      </tapa.expect>

 
      #<tapa.rg.dbgInitAll/>
      #Expect NOK_DONE Control Confirm from LTE MAC
      #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.cntrlreq suId="0" spId="0" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>
      
      <tapa.expect>
         <tapa.lrg.cntrlcfm status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL"/>
      </tapa.expect>


      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.bndreq instId="0"/>
      </tapa.expect>
      
      #<tapa.rg.dbgDeInitAll/>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.bndcfm suId="0" instId="0"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm/>
      </tapa.expect>

      #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.schcntrlreq instId="5" suId="0" spId="0" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.schcntrlcfm status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL" instId="5"/>
      </tapa.expect>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.sch.bndreq instId="5" spId="1"/>
      </tapa.expect>
      
      #<tapa.rg.dbgDeInitAll/>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.sch.bndcfm suId="0" instId="5" spId="1"/>
      </tapa.send>

      
      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm instId="5"/>
      </tapa.expect>

      #Send CRG Cell Configuration
      <tapa.send>
         <tapa.crg.cfgreq.cfg.cell/>
      </tapa.send>
      

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #<tapa.rg.dbgDeInitAll/>

      #Send Common Logical Channel Configuration BCCH->BCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="1" dir="1" lcType="1" dlTrchType="1"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH1
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="2" dir="1" lcType="1"
            dlTrchType="3"/>
      </tapa.send>
      
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>
      
      #Send Common Logical Channel Configuration PCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  crnti="1234" lcId="3" dir="1" lcType="2"/>
      </tapa.send>
     
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration CCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  crnti="1234" lcId="4" dir="3" lcType="3"
            dlTrchType="3" ulTrchType="5"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH2
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch crnti="1234" lcId="5" dir="1" lcType="1"
            dlTrchType="3"/>
      </tapa.send>
      
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      #Sending RGR ENB Configuration
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.enb instId="5"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

   </tapa.steps>

</tapa.command>
#
#
#       Command: tapa.rg.UeInit.mwcDemo
#
#       Desc:    Commands to LTEMAC to Initialize UE
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.UeInit.mwcDemo">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize UE
      </tapa.desc>

      <tapa.longdesc>
         "This command will finish complete RA process and does the UE
         Configuration"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>

      <tapa.tfu.directive ulDeltaPrsnt="TRUE"/>
         # Send RaReqInd for one rapId 
      <!--tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send-->
      <tapa.send>
         <tapa.tfu.rareq.ind numRaRnti="1" suId="0">
            <tapa.tfu.rareq  numRapId="1" rapIds="1" timingAdvs="3"
               tpcs="1" cqiPres="TRUE" cqis="4"/>
         </tapa.tfu.rareq.ind>
      </tapa.send>

      # Ue starts expecting raResp after 3 subframes within the raResp window.
      # In this TC, it shall expect raResp in the first subframe after 3 Ttis.
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>
      
      # Expect RaResp for the rapId sent in RaReq
      <tapa.expset>
        <tapa.tfu.dat.req datReqs="1">
           <tapa.tfu.rarsp.req />
        </tapa.tfu.dat.req>
        <tapa.tfu.cntrl.req numCntrlReq="1" spId="1">
           <tapa.tfu.pdcch.cntrl.req/>
        </tapa.tfu.cntrl.req>
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="6"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req numRntis="1" spId="1" >
            <tapa.tfu.msg3.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>
   
   <tapa.send>
      <tapa.tfu.tti.ind numTti="3"/>
   </tapa.send>

   #Send CRC for Msg3
   <tapa.send>
      <tapa.tfu.crc.ind>
         <tapa.tfu.crc isFailure="FALSE"/>
      </tapa.tfu.crc.ind>
   </tapa.send>

   <tapa.send>
      <tapa.tfu.tti.ind numTti="1"/>
   </tapa.send>

   # Expect HARQ ACK in PHICH For MSG3
   <tapa.expect>
      <tapa.tfu.cntrl.req numCntrlReq="1" spId="1">
         <tapa.tfu.phich.cntrl.req isAck="TRUE"/>
      </tapa.tfu.cntrl.req>
   </tapa.expect>

   # Send Message3 after receiving Message3 reception req.
   # rg004.201 Fixed the CCCH sdu size 
   <tapa.send>
       <tapa.tfu.dat.ind datInds="1">
          <tapa.tfu.dat isCcchSdu="TRUE" sduSize="6" />
       </tapa.tfu.dat.ind>      
   </tapa.send>   
   

   # Expect Message3 datReq on CCCH at RGU.
   <tapa.expect>
      <tapa.rgu.cdatind lcId="4"/>
   </tapa.expect>
   
    # Send BO for Msg4 on RGU. 
    <tapa.send>
       <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"/>
    </tapa.send>

   <tapa.send>
      <tapa.tfu.tti.ind numTti="1"/> 
   </tapa.send>

   # Expect CStatInd For MSG4
   <tapa.expset>
      <tapa.rgu.cstaind lcId="4"/>
   </tapa.expset>

   # Send Msg4 on RGU. 
   <tapa.send>
      <tapa.rgu.cdatreq lcId="4" lcType="3" />
   </tapa.send>

   <tapa.send>
      <tapa.tfu.tti.ind numTti="1"/>
   </tapa.send>

   # Expect Msg4 from MAC to PHY.
   <tapa.expset>
     <tapa.tfu.dat.req datReqs="1">
        <tapa.tfu.pdsch.dat.req use="1" validate="FALSE"/>
     </tapa.tfu.dat.req>   
     <tapa.tfu.cntrl.req numCntrlReq="1" spId="1">
        <tapa.tfu.pdcch.cntrl.req saveTo="1"/>
     </tapa.tfu.cntrl.req>
   </tapa.expset>

   <tapa.send>
      <tapa.tfu.tti.ind numTti="4"/>
   </tapa.send>
  
   # Recv Hq Recp Req for Msg4. 
   <tapa.expect>
     <tapa.tfu.recp.req numRntis="1" spId="1">
        <tapa.tfu.hq.recp.req/>
     </tapa.tfu.recp.req>   
   </tapa.expect>

   <tapa.send>
      <tapa.tfu.tti.ind numTti="3" />
   </tapa.send>

   # Send ACK as feedback for Msg4. 
   <tapa.send>
     <tapa.tfu.hq.ind hqInds="1">
        <tapa.tfu.hq />
     </tapa.tfu.hq.ind>   
  </tapa.send>

   # Send UE config request
   <tapa.send>
     <tapa.crg.cfgreq.cfg.ue/>
   </tapa.send>

   # Expect success in cfg cfm
   <tapa.expect>
      <tapa.crg.cfgcfm/>
   </tapa.expect>
  
   #<tapa.rg.dbgDeInitAll/>
   </tapa.steps>

</tapa.command>
#
#
#
#       Command: tapa.rg.2UeRrInit.mwcDemo
#
#       Desc:    Commands to LTEMAC to Initialize UE
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.2UeRrInit.mwcDemo">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize UE
      </tapa.desc>

      <tapa.longdesc>
         "This command will finish complete RA process and does the UE
         Configuration"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      <tapa.tfu.directive ulDeltaPrsnt="TRUE"/>
         # Send RaReqInd for one rapId 
      <tapa.send>
         #tick(0,0)
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.rareq.ind numRaRnti="1" suId="0">
            <tapa.tfu.rareq raRnti="10" numRapId="2" rapIds="1:2" timingAdvs="3:3"
               tpcs="1:1" cqiPres="TRUE:TRUE" cqis="4:4"/>
         </tapa.tfu.rareq.ind>
      </tapa.send>

      #tick(0,2)
      <tapa.send>
         <tapa.tfu.tti.ind numTti="2"/>
      </tapa.send>

      # Expect RaResp for the rapId sent in RaReq
      <tapa.expset>
        <tapa.tfu.dat.req>
           <tapa.tfu.rarsp.req raRnti="10" rapIds="1:2"/>
        </tapa.tfu.dat.req>
        <tapa.tfu.cntrl.req spId="1">
           <tapa.tfu.pdcch.cntrl.req/>
        </tapa.tfu.cntrl.req>
      </tapa.expset>
      
      #tick(0,8)
      <tapa.send>
         <tapa.tfu.tti.ind numTti="6"/>
      </tapa.send>

      #Msg3 Recp Req
      <tapa.expset>
         <tapa.tfu.recp.req numRntis="2">
            <tapa.tfu.msg3.recp.req ueId="0"/>
            <tapa.tfu.msg3.recp.req ueId="1"/>
         </tapa.tfu.recp.req>
      </tapa.expset>

      #tick(1,1) 
      <tapa.send>
         <tapa.tfu.tti.ind numTti="3"/>
      </tapa.send>

      #Send CRC for Msg3
      <tapa.send>
         <tapa.tfu.crc.ind>
            <tapa.tfu.crc ueId="0" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="1" isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>
      
      #tick(1,2)
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # Expect HARQ ACK in PHICH For MSG3
      <tapa.expect>
         <tapa.tfu.cntrl.req spId="1">
            <tapa.tfu.phich.cntrl.req isAck="TRUE" ueId="0"/>
            <tapa.tfu.phich.cntrl.req isAck="TRUE" ueId="1"/>
         </tapa.tfu.cntrl.req>
      </tapa.expect>

      # Send Message3 after receiving Message3 reception req.
      <tapa.send>
       <tapa.tfu.dat.ind>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="0"/>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="1"/>
       </tapa.tfu.dat.ind>      
      </tapa.send>   

      # Expect Message3 datReq on CCCH at RGU.
      <tapa.expset>
         <tapa.rgu.cdatind ueId="0" lcId="4"/>
         <tapa.rgu.cdatind ueId="1" lcId="4"/>
      </tapa.expset>

      # Send BO for Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="0"/>
      </tapa.send>
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="1"/>
      </tapa.send>
      
      #tick(1,2)
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # Expect staInd from MAC to RLC for Msg4 
      <tapa.expset>
         <tapa.rgu.cstaind lcId="4" ueId="0"/>
         <tapa.rgu.cstaind lcId="4" ueId="1"/>
      </tapa.expset>
      
      # Send Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cdatreq ueId="0" lcId="4" lcType="3" />
      </tapa.send>
      <tapa.send>
         <tapa.rgu.cdatreq ueId="1" lcId="4" lcType="3" />
      </tapa.send>
      
      #tck(1,3)
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # Expect Msg4 from MAC to PHY.
      <tapa.expset>
        <tapa.tfu.cntrl.req spId="1">
           <tapa.tfu.pdcch.cntrl.req ueId="0" saveTo="1"/>
           <tapa.tfu.pdcch.cntrl.req ueId="1" saveTo="2"/>
        </tapa.tfu.cntrl.req>
        <tapa.tfu.dat.req>
           <tapa.tfu.pdsch.dat.req saveTo="3" use="1" ueId="0" chkCcchSh="TRUE"/>
           <tapa.tfu.pdsch.dat.req saveTo="4" use="2" ueId="1" chkCcchSh="TRUE"/>
        </tapa.tfu.dat.req>   
      </tapa.expset>
     
      #tick(1,7)
      <tapa.send>
         <tapa.tfu.tti.ind numTti="4"/>
      </tapa.send>
     
      #Recv Hq Recp Req for Msg4 
      <tapa.expset>
        <tapa.tfu.recp.req numRntis="2">
           <tapa.tfu.hq.recp.req ueId="0"/>
           <tapa.tfu.hq.recp.req ueId="1"/>
        </tapa.tfu.recp.req>   
      </tapa.expset>
      
      #tick(2,0)
      <tapa.send>
         <tapa.tfu.tti.ind numTti="3" />
      </tapa.send>

      # Send ACK as feedback for Msg4. 
      <tapa.send>
        <tapa.tfu.hq.ind>
           <tapa.tfu.hq ueId="0"/>
           <tapa.tfu.hq ueId="1"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>

    # Send UE config request
    # UE1 configuration request to MAC
      <tapa.send>
        <tapa.crg.cfgreq.cfg.ue ueId="0"/>
      </tapa.send>
    # UE2 configuration request to MAC
      <tapa.send>
        <tapa.crg.cfgreq.cfg.ue ueId="1"/>
      </tapa.send>

      # Expect success in cfg cfm
      <tapa.expset>
         <tapa.crg.cfgcfm ueId="0"/>
         <tapa.crg.cfgcfm ueId="1"/>
      </tapa.expset>
      
   </tapa.steps>

</tapa.command>
#
#
#
#       Command: tapa.rg.3UeRrInit.mwcDemo
#
#       Desc:    Commands to LTEMAC to Initialize UE
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.3UeRrInit.mwcDemo">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize UE
      </tapa.desc>

      <tapa.longdesc>
         "This command will finish complete RA process and does the UE
         Configuration"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      <tapa.tfu.directive ulDeltaPrsnt="TRUE"/>
         # Send RaReqInd for one rapId 
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.rareq.ind numRaRnti="1" suId="0">
            <tapa.tfu.rareq raRnti="10" numRapId="3" rapIds="1:2:3" timingAdvs="3:3:3"
               tpcs="1:1:1" cqiPres="TRUE:TRUE:TRUE" cqis="4:6:8"/>
         </tapa.tfu.rareq.ind>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2"/>
      </tapa.send>

      # Expect RaResp for the rapId sent in RaReq
      <tapa.expset>
        <tapa.tfu.dat.req>
           <tapa.tfu.rarsp.req raRnti="10" rapIds="1:2:3"/>
        </tapa.tfu.dat.req>
        <tapa.tfu.cntrl.req spId="1">
           <tapa.tfu.pdcch.cntrl.req/>
        </tapa.tfu.cntrl.req>
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="6"/>
      </tapa.send>

      #Msg3 Recp Req
      <tapa.expset>
         <tapa.tfu.recp.req numRntis="3">
            <tapa.tfu.msg3.recp.req ueId="0"/>
            <tapa.tfu.msg3.recp.req ueId="1"/>
            <tapa.tfu.msg3.recp.req ueId="2"/>
         </tapa.tfu.recp.req>
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="3"/>
      </tapa.send>

      #Send CRC for Msg3
      <tapa.send>
         <tapa.tfu.crc.ind>
            <tapa.tfu.crc ueId="0" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="1" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="2" isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # Expect HARQ ACK in PHICH For MSG3
      <tapa.expect>
         <tapa.tfu.cntrl.req spId="1">
            <tapa.tfu.phich.cntrl.req isAck="TRUE" ueId="0"/>
            <tapa.tfu.phich.cntrl.req isAck="TRUE" ueId="1"/>
            <tapa.tfu.phich.cntrl.req isAck="TRUE" ueId="2"/>
         </tapa.tfu.cntrl.req>
      </tapa.expect>

      # Send Message3 after receiving Message3 reception req.
      <tapa.send>
       <tapa.tfu.dat.ind>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="0"/>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="1"/>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="2"/>
       </tapa.tfu.dat.ind>      
      </tapa.send>   

      # Expect Message3 datInd on CCCH at RGU.
      <tapa.expset>
         <tapa.rgu.cdatind ueId="0" lcId="4"/>
         <tapa.rgu.cdatind ueId="1" lcId="4"/>
         <tapa.rgu.cdatind ueId="2" lcId="4"/>
      </tapa.expset>

      # Send BO for Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="0"/>
      </tapa.send>
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="1"/>
      </tapa.send>
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="2"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # Expect staInd from MAC to RLC for Msg4 
      <tapa.expset>
         <tapa.rgu.cstaind lcId="4" ueId="0"/>
         <tapa.rgu.cstaind lcId="4" ueId="1"/>
         <tapa.rgu.cstaind lcId="4" ueId="2"/>
      </tapa.expset>
      
      # Send Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cdatreq ueId="0" lcId="4" lcType="3" />
      </tapa.send>
      <tapa.send>
         <tapa.rgu.cdatreq ueId="1" lcId="4" lcType="3" />
      </tapa.send>
      <tapa.send>
         <tapa.rgu.cdatreq ueId="2" lcId="4" lcType="3" />
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # Expect Msg4 from MAC to PHY.
      <tapa.expset>
        <tapa.tfu.cntrl.req spId="1">
           <tapa.tfu.pdcch.cntrl.req ueId="0" saveTo="1"/>
           <tapa.tfu.pdcch.cntrl.req ueId="1" saveTo="2"/>
           <tapa.tfu.pdcch.cntrl.req ueId="2" saveTo="3"/>
        </tapa.tfu.cntrl.req>
        <tapa.tfu.dat.req>
           <tapa.tfu.pdsch.dat.req saveTo="4" use="1" ueId="0" chkCcchSh="TRUE"/>
           <tapa.tfu.pdsch.dat.req saveTo="5" use="2" ueId="1" chkCcchSh="TRUE"/>
           <tapa.tfu.pdsch.dat.req saveTo="6" use="3" ueId="2" chkCcchSh="TRUE"/>
        </tapa.tfu.dat.req>   
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="4"/>
      </tapa.send>
     
      #Recv Hq Recp Req for Msg4 
      <tapa.expset>
        <tapa.tfu.recp.req numRntis="3">
           <tapa.tfu.hq.recp.req ueId="0"/>
           <tapa.tfu.hq.recp.req ueId="1"/>
           <tapa.tfu.hq.recp.req ueId="2"/>
        </tapa.tfu.recp.req>   
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="3" />
      </tapa.send>

      # Send ACK as feedback for Msg4. 
      <tapa.send>
        <tapa.tfu.hq.ind>
           <tapa.tfu.hq ueId="0"/>
           <tapa.tfu.hq ueId="1"/>
           <tapa.tfu.hq ueId="2"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>

      # Send UE config request
      <tapa.send>
        <tapa.crg.cfgreq.cfg.ue ueId="0"/>
      </tapa.send>
      <tapa.send>
        <tapa.crg.cfgreq.cfg.ue ueId="1" />
      </tapa.send>
      <tapa.send>
        <tapa.crg.cfgreq.cfg.ue ueId="2" />
      </tapa.send>

      # Expect success in cfg cfm
      <tapa.expset>
         <tapa.crg.cfgcfm ueId="0"/>
         <tapa.crg.cfgcfm ueId="1"/>
         <tapa.crg.cfgcfm ueId="2"/>
      </tapa.expset>
       
   </tapa.steps>

</tapa.command>
#
#
#
#       Command: tapa.rg.4UeRrInit.mwcDemo
#
#       Desc:    Commands to LTEMAC to Initialize UE
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.4UeRrInit.mwcDemo">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize UE
      </tapa.desc>

      <tapa.longdesc>
         "This command will finish complete RA process and does the UE
         Configuration"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      <tapa.tfu.directive ulDeltaPrsnt="TRUE"/>
         # Send RaReqInd for one rapId 
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.rareq.ind numRaRnti="1" suId="0">
            <tapa.tfu.rareq raRnti="10" numRapId="4" rapIds="1:2:3:4" timingAdvs="3:3:3:3"
               tpcs="1:1:1:1" cqiPres="TRUE:TRUE:TRUE:TRUE" cqis="4:6:8:10"/>
         </tapa.tfu.rareq.ind>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2"/>
      </tapa.send>

      # Expect RaResp for the rapId sent in RaReq
      <tapa.expset>
        <tapa.tfu.dat.req>
           <tapa.tfu.rarsp.req raRnti="10" rapIds="1:2:3:4"/>
        </tapa.tfu.dat.req>
        <tapa.tfu.cntrl.req spId="1">
           <tapa.tfu.pdcch.cntrl.req/>
        </tapa.tfu.cntrl.req>
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="6"/>
      </tapa.send>

      #Msg3 Recp Req
      <tapa.expset>
         <tapa.tfu.recp.req numRntis="4">
            <tapa.tfu.msg3.recp.req ueId="0"/>
            <tapa.tfu.msg3.recp.req ueId="1"/>
            <tapa.tfu.msg3.recp.req ueId="2"/>
            <tapa.tfu.msg3.recp.req ueId="3"/>
         </tapa.tfu.recp.req>
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="3"/>
      </tapa.send>

      #Send CRC for Msg3
      <tapa.send>
         <tapa.tfu.crc.ind>
            <tapa.tfu.crc ueId="0" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="1" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="2" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="3" isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # Expect HARQ ACK in PHICH For MSG3
      <tapa.expect>
         <tapa.tfu.cntrl.req spId="1">
            <tapa.tfu.phich.cntrl.req isAck="TRUE" ueId="0"/>
            <tapa.tfu.phich.cntrl.req isAck="TRUE" ueId="1"/>
            <tapa.tfu.phich.cntrl.req isAck="TRUE" ueId="2"/>
            <tapa.tfu.phich.cntrl.req isAck="TRUE" ueId="3"/>
         </tapa.tfu.cntrl.req>
      </tapa.expect>

      # Send Message3 after receiving Message3 reception req.
      <tapa.send>
       <tapa.tfu.dat.ind>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="0"/>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="1"/>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="2"/>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="3"/>
       </tapa.tfu.dat.ind>      
      </tapa.send>   

      # Expect Message3 datInd on CCCH at RGU.
      <tapa.expset>
         <tapa.rgu.cdatind ueId="0" lcId="4"/>
         <tapa.rgu.cdatind ueId="1" lcId="4"/>
         <tapa.rgu.cdatind ueId="2" lcId="4"/>
         <tapa.rgu.cdatind ueId="3" lcId="4"/>
      </tapa.expset>

      # Send BO for Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="0"/>
      </tapa.send>
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="1"/>
      </tapa.send>
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="2"/>
      </tapa.send>
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"  ueId="3"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # Expect staInd from MAC to RLC for Msg4 
      <tapa.expset>
         <tapa.rgu.cstaind lcId="4" ueId="0"/>
         <tapa.rgu.cstaind lcId="4" ueId="1"/>
         <tapa.rgu.cstaind lcId="4" ueId="2"/>
         <tapa.rgu.cstaind lcId="4" ueId="3"/>
      </tapa.expset>
      
      # Send Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cdatreq ueId="0" lcId="4" lcType="3" />
      </tapa.send>
      <tapa.send>
         <tapa.rgu.cdatreq ueId="1" lcId="4" lcType="3" />
      </tapa.send>
      <tapa.send>
         <tapa.rgu.cdatreq ueId="2" lcId="4" lcType="3" />
      </tapa.send>
      <tapa.send>
         <tapa.rgu.cdatreq ueId="3" lcId="4" lcType="3" />
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # Expect Msg4 from MAC to PHY.
      <tapa.expset>
        <tapa.tfu.cntrl.req spId="1">
           <tapa.tfu.pdcch.cntrl.req ueId="0" saveTo="1"/>
           <tapa.tfu.pdcch.cntrl.req ueId="1" saveTo="2"/>
           <tapa.tfu.pdcch.cntrl.req ueId="2" saveTo="3"/>
           <tapa.tfu.pdcch.cntrl.req ueId="3" saveTo="4"/>
        </tapa.tfu.cntrl.req>
        <tapa.tfu.dat.req>
           <tapa.tfu.pdsch.dat.req saveTo="5" use="1" ueId="0" chkCcchSh="TRUE"/>
           <tapa.tfu.pdsch.dat.req saveTo="6" use="2" ueId="1" chkCcchSh="TRUE"/>
           <tapa.tfu.pdsch.dat.req saveTo="7" use="3" ueId="2" chkCcchSh="TRUE"/>
           <tapa.tfu.pdsch.dat.req saveTo="8" use="4" ueId="3" chkCcchSh="TRUE"/>
        </tapa.tfu.dat.req>   
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="4"/>
      </tapa.send>
     
      #Recv Hq Recp Req for Msg4 
      <tapa.expset>
        <tapa.tfu.recp.req numRntis="4">
           <tapa.tfu.hq.recp.req ueId="0"/>
           <tapa.tfu.hq.recp.req ueId="1"/>
           <tapa.tfu.hq.recp.req ueId="2"/>
           <tapa.tfu.hq.recp.req ueId="3"/>
        </tapa.tfu.recp.req>   
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="3" />
      </tapa.send>

      # Send ACK as feedback for Msg4. 
      <tapa.send>
        <tapa.tfu.hq.ind>
           <tapa.tfu.hq ueId="0"/>
           <tapa.tfu.hq ueId="1"/>
           <tapa.tfu.hq ueId="2"/>
           <tapa.tfu.hq ueId="3"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>

      # Send UE config request
      <tapa.send>
        <tapa.crg.cfgreq.cfg.ue ueId="0"/>
      </tapa.send>
      <tapa.send>
        <tapa.crg.cfgreq.cfg.ue ueId="1" />
      </tapa.send>
      <tapa.send>
        <tapa.crg.cfgreq.cfg.ue ueId="2" />
      </tapa.send>
      <tapa.send>
        <tapa.crg.cfgreq.cfg.ue ueId="3" />
      </tapa.send>

      # Expect success in cfg cfm
      <tapa.expset>
         <tapa.crg.cfgcfm ueId="0"/>
         <tapa.crg.cfgcfm ueId="1"/>
         <tapa.crg.cfgcfm ueId="2"/>
         <tapa.crg.cfgcfm ueId="3"/>
      </tapa.expset>
      
   
   </tapa.steps>

</tapa.command>

#
#
#
#       Command: tapa.rg.2UeRrInit.ccch.bo
#
#       Desc:    Commands to LTEMAC to Initialize UE
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.2UeRrInit.ccch.bo">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize UE
      </tapa.desc>

      <tapa.longdesc>
         "This command will finish complete RA process and does the UE
         Configuration"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      <tapa.tfu.directive ulDeltaPrsnt="TRUE"/>
         # Send RaReqInd for one rapId 
      <tapa.send>
         #tick(0,0)
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.rareq.ind numRaRnti="1" suId="0">
            <tapa.tfu.rareq raRnti="10" numRapId="2" rapIds="1:2" timingAdvs="3:3"
               tpcs="1:1" cqiPres="TRUE:TRUE" cqis="4:4"/>
         </tapa.tfu.rareq.ind>
      </tapa.send>

      #tick(0,2)
      <tapa.send>
         <tapa.tfu.tti.ind numTti="2"/>
      </tapa.send>

      # Expect RaResp for the rapId sent in RaReq
      <tapa.expset>
        <tapa.tfu.dat.req>
           <tapa.tfu.rarsp.req raRnti="10" rapIds="1:2"/>
        </tapa.tfu.dat.req>
        <tapa.tfu.cntrl.req spId="1">
           <tapa.tfu.pdcch.cntrl.req/>
        </tapa.tfu.cntrl.req>
      </tapa.expset>
      
      #tick(0,8)
      <tapa.send>
         <tapa.tfu.tti.ind numTti="6"/>
      </tapa.send>

      #Msg3 Recp Req
      <tapa.expset>
         <tapa.tfu.recp.req numRntis="2">
            <tapa.tfu.msg3.recp.req ueId="0"/>
            <tapa.tfu.msg3.recp.req ueId="1"/>
         </tapa.tfu.recp.req>
      </tapa.expset>

      #tick(1,1) 
      <tapa.send>
         <tapa.tfu.tti.ind numTti="3"/>
      </tapa.send>

      #Send CRC for Msg3
      <tapa.send>
         <tapa.tfu.crc.ind>
            <tapa.tfu.crc ueId="0" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="1" isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>
      
      #tick(1,2)
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # Expect HARQ ACK in PHICH For MSG3
      <tapa.expect>
         <tapa.tfu.cntrl.req spId="1">
            <tapa.tfu.phich.cntrl.req isAck="TRUE" ueId="0"/>
            <tapa.tfu.phich.cntrl.req isAck="TRUE" ueId="1"/>
         </tapa.tfu.cntrl.req>
      </tapa.expect>

      # Send Message3 after receiving Message3 reception req.
      <tapa.send>
       <tapa.tfu.dat.ind>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="0"/>
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="1"/>
       </tapa.tfu.dat.ind>      
      </tapa.send>   

      # Expect Message3 datReq on CCCH at RGU.
      <tapa.expset>
         <tapa.rgu.cdatind ueId="0" lcId="4"/>
         <tapa.rgu.cdatind ueId="1" lcId="4"/>
      </tapa.expset>

      # Send BO for Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="100"  ueId="0"/>
      </tapa.send>
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="100"  ueId="1"/>
      </tapa.send>
      
      #tick(1,2)
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # Expect staInd from MAC to RLC for Msg4 
      <tapa.expset>
         <tapa.rgu.cstaind lcId="4" ueId="0"/>
         <tapa.rgu.cstaind lcId="4" ueId="1"/>
      </tapa.expset>
      
      # Send Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cdatreq ueId="0" lcId="4" lcType="3" />
      </tapa.send>
      <tapa.send>
         <tapa.rgu.cdatreq ueId="1" lcId="4" lcType="3" />
      </tapa.send>
      
      #tck(1,3)
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>

      # Expect Msg4 from MAC to PHY.
      <tapa.expset>
        <tapa.tfu.cntrl.req spId="1">
           <tapa.tfu.pdcch.cntrl.req ueId="0" saveTo="1"/>
           <tapa.tfu.pdcch.cntrl.req ueId="1" saveTo="2"/>
        </tapa.tfu.cntrl.req>
        <tapa.tfu.dat.req>
           <tapa.tfu.pdsch.dat.req saveTo="3" use="1" ueId="0" chkCcchSh="TRUE"/>
           <tapa.tfu.pdsch.dat.req saveTo="4" use="2" ueId="1" chkCcchSh="TRUE"/>
        </tapa.tfu.dat.req>   
      </tapa.expset>
     
      #tick(1,7)
      <tapa.send>
         <tapa.tfu.tti.ind numTti="4"/>
      </tapa.send>
     
      #Recv Hq Recp Req for Msg4 
      <tapa.expset>
        <tapa.tfu.recp.req numRntis="2">
           <tapa.tfu.hq.recp.req ueId="0"/>
           <tapa.tfu.hq.recp.req ueId="1"/>
        </tapa.tfu.recp.req>   
      </tapa.expset>
      
      #tick(2,0)
      <tapa.send>
         <tapa.tfu.tti.ind numTti="3" />
      </tapa.send>

      # Send ACK as feedback for Msg4. 
      <tapa.send>
        <tapa.tfu.hq.ind>
           <tapa.tfu.hq ueId="0"/>
           <tapa.tfu.hq ueId="1"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>

    # Send UE config request
    # UE1 configuration request to MAC
      <tapa.send>
        <tapa.crg.cfgreq.cfg.ue ueId="0"/>
      </tapa.send>
    # UE2 configuration request to MAC
      <tapa.send>
        <tapa.crg.cfgreq.cfg.ue ueId="1"/>
      </tapa.send>

      # Expect success in cfg cfm
      <tapa.expset>
         <tapa.crg.cfgcfm ueId="0"/>
         <tapa.crg.cfgcfm ueId="1"/>
      </tapa.expset>
      
   </tapa.steps>

</tapa.command>

#
#
#       Command: tapa.rg.tddUeInitCfgTyp2SplSfCfg7
#
#       Desc:    Commands to LTEMAC to Initialize UE Cfg type 2 Spl sf cfg 7
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.tddUeInitCfgTyp2SplSfCfg7">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize UE"
      </tapa.desc>

      <tapa.longdesc>
         "This command will finish complete RA process and does the UE
         Configuration"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>

      <tapa.tfu.directive ulDeltaPrsnt="TRUE"/>
      
      <tapa.send>
         <tapa.tfu.tti.ind numTti="3"/>
      </tapa.send>
      #Sub-frame 2
      
      # [0, 2] 
      <tapa.send>
         <tapa.tfu.rareq.ind numRaRntis="1">
            <tapa.tfu.rareq raRnti="3" numRapId="1" rapIds="5" cqiPres="TRUE" cqis="4"/>
         </tapa.tfu.rareq.ind>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2"/>
      </tapa.send>
      #Sub-frame 4
     
      # [0, 4] 
      <tapa.expset>
        <tapa.tfu.dat.req datReqs="1">
           <tapa.tfu.rarsp.req raRnti="3"/>
        </tapa.tfu.dat.req>
        <tapa.tfu.cntrl.req numCntrlReq="1" spId="1">
           <tapa.tfu.pdcch.cntrl.req/>
        </tapa.tfu.cntrl.req>
      </tapa.expset>
     
      <tapa.send>
         <tapa.tfu.tti.ind numTti="6"/>
      </tapa.send>
      #Sub-frame 0

	  # message 3 reception request afetr Ra Rsp
      <tapa.expect>
         <tapa.tfu.recp.req numRntis="1" spId="1">
            <tapa.tfu.msg3.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>

	  <tapa.send>
         <tapa.tfu.tti.ind numTti="4"/>
      </tapa.send>
      #Sub-frame 4

      #Send CRC for Msg3
      <tapa.send>
         <tapa.tfu.crc.ind>
            <tapa.tfu.crc ueId="0" isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>
      #Sub-frame 5

      # Send Message3 after receiving Message3 reception req.
      <tapa.send>
       <tapa.tfu.dat.ind datInds="1">
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="0"/>
       </tapa.tfu.dat.ind>      
      </tapa.send>

	  # Expect Message3 datReq on CCCH at RGU.
      <tapa.expect>
         <tapa.rgu.cdatind ueId="0" lcId="4"/>
      </tapa.expect>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2"/>
      </tapa.send>
      #Sub-frame 7

      # Expect HARQ ACK in PHICH For MSG3
      <tapa.expect>
         <tapa.tfu.cntrl.req numCntrlReq="1" spId="1">
            <tapa.tfu.phich.cntrl.req isAck="TRUE"/>
         </tapa.tfu.cntrl.req>
      </tapa.expect>

      # Send BO for Msg4 on RGU.
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"/>
      </tapa.send>
   
      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>
      #Sub-frame 8
   
      # Expect CStatInd For MSG4
      <tapa.expset>
         <tapa.rgu.cstaind lcId="4"/>
      </tapa.expset>
   
      # Send Msg4 on RGU.
      <tapa.send>
      <tapa.rgu.cdatreq ueId="0" lcId="4" lcType="3" />
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>
      #Sub-frame 9
   
      # Expect Msg4 from MAC to PHY.
      <tapa.expset>
        <tapa.tfu.dat.req datReqs="1">
           <tapa.tfu.pdsch.dat.req use="1" validate="FALSE"/>
        </tapa.tfu.dat.req>
        <tapa.tfu.cntrl.req numCntrlReq="1" spId="1">
           <tapa.tfu.pdcch.cntrl.req saveTo="1"/>
        </tapa.tfu.cntrl.req>
      </tapa.expset>
   
      <tapa.send>
         <tapa.tfu.tti.ind numTti="6"/>
      </tapa.send>
      #Sub-frame 5

      # Recv Hq Recp Req for Msg4.
      <tapa.expect>
        <tapa.tfu.recp.req numRntis="1" spId="1">
           <tapa.tfu.hq.recp.req vldtNp="TRUE" np="1"/>
        </tapa.tfu.recp.req>
      </tapa.expect>
   
      <tapa.send>
         <tapa.tfu.tti.ind numTti="3" />
      </tapa.send>
      #Sub-frame 8

      # Send ACK as feedback for Msg4.
      <tapa.send>
        <tapa.tfu.hq.ind hqInds="1">
           <tapa.tfu.hq ueId="0" isAckLst="TRUE:FALSE:FALSE:FALSE"/>
        </tapa.tfu.hq.ind>
     </tapa.send>

     # Send UE config request
      <tapa.send>
        <tapa.crg.cfgreq.cfg.ue/>
      </tapa.send>
   
      # Expect success in cfg cfm
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>
   
      # Send UE config request
      <tapa.send>
        <tapa.rgr.cfgreq.cfg.ue instId="5" />
      </tapa.send>
   
      # Expect success in cfg cfm
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

      #Till now RACH and basic UE context is setup
      <tapa.tfu.directive ulDeltaPrsnt="TRUE"/>
   
      # Configure bi-directional DTCH for default UE
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      # Expect configuration confirm after the TTI
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch lcId="1" dir="1" lcType="5" instId="5"/>
      </tapa.send>

      # Configure UL LCG on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lcg lcgId="0" instId="5"/>
      </tapa.send>

      # Expect configuration confirm after the TTI
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

      # Expect configuration confirm after the TTI
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

	  # Configure bi-directional DTCH for default UE for the UE
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch lcId="3" lcgId="0" dir="3" lcType="5" 
            ueId="0"/>
      </tapa.send>

      # Expect configuration confirm after the TTI for UE
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      # Configure DL LC on RGR for the UE
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch lcId="3" dir="1" lcType="5" instId="5" ueId="0"/>
      </tapa.send>

      # Configure UL LCG on RGR for the UE
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lcg lcgId="3" instId="5" ueId="0"/>
      </tapa.send>

      # Expect configuration confirm after the TTI for the UE
      <tapa.expset>
         <tapa.rgr.cfgCfm instId="5"/>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2" SUBFRAME="0"/>
      </tapa.send>
      #Sub-frame 0
   </tapa.steps>

</tapa.command>


#
#
#       Command: tapa.rg.tddUeInitCfgTyp1SplSfCfg7
#
#       Desc:    Commands to LTEMAC to Initialize UE Cfg type 1 Spl sf cfg 7
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.tddUeInitCfgTyp1SplSfCfg7">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize UE"
      </tapa.desc>

      <tapa.longdesc>
         "This command will finish complete RA process and does the UE
         Configuration"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>

      <tapa.tfu.directive ulDeltaPrsnt="TRUE"/>
      
	  # Send RaReqInd for one rapId in the first special frame 
      <tapa.send>
         <tapa.tfu.tti.ind numTti="3"/>
      </tapa.send>
      #Sub-frame 2

      # Send it in the 6th frequency index 
      <tapa.send>
         <tapa.tfu.rareq.ind numRaRntis="1">
            <tapa.tfu.rareq raRnti="52" numRapId="1" rapIds="5" cqiPres="TRUE" cqis="4"/>
         </tapa.tfu.rareq.ind>
      </tapa.send>

	  # Ue starts expecting raResp after 3 subframes within the raResp window.
      # In this TC, it shall expect raResp in the first DL subframe after 3 Ttis.

      <tapa.send>
         <tapa.tfu.tti.ind numTti="2"/>
      </tapa.send>
      #Sub-frame 4
      
      # Expect RaResp for the rapId sent in RaReq
      <tapa.expset>
        <tapa.tfu.dat.req datReqs="1">
           <tapa.tfu.rarsp.req raRnti="52"/>
        </tapa.tfu.dat.req>
        <tapa.tfu.cntrl.req numCntrlReq="1" spId="1">
           <tapa.tfu.pdcch.cntrl.req/>
        </tapa.tfu.cntrl.req>
      </tapa.expset>

	  <tapa.send>
         <tapa.tfu.tti.ind numTti="6"/>
      </tapa.send>
      #Sub-frame 0

	  # message 3 reception request afetr Ra Rsp
      <tapa.expect>
         <tapa.tfu.recp.req numRntis="1" spId="1">
            <tapa.tfu.msg3.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>

	  <tapa.send>
         <tapa.tfu.tti.ind numTti="4"/>
      </tapa.send>
      #Sub-frame 4

      #Send CRC for Msg3
      <tapa.send>
         <tapa.tfu.crc.ind>
            <tapa.tfu.crc ueId="0" isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>
      #Sub-frame 5

	  # Expect HARQ ACK in PHICH For MSG3
      <tapa.expect>
         <tapa.tfu.cntrl.req numCntrlReq="1" spId="1">
            <tapa.tfu.phich.cntrl.req isAck="TRUE"/>
         </tapa.tfu.cntrl.req>
      </tapa.expect>

      # Send Message3 after receiving Message3 reception req.
      <tapa.send>
       <tapa.tfu.dat.ind datInds="1">
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6" ueId="0"/>
       </tapa.tfu.dat.ind>      
      </tapa.send>

	  # Expect Message3 datReq on CCCH at RGU.
      <tapa.expect>
         <tapa.rgu.cdatind ueId="0" lcId="4"/>
      </tapa.expect>

	  # Send BO for Msg4 on RGU.
      <tapa.send>
         <tapa.rgu.cstarsp lcId="4" lcType="3" bo="10"/>
      </tapa.send>

	  <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>
      #Sub-frame 6
   
      # Expect CStatInd For MSG4
      <tapa.expset>
         <tapa.rgu.cstaind lcId="4"/>
      </tapa.expset>

	  # Send Msg4 on RGU.
      <tapa.send>
         <tapa.rgu.cdatreq ueId="0" lcId="4" lcType="3" />
      </tapa.send>

	  <tapa.send>
         <tapa.tfu.tti.ind numTti="1"/>
      </tapa.send>
      #Sub-frame 7
   
      # Expect Msg4 from MAC to PHY.
      <tapa.expset>
        <tapa.tfu.dat.req datReqs="1">
           <tapa.tfu.pdsch.dat.req use="1" validate="FALSE"/>
        </tapa.tfu.dat.req>
        <tapa.tfu.cntrl.req numCntrlReq="1" spId="1">
           <tapa.tfu.pdcch.cntrl.req saveTo="1"/>
        </tapa.tfu.cntrl.req>
      </tapa.expset>

	  <tapa.send>
         <tapa.tfu.tti.ind numTti="4"/>
      </tapa.send>
      #Sub-frame 1

      # Recv Hq Recp Req for Msg4.
      <tapa.expect>
        <tapa.tfu.recp.req numRntis="1" spId="1">
           <tapa.tfu.hq.recp.req />
        </tapa.tfu.recp.req>
      </tapa.expect>

	  <tapa.send>
         <tapa.tfu.tti.ind numTti="3" />
      </tapa.send>
      #Sub-frame 4

      # Send ACK as feedback for Msg4.
      <tapa.send>
        <tapa.tfu.hq.ind hqInds="1">
           <tapa.tfu.hq ueId="0" isAckLst="TRUE:FALSE:FALSE:FALSE"/>
        </tapa.tfu.hq.ind>
     </tapa.send>

	 # Send UE config request
      <tapa.send>
        <tapa.crg.cfgreq.cfg.ue/>
      </tapa.send>
   
      # Expect success in cfg cfm
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>
   
      # Send UE config request
      <tapa.send>
        <tapa.rgr.cfgreq.cfg.ue instId="5" />
      </tapa.send>
   
      # Expect success in cfg cfm
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

      #Till now RACH and basic UE context is setup
      <tapa.tfu.directive ulDeltaPrsnt="TRUE"/>
   
      # Configure bi-directional DTCH for default UE
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      # Expect configuration confirm after the TTI
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch lcId="1" dir="1" lcType="5" instId="5"/>
      </tapa.send>

      # Configure UL LCG on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lcg lcgId="0" instId="5"/>
      </tapa.send>

      # Expect configuration confirm after the TTI
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

      # Expect configuration confirm after the TTI
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

	  # Configure bi-directional DTCH for default UE for the UE
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch lcId="3" lcgId="0" dir="3" lcType="5" 
            ueId="0"/>
      </tapa.send>

      # Expect configuration confirm after the TTI for UE
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

      # Configure DL LC on RGR for the UE
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch lcId="3" dir="1" lcType="5" instId="5" ueId="0"/>
      </tapa.send>

      # Configure UL LCG on RGR for the UE
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lcg lcgId="3" instId="5" ueId="0"/>
      </tapa.send>

      # Expect configuration confirm after the TTI for the UE
      <tapa.expset>
         <tapa.rgr.cfgCfm instId="5"/>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expset>

	  <tapa.send>
         <tapa.tfu.tti.ind SUBFRAME="0" numTti="6" />
      </tapa.send>
      #Sub-frame 0

   </tapa.steps>

</tapa.command>

#
#
#       Command: tapa.rg.multiInstMacInit
#
#       Desc:    Layer Manager Commands to LTEMAC for TWO Instances
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.multiInstMacInit">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Layer Manager Commands to LTEMAC for TWO instances
      </tapa.desc>

      <tapa.longdesc>
         "2 MAC instance creation"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      # Send General Configuration for LTEMAC for isntance 0
      <tapa.send>
         <tapa.lrg.cfg.gen tmrRes="10" instId="0"/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC from instance 0
      <tapa.expect>
         <tapa.lrg.cfgcfm/>
      </tapa.expect>

      # Send General Configuration for LTEMAC for isntance 1
      <tapa.send>
         <tapa.lrg.cfg.gen tmrRes="10" instId="1"/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC from instance 1
      <tapa.expect>
         <tapa.lrg.cfgcfm instId="1"/>
      </tapa.expect>

      #Send CRG SSAP Configuration to LTEMAC for macinst 0 */
      <tapa.send>
         <tapa.lrg.cfg.crgsap isntanceId="0"/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC macInst 0
      <tapa.expect>
         <tapa.lrg.cfgcfm instId="0"/>
      </tapa.expect>

      #Send RGR SSAP Configuration to LTEMAC */
      <tapa.send>
         <tapa.lrg.cfg.schins numSaps="2" instId="5" rgr_suId="0:1" rgr_spId="0:1"
            rgm_suId="0:1" rgm_spId="0:1" tfu_suId="0:1" tfu_spId="0:1" bndTimerValue="5" />
      </tapa.send>

      # Expect positive Configuration Confirm from MAC Inst 0
      <tapa.expect>
         <tapa.lrg.schcfgcfm instId="5"/>
      </tapa.expect>

      #Send TFU SSAP Configuration to LTEMAC isnt 0 */
      <tapa.send>
         <tapa.lrg.cfg.tfusap instId="0"/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC inst 0
      <tapa.expect>
         <tapa.lrg.cfgcfm instId="0"/>
      </tapa.expect>
      
      #Send RGU  SSAP Configuration to LTEMAC  inst 0*/
      <tapa.send>
         <tapa.lrg.cfg.rgusap instId="0" suId="0" spId="0"/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC inst 0
      <tapa.expect>
         <tapa.lrg.cfgcfm instId="0"/>
      </tapa.expect>

      #Send CRG SSAP Configuration to LTEMAC for macinst 1 */
      <tapa.send>
         <tapa.lrg.cfg.crgsap instId="1" suId="1" spId="1"/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC macInst 1
      <tapa.expect>
         <tapa.lrg.cfgcfm instId="1"/>
      </tapa.expect>

      #Send TFU SSAP Configuration to LTEMAC isnt 1 */
      <tapa.send>
         <tapa.lrg.cfg.tfusap instId="1" suId="1" spId="1"/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC inst 1
      <tapa.expect>
         <tapa.lrg.cfgcfm instId="1"/>
      </tapa.expect>
      
      #Send RGU  SSAP Configuration to LTEMAC  inst 1*/
      <tapa.send>
         <tapa.lrg.cfg.rgusap instId="1" suId="0" spId="0"/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC inst 1
      <tapa.expect>
         <tapa.lrg.cfgcfm instId="1"/>
      </tapa.expect>

   </tapa.steps>

</tapa.command>
#
#
#       Command: tapa.rg.multiInstCellSapInit
#
#       Desc:    Commands to LTEMAC to perform multiple saps required for 2 cells
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.multiInstCellSapInit">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize SAP for 2 CELL
      </tapa.desc>

      <tapa.longdesc>
         "Binding RGR and CRG SAPS, Creatting CELL in CRG Interface, creating 
         common logical channels(BCCH/BCH, BCCH/DLSCH, PCCH, CCCH) and RGR
         CELL configuration for schedular related information"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      #Send Bind Request for CRG SAP  for inst 0
      <tapa.send>
         <tapa.crg.bndreq instId="0"/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.crg.bndcfm instId="0" suId="0"/>
      </tapa.expect>

      #Send Bind Request for CRG SAP for inst 1
      <tapa.send>
         <tapa.crg.bndreq instId="1" suId="1" spId="1"/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.crg.bndcfm instId="1" suId="1"/>
      </tapa.expect>
 
      #Send Bind Request for RGU SAP  for inst 0
      <tapa.send>
         <tapa.rgu.bndreq instId="0" suId="0" spId="0"/>
      </tapa.send>
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgu.bndcfm instId="0" suId="0"/>
      </tapa.expect>

      #Send Bind Request for RGU SAP for inst 1 
      <tapa.send>
         <tapa.rgu.bndreq instId="1" suId="0" spId="0"/>
      </tapa.send>
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgu.bndcfm instId="1" suId="0"/>
      </tapa.expect>

      #Expect NOK_DONE Control Confirm from LTE MAC inst 0
      #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.cntrlreq instId="0" suId="0" spId="0" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.cntrlcfm instId="0" status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL"/>
      </tapa.expect>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.bndreq instId="0"/>
      </tapa.expect>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.bndcfm suId="0" instId="0"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm instId="0"/>
      </tapa.expect>

      #Expect NOK_DONE Control Confirm from LTE MAC inst 1
      #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.cntrlreq  instId="1" suId="1" spId="1" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.cntrlcfm instId="1" status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL"/>
      </tapa.expect>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.bndreq instId="1" sudId="1" spId="1"/>
      </tapa.expect>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.bndcfm suId="1" spId="1" instId="1"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm instId="1"/>
      </tapa.expect>



      #Send Bind Request for RGR SAP for Cell 1 
      <tapa.send>
         <tapa.rgr.bndreq instId="5" spId="0" suId="0"/>
      </tapa.send>
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgr.bndcfm instId="5" status="1" />
      </tapa.expect>
      
      #Send Bind Request for RGR SAP for Cell 2 
      <tapa.send>
         <tapa.rgr.bndreq instId="5" spId="1" suId="1"/>
      </tapa.send>
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgr.bndcfm instId="5" spId="1" suId="1" status="1"/>
      </tapa.expect>

      #Scheduler
      #Send Control Request to Enable TFU SAP for Cell 1
      <tapa.send>
         <tapa.lrg.schcntrlreq instId="5" suId="0" spId="0" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.schcntrlcfm status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL" instId="5"/>
      </tapa.expect>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.sch.bndreq instId="5" spId="0"/>
      </tapa.expect>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.sch.bndcfm suId="0" instId="5" spId="0"/>
      </tapa.send>
      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm instId="5"/>
      </tapa.expect>

      
      #Send Control Request to Enable TFU SAP for Cell 2
      <tapa.send>
         <tapa.lrg.schcntrlreq instId="5" suId="1" spId="1" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.schcntrlcfm status="LCM_PRIM_OK_NDONE"
            reason="LCM_REASON_NOT_APPL" instId="5" spId="1"/>
      </tapa.expect>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.sch.bndreq instId="5" spId="1"/>
      </tapa.expect>
      
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.sch.bndcfm suId="1" instId="5" spId="1"/>
      </tapa.send>
      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm instId="5" spId="1"/>
      </tapa.expect>
   </tapa.steps>

</tapa.command>
#
#
#       Command: tapa.rg.multiInstCellInit
#
#       Desc:    Commands to LTEMAC to perform multiple cell configuration
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.multiInstCellInit">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize CELL
      </tapa.desc>

      <tapa.longdesc>
         "Configuring two cells for"
      </tapa.longdesc>
         
   </tapa.doc>

   <tapa.steps>
      #MAC Cell configuration for instance 0
      #Send CRG Cell Configuration
      <tapa.send>
         <tapa.crg.cfgreq.cfg.cell instId="0" spId="0" cellId="3"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>


      #Send Common Logical Channel Configuration BCCH->BCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0" cellId="3" crnti="1234" lcId="1" dir="1" lcType="1" dlTrchType="1" spId="0"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  instId="0" cellId="3" crnti="1234" lcId="2" dir="1" lcType="1"
            dlTrchType="3" spId="0"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>
      
      #Send Common Logical Channel Configuration PCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  instId="0" cellId="3" crnti="1234" lcId="3" dir="1" lcType="2" spId="0"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      #Send Common Logical Channel Configuration CCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  instId="0" cellId="3" crnti="1234" lcId="4" dir="3" lcType="3"
            dlTrchType="3" ulTrchType="5" spId="0"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

     #Send Common Logical Channel Configuration BCCH->DLSCH2
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0" cellId="3" crnti="1234" lcId="5" dir="1" lcType="1"
            dlTrchType="3" spId="0"/>
      </tapa.send>
      
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      #MAC Cell configuration for instance 1
      #Send CRG Cell Configuration
      <tapa.send>
         <tapa.crg.cfgreq.cfg.cell instId="1" spId="1" cellId="4"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>


      #Send Common Logical Channel Configuration BCCH->BCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" cellId="4" crnti="1234" lcId="1" dir="1" lcType="1" dlTrchType="1" spId="1"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  instId="1" cellId="4" crnti="1234" lcId="2" dir="1" lcType="1" spId="1"
            dlTrchType="3"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>
      
      #Send Common Logical Channel Configuration PCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  instId="1" cellId="4" crnti="1234" lcId="3" dir="1" lcType="2" spId="1"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      #Send Common Logical Channel Configuration CCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  instId="1" cellId="4" crnti="1234" lcId="4" dir="3" lcType="3"
            dlTrchType="3" ulTrchType="5" spId="1"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>
 
      #Send Common Logical Channel Configuration BCCH->DLSCH2
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" cellId="4" crnti="1234" lcId="5" dir="1" lcType="1"
            dlTrchType="3" spId="1"/>
      </tapa.send>
      
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

     
      #Sending RGR ENB Configuration
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.enb instId="5"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

      #Scheduler Cell Configuration

      #Sending RGR CELL Configuration for cell 1
      #cmnLcInfo = "lcId:lcType:dir:dlTrchType:ulTrchType:...."
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.cell instId="5" spId="0" maxDlRetxBw="100" numCmnLc="5"
         cmnLcInfo="1:1:1:1:0:2:1:1:3:0:3:2:1:0:0:4:3:3:3:3:5:1:1:3:0" cellId="3" macInst="0"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

      #Sending RGR CELL Configuration for cell 2
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.cell instId="5" spId="1" maxDlRetxBw="100" numCmnLc="5"
         cmnLcInfo="1:1:1:1:0:2:1:1:3:0:3:2:1:0:0:4:3:3:3:3:5:1:1:3:0" cellId="4" macInst="1"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

   </tapa.steps>

</tapa.command>
#
#
#       Command: tapa.rg.multiInstmacDeInit
#
#       Desc:    Layer Manager Commands to LTEMAC for Layer Shutdown
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.multiInstmacDeInit">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Layer Manager Commands to LTEMAC for Layer Shutdown"
      </tapa.desc>

      <tapa.longdesc>
         "Sending Control request to LTEMAC for Shutdown amd then send UnBind Request 
         to RGR, CRG, and RGU SAp's"
         sending a cron LTEMAC"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      # Mac Instance 0
      # Send UnBind Request to RGU SAP
      <tapa.send>
         <tapa.rgu.ubndreq instId="0" spId="0"/>
      </tapa.send>
      
      # Send UnBind Request to CRG SAP
      <tapa.send>
         <tapa.crg.ubndreq instId="0" spId="0"/>
      </tapa.send>
      
      #Send Control Request to LTEMAC for ShutDown 
      <tapa.send>
         <tapa.lrg.cntrlreq instId="0" action="ASHUTDOWN" elmntType="STGEN" />
      </tapa.send>
 
      # Expect Dummy TFU UnBind Request
      <tapa.expect>
         <tapa.tfu.ubndreq/>
      </tapa.expect>

      # Expect Cntrl Confirm
      <tapa.expect>
         <tapa.lrg.cntrlcfm/>
      </tapa.expect>

      # Mac Instance 1
      # Send UnBind Request to RGU SAP
      <tapa.send>
         <tapa.rgu.ubndreq instId="1" spId="0"/>
      </tapa.send>
      
      # Send UnBind Request to CRG SAP
      <tapa.send>
         <tapa.crg.ubndreq instId="1" spId="1"/>
      </tapa.send>
      
      #Send Control Request to LTEMAC for ShutDown 
      <tapa.send>
         <tapa.lrg.cntrlreq instId="1" action="ASHUTDOWN" elmntType="STGEN" />
      </tapa.send>
 
      # Expect Dummy TFU UnBind Request
      <tapa.expect>
         <tapa.tfu.ubndreq instId="1" spId="1"/>
      </tapa.expect>

      # Expect Cntrl Confirm
      <tapa.expect>
         <tapa.lrg.cntrlcfm instId="1"/>
      </tapa.expect>

      #Scheduler
      # Send UnBind Request to SCH SAP
      <tapa.send>
         <tapa.lrg.schcntrlreq instId="5" elmntType="STGEN" action="ASHUTDOWN" spId="0"/>
      </tapa.send>
      
     # Expect Dummy TFU UnBind Request
      <tapa.expect>
         <tapa.tfu.sch.ubndreq instId="5" spId="0"/>
      </tapa.expect>

     # Expect Dummy TFU UnBind Request
      <tapa.expect>
         <tapa.tfu.sch.ubndreq instId="5" spId="1"/>
      </tapa.expect>

      <tapa.expect>
         <tapa.lrg.schcntrlcfm instId="5"/>
      </tapa.expect>


      <tapa.delay delay="1"/>      
   </tapa.steps>
</tapa.command>


#
#
#       Command: tapa.rg.multiInst1UePerCellInit
#
#       Desc:    Commands to LTEMAC to Initialize UE
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.multiInst1UePerCellInit">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize UE
      </tapa.desc>

      <tapa.longdesc>
         "This command will finish complete RA process and does the UE
         Configuration"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>

      <tapa.tfu.directive ulDeltaPrsnt="TRUE"/>
         # Send RaReqInd for one rapId 
         # Send TTI Ind for firt MAC and SCH inst


      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      #RACH procedure for first UE towards first instance
      <tapa.send>
         <tapa.tfu.rareq.ind instId="5" numRaRnti="1" suId="0">
            <tapa.tfu.rareq  numRapId="1" rapIds="2" timingAdvs="3"
               tpcs="1" cqiPres="TRUE" cqis="4" cellId="3"/>
         </tapa.tfu.rareq.ind>
      </tapa.send>

      # Ue starts expecting raResp after 3 subframes within the raResp window.
      # In this TC, it shall expect raResp in the first subframe after 3 Ttis.
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="2" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>
    
      # Expect RaResp for the rapId sent in RaReq
      <tapa.expset>
        <tapa.tfu.cntrl.req numCntrlReq="1" schInstId="5" spId="0">
           <tapa.tfu.pdcch.cntrl.req/>
        </tapa.tfu.cntrl.req>
        <tapa.tfu.dat.req datReqs="1" macInstId="0" spId="0">
           <tapa.tfu.rarsp.req />
        </tapa.tfu.dat.req>
      </tapa.expset>


      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="6" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req schInstId="5" numRntis="1" spId="0" >
            <tapa.tfu.msg3.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>
  

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      #Send CRC for Msg3
      <tapa.send>
         <tapa.tfu.crc.ind suId="0" cellId="3" schInstId="5">
             <tapa.tfu.crc isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # Expect HARQ ACK in PHICH For MSG3
      <tapa.expect>
         <tapa.tfu.cntrl.req numCntrlReq="1" schInstId="5" spId="0">
            <tapa.tfu.phich.cntrl.req isAck="TRUE"/>
         </tapa.tfu.cntrl.req>
      </tapa.expect>

      # Send Message3 after receiving Message3 reception req.
      # rg004.201 Fixed the CCCH sdu size 
      <tapa.send>
         <tapa.tfu.dat.ind macInstId="0" cellId="3" suId="0" datInds="1">
            <tapa.tfu.dat isCcchSdu="TRUE" sduSize="6" addPhr="TRUE" phr="46" />
         </tapa.tfu.dat.ind>      
      </tapa.send>   


      # Expect Message3 datReq on CCCH at RGU.
      <tapa.expect>
         <tapa.rgu.cdatind lcId="4" instId="0" suId="0" cellId="3"/>
      </tapa.expect>

      # Send BO for Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cstarsp instId="0" cellId="3" spId="0" lcId="4" lcType="3" bo="10"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>


      # Expect CStatInd For MSG4
      <tapa.expset>
         <tapa.rgu.cstaind instId="0" cellId="3" suId="0" lcId="4"/>
      </tapa.expset>

      # Send Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cdatreq instId="0" spId="0" cellId="3" lcId="4" lcType="3" />
      </tapa.send>


      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     # Expect Msg4 from MAC to PHY.
     <tapa.expset>
        <tapa.tfu.dat.req datReqs="1" macInstId="0" spId="0">
           <tapa.tfu.pdsch.dat.req use="1" validate="FALSE"/>
        </tapa.tfu.dat.req>   
        <tapa.tfu.cntrl.req numCntrlReq="1" schInstId="5" spId="0">
           <tapa.tfu.pdcch.cntrl.req saveTo="1"/>
        </tapa.tfu.cntrl.req>
     </tapa.expset>


      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # Recv Hq Recp Req for Msg4. 
      <tapa.expect>
         <tapa.tfu.recp.req schInstId="5" numRntis="1" spId="0" >
            <tapa.tfu.hq.recp.req/>
         </tapa.tfu.recp.req>   
      </tapa.expect>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     # Send ACK as feedback for Msg4. 
     <tapa.send>
        <tapa.tfu.hq.ind schInstId="5" suId="0" cellId="3" hqInds="1">
          <tapa.tfu.hq />
       </tapa.tfu.hq.ind>   
     </tapa.send>

     # Send UE config request
     <tapa.send>
        <tapa.crg.cfgreq.cfg.ue instId="0" cellId="3" spId="0"/>
     </tapa.send>

     # Expect success in cfg cfm
     <tapa.expect>
        <tapa.crg.cfgcfm instId="0"/>
     </tapa.expect>

     # Send UE config request
     <tapa.send>
        <tapa.rgr.cfgreq.cfg.ue instId="5" spId="0"/>
     </tapa.send>


      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     # Expect success in cfg cfm
     <tapa.expect>
        <tapa.rgr.cfgCfm instId="5"/>
     </tapa.expect>





      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     ## UE cfg to second instance (cellId 4)

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      #RACH procedure for first UE towards first instance
      <tapa.send>
         <tapa.tfu.rareq.ind instId="5" numRaRnti="1" suId="1">
            <tapa.tfu.rareq  numRapId="1" rapIds="2" timingAdvs="3"
               tpcs="1" cqiPres="TRUE" cqis="4" cellId="4"/>
         </tapa.tfu.rareq.ind>
      </tapa.send>

      # Ue starts expecting raResp after 3 subframes within the raResp window.
      # In this TC, it shall expect raResp in the first subframe after 3 Ttis.
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="2" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>
    
      # Expect RaResp for the rapId sent in RaReq
      <tapa.expset>
        <tapa.tfu.cntrl.req numCntrlReq="1" schInstId="5" spId="1">
           <tapa.tfu.pdcch.cntrl.req/>
        </tapa.tfu.cntrl.req>
        <tapa.tfu.dat.req datReqs="1" macInstId="1" spId="1">
           <tapa.tfu.rarsp.req />
        </tapa.tfu.dat.req>
      </tapa.expset>


      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="6" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req schInstId="5" numRntis="1" spId="1" >
            <tapa.tfu.msg3.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>
  

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      #Send CRC for Msg3
      <tapa.send>
         <tapa.tfu.crc.ind suId="1" cellId="4" schInstId="5">
             <tapa.tfu.crc isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # Expect HARQ ACK in PHICH For MSG3
      <tapa.expect>
         <tapa.tfu.cntrl.req numCntrlReq="1" schInstId="5" spId="1">
            <tapa.tfu.phich.cntrl.req isAck="TRUE"/>
         </tapa.tfu.cntrl.req>
      </tapa.expect>

      # Send Message3 after receiving Message3 reception req.
      # rg004.201 Fixed the CCCH sdu size 
      <tapa.send>
         <tapa.tfu.dat.ind macInstId="1" cellId="4" suId="1" datInds="1">
            <tapa.tfu.dat isCcchSdu="TRUE" sduSize="6" addPhr="TRUE" phr="46" />
         </tapa.tfu.dat.ind>      
      </tapa.send>   


      # Expect Message3 datReq on CCCH at RGU.
      <tapa.expect>
         <tapa.rgu.cdatind lcId="4" instId="1" suId="0" cellId="4"/>
      </tapa.expect>

      # Send BO for Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cstarsp instId="1" cellId="4" spId="0" lcId="4" lcType="3" bo="10"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>


      # Expect CStatInd For MSG4
      <tapa.expset>
         <tapa.rgu.cstaind instId="1" cellId="4" suId="0" lcId="4"/>
      </tapa.expset>

      # Send Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cdatreq instId="1" spId="0" cellId="4" lcId="4" lcType="3" />
      </tapa.send>


      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     # Expect Msg4 from MAC to PHY.
     <tapa.expset>
        <tapa.tfu.dat.req datReqs="1" macInstId="1" spId="1">
           <tapa.tfu.pdsch.dat.req use="1" validate="FALSE"/>
        </tapa.tfu.dat.req>   
        <tapa.tfu.cntrl.req numCntrlReq="1" schInstId="5" spId="1">
           <tapa.tfu.pdcch.cntrl.req saveTo="1"/>
        </tapa.tfu.cntrl.req>
     </tapa.expset>


      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # Recv Hq Recp Req for Msg4. 
      <tapa.expect>
         <tapa.tfu.recp.req schInstId="5" numRntis="1" spId="1" >
            <tapa.tfu.hq.recp.req/>
         </tapa.tfu.recp.req>   
      </tapa.expect>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     # Send ACK as feedback for Msg4. 
     <tapa.send>
        <tapa.tfu.hq.ind schInstId="5" suId="1" cellId="4" hqInds="1">
          <tapa.tfu.hq />
       </tapa.tfu.hq.ind>   
     </tapa.send>

     # Send UE config request
     <tapa.send>
        <tapa.crg.cfgreq.cfg.ue instId="1" cellId="4" spId="1"/>
     </tapa.send>

     # Expect success in cfg cfm
     <tapa.expect>
        <tapa.crg.cfgcfm instId="1"/>
     </tapa.expect>

     # Send UE config request
     <tapa.send>
        <tapa.rgr.cfgreq.cfg.ue instId="5" spId="1" cellId="4"/>
     </tapa.send>


      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     # Expect success in cfg cfm
     <tapa.expect>
        <tapa.rgr.cfgCfm instId="5"/>
     </tapa.expect>

     <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>




      <tapa.delay delay="1"/>      
   </tapa.steps>
</tapa.command>

#
#
#       Command: tapa.rg.multiInst1UeOnFirstCell
#
#       Desc:    Commands to LTEMAC to Initialize UE
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.multiInst1UeOnFirstCell">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         Commands to LTEMAC to Initialize UE with sr cfg
      </tapa.desc>

      <tapa.longdesc>
         Commands to LTEMAC to Initialize UE with sr cfg
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>

      <tapa.tfu.directive ulDeltaPrsnt="TRUE"/>
         # Send RaReqInd for one rapId 
         # Send TTI Ind for firt MAC and SCH inst


      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      #RACH procedure for first UE towards first instance
      <tapa.send>
         <tapa.tfu.rareq.ind instId="5" numRaRnti="1" suId="0">
            <tapa.tfu.rareq  numRapId="1" rapIds="2" timingAdvs="3"
               tpcs="1" cqiPres="TRUE" cqis="4" cellId="3"/>
         </tapa.tfu.rareq.ind>
      </tapa.send>

      # Ue starts expecting raResp after 3 subframes within the raResp window.
      # In this TC, it shall expect raResp in the first subframe after 3 Ttis.
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="2" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>
    
      # Expect RaResp for the rapId sent in RaReq
      <tapa.expset>
        <tapa.tfu.cntrl.req numCntrlReq="1" schInstId="5" spId="0">
           <tapa.tfu.pdcch.cntrl.req/>
        </tapa.tfu.cntrl.req>
        <tapa.tfu.dat.req datReqs="1" macInstId="0" spId="0">
           <tapa.tfu.rarsp.req />
        </tapa.tfu.dat.req>
      </tapa.expset>


      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="6" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req schInstId="5" numRntis="1" spId="0" >
            <tapa.tfu.msg3.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>
  

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      #Send CRC for Msg3
      <tapa.send>
         <tapa.tfu.crc.ind suId="0" cellId="3" schInstId="5">
             <tapa.tfu.crc isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # Expect HARQ ACK in PHICH For MSG3
      <tapa.expect>
         <tapa.tfu.cntrl.req numCntrlReq="1" schInstId="5" spId="0">
            <tapa.tfu.phich.cntrl.req isAck="TRUE"/>
         </tapa.tfu.cntrl.req>
      </tapa.expect>

      # Send Message3 after receiving Message3 reception req.
      # rg004.201 Fixed the CCCH sdu size 
      <tapa.send>
         <tapa.tfu.dat.ind macInstId="0" cellId="3" suId="0" datInds="1">
            <tapa.tfu.dat isCcchSdu="TRUE" sduSize="6" addPhr="TRUE" phr="46" />
         </tapa.tfu.dat.ind>      
      </tapa.send>   


      # Expect Message3 datReq on CCCH at RGU.
      <tapa.expect>
         <tapa.rgu.cdatind lcId="4" instId="0" suId="0" cellId="3"/>
      </tapa.expect>

      # Send BO for Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cstarsp instId="0" cellId="3" spId="0" lcId="4" lcType="3" bo="10"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>


      # Expect CStatInd For MSG4
      <tapa.expset>
         <tapa.rgu.cstaind instId="0" cellId="3" suId="0" lcId="4"/>
      </tapa.expset>

      # Send Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cdatreq instId="0" spId="0" cellId="3" lcId="4" lcType="3" />
      </tapa.send>


      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     # Expect Msg4 from MAC to PHY.
     <tapa.expset>
        <tapa.tfu.dat.req datReqs="1" macInstId="0" spId="0">
           <tapa.tfu.pdsch.dat.req use="1" validate="FALSE"/>
        </tapa.tfu.dat.req>   
        <tapa.tfu.cntrl.req numCntrlReq="1" schInstId="5" spId="0">
           <tapa.tfu.pdcch.cntrl.req saveTo="1"/>
        </tapa.tfu.cntrl.req>
     </tapa.expset>


      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # Recv Hq Recp Req for Msg4. 
      <tapa.expect>
         <tapa.tfu.recp.req schInstId="5" numRntis="1" spId="0" >
            <tapa.tfu.hq.recp.req/>
         </tapa.tfu.recp.req>   
      </tapa.expect>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     # Send ACK as feedback for Msg4. 
     <tapa.send>
        <tapa.tfu.hq.ind schInstId="5" suId="0" cellId="3" hqInds="1">
          <tapa.tfu.hq />
       </tapa.tfu.hq.ind>   
     </tapa.send>

     # Send UE config request
     <tapa.send>
        <tapa.crg.cfgreq.cfg.ue instId="0" cellId="3" spId="0"/>
     </tapa.send>

     # Expect success in cfg cfm
     <tapa.expect>
        <tapa.crg.cfgcfm instId="0"/>
     </tapa.expect>

     # Send UE config request
     <tapa.send>
        <tapa.rgr.cfgreq.cfg.ue instId="5" spId="0"/>
     </tapa.send>


      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     # Expect success in cfg cfm
     <tapa.expect>
        <tapa.rgr.cfgCfm instId="5"/>
     </tapa.expect>


      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>


      <tapa.delay delay="1"/>      
   </tapa.steps>
</tapa.command>



#
#
#       Command: tapa.rg.multiInst1UeOnSecondCell
#
#       Desc:    Commands to LTEMAC to Initialize UE
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.multiInst1UeOnSecondCell">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         Commands to LTEMAC to Initialize UE
      </tapa.desc>

      <tapa.longdesc>
         Commands to LTEMAC to Initialize UE
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>

      <tapa.tfu.directive ulDeltaPrsnt="TRUE"/>

     ## UE cfg to second instance (cellId 4)

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      #RACH procedure for first UE towards first instance
      <tapa.send>
         <tapa.tfu.rareq.ind instId="5" numRaRnti="1" suId="1">
            <tapa.tfu.rareq  numRapId="1" rapIds="2" timingAdvs="3"
               tpcs="1" cqiPres="TRUE" cqis="4" cellId="4"/>
         </tapa.tfu.rareq.ind>
      </tapa.send>

      # Ue starts expecting raResp after 3 subframes within the raResp window.
      # In this TC, it shall expect raResp in the first subframe after 3 Ttis.
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="2" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>
    
      # Expect RaResp for the rapId sent in RaReq
      <tapa.expset>
        <tapa.tfu.cntrl.req numCntrlReq="1" schInstId="5" spId="1">
           <tapa.tfu.pdcch.cntrl.req/>
        </tapa.tfu.cntrl.req>
        <tapa.tfu.dat.req datReqs="1" macInstId="1" spId="1">
           <tapa.tfu.rarsp.req />
        </tapa.tfu.dat.req>
      </tapa.expset>


      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="6" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req schInstId="5" numRntis="1" spId="1" >
            <tapa.tfu.msg3.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>
  

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      #Send CRC for Msg3
      <tapa.send>
         <tapa.tfu.crc.ind suId="1" cellId="4" schInstId="5">
             <tapa.tfu.crc isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # Expect HARQ ACK in PHICH For MSG3
      <tapa.expect>
         <tapa.tfu.cntrl.req numCntrlReq="1" schInstId="5" spId="1">
            <tapa.tfu.phich.cntrl.req isAck="TRUE"/>
         </tapa.tfu.cntrl.req>
      </tapa.expect>

      # Send Message3 after receiving Message3 reception req.
      # rg004.201 Fixed the CCCH sdu size 
      <tapa.send>
         <tapa.tfu.dat.ind macInstId="1" cellId="4" suId="1" datInds="1">
            <tapa.tfu.dat isCcchSdu="TRUE" sduSize="6" addPhr="TRUE" phr="46" />
         </tapa.tfu.dat.ind>      
      </tapa.send>   


      # Expect Message3 datReq on CCCH at RGU.
      <tapa.expect>
         <tapa.rgu.cdatind lcId="4" instId="1" suId="0" cellId="4"/>
      </tapa.expect>

      # Send BO for Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cstarsp instId="1" cellId="4" spId="0" lcId="4" lcType="3" bo="10"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>


      # Expect CStatInd For MSG4
      <tapa.expset>
         <tapa.rgu.cstaind instId="1" cellId="4" suId="0" lcId="4"/>
      </tapa.expset>

      # Send Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cdatreq instId="1" spId="0" cellId="4" lcId="4" lcType="3" />
      </tapa.send>


      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     # Expect Msg4 from MAC to PHY.
     <tapa.expset>
        <tapa.tfu.dat.req datReqs="1" macInstId="1" spId="1">
           <tapa.tfu.pdsch.dat.req use="1" validate="FALSE"/>
        </tapa.tfu.dat.req>   
        <tapa.tfu.cntrl.req numCntrlReq="1" schInstId="5" spId="1">
           <tapa.tfu.pdcch.cntrl.req saveTo="1"/>
        </tapa.tfu.cntrl.req>
     </tapa.expset>


      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # Recv Hq Recp Req for Msg4. 
      <tapa.expect>
         <tapa.tfu.recp.req schInstId="5" numRntis="1" spId="1" >
            <tapa.tfu.hq.recp.req/>
         </tapa.tfu.recp.req>   
      </tapa.expect>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     # Send ACK as feedback for Msg4. 
     <tapa.send>
        <tapa.tfu.hq.ind schInstId="5" suId="1" cellId="4" hqInds="1">
          <tapa.tfu.hq />
       </tapa.tfu.hq.ind>   
     </tapa.send>

     # Send UE config request
     <tapa.send>
        <tapa.crg.cfgreq.cfg.ue instId="1" cellId="4" spId="1"/>
     </tapa.send>

     # Expect success in cfg cfm
     <tapa.expect>
        <tapa.crg.cfgcfm instId="1"/>
     </tapa.expect>

     # Send UE config request
     <tapa.send>
        <tapa.rgr.cfgreq.cfg.ue instId="5" spId="1" cellId="4"/>
     </tapa.send>


      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     # Expect success in cfg cfm
     <tapa.expect>
        <tapa.rgr.cfgCfm instId="5"/>
     </tapa.expect>

     <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>


      <tapa.delay delay="1"/>      
   </tapa.steps>
</tapa.command>


#
#
#       Command: tapa.rg.addSecCell
#
#       Desc:    Commands to LTEMAC to add sec cell for an UE
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.addSecCell">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         Commands to LTEMAC to Initialize UE
      </tapa.desc>

      <tapa.longdesc>
         Commands to LTEMAC to Initialize UE
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>

      <tapa.tfu.directive ulDeltaPrsnt="TRUE"/>

     ## Recfg req for adding sec cell
      <tapa.send>
         <tapa.rgr.cfgreq.recfg.ue isSCellAdd="TRUE" numSCells="1" 
            sCellIdx="1" sCellId="4"  instId="5"
            pucchFormatType="RG_SCH_UCI_FORMAT1B_CS"
            n1PUCCHValTB1="0:1:2:3" n1PUCCHValTB2="5:6:7:8"/>
      </tapa.send>


      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         <tapa.rgr.cfgCfm/>
      </tapa.expect>

      #Add UE to the Seconday Cell which calls rgAddSCellCfg 
      <tapa.send>
          <tapa.crg.cfgreq.recfg.ue sCellId="4" isSCellCfgPres="TRUE" numSCells="1"
                  macInst="1" rguUlSapId="0" rguDlSapId="0"/>
      </tapa.send>

      # Expect success in cfg cfm
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

	  #Send Ready Request for SCELL
       <tapa.send>
         <tapa.rgr.actDeact.scell sCellActionType="1"/>
      </tapa.send>

      # expect cfm in the same tti
      <tapa.expect>
         <tapa.rgr.cfgCfm />
      </tapa.expect>

      <tapa.delay delay="1"/>      
   </tapa.steps>
</tapa.command>


#
#
#       Command: tapa.rg.relSecCell
#
#       Desc:    Commands to LTEMAC to add sec cell for an UE
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.relSecCell">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         Commands to LTEMAC to Initialize UE
      </tapa.desc>

      <tapa.longdesc>
         Commands to LTEMAC to Initialize UE
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>

      <tapa.tfu.directive ulDeltaPrsnt="TRUE"/>

      <tapa.send>
         <tapa.rgr.cfgreq.recfg.ue isSCellRel="TRUE" numSCells="1" 
            sCellIdx="1" sCellId="4"  instId="5"/>
      </tapa.send>
      
      <tapa.delay delay="1"/>      
   </tapa.steps>
</tapa.command>

#
#
#       Command: tapa.rg.sCellActivate
#
#       Desc:    Commands to LTEMAC to activate sec cell for an UE
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.sCellActivate">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         Commands Activate SCELL
      </tapa.desc>

      <tapa.longdesc>
         Commands to Activate SCELL
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>

      <tapa.tfu.directive ulDeltaPrsnt="TRUE"/>

      #Steps for BO Updation
      #Send BO for UE1 on instance 0
      <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="0" cellId="3"  ueId="0" lcId="5" bo="8000"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

	  <tapa.expect>
         <tapa.rgu.dstaind instId="0" ueId="0" cellId="3" numLchTb1="1" lchTb1Data="5" valdtTrue="1" />
      </tapa.expect>

      <tapa.send>
         # Send DDatReq for 1st Ue on inst 0
          <tapa.rgu.ddatreq  instId="0" cellId="3" ueId="0" numLchTb1="1" lchTb1Data="5"/>
      </tapa.send>

      <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="0" cellId="3"  ueId="0" lcId="5" bo="8000"/>
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expset>
        <tapa.rgu.dstaind instId="0" ueId="0" cellId="3" numLchTb1="1" lchTb1Data="5" valdtTrue="1" />

      	<tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="0">
      		<tapa.tfu.pdcch.cntrl.req cellId="3" ueId="0" saveTo="0"/>
     	</tapa.tfu.cntrl.req>
      
        <tapa.tfu.dat.req macInstId="0" spId="0">
      		<tapa.tfu.pdsch.dat.req ueId="0" use="0" validate="TRUE"/>
      	</tapa.tfu.dat.req>
      </tapa.expset>      
	  
	  <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="0" cellId="3"  ueId="0" lcId="5" bo="8000"/>
      </tapa.send>   

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

	  <tapa.expset>
        <tapa.rgu.dstaind instId="0" ueId="0" cellId="3" numLchTb1="1" lchTb1Data="5" valdtTrue="1" />

      	<tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="0">
      		<tapa.tfu.pdcch.cntrl.req cellId="3" ueId="0" saveTo="0"/>
     	</tapa.tfu.cntrl.req>
      
        <tapa.tfu.dat.req macInstId="0" spId="0">
      		<tapa.tfu.pdsch.dat.req ueId="0" use="0" validate="TRUE"/>
      	</tapa.tfu.dat.req>
      </tapa.expset>

	  <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="0" cellId="3"  ueId="0" lcId="5" bo="8000"/>
      </tapa.send>   

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

	  <tapa.expset>
        <tapa.rgu.dstaind instId="0" ueId="0" cellId="3" numLchTb1="1" lchTb1Data="5" valdtTrue="1" />

      	<tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="0">
      		<tapa.tfu.pdcch.cntrl.req cellId="3" ueId="0" saveTo="0"/>
     	</tapa.tfu.cntrl.req>
      
        <tapa.tfu.dat.req macInstId="0" spId="0">
      		<tapa.tfu.pdsch.dat.req ueId="0" use="0" validate="TRUE"/>
      	</tapa.tfu.dat.req>
      </tapa.expset>

	  <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="0" cellId="3"  ueId="0" lcId="5" bo="8000"/>
      </tapa.send>   

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

	  <tapa.expset>
        <tapa.rgu.dstaind instId="0" ueId="0" cellId="3" numLchTb1="1" lchTb1Data="5" valdtTrue="1" />

      	<tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="0">
      		<tapa.tfu.pdcch.cntrl.req cellId="3" ueId="0" saveTo="0"/>
     	</tapa.tfu.cntrl.req>
      
        <tapa.tfu.dat.req macInstId="0" spId="0">
      		<tapa.tfu.pdsch.dat.req ueId="0" use="0" validate="TRUE"/>
      	</tapa.tfu.dat.req>
      </tapa.expset>

	  <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="0" cellId="3"  ueId="0" lcId="5" bo="8000"/>
      </tapa.send>   

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

	  <tapa.expset>
        <tapa.rgu.dstaind instId="0" ueId="0" cellId="3" numLchTb1="1" lchTb1Data="5" valdtTrue="1" />

      	<tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="0">
      		<tapa.tfu.pdcch.cntrl.req cellId="3" ueId="0" saveTo="0"/>
     	</tapa.tfu.cntrl.req>
      
	    <tapa.tfu.recp.req schInstId="5" spId="0" ueId="0" >
               <tapa.tfu.hq.recp.req/>
        </tapa.tfu.recp.req>
        
		<tapa.tfu.dat.req macInstId="0" spId="0">
      		<tapa.tfu.pdsch.dat.req ueId="0" use="0" validate="TRUE"/>
      	</tapa.tfu.dat.req>
      </tapa.expset>

	  <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="0" cellId="3"  ueId="0" lcId="5" bo="8000"/>
      </tapa.send>   

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

	  <tapa.expset>
        <tapa.rgu.dstaind instId="0" ueId="0" cellId="3" numLchTb1="1" lchTb1Data="5" valdtTrue="1" />

      	<tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="0">
      		<tapa.tfu.pdcch.cntrl.req cellId="3" ueId="0" saveTo="0"/>
     	</tapa.tfu.cntrl.req>
      
	    <tapa.tfu.recp.req schInstId="5" spId="0" ueId="0" >
               <tapa.tfu.hq.recp.req/>
        </tapa.tfu.recp.req>
        
		<tapa.tfu.dat.req macInstId="0" spId="0">
      		<tapa.tfu.pdsch.dat.req ueId="0" use="0" validate="TRUE"/>
      	</tapa.tfu.dat.req>
      </tapa.expset>

	  <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="0" cellId="3"  ueId="0" lcId="5" bo="8000"/>
      </tapa.send>   

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

	  <tapa.expset>
        <tapa.rgu.dstaind instId="0" ueId="0" cellId="3" numLchTb1="1" lchTb1Data="5" valdtTrue="1" />

      	<tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="0">
      		<tapa.tfu.pdcch.cntrl.req cellId="3" ueId="0" saveTo="0"/>
     	</tapa.tfu.cntrl.req>
      
	    <tapa.tfu.recp.req schInstId="5" spId="0" ueId="0" >
               <tapa.tfu.hq.recp.req/>
        </tapa.tfu.recp.req>
        
		<tapa.tfu.dat.req macInstId="0" spId="0">
      		<tapa.tfu.pdsch.dat.req ueId="0" use="0" validate="TRUE"/>
      	</tapa.tfu.dat.req>
      </tapa.expset>

	  <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="0" cellId="3"  ueId="0" lcId="5" bo="8000"/>
      </tapa.send>   

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

	  <tapa.send>
        <tapa.tfu.hq.ind hqInds="1" cellId="3" suId="0" schInstId="5">
              <tapa.tfu.hq ueId="0"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>

	  <tapa.expset>
      	
		<tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="0">
      		<tapa.tfu.pdcch.cntrl.req cellId="3" ueId="0" saveTo="0"/>
     	</tapa.tfu.cntrl.req>
      
	    <tapa.tfu.recp.req schInstId="5" spId="0" ueId="0" >
               <tapa.tfu.hq.recp.req/>
        </tapa.tfu.recp.req>
        
		<tapa.tfu.dat.req macInstId="0" spId="0">
      		<tapa.tfu.pdsch.dat.req ueId="0" use="0" validate="TRUE"/>
      	</tapa.tfu.dat.req>
      </tapa.expset>

	  <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="0" cellId="3"  ueId="0" lcId="5" bo="8000"/>
      </tapa.send>   

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

	  <tapa.send>
        <tapa.tfu.hq.ind hqInds="1" cellId="3" suId="0" schInstId="5">
              <tapa.tfu.hq ueId="0"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>

	  <tapa.expset>
        <tapa.rgu.dstaind instId="0" ueId="0" cellId="3" numLchTb1="1" lchTb1Data="5" valdtTrue="1" />

	    <tapa.tfu.recp.req schInstId="5" spId="0" ueId="0" >
               <tapa.tfu.hq.recp.req/>
        </tapa.tfu.recp.req>
      </tapa.expset>

	  <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="0" cellId="3"  ueId="0" lcId="5" bo="8000"/>
      </tapa.send>   

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

	  <tapa.send>
        <tapa.tfu.hq.ind hqInds="1" cellId="3" suId="0" schInstId="5">
              <tapa.tfu.hq ueId="0"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>

	  <tapa.expset>
        <tapa.rgu.dstaind instId="0" ueId="0" cellId="3" numLchTb1="1" lchTb1Data="5" valdtTrue="1" />

      	<tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="0">
      		<tapa.tfu.pdcch.cntrl.req cellId="3" ueId="0" saveTo="0"/>
     	</tapa.tfu.cntrl.req>
      
	    <tapa.tfu.recp.req schInstId="5" spId="0" ueId="0" >
               <tapa.tfu.hq.recp.req/>
        </tapa.tfu.recp.req>
        
		<tapa.tfu.dat.req macInstId="0" spId="0">
      		<tapa.tfu.pdsch.dat.req ueId="0" use="0" validate="TRUE"/>
      	</tapa.tfu.dat.req>
      </tapa.expset>

	  <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="0" cellId="3"  ueId="0" lcId="5" bo="0"/>
      </tapa.send>   

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

	  <tapa.send>
        <tapa.tfu.hq.ind hqInds="1" cellId="3" suId="0" schInstId="5">
              <tapa.tfu.hq ueId="0"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>

	  <tapa.expset>
      	<tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="0">
      		<tapa.tfu.pdcch.cntrl.req cellId="3" ueId="0" saveTo="0"/>
     	</tapa.tfu.cntrl.req>
      
	    <tapa.tfu.recp.req schInstId="5" spId="0" ueId="0" >
               <tapa.tfu.hq.recp.req/>
        </tapa.tfu.recp.req>
        
		<tapa.tfu.dat.req macInstId="0" spId="0">
      		<tapa.tfu.pdsch.dat.req ueId="0" use="0" validate="TRUE"/>
      	</tapa.tfu.dat.req>
      </tapa.expset>

######################
      # Send TTI tick to get CE scheduled. 
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1" numInst="2" numTti="1" 
            macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

	  <tapa.send>
        <tapa.tfu.hq.ind hqInds="1" cellId="3" suId="0" schInstId="5">
              <tapa.tfu.hq ueId="0"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>

     <tapa.expset>
         <tapa.tfu.cntrl.req numCntrlReq="1" schInstId="5" spId="0">
            <tapa.tfu.pdcch.cntrl.req/>
         </tapa.tfu.cntrl.req>
		 <tapa.tfu.recp.req schInstId="5" spId="0" ueId="0" >
               <tapa.tfu.hq.recp.req/>
        </tapa.tfu.recp.req>
         <tapa.tfu.dat.req datReqs="1" macInstId="0" spId="0">
            <tapa.tfu.pdsch.dat.req  validate="TRUE" chkSCellDeActCe="TRUE" deActCeVal="2" />
         </tapa.tfu.dat.req>
     </tapa.expset>

	 # Send TTI indication for waiting for hq feedback
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" 
            macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

	  <tapa.send>
        <tapa.tfu.hq.ind hqInds="1" cellId="3" suId="0" schInstId="5">
              <tapa.tfu.hq ueId="0"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>

	 <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" 
            macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

	  <tapa.send>
        <tapa.tfu.hq.ind hqInds="1" cellId="3" suId="0" schInstId="5">
              <tapa.tfu.hq ueId="0"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>

     <tapa.expset>
        <tapa.tfu.recp.req schInstId="5" spId="0" ueId="0" >
               <tapa.tfu.hq.recp.req/>
        </tapa.tfu.recp.req>
     </tapa.expset>

	 <tapa.send>
        <tapa.tfu.hq.ind hqInds="1" cellId="3" suId="0" schInstId="5">
              <tapa.tfu.hq ueId="0"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>

	 <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" 
            macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

	  <tapa.send>
        <tapa.tfu.hq.ind hqInds="1" cellId="3" suId="0" schInstId="5">
              <tapa.tfu.hq ueId="0"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>

	  <tapa.expset>
        <tapa.tfu.recp.req schInstId="5" spId="0" ueId="0" >
               <tapa.tfu.hq.recp.req/>
        </tapa.tfu.recp.req>
     </tapa.expset>

	 <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" 
            macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

	  <tapa.expset>
        <tapa.tfu.recp.req schInstId="5" spId="0" ueId="0" >
               <tapa.tfu.hq.recp.req/>
        </tapa.tfu.recp.req>
     </tapa.expset>

	 <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" 
            macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

	 <tapa.send>
        <tapa.tfu.hq.ind hqInds="1" cellId="3" suId="0" schInstId="5">
              <tapa.tfu.hq ueId="0"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>

	 <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" 
            macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

	  <tapa.send>
        <tapa.tfu.hq.ind hqInds="1" cellId="3" suId="0" schInstId="5">
              <tapa.tfu.hq ueId="0"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>

	 <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" 
            macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

	  <tapa.send>
        <tapa.tfu.hq.ind hqInds="1" cellId="3" suId="0" schInstId="5">
              <tapa.tfu.hq ueId="0"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>

	 <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="5" 
            macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.delay delay="1"/>      
   </tapa.steps>
</tapa.command>


#
#
#       Command: tapa.rg.multiInst1UeOnFirstCellTddCM2
#
#       Desc:    Commands to LTEMAC to Initialize UE
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.multiInst1UeOnFirstCellTddCM2">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         Commands to LTEMAC to Initialize UE with sr cfg
      </tapa.desc>

      <tapa.longdesc>
         Commands to LTEMAC to Initialize UE with sr cfg
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>

      <tapa.tfu.directive ulDeltaPrsnt="TRUE"/>
         # Send RaReqInd for one rapId 
         # Send TTI Ind for firt MAC and SCH inst
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      #(0,3)
      #RACH procedure for first UE towards first instance
      <tapa.send>
         <tapa.tfu.rareq.ind instId="5" numRaRnti="1" suId="0">
            <tapa.tfu.rareq  numRapId="1" rapIds="5" cqiPres="TRUE" cqis="4" cellId="3"/>
         </tapa.tfu.rareq.ind>
      </tapa.send>

      # Ue starts expecting raResp after 3 subframes within the raResp window.
      # In this TC, it shall expect raResp in the first subframe after 3 Ttis.
      <tapa.send>
         #<tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
          <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="2" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>
    
      #(0,7)
      # Expect RaResp for the rapId sent in RaReq
      <tapa.expset>
        <tapa.tfu.cntrl.req numCntrlReq="1" schInstId="5" spId="0">
           <tapa.tfu.pdcch.cntrl.req/>
        </tapa.tfu.cntrl.req>
        <tapa.tfu.dat.req datReqs="1" macInstId="0" spId="0">
           <tapa.tfu.rarsp.req />
        </tapa.tfu.dat.req>
      </tapa.expset>
      
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="6" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
         #<tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="7" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      #(2,6)
      <tapa.expect>
         <tapa.tfu.recp.req schInstId="5" numRntis="1" spId="0" >
            <tapa.tfu.msg3.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>
  

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      #(1,0)
      #Send CRC for Msg3
      <tapa.send>
         <tapa.tfu.crc.ind suId="0" cellId="3" schInstId="5">
             <tapa.tfu.crc isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # Expect HARQ ACK in PHICH For MSG3
      <tapa.expect>
         <tapa.tfu.cntrl.req numCntrlReq="1" schInstId="5" spId="0">
            <tapa.tfu.phich.cntrl.req isAck="TRUE"/>
         </tapa.tfu.cntrl.req>
      </tapa.expect>

      # Send Message3 after receiving Message3 reception req.
      # rg004.201 Fixed the CCCH sdu size 
      <tapa.send>
         <tapa.tfu.dat.ind macInstId="0" cellId="3" suId="0" datInds="1">
            <tapa.tfu.dat isCcchSdu="TRUE" sduSize="6" addPhr="TRUE" phr="46" />
         </tapa.tfu.dat.ind>      
      </tapa.send>   


      # Expect Message3 datReq on CCCH at RGU.
      <tapa.expect>
         <tapa.rgu.cdatind lcId="4" instId="0" suId="0" cellId="3"/>
      </tapa.expect>

      # Send BO for Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cstarsp instId="0" cellId="3" spId="0" lcId="4" lcType="3" bo="10"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>


      # Expect CStatInd For MSG4
      <tapa.expset>
         <tapa.rgu.cstaind instId="0" cellId="3" suId="0" lcId="4"/>
      </tapa.expset>

      # Send Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cdatreq instId="0" spId="0" cellId="3" lcId="4" lcType="3" />
      </tapa.send>


      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>
     # Expect Msg4 from MAC to PHY.
     <tapa.expset>
        <tapa.tfu.dat.req datReqs="1" macInstId="0" spId="0">
           <tapa.tfu.pdsch.dat.req use="1" validate="FALSE"/>
        </tapa.tfu.dat.req>   
        <tapa.tfu.cntrl.req numCntrlReq="1" schInstId="5" spId="0">
           <tapa.tfu.pdcch.cntrl.req saveTo="1"/>
        </tapa.tfu.cntrl.req>
     </tapa.expset>


      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="6" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # Recv Hq Recp Req for Msg4. 
      <tapa.expect>
         <tapa.tfu.recp.req schInstId="5" numRntis="1" spId="0" >
            <tapa.tfu.hq.recp.req/>
         </tapa.tfu.recp.req>   
      </tapa.expect>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     # Send ACK as feedback for Msg4. 
     <tapa.send>
        <tapa.tfu.hq.ind schInstId="5" suId="0" cellId="3" hqInds="1">
          <tapa.tfu.hq />
       </tapa.tfu.hq.ind>   
     </tapa.send>

     # Send UE config request
     <tapa.send>
        <tapa.crg.cfgreq.cfg.ue instId="0" cellId="3" spId="0"/>
     </tapa.send>

     # Expect success in cfg cfm
     <tapa.expect>
        <tapa.crg.cfgcfm instId="0"/>
     </tapa.expect>

     # Send UE config request
     <tapa.send>
        <tapa.rgr.cfgreq.cfg.ue instId="5" spId="0" ackNackModeEnum="RGR_TDD_ACKNACK_MODE_MULT"/>
     </tapa.send>


      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     # Expect success in cfg cfm
     <tapa.expect>
        <tapa.rgr.cfgCfm instId="5"/>
     </tapa.expect>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>
      
      <tapa.delay delay="1"/>      
   </tapa.steps>
</tapa.command>

#
#
#       Command: tapa.rg.multiInst1UeOnFirstCellTddCM1
#
#       Desc:    Commands to LTEMAC to Initialize UE Cfg type 1 Spl sf cfg 7 on
#                first cell
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.multiInst1UeOnFirstCellTddCM1">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize UE"
      </tapa.desc>

      <tapa.longdesc>
         "This command will finish complete RA process and does the UE
         Configuration"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>

      <tapa.tfu.directive ulDeltaPrsnt="TRUE"/>
      
	  # Send RaReqInd for one rapId in the first special frame 
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>
      #Sub-frame 2

      # Send it in the 6th frequency index 
      <tapa.send>
         <tapa.tfu.rareq.ind instId="5" numRaRnti="1" suId="0">
            <tapa.tfu.rareq  numRapId="1" rapIds="5" cqiPres="TRUE" cqis="4" cellId="3"/>
         </tapa.tfu.rareq.ind>
      </tapa.send>

	  # Ue starts expecting raResp after 3 subframes within the raResp window.
      # In this TC, it shall expect raResp in the first DL subframe after 3 Ttis.

      <tapa.send>
          <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="2" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>
      #Sub-frame 4
      
      # Expect RaResp for the rapId sent in RaReq
      <tapa.expset>
        <tapa.tfu.dat.req datReqs="1" macInstId="0" spId="0">
           <tapa.tfu.rarsp.req/>
        </tapa.tfu.dat.req>
        <tapa.tfu.cntrl.req numCntrlReq="1" schInstId="5" spId="0">
           <tapa.tfu.pdcch.cntrl.req/>
        </tapa.tfu.cntrl.req>
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="6" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>
      #Sub-frame 0

	  # message 3 reception request afetr Ra Rsp
      <tapa.expect>
         <tapa.tfu.recp.req schInstId="5" numRntis="1" spId="0" >
            <tapa.tfu.msg3.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>
      #Sub-frame 4

      #Send CRC for Msg3
      <tapa.send>
         <tapa.tfu.crc.ind suId="0" cellId="3" schInstId="5">
            <tapa.tfu.crc isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>
      #Sub-frame 5

	  # Expect HARQ ACK in PHICH For MSG3
      <tapa.expect>
         <tapa.tfu.cntrl.req numCntrlReq="1" schInstId="5" spId="0">
            <tapa.tfu.phich.cntrl.req isAck="TRUE"/>
         </tapa.tfu.cntrl.req>
      </tapa.expect>

      # Send Message3 after receiving Message3 reception req.
      <tapa.send>
         <tapa.tfu.dat.ind macInstId="0" cellId="3" suId="0" datInds="1">
          <tapa.tfu.dat  isCcchSdu="TRUE" sduSize="6"/>
       </tapa.tfu.dat.ind>      
      </tapa.send>

	  # Expect Message3 datReq on CCCH at RGU.
      <tapa.expect>
         <tapa.rgu.cdatind lcId="4" instId="0" suId="0" cellId="3"/>
      </tapa.expect>

	  # Send BO for Msg4 on RGU.
      <tapa.send>
         <tapa.rgu.cstarsp instId="0" cellId="3" spId="0" lcId="4" lcType="3" bo="10"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>
      #Sub-frame 6
   
      # Expect CStatInd For MSG4
      <tapa.expset>
         <tapa.rgu.cstaind instId="0" cellId="3" suId="0" lcId="4"/>
      </tapa.expset>

	  # Send Msg4 on RGU.
      <tapa.send>
         <tapa.rgu.cdatreq instId="0" spId="0" cellId="3" lcId="4" lcType="3" />
      </tapa.send>

	  <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>
      #Sub-frame 7
  
     # Expect Msg4 from MAC to PHY.
     <tapa.expset>
        <tapa.tfu.dat.req datReqs="1" macInstId="0" spId="0">
           <tapa.tfu.pdsch.dat.req use="1" validate="FALSE"/>
        </tapa.tfu.dat.req>   
        <tapa.tfu.cntrl.req numCntrlReq="1" schInstId="5" spId="0">
           <tapa.tfu.pdcch.cntrl.req saveTo="1"/>
        </tapa.tfu.cntrl.req>
     </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>
      #Sub-frame 1

      # Recv Hq Recp Req for Msg4.
      <tapa.expect>
         <tapa.tfu.recp.req schInstId="5" numRntis="1" spId="0" >
            <tapa.tfu.hq.recp.req/>
         </tapa.tfu.recp.req>   
      </tapa.expect>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>
      #Sub-frame 4

      # Send ACK as feedback for Msg4.
      <tapa.send>
        <tapa.tfu.hq.ind schInstId="5" suId="0" cellId="3" hqInds="1">
           <tapa.tfu.hq isAckLst="TRUE:FALSE:FALSE:FALSE"/>
        </tapa.tfu.hq.ind>
     </tapa.send>

	 # Send UE config request
      <tapa.send>
        <tapa.crg.cfgreq.cfg.ue instId="0" cellId="3" spId="0"/>
      </tapa.send>
   
      # Expect success in cfg cfm
      <tapa.expect>
        <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>
   
      # Send UE config request
      <tapa.send>
        <tapa.rgr.cfgreq.cfg.ue instId="5" spId="0"/>
      </tapa.send>
   
      # Expect success in cfg cfm
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>
   
   </tapa.steps>

</tapa.command>

#
#
#       Command: tapa.rg.fiveInstMacInit
#
#       Desc:    Layer Manager Commands to LTEMAC for TWO Instances
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.fiveInstMacInit">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Layer Manager Commands to LTEMAC for FIVE instances
      </tapa.desc>

      <tapa.longdesc>
         "5 MAC instance creation"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      # Send General Configuration for LTEMAC for isntance 0
      <tapa.send>
         <tapa.lrg.cfg.gen tmrRes="10" instId="0"/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC from instance 0
      <tapa.expect>
         <tapa.lrg.cfgcfm/>
      </tapa.expect>

      # Send General Configuration for LTEMAC for isntance 1
      <tapa.send>
         <tapa.lrg.cfg.gen tmrRes="10" instId="1"/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC from instance 1
      <tapa.expect>
         <tapa.lrg.cfgcfm instId="1"/>
      </tapa.expect>

      # Send General Configuration for LTEMAC for isntance 2
      <tapa.send>
         <tapa.lrg.cfg.gen tmrRes="10" instId="2"/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC from instance 2
      <tapa.expect>
         <tapa.lrg.cfgcfm instId="2"/>
      </tapa.expect> 

      # Send General Configuration for LTEMAC for isntance 3
      <tapa.send>
         <tapa.lrg.cfg.gen tmrRes="10" instId="3"/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC from instance 3
      <tapa.expect>
         <tapa.lrg.cfgcfm instId="3"/>
      </tapa.expect> 

      # Send General Configuration for LTEMAC for isntance 4
      <tapa.send>
         <tapa.lrg.cfg.gen tmrRes="10" instId="4"/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC from instance 4
      <tapa.expect>
         <tapa.lrg.cfgcfm instId="4"/>
      </tapa.expect> 

      #Send CRG SSAP Configuration to LTEMAC for macinst 0 */
      <tapa.send>
         <tapa.lrg.cfg.crgsap isntanceId="0"/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC macInst 0
      <tapa.expect>
         <tapa.lrg.cfgcfm instId="0"/>
      </tapa.expect>

      #Send RGR SSAP Configuration to LTEMAC */
      <tapa.send>
         <tapa.lrg.cfg.schins numSaps="5" instId="5" rgr_suId="0:1:2:3:4" rgr_spId="0:1:2:3:4"
            rgm_suId="0:1:2:3:4" rgm_spId="0:1:2:3:4" tfu_suId="0:1:2:3:4" tfu_spId="0:1:2:3:4" bndTimerValue="5" />
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.schcfgcfm instId="5"/>
      </tapa.expect>

      #Send TFU SSAP Configuration to LTEMAC isnt 0 */
      <tapa.send>
         <tapa.lrg.cfg.tfusap instId="0"/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC inst 0
      <tapa.expect>
         <tapa.lrg.cfgcfm instId="0"/>
      </tapa.expect>
      
      #Send RGU  SSAP Configuration to LTEMAC  inst 0*/
      <tapa.send>
         <tapa.lrg.cfg.rgusap instId="0" suId="0" spId="0"/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC inst 0
      <tapa.expect>
         <tapa.lrg.cfgcfm instId="0"/>
      </tapa.expect>

      #################### Instance 1 ######################

      #Send CRG SSAP Configuration to LTEMAC for macinst 1 */
      <tapa.send>
         <tapa.lrg.cfg.crgsap instId="1" suId="1" spId="1"/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC macInst 1
      <tapa.expect>
         <tapa.lrg.cfgcfm instId="1"/>
      </tapa.expect>

      #Send TFU SSAP Configuration to LTEMAC isnt 1 */
      <tapa.send>
         <tapa.lrg.cfg.tfusap instId="1" suId="1" spId="1"/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC inst 1
      <tapa.expect>
         <tapa.lrg.cfgcfm instId="1"/>
      </tapa.expect>
      
      #Send RGU  SSAP Configuration to LTEMAC  inst 1*/
      <tapa.send>
         <tapa.lrg.cfg.rgusap instId="1" suId="0" spId="0"/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC inst 1
      <tapa.expect>
         <tapa.lrg.cfgcfm instId="1"/>
      </tapa.expect>

      #################### Instance 2 ######################

      #Send CRG SSAP Configuration to LTEMAC for macinst 2 */
      <tapa.send>
         <tapa.lrg.cfg.crgsap instId="2" suId="2" spId="2"/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC macInst 2
      <tapa.expect>
         <tapa.lrg.cfgcfm instId="2"/>
      </tapa.expect>

      #Send TFU SSAP Configuration to LTEMAC isnt 2 */
      <tapa.send>
         <tapa.lrg.cfg.tfusap instId="2" suId="2" spId="2"/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC inst 2
      <tapa.expect>
         <tapa.lrg.cfgcfm instId="2"/>
      </tapa.expect>
      
      #Send RGU  SSAP Configuration to LTEMAC  inst 2*/
      <tapa.send>
         <tapa.lrg.cfg.rgusap instId="2" suId="0" spId="0"/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC inst 2
      <tapa.expect>
         <tapa.lrg.cfgcfm instId="2"/>
      </tapa.expect> 

      #################### Instance 3 ######################

      #Send CRG SSAP Configuration to LTEMAC for macinst 3 */
      <tapa.send>
         <tapa.lrg.cfg.crgsap instId="3" suId="3" spId="3"/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC macInst 3
      <tapa.expect>
         <tapa.lrg.cfgcfm instId="3"/>
      </tapa.expect>

      #Send TFU SSAP Configuration to LTEMAC isnt 3 */
      <tapa.send>
         <tapa.lrg.cfg.tfusap instId="3" suId="3" spId="3"/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC inst 3
      <tapa.expect>
         <tapa.lrg.cfgcfm instId="3"/>
      </tapa.expect>
      
      #Send RGU  SSAP Configuration to LTEMAC  inst 3*/
      <tapa.send>
         <tapa.lrg.cfg.rgusap instId="3" suId="0" spId="0"/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC inst 3
      <tapa.expect>
         <tapa.lrg.cfgcfm instId="3"/>
      </tapa.expect> 

      #################### Instance 4 ######################

      #Send CRG SSAP Configuration to LTEMAC for macinst 4 */
      <tapa.send>
         <tapa.lrg.cfg.crgsap instId="4" suId="4" spId="4"/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC macInst 4
      <tapa.expect>
         <tapa.lrg.cfgcfm instId="4"/>
      </tapa.expect>

      #Send TFU SSAP Configuration to LTEMAC isnt 4 */
      <tapa.send>
         <tapa.lrg.cfg.tfusap instId="4" suId="4" spId="4"/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC inst 4
      <tapa.expect>
         <tapa.lrg.cfgcfm instId="4"/>
      </tapa.expect>
      
      #Send RGU  SSAP Configuration to LTEMAC  inst 4*/
      <tapa.send>
         <tapa.lrg.cfg.rgusap instId="4" suId="0" spId="0"/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC inst 4
      <tapa.expect>
         <tapa.lrg.cfgcfm instId="4"/>
      </tapa.expect> 

   </tapa.steps>

</tapa.command>
#
#
#       Command: tapa.rg.fiveInstCellSapInit
#
#       Desc:    Commands to LTEMAC to perform multiple saps required for 5 cells
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.fiveInstCellSapInit">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize SAP for 5 CELL
      </tapa.desc>

      <tapa.longdesc>
         "Binding RGR and CRG SAPS, Creatting CELL in CRG Interface, creating 
         common logical channels(BCCH/BCH, BCCH/DLSCH, PCCH, CCCH) and RGR
         CELL configuration for schedular related information"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      #Send Bind Request for CRG SAP  for inst 0
      <tapa.send>
         <tapa.crg.bndreq instId="0"/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.crg.bndcfm instId="0" suId="0"/>
      </tapa.expect>

      #Send Bind Request for CRG SAP for inst 1
      <tapa.send>
         <tapa.crg.bndreq instId="1" suId="1" spId="1"/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.crg.bndcfm instId="1" suId="1"/>
      </tapa.expect>

      #Send Bind Request for CRG SAP for inst 2
      <tapa.send>
         <tapa.crg.bndreq instId="2" suId="2" spId="2"/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.crg.bndcfm instId="2" suId="2"/>
      </tapa.expect> 

      #Send Bind Request for CRG SAP for inst 3
      <tapa.send>
         <tapa.crg.bndreq instId="3" suId="3" spId="3"/>
      </tapa.send>
      
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.crg.bndcfm instId="3" suId="3"/>
      </tapa.expect> 

      #Send Bind Request for CRG SAP for inst 4
      <tapa.send>
         <tapa.crg.bndreq instId="4" suId="4" spId="4"/>
      </tapa.send>

      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.crg.bndcfm instId="4" suId="4"/>
      </tapa.expect> 

      #Send Bind Request for RGU SAP  for inst 0
      <tapa.send>
         <tapa.rgu.bndreq instId="0" suId="0" spId="0"/>
      </tapa.send>
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgu.bndcfm instId="0" suId="0"/>
      </tapa.expect>

      #Send Bind Request for RGU SAP for inst 1 
      <tapa.send>
         <tapa.rgu.bndreq instId="1" suId="0" spId="0"/>
      </tapa.send>
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgu.bndcfm instId="1" suId="0"/>
      </tapa.expect>

      #Send Bind Request for RGU SAP  for inst 2
      <tapa.send>
         <tapa.rgu.bndreq instId="2" suId="0" spId="0"/>
      </tapa.send>
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgu.bndcfm instId="2" suId="0"/>
      </tapa.expect> 

      #Send Bind Request for RGU SAP  for inst 3
      <tapa.send>
         <tapa.rgu.bndreq instId="3" suId="0" spId="0"/>
      </tapa.send>
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgu.bndcfm instId="3" suId="0"/>
      </tapa.expect> 

      #Send Bind Request for RGU SAP  for inst 4
      <tapa.send>
         <tapa.rgu.bndreq instId="4" suId="0" spId="0"/>
      </tapa.send>
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgu.bndcfm instId="4" suId="0"/>
      </tapa.expect> 

      #Expect NOK_DONE Control Confirm from LTE MAC inst 0
      #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.cntrlreq instId="0" suId="0" spId="0" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.cntrlcfm instId="0" status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL"/>
      </tapa.expect>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.bndreq instId="0"/>
      </tapa.expect>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.bndcfm suId="0" instId="0"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm instId="0"/>
      </tapa.expect>

      #Expect NOK_DONE Control Confirm from LTE MAC inst 1
      #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.cntrlreq  instId="1" suId="1" spId="1" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.cntrlcfm instId="1" status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL"/>
      </tapa.expect>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.bndreq instId="1" sudId="1" spId="1"/>
      </tapa.expect>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.bndcfm suId="1" spId="1" instId="1"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm instId="1"/>
      </tapa.expect>

      #Expect NOK_DONE Control Confirm from LTE MAC inst 2
      #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.cntrlreq  instId="2" suId="2" spId="2" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.cntrlcfm instId="2" status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL"/>
      </tapa.expect>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.bndreq instId="2" sudId="2" spId="2"/>
      </tapa.expect>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.bndcfm suId="2" spId="2" instId="2"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm instId="2"/>
      </tapa.expect> 

      #Expect NOK_DONE Control Confirm from LTE MAC inst 3
      #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.cntrlreq  instId="3" suId="3" spId="3" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.cntrlcfm instId="3" status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL"/>
      </tapa.expect>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.bndreq instId="3" sudId="3" spId="3"/>
      </tapa.expect>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.bndcfm suId="3" spId="3" instId="3"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm instId="3"/>
      </tapa.expect> 

      #Expect NOK_DONE Control Confirm from LTE MAC inst 4
      #Send Control Request to Enable TFU SAP
      <tapa.send>
         <tapa.lrg.cntrlreq  instId="4" suId="4" spId="4" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.cntrlcfm instId="4" status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL"/>
      </tapa.expect>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.bndreq instId="4" sudId="4" spId="4"/>
      </tapa.expect>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.bndcfm suId="4" spId="4" instId="4"/>
      </tapa.send>

      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.cntrlcfm instId="4"/>
      </tapa.expect> 



      #Send Bind Request for RGR SAP for Cell 1 
      <tapa.send>
         <tapa.rgr.bndreq instId="5" spId="0" suId="0"/>
      </tapa.send>
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgr.bndcfm instId="5" status="1" />
      </tapa.expect>
      
      #Send Bind Request for RGR SAP for Cell 2 
      <tapa.send>
         <tapa.rgr.bndreq instId="5" spId="1" suId="1"/>
      </tapa.send>
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgr.bndcfm instId="5" spId="1" suId="1" status="1"/>
      </tapa.expect>

      #Send Bind Request for RGR SAP for Cell 3 
      <tapa.send>
         <tapa.rgr.bndreq instId="5" spId="2" suId="2"/>
      </tapa.send>
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgr.bndcfm instId="5" spId="2" suId="2" status="1"/>
      </tapa.expect> 

      #Send Bind Request for RGR SAP for Cell 4 
      <tapa.send>
         <tapa.rgr.bndreq instId="5" spId="3" suId="3"/>
      </tapa.send>
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgr.bndcfm instId="5" spId="3" suId="3" status="1"/>
      </tapa.expect> 

      #Send Bind Request for RGR SAP for Cell 5 
      <tapa.send>
         <tapa.rgr.bndreq instId="5" spId="4" suId="4"/>
      </tapa.send>
      # Expect positive Configuration Confirm from MAC
      <tapa.expect>
         <tapa.rgr.bndcfm instId="5" spId="4" suId="4" status="1"/>
      </tapa.expect> 

      #Scheduler
      #Send Control Request to Enable TFU SAP for Cell 1
      <tapa.send>
         <tapa.lrg.schcntrlreq instId="5" suId="0" spId="0" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.schcntrlcfm status="LCM_PRIM_OK_NDONE" reason="LCM_REASON_NOT_APPL" instId="5"/>
      </tapa.expect>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.sch.bndreq instId="5" spId="0"/>
      </tapa.expect>
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.sch.bndcfm suId="0" instId="5" spId="0"/>
      </tapa.send>
      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm instId="5"/>
      </tapa.expect>

      
      #Send Control Request to Enable TFU SAP for Cell 2
      <tapa.send>
         <tapa.lrg.schcntrlreq instId="5" suId="1" spId="1" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.schcntrlcfm status="LCM_PRIM_OK_NDONE"
            reason="LCM_REASON_NOT_APPL" instId="5" spId="1"/>
      </tapa.expect>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.sch.bndreq instId="5" spId="1"/>
      </tapa.expect>
      
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.sch.bndcfm suId="1" instId="5" spId="1"/>
      </tapa.send>
      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm instId="5" spId="1"/>
      </tapa.expect>

       #Send Control Request to Enable TFU SAP for Cell 3
      <tapa.send>
         <tapa.lrg.schcntrlreq instId="5" suId="2" spId="2" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.schcntrlcfm status="LCM_PRIM_OK_NDONE"
            reason="LCM_REASON_NOT_APPL" instId="5" spId="2"/>
      </tapa.expect>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.sch.bndreq instId="5" spId="2"/>
      </tapa.expect>
      
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.sch.bndcfm suId="2" instId="5" spId="2"/>
      </tapa.send>
      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm instId="5" spId="2"/>
      </tapa.expect> 

      #Send Control Request to Enable TFU SAP for Cell 4
      <tapa.send>
         <tapa.lrg.schcntrlreq instId="5" suId="3" spId="3" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.schcntrlcfm status="LCM_PRIM_OK_NDONE"
            reason="LCM_REASON_NOT_APPL" instId="5" spId="3"/>
      </tapa.expect>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.sch.bndreq instId="5" spId="3"/>
      </tapa.expect>
      
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.sch.bndcfm suId="3" instId="5" spId="3"/>
      </tapa.send>
      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm instId="5" spId="3"/>
      </tapa.expect> 

      #Send Control Request to Enable TFU SAP for Cell 5
      <tapa.send>
         <tapa.lrg.schcntrlreq instId="5" suId="4" spId="4" action="ABND" elmntType="STTFUSAP" />
      </tapa.send>

      <tapa.expect>
         <tapa.lrg.schcntrlcfm status="LCM_PRIM_OK_NDONE"
            reason="LCM_REASON_NOT_APPL" instId="5" spId="4"/>
      </tapa.expect>

      # Expect Dummy TFU Bind Request
      <tapa.expect>
         <tapa.tfu.sch.bndreq instId="5" spId="4"/>
      </tapa.expect>
      
      #Send Dummy TFU Bind Confirm
      <tapa.send>
         <tapa.tfu.sch.bndcfm suId="4" instId="5" spId="4"/>
      </tapa.send>
      #Expect positive Control Confirm from LTE MAC
      <tapa.expect>
         <tapa.lrg.schcntrlcfm instId="5" spId="4"/>
      </tapa.expect> 

   </tapa.steps>

</tapa.command>
#
#
#       Command: tapa.rg.fiveInstCellInit
#
#       Desc:    Commands to LTEMAC to perform multiple cell configuration
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.fiveInstCellInit">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize CELL
      </tapa.desc>

      <tapa.longdesc>
         "Configuring five cells for"
      </tapa.longdesc>
         
   </tapa.doc>

   <tapa.steps>
      ##########################CELL ID 3 ################################

      #MAC Cell configuration for instance 0
      #Send CRG Cell Configuration
      <tapa.send>
         <tapa.crg.cfgreq.cfg.cell instId="0" spId="0" cellId="3"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>


      #Send Common Logical Channel Configuration BCCH->BCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0" cellId="3" crnti="1234" lcId="1" dir="1" lcType="1" dlTrchType="1" spId="0"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  instId="0" cellId="3" crnti="1234" lcId="2" dir="1" lcType="1"
            dlTrchType="3" spId="0"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>
      
      #Send Common Logical Channel Configuration PCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  instId="0" cellId="3" crnti="1234" lcId="3" dir="1" lcType="2" spId="0"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      #Send Common Logical Channel Configuration CCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  instId="0" cellId="3" crnti="1234" lcId="4" dir="3" lcType="3"
            dlTrchType="3" ulTrchType="5" spId="0"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

     #Send Common Logical Channel Configuration BCCH->DLSCH2
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0" cellId="3" crnti="1234" lcId="5" dir="1" lcType="1"
            dlTrchType="3" spId="0"/>
      </tapa.send>
      
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      ##########################CELL ID 4 ################################

      #MAC Cell configuration for instance 1
      #Send CRG Cell Configuration
      <tapa.send>
         <tapa.crg.cfgreq.cfg.cell instId="1" spId="1" cellId="4"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>


      #Send Common Logical Channel Configuration BCCH->BCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" cellId="4" crnti="1234" lcId="1" dir="1" lcType="1" dlTrchType="1" spId="1"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  instId="1" cellId="4" crnti="1234" lcId="2" dir="1" lcType="1" spId="1"
            dlTrchType="3"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>
      
      #Send Common Logical Channel Configuration PCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  instId="1" cellId="4" crnti="1234" lcId="3" dir="1" lcType="2" spId="1"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      #Send Common Logical Channel Configuration CCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  instId="1" cellId="4" crnti="1234" lcId="4" dir="3" lcType="3"
            dlTrchType="3" ulTrchType="5" spId="1"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>
 
      #Send Common Logical Channel Configuration BCCH->DLSCH2
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" cellId="4" crnti="1234" lcId="5" dir="1" lcType="1"
            dlTrchType="3" spId="1"/>
      </tapa.send>
      
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      ##########################CELL ID 5 ################################

      #MAC Cell configuration for instance 2
      #Send CRG Cell Configuration
      <tapa.send>
         <tapa.crg.cfgreq.cfg.cell instId="2" spId="2" cellId="5"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="2"/>
      </tapa.expect>


      #Send Common Logical Channel Configuration BCCH->BCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="2" cellId="5" crnti="1234" lcId="1" dir="1" lcType="1" dlTrchType="1" spId="2"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="2"/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  instId="2" cellId="5" crnti="1234" lcId="2" dir="1" lcType="1" spId="2"
            dlTrchType="3"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="2"/>
      </tapa.expect>
      
      #Send Common Logical Channel Configuration PCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  instId="2" cellId="5" crnti="1234" lcId="3" dir="1" lcType="2" spId="2"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="2"/>
      </tapa.expect>

      #Send Common Logical Channel Configuration CCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  instId="2" cellId="5" crnti="1234" lcId="4" dir="3" lcType="3"
            dlTrchType="3" ulTrchType="5" spId="2"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="2"/>
      </tapa.expect>
 
      #Send Common Logical Channel Configuration BCCH->DLSCH2
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="2" cellId="5" crnti="1234" lcId="5" dir="1" lcType="1"
            dlTrchType="3" spId="2"/>
      </tapa.send>
      
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="2"/>
      </tapa.expect> 

      ##########################CELL ID 6 ################################

      #MAC Cell configuration for instance 3
      #Send CRG Cell Configuration
      <tapa.send>
         <tapa.crg.cfgreq.cfg.cell instId="3" spId="3" cellId="6"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="3"/>
      </tapa.expect>


      #Send Common Logical Channel Configuration BCCH->BCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="3" cellId="6" crnti="1234" lcId="1" dir="1" lcType="1" dlTrchType="1" spId="3"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="3"/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  instId="3" cellId="6" crnti="1234" lcId="2" dir="1" lcType="1" spId="3"
            dlTrchType="3"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="3"/>
      </tapa.expect>
      
      #Send Common Logical Channel Configuration PCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  instId="3" cellId="6" crnti="1234" lcId="3" dir="1" lcType="2" spId="3"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="3"/>
      </tapa.expect>

      #Send Common Logical Channel Configuration CCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  instId="3" cellId="6" crnti="1234" lcId="4" dir="3" lcType="3"
            dlTrchType="3" ulTrchType="5" spId="3"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="3"/>
      </tapa.expect>
 
      #Send Common Logical Channel Configuration BCCH->DLSCH2
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="3" cellId="6" crnti="1234" lcId="5" dir="1" lcType="1"
            dlTrchType="3" spId="3"/>
      </tapa.send>
      
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="3"/>
      </tapa.expect>  
     
      ##########################CELL ID 7 ################################

      #MAC Cell configuration for instance 4
      #Send CRG Cell Configuration
      <tapa.send>
         <tapa.crg.cfgreq.cfg.cell instId="4" spId="4" cellId="7"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="4"/>
      </tapa.expect>


      #Send Common Logical Channel Configuration BCCH->BCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="4" cellId="7" crnti="1234" lcId="1" dir="1" lcType="1" dlTrchType="1" spId="4"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="4"/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  instId="4" cellId="7" crnti="1234" lcId="2" dir="1" lcType="1" spId="4"
            dlTrchType="3"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="4"/>
      </tapa.expect>
      
      #Send Common Logical Channel Configuration PCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  instId="4" cellId="7" crnti="1234" lcId="3" dir="1" lcType="2" spId="4"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="4"/>
      </tapa.expect>

      #Send Common Logical Channel Configuration CCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  instId="4" cellId="7" crnti="1234" lcId="4" dir="3" lcType="3"
            dlTrchType="3" ulTrchType="5" spId="4"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="4"/>
      </tapa.expect>
 
      #Send Common Logical Channel Configuration BCCH->DLSCH2
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="4" cellId="7" crnti="1234" lcId="5" dir="1" lcType="1"
            dlTrchType="3" spId="4"/>
      </tapa.send>
      
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="4"/>
      </tapa.expect>   

      #Scheduler Enb Configuration
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.enb instId="5" spId="0" numTxAntPorts="2" ulSchdType="1" ulThroughputFactor="10" ulFairnessFactor="10" macInst="0"/>
      </tapa.send>


      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

      #Scheduler Cell Configuration

      #Sending RGR CELL Configuration for cell 1
      #cmnLcInfo = "lcId:lcType:dir:dlTrchType:ulTrchType:...."
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.cell instId="5" spId="0" maxDlRetxBw="100" numCmnLc="5" startRnti="11" rntiSize="30"
         cmnLcInfo="1:1:1:1:0:2:1:1:3:0:3:2:1:0:0:4:3:3:3:3:5:1:1:3:0" cellId="3" macInst="0"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

      #Sending RGR CELL Configuration for cell 2
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.cell instId="5" spId="1" maxDlRetxBw="100" numCmnLc="5" startRnti="41"  rntiSize="30"
         cmnLcInfo="1:1:1:1:0:2:1:1:3:0:3:2:1:0:0:4:3:3:3:3:5:1:1:3:0" cellId="4" macInst="1"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

      #Sending RGR CELL Configuration for cell 3
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.cell instId="5" spId="2" maxDlRetxBw="100" numCmnLc="5" startRnti="71"  rntiSize="30"
            cmnLcInfo="1:1:1:1:0:2:1:1:3:0:3:2:1:0:0:4:3:3:3:3:5:1:1:3:0" cellId="5" macInst="2"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect> 

      #Sending RGR CELL Configuration for cell 4
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.cell instId="5" spId="3" maxDlRetxBw="100" numCmnLc="5" startRnti="101" rntiSize="30"
         cmnLcInfo="1:1:1:1:0:2:1:1:3:0:3:2:1:0:0:4:3:3:3:3:5:1:1:3:0" cellId="6" macInst="3"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect> 

      #Sending RGR CELL Configuration for cell 5
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.cell instId="5" spId="4" maxDlRetxBw="100" numCmnLc="5" startRnti="131" rntiSize="30"
         cmnLcInfo="1:1:1:1:0:2:1:1:3:0:3:2:1:0:0:4:3:3:3:3:5:1:1:3:0" cellId="7" macInst="4"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect> 
   </tapa.steps>

</tapa.command>

#
#
#       Command: tapa.rg.fiveInstmacDeInit
#
#       Desc:    Layer Manager Commands to LTEMAC for Layer Shutdown
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.fiveInstmacDeInit">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Layer Manager Commands to LTEMAC for Layer Shutdown"
      </tapa.desc>

      <tapa.longdesc>
         "Sending Control request to LTEMAC for Shutdown amd then send UnBind Request 
         to RGR, CRG, and RGU SAp's"
         sending a cron LTEMAC"
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      # Mac Instance 0
      # Send UnBind Request to RGU SAP
      <tapa.send>
         <tapa.rgu.ubndreq instId="0" spId="0"/>
      </tapa.send>
      
      # Send UnBind Request to CRG SAP
      <tapa.send>
         <tapa.crg.ubndreq instId="0" spId="0"/>
      </tapa.send>
      
      #Send Control Request to LTEMAC for ShutDown 
      <tapa.send>
         <tapa.lrg.cntrlreq instId="0" action="ASHUTDOWN" elmntType="STGEN" />
      </tapa.send>
 
      # Expect Dummy TFU UnBind Request
      <tapa.expect>
         <tapa.tfu.ubndreq/>
      </tapa.expect>

      # Expect Cntrl Confirm
      <tapa.expect>
         <tapa.lrg.cntrlcfm/>
      </tapa.expect>

      # Mac Instance 1
      # Send UnBind Request to RGU SAP
      <tapa.send>
         <tapa.rgu.ubndreq instId="1" spId="0"/>
      </tapa.send>
      
      # Send UnBind Request to CRG SAP
      <tapa.send>
         <tapa.crg.ubndreq instId="1" spId="1"/>
      </tapa.send>
      
      #Send Control Request to LTEMAC for ShutDown 
      <tapa.send>
         <tapa.lrg.cntrlreq instId="1" action="ASHUTDOWN" elmntType="STGEN" />
      </tapa.send>
 
      # Expect Dummy TFU UnBind Request
      <tapa.expect>
         <tapa.tfu.ubndreq instId="1" spId="1"/>
      </tapa.expect>

      # Expect Cntrl Confirm
      <tapa.expect>
         <tapa.lrg.cntrlcfm instId="1"/>
      </tapa.expect>

      # Mac Instance 2
      # Send UnBind Request to RGU SAP
      <tapa.send>
         <tapa.rgu.ubndreq instId="2" spId="0"/>
      </tapa.send>
      
      # Send UnBind Request to CRG SAP
      <tapa.send>
         <tapa.crg.ubndreq instId="2" spId="2"/>
      </tapa.send>
      
      #Send Control Request to LTEMAC for ShutDown 
      <tapa.send>
         <tapa.lrg.cntrlreq instId="2" action="ASHUTDOWN" elmntType="STGEN" />
      </tapa.send>
 
      # Expect Dummy TFU UnBind Request
      <tapa.expect>
         <tapa.tfu.ubndreq instId="2" spId="2"/>
      </tapa.expect>

      # Expect Cntrl Confirm
      <tapa.expect>
         <tapa.lrg.cntrlcfm instId="2"/>
      </tapa.expect> 

      # Mac Instance 3
      # Send UnBind Request to RGU SAP
      <tapa.send>
         <tapa.rgu.ubndreq instId="3" spId="0"/>
      </tapa.send>
      
      # Send UnBind Request to CRG SAP
      <tapa.send>
         <tapa.crg.ubndreq instId="3" spId="3"/>
      </tapa.send>
      
      #Send Control Request to LTEMAC for ShutDown 
      <tapa.send>
         <tapa.lrg.cntrlreq instId="3" action="ASHUTDOWN" elmntType="STGEN" />
      </tapa.send>
 
      # Expect Dummy TFU UnBind Request
      <tapa.expect>
         <tapa.tfu.ubndreq instId="3" spId="3"/>
      </tapa.expect>

      # Expect Cntrl Confirm
      <tapa.expect>
         <tapa.lrg.cntrlcfm instId="3"/>
      </tapa.expect>  

      # Mac Instance 4
      # Send UnBind Request to RGU SAP
      <tapa.send>
         <tapa.rgu.ubndreq instId="4" spId="0"/>
      </tapa.send>
      
      # Send UnBind Request to CRG SAP
      <tapa.send>
         <tapa.crg.ubndreq instId="4" spId="4"/>
      </tapa.send>
      
      #Send Control Request to LTEMAC for ShutDown 
      <tapa.send>
         <tapa.lrg.cntrlreq instId="4" action="ASHUTDOWN" elmntType="STGEN" />
      </tapa.send>
 
      # Expect Dummy TFU UnBind Request
      <tapa.expect>
         <tapa.tfu.ubndreq instId="4" spId="4"/>
      </tapa.expect>

      # Expect Cntrl Confirm
      <tapa.expect>
         <tapa.lrg.cntrlcfm instId="4"/>
      </tapa.expect> 

      #Scheduler
      # Send UnBind Request to SCH SAP
      <tapa.send>
         <tapa.lrg.schcntrlreq instId="5" elmntType="STGEN" action="ASHUTDOWN" spId="0"/>
      </tapa.send>
      
     # Expect Dummy TFU UnBind Request
      <tapa.expect>
         <tapa.tfu.sch.ubndreq instId="5" spId="0"/>
      </tapa.expect>

     # Expect Dummy TFU UnBind Request
      <tapa.expect>
         <tapa.tfu.sch.ubndreq instId="5" spId="1"/>
      </tapa.expect>

     # Expect Dummy TFU UnBind Request
      <tapa.expect>
         <tapa.tfu.sch.ubndreq instId="5" spId="2"/>
      </tapa.expect>

     # Expect Dummy TFU UnBind Request
      <tapa.expect>
         <tapa.tfu.sch.ubndreq instId="5" spId="3"/>
      </tapa.expect>

     # Expect Dummy TFU UnBind Request
      <tapa.expect>
         <tapa.tfu.sch.ubndreq instId="5" spId="4"/>
      </tapa.expect>

      <tapa.expect>
         <tapa.lrg.schcntrlcfm instId="5"/>
      </tapa.expect>

      <tapa.delay delay="1"/>      
   </tapa.steps>
</tapa.command> 

#
#
#       Command: tapa.rg.pfsSim.multiInst1UeAttach
#
#       Desc:    Commands to LTEMAC to Initialize UE
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.pfsSim.multiInst1UeAttach">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         Commands to LTEMAC to Initialize UE
      </tapa.desc>

      <tapa.longdesc>
         Commands to LTEMAC to Initialize UE
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      <tapa.tfu.directive ulDeltaPrsnt="TRUE"/>
         # Send RaReqInd for one rapId 
         # Send TTI Ind for firt MAC and SCH inst

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="5" numTti="1" macInstId="0:1:2:3:4" schInstId="5" macSuId="0:1:2:3:4" schSuId="0:1:2:3:4" cellId="3:4:5:6:7"/>
      </tapa.send>

      #RACH procedure for first UE towards first instance
      <tapa.send>
         <tapa.tfu.rareq.ind instId="5" numRaRnti="1" >
            <tapa.tfu.rareq  numRapId="1" rapIds="2" timingAdvs="3"
               tpcs="1" cqiPres="TRUE" cqis="4"/>
         </tapa.tfu.rareq.ind>
      </tapa.send>

      # Ue starts expecting raResp after 3 subframes within the raResp window.
      # In this TC, it shall expect raResp in the first subframe after 3 Ttis.
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="5" numTti="2" macInstId="0:1:2:3:4" schInstId="5" macSuId="0:1:2:3:4" schSuId="0:1:2:3:4" cellId="3:4:5:6:7"/>
      </tapa.send>
    
      # Expect RaResp for the rapId sent in RaReq
      <tapa.expset>
        <tapa.tfu.cntrl.req numCntrlReq="1" schInstId="5" >
           <tapa.tfu.pdcch.cntrl.req/>
        </tapa.tfu.cntrl.req>
        <tapa.tfu.dat.req datReqs="1"  >
           <tapa.tfu.rarsp.req />
        </tapa.tfu.dat.req>
      </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="5" numTti="6" macInstId="0:1:2:3:4" schInstId="5" macSuId="0:1:2:3:4" schSuId="0:1:2:3:4" cellId="3:4:5:6:7"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req schInstId="5" numRntis="1"  >
            <tapa.tfu.msg3.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="5" numTti="3" macInstId="0:1:2:3:4" schInstId="5" macSuId="0:1:2:3:4" schSuId="0:1:2:3:4" cellId="3:4:5:6:7"/>
      </tapa.send>

      #Send CRC for Msg3
      <tapa.send>
         <tapa.tfu.crc.ind schInstId="5">
             <tapa.tfu.crc isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="5" numTti="1" macInstId="0:1:2:3:4" schInstId="5" macSuId="0:1:2:3:4" schSuId="0:1:2:3:4" cellId="3:4:5:6:7"/>
      </tapa.send>

      # Expect HARQ ACK in PHICH For MSG3
      <tapa.expect>
         <tapa.tfu.cntrl.req numCntrlReq="1" schInstId="5" >
            <tapa.tfu.phich.cntrl.req isAck="TRUE"/>
         </tapa.tfu.cntrl.req>
      </tapa.expect>

      # Send Message3 after receiving Message3 reception req.
      # rg004.201 Fixed the CCCH sdu size 
      <tapa.send>
         <tapa.tfu.dat.ind   datInds="1">
            <tapa.tfu.dat isCcchSdu="TRUE" sduSize="6" addPhr="TRUE" phr="46" />
         </tapa.tfu.dat.ind>      
      </tapa.send>   

      # Expect Message3 datReq on CCCH at RGU.
      <tapa.expect>
         <tapa.rgu.cdatind lcId="4" suId="0" />
      </tapa.expect>

      # Send BO for Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cstarsp spId="0" lcId="4" lcType="3" bo="10"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="5" numTti="1" macInstId="0:1:2:3:4" schInstId="5" macSuId="0:1:2:3:4" schSuId="0:1:2:3:4" cellId="3:4:5:6:7"/>
      </tapa.send>

      # Expect CStatInd For MSG4
      <tapa.expset>
         <tapa.rgu.cstaind suId="0" lcId="4"/>
      </tapa.expset>

      # Send Msg4 on RGU. 
      <tapa.send>
         <tapa.rgu.cdatreq spId="0" lcId="4" lcType="3" />
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="5" numTti="1" macInstId="0:1:2:3:4" schInstId="5" macSuId="0:1:2:3:4" schSuId="0:1:2:3:4" cellId="3:4:5:6:7"/>
      </tapa.send>

     # Expect Msg4 from MAC to PHY.
     <tapa.expset>
        <tapa.tfu.dat.req datReqs="1"  >
           <tapa.tfu.pdsch.dat.req use="1" validate="FALSE"/>
        </tapa.tfu.dat.req>   
        <tapa.tfu.cntrl.req numCntrlReq="1" schInstId="5" >
           <tapa.tfu.pdcch.cntrl.req saveTo="1"/>
        </tapa.tfu.cntrl.req>
     </tapa.expset>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="5" numTti="4" macInstId="0:1:2:3:4" schInstId="5" macSuId="0:1:2:3:4" schSuId="0:1:2:3:4" cellId="3:4:5:6:7"/>
      </tapa.send>

      # Recv Hq Recp Req for Msg4. 
      <tapa.expect>
         <tapa.tfu.recp.req schInstId="5" numRntis="1"  >
            <tapa.tfu.hq.recp.req/>
         </tapa.tfu.recp.req>   
      </tapa.expect>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="5" numTti="3" macInstId="0:1:2:3:4" schInstId="5" macSuId="0:1:2:3:4" schSuId="0:1:2:3:4" cellId="3:4:5:6:7"/>
      </tapa.send>

     # Send ACK as feedback for Msg4. 
     <tapa.send>
        <tapa.tfu.hq.ind schInstId="5" hqInds="1">
          <tapa.tfu.hq />
       </tapa.tfu.hq.ind>   
     </tapa.send>

     # Send UE config request
     <tapa.send>
        <tapa.crg.cfgreq.cfg.ue />
     </tapa.send>

     # Expect success in cfg cfm
     <tapa.expect>
        <tapa.crg.cfgcfm />
     </tapa.expect>

     # Send UE config request
     <tapa.send>
        <tapa.rgr.cfgreq.cfg.ue instId="5" ueCatEnum="CM_LTE_UE_CAT_5"/>
     </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="5" numTti="1" macInstId="0:1:2:3:4" schInstId="5" macSuId="0:1:2:3:4" schSuId="0:1:2:3:4" cellId="3:4:5:6:7"/>
      </tapa.send>

     # Expect success in cfg cfm
     <tapa.expect>
        <tapa.rgr.cfgCfm instId="5"/>
     </tapa.expect>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="5" numTti="1" macInstId="0:1:2:3:4" schInstId="5" macSuId="0:1:2:3:4" schSuId="0:1:2:3:4" cellId="3:4:5:6:7"/>
      </tapa.send>

      <tapa.delay delay="1"/>      
   </tapa.steps>
</tapa.command> 

#
#
#       Command: tapa.rg.pfsSim.addSecCell
#
#       Desc:    Commands to LTEMAC to add sec cell for an UE
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.pfsSim.addSecCell">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         Commands to LTEMAC to add sec cell for an UE
      </tapa.desc>

      <tapa.longdesc>
         Commands to LTEMAC to add sec cell for an UE
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>

      <tapa.tfu.directive ulDeltaPrsnt="TRUE"/>

     ## Recfg req for adding sec cell
      <tapa.send>
         <tapa.rgr.cfgreq.recfg.ue isSCellAdd="TRUE" instId="5" pucchFormatType="RG_SCH_UCI_FORMAT1B_CS" 
            n1PUCCHValTB1="0:1:2:3" n1PUCCHValTB2="5:6:7:8"/>
      </tapa.send>

      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="5" numTti="1" macInstId="0:1:2:3:4" schInstId="5" macSuId="0:1:2:3:4" schSuId="0:1:2:3:4" cellId="3:4:5:6:7"/>
      </tapa.send>

      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

      #Add UE to the Seconday Cell which calls rgAddSCellCfg 
      <tapa.send>
         <tapa.crg.cfgreq.recfg.ue isSCellCfgPres="TRUE"   
            rguUlSapId="0" rguDlSapId="0"/>
      </tapa.send>

      # Expect success in cfg cfm
      <tapa.expect>
         <tapa.crg.cfgcfm/>
      </tapa.expect>

	  #Send Ready Request for SCELL
       <tapa.send>
         <tapa.rgr.actDeact.scell instId="5" sCellActionType="1"/>
      </tapa.send>

      # expect cfm in the same tti
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

      <tapa.send>
         <tapa.rgr.actDeact.scell instId="5" sCellActionType="2"/>
      </tapa.send>

      # expect cfm in the same tti
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

      # Send TTI tick to get CE scheduled. 
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="5" numTti="2" macInstId="0:1:2:3:4" schInstId="5" macSuId="0:1:2:3:4" schSuId="0:1:2:3:4" cellId="3:4:5:6:7"/>
      </tapa.send>

      <tapa.expset>
         <tapa.tfu.cntrl.req numCntrlReq="1" schInstId="5" >
            <tapa.tfu.pdcch.cntrl.req/>
         </tapa.tfu.cntrl.req>
         <tapa.tfu.dat.req datReqs="1"  >
            <tapa.tfu.pdsch.dat.req lcId="4"  validate="TRUE" chkSCellDeActCe="TRUE" deActCeVal="2" />
         </tapa.tfu.dat.req>
      </tapa.expset>

      # Send TTI indication for waiting for hq feedback
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="5" numTti="4" macInstId="0:1:2:3:4" schInstId="5" macSuId="0:1:2:3:4" schSuId="0:1:2:3:4" cellId="3:4:5:6:7"/>
      </tapa.send>

     ## expect hq feedback for the first Ue's on both instance
      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="1" schInstId="5" >
               <tapa.tfu.hq.recp.req />
            </tapa.tfu.recp.req>   
      </tapa.expect>

      # Send TTI indication for waiting for hq feedback
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="5" numTti="3" macInstId="0:1:2:3:4" schInstId="5" macSuId="0:1:2:3:4" schSuId="0:1:2:3:4" cellId="3:4:5:6:7"/>
      </tapa.send>

     <tapa.send>
        <tapa.tfu.hq.ind hqInds="1" schInstId="5">
              <tapa.tfu.hq  is1BWithCs="TRUE" hqBits="1:1:1:1"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>

      # Send TTI indication for waiting for hq feedback
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="5" numTti="19" macInstId="0:1:2:3:4" schInstId="5" macSuId="0:1:2:3:4" schSuId="0:1:2:3:4" cellId="3:4:5:6:7"/>
      </tapa.send> 

      <tapa.delay delay="1"/>      
   </tapa.steps>
</tapa.command>   

#
#
#       Command: tapa.rg.pfsSim.cfg.lch
#
#       Desc:    Commands to LTEMAC to configure LCH for PFS simulator
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.pfsSim.cfg.lch">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         Commands to LTEMAC to configure LCH for PFS simulator
      </tapa.desc>

      <tapa.longdesc>
         Commands to LTEMAC to configure LCH for PFS simulator
      </tapa.longdesc>
         
   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      <tapa.send>
         <tapa.rg.pfsSim.lcData.cfg isPfsSim="TRUE"/>
      </tapa.send>

	  <tapa.repeat.start.lch.cfg />
     <tapa.send>
        # Configure an AMBR DTCH at MAC (not scheduler) for UE 0
        <tapa.crg.cfgreq.cfg.lch isPfsSim="TRUE" />
     </tapa.send>

     # Configure GBR DTCH (RGR)
     <tapa.send>
        <tapa.rgr.cfgreq.cfg.lch isPfsSim="TRUE" instId="5"/>
     </tapa.send> 

     # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="5" numTti="1" macInstId="0:1:2:3:4" schInstId="5" macSuId="0:1:2:3:4" schSuId="0:1:2:3:4" cellId="3:4:5:6:7"/>
      </tapa.send>

      # Expect the confirms
      <tapa.expset>
         <tapa.crg.cfgcfm/>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expset> 

     <tapa.repeat.end/>

  </tapa.steps>
</tapa.command>  

#
#
#       Command: tapa.rg.pfsSim.ueCfg.ca
#
#       Desc:    Commands to LTEMAC to Initialize UE for PFS simulator
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.pfsSim.ueCfg.ca">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         Commands to LTEMAC to Initialize UE for PFS simulator
      </tapa.desc>

      <tapa.longdesc>
         Commands to LTEMAC to Initialize UE for PFS simulator
      </tapa.longdesc>

   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      <tapa.send>
         <tapa.rg.pfsSim.print cfgStart="TRUE"/> 
      </tapa.send>

      <tapa.rg.pfsSim.multiInst1UeAttach uniqueRntiVldt="FALSE" SPSRnti="162"/>

      <tapa.rg.pfsSim.cfg.lch/>

      <tapa.rg.pfsSim.addSecCell />

      <tapa.send>
         <tapa.rg.pfsSim.print cfgStart="FALSE" isPfsSim="FALSE"/> 
      </tapa.send>
   </tapa.steps>
</tapa.command> 

#
#
#       Command: tapa.rg.pfsSim.ueCfg.nonCa
#
#       Desc:    Commands to LTEMAC to Initialize UE for PFS simulator
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.pfsSim.ueCfg.nonCa">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         Commands to LTEMAC to Initialize UE for PFS simulator
      </tapa.desc>

      <tapa.longdesc>
         Commands to LTEMAC to Initialize UE for PFS simulator
      </tapa.longdesc>

   </tapa.doc>

   # Test Steps subsection
   <tapa.steps>
      <tapa.send>
         <tapa.rg.pfsSim.print cfgStart="TRUE"/> 
      </tapa.send>

      <tapa.rg.pfsSim.multiInst1UeAttach uniqueRntiVldt="FALSE" SPSRnti="162"/>

      <tapa.rg.pfsSim.cfg.lch/>

      <tapa.send>
         <tapa.rg.pfsSim.print cfgStart="FALSE" isPfsSim="FALSE"/> 
      </tapa.send>
   </tapa.steps>
</tapa.command>  

#
#
#       Command: tapa.rg.multiInstCellLaaInit
#
#       Desc:    Commands to LTEMAC to perform multiple cell configuration
#       
#       Notes:   None
#              
#       Module:  MAC
#
#       File:    rgac_cmd.xml
#
#
<tapa.command id="tapa.rg.multiInstCellLaaInit">

   # Document subsection
   <tapa.doc>

      <tapa.desc>
         "Commands to LTEMAC to Initialize PCELL and LAA SCell
      </tapa.desc>

      <tapa.longdesc>
         "Configuring two cells for where SCell is LAA Cell"
      </tapa.longdesc>
         
   </tapa.doc>

   <tapa.steps>
      #MAC Cell configuration for instance 0
      #Send CRG Cell Configuration
      <tapa.send>
         <tapa.crg.cfgreq.cfg.cell instId="0" spId="0" cellId="3"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>


      #Send Common Logical Channel Configuration BCCH->BCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0" cellId="3" crnti="1234" lcId="1" dir="1" lcType="1" dlTrchType="1" spId="0"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  instId="0" cellId="3" crnti="1234" lcId="2" dir="1" lcType="1"
            dlTrchType="3" spId="0"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>
      
      #Send Common Logical Channel Configuration PCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  instId="0" cellId="3" crnti="1234" lcId="3" dir="1" lcType="2" spId="0"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      #Send Common Logical Channel Configuration CCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  instId="0" cellId="3" crnti="1234" lcId="4" dir="3" lcType="3"
            dlTrchType="3" ulTrchType="5" spId="0"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

     #Send Common Logical Channel Configuration BCCH->DLSCH2
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0" cellId="3" crnti="1234" lcId="5" dir="1" lcType="1"
            dlTrchType="3" spId="0"/>
      </tapa.send>
      
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      #MAC Cell configuration for instance 1
      #Send CRG Cell Configuration
      <tapa.send>
         <tapa.crg.cfgreq.cfg.cell instId="1" spId="1" cellId="4" />
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>


      #Send Common Logical Channel Configuration BCCH->BCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" cellId="4" crnti="1234" lcId="1" dir="1" lcType="1" dlTrchType="1" spId="1"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      #Send Common Logical Channel Configuration BCCH->DLSCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  instId="1" cellId="4" crnti="1234" lcId="2" dir="1" lcType="1" spId="1"
            dlTrchType="3"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>
      
      #Send Common Logical Channel Configuration PCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  instId="1" cellId="4" crnti="1234" lcId="3" dir="1" lcType="2" spId="1"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      #Send Common Logical Channel Configuration CCCH
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch  instId="1" cellId="4" crnti="1234" lcId="4" dir="3" lcType="3"
            dlTrchType="3" ulTrchType="5" spId="1"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>
 
      #Send Common Logical Channel Configuration BCCH->DLSCH2
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" cellId="4" crnti="1234" lcId="5" dir="1" lcType="1"
            dlTrchType="3" spId="1"/>
      </tapa.send>
      
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

     
      #Sending RGR ENB Configuration
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.enb instId="5"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

      #Scheduler Cell Configuration

      #Sending RGR CELL Configuration for cell 1
      #cmnLcInfo = "lcId:lcType:dir:dlTrchType:ulTrchType:...."
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.cell instId="5" spId="0" maxDlRetxBw="100" numCmnLc="5"
         cmnLcInfo="1:1:1:1:0:2:1:1:3:0:3:2:1:0:0:4:3:3:3:3:5:1:1:3:0" cellId="3" macInst="0"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

      #Sending RGR CELL Configuration for cell 2
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.cell instId="5" spId="1" maxDlRetxBw="100" numCmnLc="5"
         cmnLcInfo="1:1:1:1:0:2:1:1:3:0:3:2:1:0:0:4:3:3:3:3:5:1:1:3:0" cellId="4" macInst="1" isLaaCell="TRUE"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.rgr.cfgCfm instId="5"/>
      </tapa.expect>

   </tapa.steps>

</tapa.command>



#/********************************************************************30**
#
#         End of file:     rgac_cmd.xml@@/main/3 - Sat Jul 30 02:22:25 2011
#
#*********************************************************************31*/
#/**********************************************************************
#        Revision History:
#
#**********************************************************************/
#/********************************************************************90**
# 
#     ver       pat    init                  description
#------------ -------- ---- ----------------------------------------------
#/main/1      ---     ns   1. Initial Release.
#             ---     sm   1. Fixed CCCU SDU size
#/main/3      ---     gvj  1. LTE MAC 3.1 Release
#         rg002.301 dvasisht 1. ccpu00118352 - changes for UL SCH at CRC
#         rg003.301 av     1. ccpu00118352 - changes for UL SCH at CRC
#*********************************************************************91*/
#

