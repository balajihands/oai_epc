#
#/********************************************************************20**
#
#     Name:    LTE-MAC 
#
#     Type:    XML Test File
#
#     Desc:    XML Based Test Cases For TDD 
#
#     File:    rgac_tc36.xml
#
#     Sid:     rgac_tc36.xml@@/main/1 - Thu Mar 26 01:11:03 2009
#
#     Prg:     mnawas
#
#*********************************************************************21*/


#
#       Test:    36.1
#
#       Desc:   "To verify configuration of 2 cells on  2 instance of MAC and on 2 saps of scheduler"
#
#       Notes:   None
#
#       Module:  "MAC Module"
#
#       File:    rgac_tc36.xml
#
#
<tapa.testcase id="36.1">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="" section=""/>
      <tapa.module id=""/>

      <tapa.desc>
         To verify the 2 instance of MAC
      </tapa.desc>

      <tapa.longdesc>
         To verify the 2 instance of MAC
      </tapa.longdesc>

   </tapa.doc>
 # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef/>

      <tapa.ifndef>
         <tapa.flag id="TFU_TDD"/>
      </tapa.ifndef>

      <tapa.mode mode="single"/>
   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Initialize LTEMAC instances for 2 Cell
      <tapa.rg.multiInstMacInit/>
      #Initialize Saps for 2 Cells
      <tapa.rg.multiInstCellSapInit/>
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>
      #Initialize Cells per instance
      <tapa.rg.multiInstCellInit/>

  </tapa.test>


   # Clean subsection
   <tapa.clean>
      #Command To ShutDown LTEMAC Layer
      <tapa.rg.multiInstmacDeInit/>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown/>

</tapa.testcase> 

#
#       Test:    36.2
#
#       Desc:   "To verify the Configuration of 4 Ue per cell"
#
#       Notes:   None
#
#       Module:  "MAC Module"
#
#       File:    rgac_tc36.xml
#
#
<tapa.testcase id="36.2">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="" section=""/>
      <tapa.module id=""/>

      <tapa.desc>
         To verify config of UE per instance
      </tapa.desc>

      <tapa.longdesc>
         To verify config of UE per instance
      </tapa.longdesc>

   </tapa.doc>
 # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef/>

      <tapa.ifndef>
         <tapa.flag id="TFU_TDD"/>
      </tapa.ifndef>



      <tapa.mode mode="single"/>
   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Initialize LTEMAC instances for 2 Cell
      <tapa.rg.multiInstMacInit/>
      #Initialize Saps for 2 Cells
      <tapa.rg.multiInstCellSapInit/>
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>
      #Initialize Cells per instance
      <tapa.rg.multiInstCellInit/>

      #Initialize 1 UE per instance
      <tapa.rg.multiInst1UePerCellInit ueId="0" uniqueRntiVldt="FALSE"/>
      <tapa.rg.multiInst1UePerCellInit ueId="2" uniqueRntiVldt="FALSE"/>
      <tapa.rg.multiInst1UePerCellInit ueId="4" uniqueRntiVldt="FALSE"/>
      <tapa.rg.multiInst1UePerCellInit ueId="6" uniqueRntiVldt="FALSE"/>

      # steps for data on each UE
   </tapa.test>


   # Clean subsection
   <tapa.clean>
      #Command To ShutDown LTEMAC Layer
      <tapa.rg.multiInstmacDeInit/>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown/>

</tapa.testcase> 

#       Test:    36.3
#
#       Desc:   "To verify DL data on 4 Ue per instance with 1 Ue Per TTI"
#
#       Notes:   None
#
#       Module:  "MAC Module"
#
#       File:    rgac_tc36.xml
#
#
<tapa.testcase id="36.3">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="" section=""/>
      <tapa.module id=""/>

      <tapa.desc>
         To verify DL data on 4 Ues per instance with one ue per tti
      </tapa.desc>

      <tapa.longdesc>
         To verify the 2 instance of MAC
      </tapa.longdesc>

   </tapa.doc>
 # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef/>

      <tapa.ifndef>
         <tapa.flag id="TFU_TDD"/>
      </tapa.ifndef>


      <tapa.mode mode="single"/>
   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Initialize LTEMAC instances for 2 Cell
      <tapa.rg.multiInstMacInit/>
      #Initialize Saps for 2 Cells
      <tapa.rg.multiInstCellSapInit/>
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>
      #Initialize Cells per instance
      <tapa.rg.multiInstCellInit/>

      <tapa.rg.multiInst1UePerCellInit ueId="0" uniqueRntiVldt="FALSE"/>
      <tapa.rg.multiInst1UePerCellInit ueId="2" uniqueRntiVldt="FALSE"/>
      <tapa.rg.multiInst1UePerCellInit ueId="4" uniqueRntiVldt="FALSE"/>
      <tapa.rg.multiInst1UePerCellInit ueId="6" uniqueRntiVldt="FALSE"/>

      # Steps for LC creation for 1st Ue on instance 0
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0"  ueId="0" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="0" lcId="1" dir="3" lcType="5" instId="5" spId="0" />
      </tapa.send>



      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="0"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 1
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" spId="1" cellId="4" ueId="1" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="1" lcId="1" dir="3" lcType="5" instId="5" spId="1" cellId="4" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="1"/>
      </tapa.expect>


      # Steps for LC creation for 1st Ue on instance 0
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0"  ueId="2" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="2" lcId="1" dir="3" lcType="5" instId="5" spId="0" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="0"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 1
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" spId="1" cellId="4" ueId="3" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="3" lcId="1" dir="3" lcType="5" instId="5" spId="1" cellId="4" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="1"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 0
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0"  ueId="4" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="4" lcId="1" dir="3" lcType="5" instId="5" spId="0" />
      </tapa.send>



      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="0"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 1
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" spId="1" cellId="4" ueId="5" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="5" lcId="1" dir="3" lcType="5" instId="5" spId="1" cellId="4" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="1"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 0
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0"  ueId="6" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="6" lcId="1" dir="3" lcType="5" instId="5" spId="0" />
      </tapa.send>



      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="0"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 1
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" spId="1" cellId="4" ueId="7" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="7" lcId="1" dir="3" lcType="5" instId="5" spId="1" cellId="4" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="1"/>
      </tapa.expect>



      #Steps for BO Updation
      #Send BO for UE1 on instance 0
      <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="0" cellId="3"  ueId="0" lcId="1" bo="100"/>
      </tapa.send>
      #Steps for BO Updation
      #Send BO for UE1 on instance 1
      <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="1" cellId="4"  ueId="1" lcId="1" bo="100"/>
      </tapa.send>
 

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         <tapa.rgu.dstaind instId="0" ueId="0" cellId="3" numLchTb1="1" lchTb1Data="1" valdtTrue="1" />
      </tapa.expect>

      <tapa.expect>
         <tapa.rgu.dstaind instId="1" ueId="1" cellId="4" numLchTb1="1" lchTb1Data="1" valdtTrue="1" />
      </tapa.expect>


      <tapa.send>
         # Send DDatReq for 1st Ue on inst 0
          <tapa.rgu.ddatreq  instId="0" cellId="3" ueId="0" numLchTb1="1" lchTb1Data="1"/>
      </tapa.send>
 
      <tapa.send>
         # Send DDatReq for 1st Ue on inst 1
          <tapa.rgu.ddatreq  instId="1" cellId="4" ueId="1" numLchTb1="1" lchTb1Data="1"/>
       </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     <tapa.expset>
      	<tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="0">
      		<tapa.tfu.pdcch.cntrl.req cellId="3" ueId="0" saveTo="0"/>
     	 </tapa.tfu.cntrl.req>
      
       <tapa.tfu.dat.req macInstId="0" spId="0">
      		<tapa.tfu.pdsch.dat.req ueId="0" use="0" validate="TRUE"/>
      	</tapa.tfu.dat.req>

      	<tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="1">
      		<tapa.tfu.pdcch.cntrl.req cellId="4" ueId="1" saveTo="1"/>
     	 </tapa.tfu.cntrl.req>
      
       <tapa.tfu.dat.req macInstId="1" spId="1">
      		<tapa.tfu.pdsch.dat.req ueId="1" use="1" validate="TRUE"/>
      	</tapa.tfu.dat.req>
      </tapa.expset>         

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     ## expect hq feedback for the first Ue's on both instance
      <tapa.expect>
         <tapa.tfu.recp.req schInstId="5" spId="0" ueId="0" >
               <tapa.tfu.hq.recp.req/>
            </tapa.tfu.recp.req>   
      </tapa.expect>

      ## expect hq feedback for the first Ue's on both instance
      <tapa.expect>
         <tapa.tfu.recp.req schInstId="5" spId="1" ueId="1" >
               <tapa.tfu.hq.recp.req/>
            </tapa.tfu.recp.req>   
      </tapa.expect>
      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # ACK sent for First BO
      # Send ACK for the received PDU
     <tapa.send>
        <tapa.tfu.hq.ind hqInds="1" cellId="3" suId="0" schInstId="5">
              <tapa.tfu.hq ueId="0"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>
     <tapa.send>
        <tapa.tfu.hq.ind hqInds="1" cellId="4" suId="1" schInstId="5">
              <tapa.tfu.hq ueId="1"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>



      ##Procedure for 2nd set of UE's (ueId=2 and 3)

      #Steps for BO Updation
      #Send BO for UE1 on instance 0
      <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="0" cellId="3"  ueId="2" lcId="1" bo="100"/>
      </tapa.send>
      #Steps for BO Updation
      #Send BO for UE1 on instance 1
      <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="1" cellId="4"  ueId="3" lcId="1" bo="100"/>
      </tapa.send>
 

      # Send TTI indication for both cells
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         <tapa.rgu.dstaind instId="0" ueId="2" cellId="3" numLchTb1="1" lchTb1Data="1" valdtTrue="1" />
      </tapa.expect>

      <tapa.expect>
         <tapa.rgu.dstaind instId="1" ueId="3" cellId="4" numLchTb1="1" lchTb1Data="1" valdtTrue="1" />
      </tapa.expect>


      <tapa.send>
         # Send DDatReq for 1st Ue on inst 0
          <tapa.rgu.ddatreq  instId="0" cellId="3" ueId="2" numLchTb1="1" lchTb1Data="1"/>
      </tapa.send>
 
      <tapa.send>
         # Send DDatReq for 1st Ue on inst 1
          <tapa.rgu.ddatreq  instId="1" cellId="4" ueId="3" numLchTb1="1" lchTb1Data="1"/>
       </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     <tapa.expset>
      	<tapa.tfu.cntrl.req expCntrlReq="0" schInstId="5" spId="0">
      		<tapa.tfu.pdcch.cntrl.req cellId="3" ueId="2" saveTo="2"/>
     	 </tapa.tfu.cntrl.req>
      
       <tapa.tfu.dat.req macInstId="0" spId="0">
      		<tapa.tfu.pdsch.dat.req ueId="2" use="2" validate="TRUE"/>
      	</tapa.tfu.dat.req>
         
         <tapa.tfu.cntrl.req expCntrlReq="0" schInstId="5" spId="1">
      		<tapa.tfu.pdcch.cntrl.req cellId="4" ueId="3" saveTo="3"/>
     	 </tapa.tfu.cntrl.req>
      
       <tapa.tfu.dat.req macInstId="1" spId="1">
      		<tapa.tfu.pdsch.dat.req ueId="3" use="3" validate="TRUE"/>
      	</tapa.tfu.dat.req>
      </tapa.expset>         

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     ## expect hq feedback for the first Ue's on both instance
      <tapa.expect>
         <tapa.tfu.recp.req schInstId="5" spId="0" >
               <tapa.tfu.hq.recp.req schInstId="5" spId="0" ueId="2" cellId="3"/>
            </tapa.tfu.recp.req>   
      </tapa.expect>

      ## expect hq feedback for the first Ue's on both instance
      <tapa.expect>
         <tapa.tfu.recp.req schInstId="5" spId="1" >
               <tapa.tfu.hq.recp.req  ueId="3" cellId="4"/>
            </tapa.tfu.recp.req>   
      </tapa.expect>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # ACK sent for First BO
      # Send ACK for the received PDU
     <tapa.send>
        <tapa.tfu.hq.ind hqInds="1" cellId="3" suId="0" schInstId="5">
              <tapa.tfu.hq ueId="2"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>
     <tapa.send>
        <tapa.tfu.hq.ind hqInds="1" cellId="4" suId="1" schInstId="5">
              <tapa.tfu.hq ueId="3"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>


      ##Procedure for 3rd set of UE's (ueId=4 and 5)

      #Steps for BO Updation
      #Send BO for UE1 on instance 0
      <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="0" cellId="3"  ueId="4" lcId="1" bo="100"/>
      </tapa.send>
      #Steps for BO Updation
      #Send BO for UE1 on instance 1
      <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="1" cellId="4"  ueId="5" lcId="1" bo="100"/>
      </tapa.send>
 

      # Send TTI indication for both cells
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         <tapa.rgu.dstaind instId="0" ueId="4" cellId="3" numLchTb1="1" lchTb1Data="1" valdtTrue="1" />
      </tapa.expect>

      <tapa.expect>
         <tapa.rgu.dstaind instId="1" ueId="5" cellId="4" numLchTb1="1" lchTb1Data="1" valdtTrue="1" />
      </tapa.expect>


      <tapa.send>
         # Send DDatReq for 1st Ue on inst 0
          <tapa.rgu.ddatreq  instId="0" cellId="3" ueId="4" numLchTb1="1" lchTb1Data="1"/>
      </tapa.send>
 
      <tapa.send>
         # Send DDatReq for 1st Ue on inst 1
          <tapa.rgu.ddatreq  instId="1" cellId="4" ueId="5" numLchTb1="1" lchTb1Data="1"/>
       </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     <tapa.expset>
      	<tapa.tfu.cntrl.req expCntrlReq="0" schInstId="5" spId="0">
      		<tapa.tfu.pdcch.cntrl.req cellId="3" ueId="4" saveTo="4"/>
     	 </tapa.tfu.cntrl.req>
      
       <tapa.tfu.dat.req macInstId="0" spId="0">
      		<tapa.tfu.pdsch.dat.req ueId="4" use="4" validate="TRUE"/>
      	</tapa.tfu.dat.req>

      	<tapa.tfu.cntrl.req expCntrlReq="0" schInstId="5" spId="1">
      		<tapa.tfu.pdcch.cntrl.req cellId="4" ueId="5" saveTo="5"/>
     	 </tapa.tfu.cntrl.req>
      
       <tapa.tfu.dat.req macInstId="1" spId="1">
      		<tapa.tfu.pdsch.dat.req ueId="5" use="5" validate="TRUE"/>
      	</tapa.tfu.dat.req>
      </tapa.expset>         

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     ## expect hq feedback for the first Ue's on both instance
      <tapa.expect>
         <tapa.tfu.recp.req schInstId="5" spId="0" >
               <tapa.tfu.hq.recp.req schInstId="5" spId="0" ueId="4" cellId="3"/>
            </tapa.tfu.recp.req>   
      </tapa.expect>

      ## expect hq feedback for the first Ue's on both instance
      <tapa.expect>
         <tapa.tfu.recp.req schInstId="5" spId="1" >
               <tapa.tfu.hq.recp.req  ueId="5" cellId="4"/>
            </tapa.tfu.recp.req>   
      </tapa.expect>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # ACK sent for First BO
      # Send ACK for the received PDU
     <tapa.send>
        <tapa.tfu.hq.ind hqInds="1" cellId="3" suId="0" schInstId="5">
              <tapa.tfu.hq ueId="4"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>
     <tapa.send>
        <tapa.tfu.hq.ind hqInds="1" cellId="4" suId="1" schInstId="5">
              <tapa.tfu.hq ueId="5"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>

      ##Procedure for 4th set of UE's (ueId=6 and 7)

      #Steps for BO Updation
      #Send BO for UE1 on instance 0
      <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="0" cellId="3"  ueId="6" lcId="1" bo="100"/>
      </tapa.send>
      #Steps for BO Updation
      #Send BO for UE1 on instance 1
      <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="1" cellId="4"  ueId="7" lcId="1" bo="100"/>
      </tapa.send>
 

      # Send TTI indication for both cells
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         <tapa.rgu.dstaind instId="0" ueId="6" cellId="3" numLchTb1="1" lchTb1Data="1" valdtTrue="1" />
      </tapa.expect>

      <tapa.expect>
         <tapa.rgu.dstaind instId="1" ueId="7" cellId="4" numLchTb1="1" lchTb1Data="1" valdtTrue="1" />
      </tapa.expect>


      <tapa.send>
         # Send DDatReq for 1st Ue on inst 0
          <tapa.rgu.ddatreq  instId="0" cellId="3" ueId="6" numLchTb1="1" lchTb1Data="1"/>
      </tapa.send>
 
      <tapa.send>
         # Send DDatReq for 1st Ue on inst 1
          <tapa.rgu.ddatreq  instId="1" cellId="4" ueId="7" numLchTb1="1" lchTb1Data="1"/>
       </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     <tapa.expset>
      	<tapa.tfu.cntrl.req expCntrlReq="0" schInstId="5" spId="0">
      		<tapa.tfu.pdcch.cntrl.req cellId="3" ueId="6" saveTo="6"/>
     	 </tapa.tfu.cntrl.req>
      
       <tapa.tfu.dat.req macInstId="0" spId="0">
      		<tapa.tfu.pdsch.dat.req ueId="6" use="6" validate="TRUE"/>
      	</tapa.tfu.dat.req>

      	<tapa.tfu.cntrl.req expCntrlReq="0" schInstId="5" spId="1">
      		<tapa.tfu.pdcch.cntrl.req cellId="4" ueId="7" saveTo="7"/>
     	 </tapa.tfu.cntrl.req>
      
       <tapa.tfu.dat.req macInstId="1" spId="1">
      		<tapa.tfu.pdsch.dat.req ueId="7" use="7" validate="TRUE"/>
      	</tapa.tfu.dat.req>
      </tapa.expset>         

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     ## expect hq feedback for the first Ue's on both instance
      <tapa.expect>
         <tapa.tfu.recp.req schInstId="5" spId="0" >
               <tapa.tfu.hq.recp.req ueId="6" cellId="3"/>
            </tapa.tfu.recp.req>   
      </tapa.expect>

      ## expect hq feedback for the first Ue's on both instance
      <tapa.expect>
         <tapa.tfu.recp.req schInstId="5" spId="1" >
               <tapa.tfu.hq.recp.req  ueId="7" cellId="4"/>
            </tapa.tfu.recp.req>   
      </tapa.expect>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # ACK sent for First BO
      # Send ACK for the received PDU
     <tapa.send>
        <tapa.tfu.hq.ind hqInds="1" cellId="3" suId="0" schInstId="5">
              <tapa.tfu.hq ueId="6"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>
     <tapa.send>
        <tapa.tfu.hq.ind hqInds="1" cellId="4" suId="1" schInstId="5">
              <tapa.tfu.hq ueId="7"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>

   </tapa.test>

   
   # Clean subsection
   <tapa.clean>
      #Command To ShutDown LTEMAC Layer
      <tapa.rg.multiInstmacDeInit/>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown/>

</tapa.testcase> 


#       Test:    36.4
#
#       Desc:   "To verify DL data on 4 Ue per instance with 2 Ue/TTI"
#
#       Notes:   None
#
#       Module:  "MAC Module"
#
#       File:    rgac_tc36.xml
#
#
<tapa.testcase id="36.4">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="" section=""/>
      <tapa.module id=""/>

      <tapa.desc>
         To verify DL data on 4 Ues per instance with 2Ue/TTI
      </tapa.desc>

      <tapa.longdesc>
         To verify DL data on 4 Ues per instance with 2Ue/TTI
      </tapa.longdesc>

   </tapa.doc>
 # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef/>

      <tapa.ifndef>
         <tapa.flag id="TFU_TDD"/>
      </tapa.ifndef>



      <tapa.mode mode="single"/>
   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Initialize LTEMAC instances for 2 Cell
      <tapa.rg.multiInstMacInit/>
      #Initialize Saps for 2 Cells
      <tapa.rg.multiInstCellSapInit/>
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>
      #Initialize Cells per instance
      <tapa.rg.multiInstCellInit/>

      <tapa.rg.multiInst1UePerCellInit ueId="0" uniqueRntiVldt="FALSE"/>
      <tapa.rg.multiInst1UePerCellInit ueId="2" uniqueRntiVldt="FALSE"/>
      <tapa.rg.multiInst1UePerCellInit ueId="4" uniqueRntiVldt="FALSE"/>
      <tapa.rg.multiInst1UePerCellInit ueId="6" uniqueRntiVldt="FALSE"/>


      # Steps for LC creation for 1st Ue on instance 0
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0"  ueId="0" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="0" lcId="1" dir="3" lcType="5" instId="5" spId="0" />
      </tapa.send>



      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="0"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 1
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" spId="1" cellId="4" ueId="1" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="1" lcId="1" dir="3" lcType="5" instId="5" spId="1" cellId="4" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="1"/>
      </tapa.expect>


      # Steps for LC creation for 1st Ue on instance 0
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0"  ueId="2" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="2" lcId="1" dir="3" lcType="5" instId="5" spId="0" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="0"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 1
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" spId="1" cellId="4" ueId="3" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="3" lcId="1" dir="3" lcType="5" instId="5" spId="1" cellId="4" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="1"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 0
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0"  ueId="4" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="4" lcId="1" dir="3" lcType="5" instId="5" spId="0" />
      </tapa.send>



      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="0"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 1
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" spId="1" cellId="4" ueId="5" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="5" lcId="1" dir="3" lcType="5" instId="5" spId="1" cellId="4" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="1"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 0
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0"  ueId="6" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="6" lcId="1" dir="3" lcType="5" instId="5" spId="0" />
      </tapa.send>



      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="0"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 1
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" spId="1" cellId="4" ueId="7" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="7" lcId="1" dir="3" lcType="5" instId="5" spId="1" cellId="4" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="1"/>
      </tapa.expect>



      #Steps for BO Updation
      #Send BO for UE1 on instance 0
      <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="0" cellId="3"  ueId="0" lcId="1" bo="100"/>
      </tapa.send>
      #Steps for BO Updation
      #Send BO for UE1 on instance 1
      <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="1" cellId="4"  ueId="1" lcId="1" bo="100"/>
      </tapa.send>

      #Steps for BO Updation
      #Send BO for UE1 on instance 0
      <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="0" cellId="3"  ueId="2" lcId="1" bo="100"/>
      </tapa.send>
      #Steps for BO Updation
      #Send BO for UE1 on instance 1
      <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="1" cellId="4"  ueId="3" lcId="1" bo="100"/>
      </tapa.send>
 

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         <tapa.rgu.dstaind instId="0" ueId="0" cellId="3" numLchTb1="1" lchTb1Data="1" valdtTrue="1" />
      </tapa.expect>


      <tapa.expect>
         <tapa.rgu.dstaind instId="0" ueId="2" cellId="3" numLchTb1="1" lchTb1Data="1" valdtTrue="1" />
      </tapa.expect>

      <tapa.expect>
         <tapa.rgu.dstaind instId="1" ueId="1" cellId="4" numLchTb1="1" lchTb1Data="1" valdtTrue="1" />
      </tapa.expect>

      <tapa.expect>
         <tapa.rgu.dstaind instId="1" ueId="3" cellId="4" numLchTb1="1" lchTb1Data="1" valdtTrue="1" />
      </tapa.expect>

      # Send DDatReq for 1st Ue on inst 0
      <tapa.send>
          <tapa.rgu.ddatreq  instId="0" cellId="3" ueId="0" numLchTb1="1" lchTb1Data="1"/>
      </tapa.send>
 
      <tapa.send>
          <tapa.rgu.ddatreq  instId="0" cellId="3" ueId="2" numLchTb1="1" lchTb1Data="1"/>
       </tapa.send>

      # Send DDatReq for 1st Ue on inst 1
      <tapa.send>
          <tapa.rgu.ddatreq  instId="1" cellId="4" ueId="1" numLchTb1="1" lchTb1Data="1"/>
       </tapa.send>

      <tapa.send>
          <tapa.rgu.ddatreq  instId="1" cellId="4" ueId="3" numLchTb1="1" lchTb1Data="1"/>
       </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     <tapa.expset>
      	<tapa.tfu.cntrl.req expCntrlReq="2" schInstId="5" spId="0">
      		<tapa.tfu.pdcch.cntrl.req cellId="3" ueId="0" saveTo="0"/>
      		<tapa.tfu.pdcch.cntrl.req cellId="3" ueId="2" saveTo="2"/>
     	 </tapa.tfu.cntrl.req>
      
       <tapa.tfu.dat.req macInstId="0" spId="0">
      		<tapa.tfu.pdsch.dat.req ueId="0" use="0" validate="TRUE"/>
      		<tapa.tfu.pdsch.dat.req ueId="2" use="2" validate="TRUE"/>
      	</tapa.tfu.dat.req>

      	<tapa.tfu.cntrl.req expCntrlReq="2" schInstId="5" spId="1">
      		<tapa.tfu.pdcch.cntrl.req cellId="4" ueId="1" saveTo="1"/>
      		<tapa.tfu.pdcch.cntrl.req cellId="4" ueId="3" saveTo="3"/>
     	 </tapa.tfu.cntrl.req>
      
       <tapa.tfu.dat.req macInstId="1" spId="1">
      		<tapa.tfu.pdsch.dat.req ueId="1" use="1" validate="TRUE"/>
      		<tapa.tfu.pdsch.dat.req ueId="3" use="3" validate="TRUE"/>
      	</tapa.tfu.dat.req>
      </tapa.expset>         

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     ## expect hq feedback for the first Ue's on both instance
      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="2" schInstId="5" spId="0" ueId="0" >
               <tapa.tfu.hq.recp.req ueId="0"/>
               <tapa.tfu.hq.recp.req ueId="2"/>
            </tapa.tfu.recp.req>   
      </tapa.expect>

      ## expect hq feedback for the first Ue's on both instance
      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="2" schInstId="5" spId="1" ueId="1" >
               <tapa.tfu.hq.recp.req ueId="1"/>
               <tapa.tfu.hq.recp.req ueId="3"/>
            </tapa.tfu.recp.req>   
      </tapa.expect>
      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # ACK sent for First BO
      # Send ACK for the received PDU
     <tapa.send>
        <tapa.tfu.hq.ind hqInds="2" cellId="3" suId="0" schInstId="5">
              <tapa.tfu.hq ueId="0"/>
              <tapa.tfu.hq ueId="2"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>

     <tapa.send>
        <tapa.tfu.hq.ind hqInds="2" cellId="4" suId="1" schInstId="5">
              <tapa.tfu.hq ueId="1"/>
              <tapa.tfu.hq ueId="3"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>

      #Steps for BO Updation
      #Send BO for UE1 on instance 0
      <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="0" cellId="3"  ueId="4" lcId="1" bo="100"/>
      </tapa.send>
      #Steps for BO Updation
      #Send BO for UE1 on instance 1
      <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="1" cellId="4"  ueId="5" lcId="1" bo="100"/>
      </tapa.send>

      #Steps for BO Updation
      #Send BO for UE1 on instance 0
      <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="0" cellId="3"  ueId="6" lcId="1" bo="100"/>
      </tapa.send>
      #Steps for BO Updation
      #Send BO for UE1 on instance 1
      <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="1" cellId="4"  ueId="7" lcId="1" bo="100"/>
      </tapa.send>
 

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         <tapa.rgu.dstaind instId="0" ueId="4" cellId="3" numLchTb1="1" lchTb1Data="1" valdtTrue="1" />
      </tapa.expect>


      <tapa.expect>
         <tapa.rgu.dstaind instId="0" ueId="5" cellId="3" numLchTb1="1" lchTb1Data="1" valdtTrue="1" />
      </tapa.expect>

      <tapa.expect>
         <tapa.rgu.dstaind instId="1" ueId="6" cellId="4" numLchTb1="1" lchTb1Data="1" valdtTrue="1" />
      </tapa.expect>

      <tapa.expect>
         <tapa.rgu.dstaind instId="1" ueId="7" cellId="4" numLchTb1="1" lchTb1Data="1" valdtTrue="1" />
      </tapa.expect>

      # Send DDatReq for 1st Ue on inst 0
      <tapa.send>
          <tapa.rgu.ddatreq  instId="0" cellId="3" ueId="4" numLchTb1="1" lchTb1Data="1"/>
      </tapa.send>
 
      <tapa.send>
          <tapa.rgu.ddatreq  instId="0" cellId="3" ueId="5" numLchTb1="1" lchTb1Data="1"/>
       </tapa.send>

      # Send DDatReq for 1st Ue on inst 1
      <tapa.send>
          <tapa.rgu.ddatreq  instId="1" cellId="4" ueId="6" numLchTb1="1" lchTb1Data="1"/>
       </tapa.send>

      <tapa.send>
          <tapa.rgu.ddatreq  instId="1" cellId="4" ueId="7" numLchTb1="1" lchTb1Data="1"/>
       </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     <tapa.expset>
      	<tapa.tfu.cntrl.req expCntrlReq="2" schInstId="5" spId="0">
      		<tapa.tfu.pdcch.cntrl.req cellId="3" ueId="4" saveTo="4"/>
      		<tapa.tfu.pdcch.cntrl.req cellId="3" ueId="6" saveTo="6"/>
     	 </tapa.tfu.cntrl.req>
      
       <tapa.tfu.dat.req macInstId="0" spId="0">
      		<tapa.tfu.pdsch.dat.req ueId="4" use="4" validate="TRUE"/>
      		<tapa.tfu.pdsch.dat.req ueId="6" use="6" validate="TRUE"/>
      	</tapa.tfu.dat.req>

      	<tapa.tfu.cntrl.req expCntrlReq="2" schInstId="5" spId="1">
      		<tapa.tfu.pdcch.cntrl.req cellId="4" ueId="5" saveTo="5"/>
      		<tapa.tfu.pdcch.cntrl.req cellId="4" ueId="7" saveTo="7"/>
     	 </tapa.tfu.cntrl.req>
      
       <tapa.tfu.dat.req macInstId="1" spId="1">
      		<tapa.tfu.pdsch.dat.req ueId="5" use="5" validate="TRUE"/>
      		<tapa.tfu.pdsch.dat.req ueId="7" use="7" validate="TRUE"/>
      	</tapa.tfu.dat.req>
      </tapa.expset>         

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     ## expect hq feedback for the first Ue's on both instance
      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="2" schInstId="5" spId="0" ueId="0" >
               <tapa.tfu.hq.recp.req ueId="4"/>
               <tapa.tfu.hq.recp.req ueId="6"/>
            </tapa.tfu.recp.req>   
      </tapa.expect>

      ## expect hq feedback for the first Ue's on both instance
      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="2" schInstId="5" spId="1" ueId="1" >
               <tapa.tfu.hq.recp.req ueId="5"/>
               <tapa.tfu.hq.recp.req ueId="7"/>
            </tapa.tfu.recp.req>   
      </tapa.expect>
      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # ACK sent for First BO
      # Send ACK for the received PDU
     <tapa.send>
        <tapa.tfu.hq.ind hqInds="2" cellId="3" suId="0" schInstId="5">
              <tapa.tfu.hq ueId="4"/>
              <tapa.tfu.hq ueId="6"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>

     <tapa.send>
        <tapa.tfu.hq.ind hqInds="2" cellId="4" suId="1" schInstId="5">
              <tapa.tfu.hq ueId="5"/>
              <tapa.tfu.hq ueId="7"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>


   </tapa.test>

   
   # Clean subsection
   <tapa.clean>
      #Command To ShutDown LTEMAC Layer
      <tapa.rg.multiInstmacDeInit/>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown/>

</tapa.testcase> 

#       Test:    36.5
#
#       Desc:   "To verify DL data on 4 Ue per instance with 4 Ue/TTI"
#
#       Notes:   None
#
#       Module:  "MAC Module"
#
#       File:    rgac_tc36.xml
#
#
<tapa.testcase id="36.5">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="" section=""/>
      <tapa.module id=""/>

      <tapa.desc>
         To verify DL data on 4 Ues per instance with 4Ue/TTI
      </tapa.desc>

      <tapa.longdesc>
         To verify DL data on 4 Ues per instance with 4Ue/TTI
      </tapa.longdesc>

   </tapa.doc>
 # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef/>

      <tapa.ifndef>
         <tapa.flag id="TFU_TDD"/>
      </tapa.ifndef>


      <tapa.mode mode="single"/>
   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Initialize LTEMAC instances for 2 Cell
      <tapa.rg.multiInstMacInit/>
      #Initialize Saps for 2 Cells
      <tapa.rg.multiInstCellSapInit/>
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>
      #Initialize Cells per instance
      <tapa.rg.multiInstCellInit maxDlUeNewTxPerTti="4" maxUePerDlSf="4"/>
      #<tapa.rg.multiInstCellInit/>


      <tapa.rg.multiInst1UePerCellInit ueId="0" uniqueRntiVldt="FALSE"/>
      <tapa.rg.multiInst1UePerCellInit ueId="2" uniqueRntiVldt="FALSE"/>
      <tapa.rg.multiInst1UePerCellInit ueId="4" uniqueRntiVldt="FALSE"/>
      <tapa.rg.multiInst1UePerCellInit ueId="6" uniqueRntiVldt="FALSE"/>

      # Steps for LC creation for 1st Ue on instance 0
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0"  ueId="0" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="0" lcId="1" dir="3" lcType="5" instId="5" spId="0" />
      </tapa.send>



      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="0"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 1
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" spId="1" cellId="4" ueId="1" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="1" lcId="1" dir="3" lcType="5" instId="5" spId="1" cellId="4" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="1"/>
      </tapa.expect>


      # Steps for LC creation for 1st Ue on instance 0
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0"  ueId="2" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="2" lcId="1" dir="3" lcType="5" instId="5" spId="0" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="0"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 1
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" spId="1" cellId="4" ueId="3" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="3" lcId="1" dir="3" lcType="5" instId="5" spId="1" cellId="4" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="1"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 0
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0"  ueId="4" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="4" lcId="1" dir="3" lcType="5" instId="5" spId="0" />
      </tapa.send>



      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="0"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 1
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" spId="1" cellId="4" ueId="5" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="5" lcId="1" dir="3" lcType="5" instId="5" spId="1" cellId="4" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="1"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 0
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0"  ueId="6" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="6" lcId="1" dir="3" lcType="5" instId="5" spId="0" />
      </tapa.send>



      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="0"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 1
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" spId="1" cellId="4" ueId="7" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="7" lcId="1" dir="3" lcType="5" instId="5" spId="1" cellId="4" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="1"/>
      </tapa.expect>



      #Steps for BO Updation
      #Send BO for UE1 on instance 0
      <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="0" cellId="3"  ueId="0" lcId="1" bo="100"/>
      </tapa.send>
      #Steps for BO Updation
      #Send BO for UE1 on instance 1
      <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="1" cellId="4"  ueId="1" lcId="1" bo="100"/>
      </tapa.send>

      #Steps for BO Updation
      #Send BO for UE1 on instance 0
      <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="0" cellId="3"  ueId="2" lcId="1" bo="100"/>
      </tapa.send>
      #Steps for BO Updation
      #Send BO for UE1 on instance 1
      <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="1" cellId="4"  ueId="3" lcId="1" bo="100"/>
      </tapa.send>


      #Steps for BO Updation
      #Send BO for UE1 on instance 0
      <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="0" cellId="3"  ueId="4" lcId="1" bo="100"/>
      </tapa.send>
      #Steps for BO Updation
      #Send BO for UE1 on instance 1
      <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="1" cellId="4"  ueId="5" lcId="1" bo="100"/>
      </tapa.send>

      #Steps for BO Updation
      #Send BO for UE1 on instance 0
      <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="0" cellId="3"  ueId="6" lcId="1" bo="100"/>
      </tapa.send>
      #Steps for BO Updation
      #Send BO for UE1 on instance 1
      <tapa.send>
         # Send BO for the created logical channel on RGU. 
         <tapa.rgu.dstarsp instId="1" cellId="4"  ueId="7" lcId="1" bo="100"/>
      </tapa.send>
 

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         <tapa.rgu.dstaind instId="0" ueId="0" cellId="3" numLchTb1="1" lchTb1Data="1" valdtTrue="1" />
      </tapa.expect>


      <tapa.expect>
         <tapa.rgu.dstaind instId="0" ueId="2" cellId="3" numLchTb1="1" lchTb1Data="1" valdtTrue="1" />
      </tapa.expect>

      <tapa.expect>
         <tapa.rgu.dstaind instId="0" ueId="4" cellId="3" numLchTb1="1" lchTb1Data="1" valdtTrue="1" />
      </tapa.expect>


      <tapa.expect>
         <tapa.rgu.dstaind instId="0" ueId="6" cellId="3" numLchTb1="1" lchTb1Data="1" valdtTrue="1" />
      </tapa.expect>



      <tapa.expect>
         <tapa.rgu.dstaind instId="1" ueId="1" cellId="4" numLchTb1="1" lchTb1Data="1" valdtTrue="1" />
      </tapa.expect>

      <tapa.expect>
         <tapa.rgu.dstaind instId="1" ueId="3" cellId="4" numLchTb1="1" lchTb1Data="1" valdtTrue="1" />
      </tapa.expect>

      <tapa.expect>
         <tapa.rgu.dstaind instId="1" ueId="5" cellId="4" numLchTb1="1" lchTb1Data="1" valdtTrue="1" />
      </tapa.expect>

      <tapa.expect>
         <tapa.rgu.dstaind instId="1" ueId="7" cellId="4" numLchTb1="1" lchTb1Data="1" valdtTrue="1" />
      </tapa.expect>



      # Send DDatReq for 1st Ue on inst 0
      <tapa.send>
          <tapa.rgu.ddatreq  instId="0" cellId="3" ueId="0" numLchTb1="1" lchTb1Data="1"/>
      </tapa.send>
 
      <tapa.send>
          <tapa.rgu.ddatreq  instId="0" cellId="3" ueId="2" numLchTb1="1" lchTb1Data="1"/>
       </tapa.send>

      # Send DDatReq for 1st Ue on inst 0
      <tapa.send>
          <tapa.rgu.ddatreq  instId="0" cellId="3" ueId="4" numLchTb1="1" lchTb1Data="1"/>
      </tapa.send>
 
      <tapa.send>
          <tapa.rgu.ddatreq  instId="0" cellId="3" ueId="6" numLchTb1="1" lchTb1Data="1"/>
       </tapa.send>



      # Send DDatReq for 1st Ue on inst 1
      <tapa.send>
          <tapa.rgu.ddatreq  instId="1" cellId="4" ueId="1" numLchTb1="1" lchTb1Data="1"/>
       </tapa.send>

      <tapa.send>
          <tapa.rgu.ddatreq  instId="1" cellId="4" ueId="3" numLchTb1="1" lchTb1Data="1"/>
       </tapa.send>

      # Send DDatReq for 1st Ue on inst 1
      <tapa.send>
          <tapa.rgu.ddatreq  instId="1" cellId="4" ueId="5" numLchTb1="1" lchTb1Data="1"/>
       </tapa.send>

      <tapa.send>
          <tapa.rgu.ddatreq  instId="1" cellId="4" ueId="7" numLchTb1="1" lchTb1Data="1"/>
       </tapa.send>


      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     <tapa.expset>
      	<tapa.tfu.cntrl.req expCntrlReq="4" schInstId="5" spId="0">
      		<tapa.tfu.pdcch.cntrl.req cellId="3" ueId="0" saveTo="0"/>
      		<tapa.tfu.pdcch.cntrl.req cellId="3" ueId="2" saveTo="2"/>
      		<tapa.tfu.pdcch.cntrl.req cellId="3" ueId="4" saveTo="4"/>
      		<tapa.tfu.pdcch.cntrl.req cellId="3" ueId="6" saveTo="6"/>
     	 </tapa.tfu.cntrl.req>
      
       <tapa.tfu.dat.req macInstId="0" spId="0">
      		<tapa.tfu.pdsch.dat.req ueId="0" use="0" validate="TRUE"/>
      		<tapa.tfu.pdsch.dat.req ueId="2" use="2" validate="TRUE"/>
      		<tapa.tfu.pdsch.dat.req ueId="4" use="4" validate="TRUE"/>
      		<tapa.tfu.pdsch.dat.req ueId="6" use="6" validate="TRUE"/>
      	</tapa.tfu.dat.req>


      	<tapa.tfu.cntrl.req expCntrlReq="4" schInstId="5" spId="1">
      		<tapa.tfu.pdcch.cntrl.req cellId="4" ueId="1" saveTo="1"/>
      		<tapa.tfu.pdcch.cntrl.req cellId="4" ueId="3" saveTo="3"/>
      		<tapa.tfu.pdcch.cntrl.req cellId="4" ueId="5" saveTo="5"/>
      		<tapa.tfu.pdcch.cntrl.req cellId="4" ueId="7" saveTo="7"/>
     	 </tapa.tfu.cntrl.req>
      
       <tapa.tfu.dat.req macInstId="1" spId="1">
      		<tapa.tfu.pdsch.dat.req ueId="1" use="1" validate="TRUE"/>
      		<tapa.tfu.pdsch.dat.req ueId="3" use="3" validate="TRUE"/>
      		<tapa.tfu.pdsch.dat.req ueId="5" use="5" validate="TRUE"/>
      		<tapa.tfu.pdsch.dat.req ueId="7" use="7" validate="TRUE"/>
      	</tapa.tfu.dat.req>
      </tapa.expset>         

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     ## expect hq feedback for the first Ue's on both instance
      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="4" schInstId="5" spId="0" ueId="0" >
               <tapa.tfu.hq.recp.req ueId="0"/>
               <tapa.tfu.hq.recp.req ueId="2"/>
               <tapa.tfu.hq.recp.req ueId="4"/>
               <tapa.tfu.hq.recp.req ueId="6"/>
            </tapa.tfu.recp.req>   
      </tapa.expect>

      ## expect hq feedback for the first Ue's on both instance
      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="4" schInstId="5" spId="1" ueId="1" >
               <tapa.tfu.hq.recp.req ueId="1"/>
               <tapa.tfu.hq.recp.req ueId="3"/>
               <tapa.tfu.hq.recp.req ueId="5"/>
               <tapa.tfu.hq.recp.req ueId="7"/>
            </tapa.tfu.recp.req>   
      </tapa.expect>
      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # ACK sent for First BO
      # Send ACK for the received PDU
     <tapa.send>
        <tapa.tfu.hq.ind hqInds="4" cellId="3" suId="0" schInstId="5">
              <tapa.tfu.hq ueId="0"/>
              <tapa.tfu.hq ueId="2"/>
              <tapa.tfu.hq ueId="4"/>
              <tapa.tfu.hq ueId="6"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>

     <tapa.send>
        <tapa.tfu.hq.ind hqInds="4" cellId="4" suId="1" schInstId="5">
              <tapa.tfu.hq ueId="1"/>
              <tapa.tfu.hq ueId="3"/>
              <tapa.tfu.hq ueId="5"/>
              <tapa.tfu.hq ueId="7"/>
        </tapa.tfu.hq.ind>   
     </tapa.send>

   </tapa.test>

   
   # Clean subsection
   <tapa.clean>
      #Command To ShutDown LTEMAC Layer
      <tapa.rg.multiInstmacDeInit/>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown/>

</tapa.testcase> 

#       Test:    36.6
#
#       Desc:   "To verify UL data on 4 Ue per instance with 1 Ue/TTI"
#
#       Notes:   None
#
#       Module:  "MAC Module"
#
#       File:    rgac_tc36.xml
#
#
<tapa.testcase id="36.6">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="" section=""/>
      <tapa.module id=""/>

      <tapa.desc>
         To verify UL data on 4 Ues per instance with 1Ue/TTI
      </tapa.desc>

      <tapa.longdesc>
         To verify UL data on 4 Ues per instance with 1Ue/TTI
      </tapa.longdesc>

   </tapa.doc>
 # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef/>

      <tapa.ifndef>
         <tapa.flag id="TFU_TDD"/>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Initialize LTEMAC instances for 2 Cell
      <tapa.rg.multiInstMacInit/>
      #Initialize Saps for 2 Cells
      <tapa.rg.multiInstCellSapInit/>
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>
      #Initialize Cells per instance
      <tapa.rg.multiInstCellInit maxDlUeNewTxPerTti="4" maxUePerDlSf="4" maxUlUeNewTxPerTti="1" maxUePerUlSf="1"/>

      <tapa.rg.multiInst1UePerCellInit ueId="0" uniqueRntiVldt="FALSE"/>
      <tapa.rg.multiInst1UePerCellInit ueId="2" uniqueRntiVldt="FALSE"/>
      <tapa.rg.multiInst1UePerCellInit ueId="4" uniqueRntiVldt="FALSE"/>
      <tapa.rg.multiInst1UePerCellInit ueId="6" uniqueRntiVldt="FALSE"/>

      # Steps for LC creation for 1st Ue on instance 0
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0"  ueId="0" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="0" lcId="1" dir="3" lcType="5" instId="5" spId="0" />
      </tapa.send>



      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="0"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 1
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" spId="1" cellId="4" ueId="1" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="1" lcId="1" dir="3" lcType="5" instId="5" spId="1" cellId="4" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="1"/>
      </tapa.expect>


      # Steps for LC creation for 1st Ue on instance 0
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0"  ueId="2" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="2" lcId="1" dir="3" lcType="5" instId="5" spId="0" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="0"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 1
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" spId="1" cellId="4" ueId="3" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="3" lcId="1" dir="3" lcType="5" instId="5" spId="1" cellId="4" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="1"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 0
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0"  ueId="4" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="4" lcId="1" dir="3" lcType="5" instId="5" spId="0" />
      </tapa.send>



      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="0"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 1
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" spId="1" cellId="4" ueId="5" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="5" lcId="1" dir="3" lcType="5" instId="5" spId="1" cellId="4" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="1"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 0
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0"  ueId="6" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="6" lcId="1" dir="3" lcType="5" instId="5" spId="0" />
      </tapa.send>



      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="0"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 1
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" spId="1" cellId="4" ueId="7" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="7" lcId="1" dir="3" lcType="5" instId="5" spId="1" cellId="4" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="1"/>
      </tapa.expect>
      
      # send SR for first UE on first instance
      <tapa.send>
        <tapa.tfu.sr.ind instId="5" suId="0" cellId="3">
           <tapa.tfu.sr ueId="0"/>
        </tapa.tfu.sr.ind>
     </tapa.send>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expset>
       <tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="0">
            <tapa.tfu.pdcch.cntrl.req cellId="3" ueId="0" saveTo="0" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
        </tapa.tfu.cntrl.req>
      </tapa.expset>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="1" schInstId="5" spId="0" >
            <tapa.tfu.pusch.recp.req use="0" vldtDatRecp="TRUE" ueId="0"/>
         </tapa.tfu.recp.req>   
      </tapa.expect>
 
      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      #Send CRC for Msg
      <tapa.send>
         <tapa.tfu.crc.ind schInstId="5" suId="0" cellId="3" >
            <tapa.tfu.crc ueId="0" isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>
      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # Expect HARQ ACK in PHICH
      <tapa.expect>
        <tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="0">
           <tapa.tfu.phich.cntrl.req ueId="0" isAck="TRUE"/>
        </tapa.tfu.cntrl.req>
      </tapa.expect>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     # send SR for first UE on second instance
      <tapa.send>
        <tapa.tfu.sr.ind instId="5" suId="1" cellId="4">
           <tapa.tfu.sr ueId="1"/>
        </tapa.tfu.sr.ind>
     </tapa.send>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expset>
       <tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="1">
            <tapa.tfu.pdcch.cntrl.req cellId="4" ueId="1" saveTo="1" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
        </tapa.tfu.cntrl.req>
      </tapa.expset>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="1" schInstId="5" spId="1" >
            <tapa.tfu.pusch.recp.req use="1" vldtDatRecp="TRUE" ueId="1"/>
         </tapa.tfu.recp.req>   
      </tapa.expect>
 
      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      #Send CRC for Msg
      <tapa.send>
         <tapa.tfu.crc.ind schInstId="5" suId="1" cellId="4" >
            <tapa.tfu.crc ueId="1" isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>
      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # Expect HARQ ACK in PHICH
      <tapa.expect>
        <tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="1">
           <tapa.tfu.phich.cntrl.req ueId="1" isAck="TRUE"/>
        </tapa.tfu.cntrl.req>
      </tapa.expect>

      # send SR for 2nd UE on first instance
      <tapa.send>
        <tapa.tfu.sr.ind instId="5" suId="0" cellId="3">
           <tapa.tfu.sr ueId="2"/>
        </tapa.tfu.sr.ind>
     </tapa.send>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expset>
       <tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="0">
            <tapa.tfu.pdcch.cntrl.req cellId="3" ueId="2" saveTo="2" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
        </tapa.tfu.cntrl.req>
      </tapa.expset>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="1" schInstId="5" spId="0" >
            <tapa.tfu.pusch.recp.req use="2" vldtDatRecp="TRUE" ueId="2"/>
         </tapa.tfu.recp.req>   
      </tapa.expect>
 
      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      #Send CRC for Msg
      <tapa.send>
         <tapa.tfu.crc.ind schInstId="5" suId="0" cellId="3" >
            <tapa.tfu.crc ueId="2" isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>
      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # Expect HARQ ACK in PHICH
      <tapa.expect>
        <tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="0">
           <tapa.tfu.phich.cntrl.req ueId="2" isAck="TRUE"/>
        </tapa.tfu.cntrl.req>
      </tapa.expect>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     # send SR for 2nd UE on second instance
      <tapa.send>
        <tapa.tfu.sr.ind instId="5" suId="1" cellId="4">
           <tapa.tfu.sr ueId="3"/>
        </tapa.tfu.sr.ind>
     </tapa.send>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expset>
       <tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="1">
            <tapa.tfu.pdcch.cntrl.req cellId="4" ueId="3" saveTo="3" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
        </tapa.tfu.cntrl.req>
      </tapa.expset>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="1" schInstId="5" spId="1" >
            <tapa.tfu.pusch.recp.req use="3" vldtDatRecp="TRUE" ueId="3"/>
         </tapa.tfu.recp.req>   
      </tapa.expect>
 
      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      #Send CRC for Msg
      <tapa.send>
         <tapa.tfu.crc.ind schInstId="5" suId="1" cellId="4" >
            <tapa.tfu.crc ueId="3" isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>
      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # Expect HARQ ACK in PHICH
      <tapa.expect>
        <tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="1">
           <tapa.tfu.phich.cntrl.req ueId="3" isAck="TRUE"/>
        </tapa.tfu.cntrl.req>
     </tapa.expect>

      # send SR for 3rd UE on first instance
      <tapa.send>
        <tapa.tfu.sr.ind instId="5" suId="0" cellId="3">
           <tapa.tfu.sr ueId="4"/>
        </tapa.tfu.sr.ind>
     </tapa.send>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expset>
       <tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="0">
            <tapa.tfu.pdcch.cntrl.req cellId="3" ueId="4" saveTo="4" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
        </tapa.tfu.cntrl.req>
      </tapa.expset>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="1" schInstId="5" spId="0" >
            <tapa.tfu.pusch.recp.req use="4" vldtDatRecp="TRUE" ueId="4"/>
         </tapa.tfu.recp.req>   
      </tapa.expect>
 
      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      #Send CRC for Msg
      <tapa.send>
         <tapa.tfu.crc.ind schInstId="5" suId="0" cellId="3" >
            <tapa.tfu.crc ueId="4" isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>
      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # Expect HARQ ACK in PHICH
      <tapa.expect>
        <tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="0">
           <tapa.tfu.phich.cntrl.req ueId="4" isAck="TRUE"/>
        </tapa.tfu.cntrl.req>
      </tapa.expect>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     # send SR for 3rd UE on second instance
      <tapa.send>
        <tapa.tfu.sr.ind instId="5" suId="1" cellId="4">
           <tapa.tfu.sr ueId="5"/>
        </tapa.tfu.sr.ind>
     </tapa.send>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expset>
       <tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="1">
            <tapa.tfu.pdcch.cntrl.req cellId="4" ueId="5" saveTo="5" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
        </tapa.tfu.cntrl.req>
      </tapa.expset>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="1" schInstId="5" spId="1" >
            <tapa.tfu.pusch.recp.req use="5" vldtDatRecp="TRUE" ueId="5"/>
         </tapa.tfu.recp.req>   
      </tapa.expect>
 
      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      #Send CRC for Msg
      <tapa.send>
         <tapa.tfu.crc.ind schInstId="5" suId="1" cellId="4" >
            <tapa.tfu.crc ueId="5" isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>
      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # Expect HARQ ACK in PHICH
      <tapa.expect>
        <tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="1">
           <tapa.tfu.phich.cntrl.req ueId="5" isAck="TRUE"/>
        </tapa.tfu.cntrl.req>
     </tapa.expect>

      # send SR for 4th UE on first instance
      <tapa.send>
        <tapa.tfu.sr.ind  instId="5" suId="0" cellId="3">
           <tapa.tfu.sr ueId="6"/>
        </tapa.tfu.sr.ind>
     </tapa.send>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expset>
       <tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="0">
            <tapa.tfu.pdcch.cntrl.req cellId="3" ueId="6" saveTo="6" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
        </tapa.tfu.cntrl.req>
      </tapa.expset>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="1" schInstId="5" spId="0" >
            <tapa.tfu.pusch.recp.req use="6" vldtDatRecp="TRUE" ueId="6"/>
         </tapa.tfu.recp.req>   
      </tapa.expect>
 
      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      #Send CRC for Msg
      <tapa.send>
         <tapa.tfu.crc.ind schInstId="5" suId="0" cellId="3" >
            <tapa.tfu.crc ueId="6" isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>
      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # Expect HARQ ACK in PHICH
      <tapa.expect>
        <tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="0">
           <tapa.tfu.phich.cntrl.req ueId="6" isAck="TRUE"/>
        </tapa.tfu.cntrl.req>
      </tapa.expect>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     # send SR for 4th UE on second instance
      <tapa.send>
        <tapa.tfu.sr.ind instId="5" suId="1" cellId="4">
           <tapa.tfu.sr ueId="7"/>
        </tapa.tfu.sr.ind>
     </tapa.send>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expset>
       <tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="1">
            <tapa.tfu.pdcch.cntrl.req cellId="4" ueId="7" saveTo="7" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
        </tapa.tfu.cntrl.req>
      </tapa.expset>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="1" schInstId="5" spId="1" >
            <tapa.tfu.pusch.recp.req use="7" vldtDatRecp="TRUE" ueId="7"/>
         </tapa.tfu.recp.req>   
      </tapa.expect>
 
      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      #Send CRC for Msg
      <tapa.send>
         <tapa.tfu.crc.ind schInstId="5" suId="1" cellId="4" >
            <tapa.tfu.crc ueId="7" isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>
      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # Expect HARQ ACK in PHICH
      <tapa.expect>
        <tapa.tfu.cntrl.req expCntrlReq="1" schInstId="5" spId="1">
           <tapa.tfu.phich.cntrl.req ueId="7" isAck="TRUE"/>
        </tapa.tfu.cntrl.req>
      </tapa.expect>


   </tapa.test>

   
   # Clean subsection
   <tapa.clean>
      #Command To ShutDown LTEMAC Layer
      <tapa.rg.multiInstmacDeInit/>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown/>

</tapa.testcase> 


#       Test:    36.7
#
#       Desc:   "To verify UL data on 4 Ue per instance with 2 Ue/TTI"
#
#       Notes:   None
#
#       Module:  "MAC Module"
#
#       File:    rgac_tc36.xml
#
#
<tapa.testcase id="36.7">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="" section=""/>
      <tapa.module id=""/>

      <tapa.desc>
         To verify UL data on 4 Ues per instance with 2Ue/TTI
      </tapa.desc>

      <tapa.longdesc>
         To verify UL data on 4 Ues per instance with 2Ue/TTI
      </tapa.longdesc>

   </tapa.doc>
 # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef/>

      <tapa.ifndef>
         <tapa.flag id="TFU_TDD"/>
      </tapa.ifndef>

      <tapa.mode mode="single"/>
   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Initialize LTEMAC instances for 2 Cell
      <tapa.rg.multiInstMacInit/>
      #Initialize Saps for 2 Cells
      <tapa.rg.multiInstCellSapInit/>
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>
      #Initialize Cells per instance
      <tapa.rg.multiInstCellInit maxDlUeNewTxPerTti="4" maxUePerDlSf="4" maxUlUeNewTxPerTti="2" maxUePerUlSf="2"/>

      <tapa.rg.multiInst1UePerCellInit ueId="0" uniqueRntiVldt="FALSE"/>
      <tapa.rg.multiInst1UePerCellInit ueId="2" uniqueRntiVldt="FALSE"/>
      <tapa.rg.multiInst1UePerCellInit ueId="4" uniqueRntiVldt="FALSE"/>
      <tapa.rg.multiInst1UePerCellInit ueId="6" uniqueRntiVldt="FALSE"/>

      # Steps for LC creation for 1st Ue on instance 0
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0"  ueId="0" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="0" lcId="1" dir="3" lcType="5" instId="5" spId="0" />
      </tapa.send>



      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="0"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 1
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" spId="1" cellId="4" ueId="1" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="1" lcId="1" dir="3" lcType="5" instId="5" spId="1" cellId="4" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="1"/>
      </tapa.expect>


      # Steps for LC creation for 1st Ue on instance 0
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0"  ueId="2" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="2" lcId="1" dir="3" lcType="5" instId="5" spId="0" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="0"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 1
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" spId="1" cellId="4" ueId="3" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="3" lcId="1" dir="3" lcType="5" instId="5" spId="1" cellId="4" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="1"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 0
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0"  ueId="4" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="4" lcId="1" dir="3" lcType="5" instId="5" spId="0" />
      </tapa.send>



      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="0"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 1
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" spId="1" cellId="4" ueId="5" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="5" lcId="1" dir="3" lcType="5" instId="5" spId="1" cellId="4" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="1"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 0
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0"  ueId="6" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="6" lcId="1" dir="3" lcType="5" instId="5" spId="0" />
      </tapa.send>



      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="0"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 1
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" spId="1" cellId="4" ueId="7" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="7" lcId="1" dir="3" lcType="5" instId="5" spId="1" cellId="4" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="1"/>
      </tapa.expect>
      
      # send SR for first and 2nd UE on first instance
      <tapa.send>
        <tapa.tfu.sr.ind instId="5" suId="0" cellId="3">
           <tapa.tfu.sr ueId="0"/>
           <tapa.tfu.sr ueId="2"/>
        </tapa.tfu.sr.ind>
     </tapa.send>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expset>
         <tapa.tfu.cntrl.req expCntrlReq="2" schInstId="5" spId="0">
            <tapa.tfu.pdcch.cntrl.req cellId="3" ueId="0" saveTo="0" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
            <tapa.tfu.pdcch.cntrl.req cellId="3" ueId="2" saveTo="2" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
         </tapa.tfu.cntrl.req>
      </tapa.expset>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="2" schInstId="5" spId="0" >
            <tapa.tfu.pusch.recp.req use="0" vldtDatRecp="TRUE" ueId="0"/>
            <tapa.tfu.pusch.recp.req use="2" vldtDatRecp="TRUE" ueId="2"/>
         </tapa.tfu.recp.req>   
      </tapa.expect>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      #Send CRC for Msg
      <tapa.send>
         <tapa.tfu.crc.ind schInstId="5" suId="0" cellId="3" >
            <tapa.tfu.crc ueId="0" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="2" isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # Expect HARQ ACK in PHICH
      <tapa.expect>
         <tapa.tfu.cntrl.req expCntrlReq="2" schInstId="5" spId="0">
            <tapa.tfu.phich.cntrl.req ueId="0" isAck="TRUE"/>
            <tapa.tfu.phich.cntrl.req ueId="2" isAck="TRUE"/>
         </tapa.tfu.cntrl.req>
      </tapa.expect>

      # send SR for first and 2nd UE on second instance
      <tapa.send>
        <tapa.tfu.sr.ind instId="5" suId="1" cellId="4">
           <tapa.tfu.sr ueId="1"/>
           <tapa.tfu.sr ueId="3"/>
        </tapa.tfu.sr.ind>
     </tapa.send>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expset>
         <tapa.tfu.cntrl.req expCntrlReq="2" schInstId="5" spId="1">
            <tapa.tfu.pdcch.cntrl.req cellId="4" ueId="1" saveTo="1" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
            <tapa.tfu.pdcch.cntrl.req cellId="4" ueId="3" saveTo="3" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
         </tapa.tfu.cntrl.req>
      </tapa.expset>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="2" schInstId="5" spId="1" >
            <tapa.tfu.pusch.recp.req use="1" vldtDatRecp="TRUE" ueId="1"/>
            <tapa.tfu.pusch.recp.req use="3" vldtDatRecp="TRUE" ueId="3"/>
         </tapa.tfu.recp.req>   
      </tapa.expect>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      #Send CRC for Msg
      <tapa.send>
         <tapa.tfu.crc.ind schInstId="5" suId="1" cellId="4">
            <tapa.tfu.crc ueId="1" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="3" isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # Expect HARQ ACK in PHICH
      <tapa.expect>
         <tapa.tfu.cntrl.req expCntrlReq="2" schInstId="5" spId="1">
            <tapa.tfu.phich.cntrl.req ueId="1" isAck="TRUE"/>
            <tapa.tfu.phich.cntrl.req ueId="3" isAck="TRUE"/>
         </tapa.tfu.cntrl.req>
      </tapa.expect>

      # send SR for 3rd and 4th UE on first instance
      <tapa.send>
        <tapa.tfu.sr.ind instId="5" suId="0" cellId="3">
           <tapa.tfu.sr ueId="4"/>
           <tapa.tfu.sr ueId="6"/>
        </tapa.tfu.sr.ind>
     </tapa.send>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expset>
         <tapa.tfu.cntrl.req expCntrlReq="2" schInstId="5" spId="0">
            <tapa.tfu.pdcch.cntrl.req cellId="3" ueId="4" saveTo="4" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
            <tapa.tfu.pdcch.cntrl.req cellId="3" ueId="6" saveTo="6" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
         </tapa.tfu.cntrl.req>
      </tapa.expset>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="2" schInstId="5" spId="0" >
            <tapa.tfu.pusch.recp.req use="4" vldtDatRecp="TRUE" ueId="4"/>
            <tapa.tfu.pusch.recp.req use="6" vldtDatRecp="TRUE" ueId="6"/>
         </tapa.tfu.recp.req>   
      </tapa.expect>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      #Send CRC for Msg
      <tapa.send>
         <tapa.tfu.crc.ind schInstId="5" suId="0" cellId="3" >
            <tapa.tfu.crc ueId="4" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="6" isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # Expect HARQ ACK in PHICH
      <tapa.expect>
         <tapa.tfu.cntrl.req expCntrlReq="2" schInstId="5" spId="0">
            <tapa.tfu.phich.cntrl.req ueId="4" isAck="TRUE"/>
            <tapa.tfu.phich.cntrl.req ueId="6" isAck="TRUE"/>
         </tapa.tfu.cntrl.req>
      </tapa.expect>

      # send SR for 3rd and 4th UE on second instance
      <tapa.send>
        <tapa.tfu.sr.ind instId="5" suId="1" cellId="4">
           <tapa.tfu.sr ueId="5"/>
           <tapa.tfu.sr ueId="7"/>
        </tapa.tfu.sr.ind>
     </tapa.send>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expset>
         <tapa.tfu.cntrl.req expCntrlReq="2" schInstId="5" spId="1">
            <tapa.tfu.pdcch.cntrl.req cellId="4" ueId="5" saveTo="5" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
            <tapa.tfu.pdcch.cntrl.req cellId="4" ueId="7" saveTo="7" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
         </tapa.tfu.cntrl.req>
      </tapa.expset>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="2" schInstId="5" spId="1" >
            <tapa.tfu.pusch.recp.req use="5" vldtDatRecp="TRUE" ueId="5"/>
            <tapa.tfu.pusch.recp.req use="7" vldtDatRecp="TRUE" ueId="7"/>
         </tapa.tfu.recp.req>   
      </tapa.expect>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      #Send CRC for Msg
      <tapa.send>
         <tapa.tfu.crc.ind schInstId="5" suId="1" cellId="4">
            <tapa.tfu.crc ueId="5" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="7" isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # Expect HARQ ACK in PHICH
      <tapa.expect>
         <tapa.tfu.cntrl.req expCntrlReq="2" schInstId="5" spId="1">
            <tapa.tfu.phich.cntrl.req ueId="5" isAck="TRUE"/>
            <tapa.tfu.phich.cntrl.req ueId="7" isAck="TRUE"/>
         </tapa.tfu.cntrl.req>
      </tapa.expect>

   </tapa.test>

   
   # Clean subsection
   <tapa.clean>
      #Command To ShutDown LTEMAC Layer
      <tapa.rg.multiInstmacDeInit/>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown/>

</tapa.testcase> 


#       Test:    36.8
#
#       Desc:   "To verify UL data on 4 Ue per instance with 4 Ue/TTI"
#
#       Notes:   None
#
#       Module:  "MAC Module"
#
#       File:    rgac_tc36.xml
#
#
<tapa.testcase id="36.8">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="" section=""/>
      <tapa.module id=""/>

      <tapa.desc>
         To verify UL data on 4 Ues per instance with 4Ue/TTI
      </tapa.desc>

      <tapa.longdesc>
         To verify UL data on 4 Ues per instance with 4Ue/TTI
      </tapa.longdesc>

   </tapa.doc>
 # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef/>

      <tapa.ifndef>
         <tapa.flag id="TFU_TDD"/>
      </tapa.ifndef>

      <tapa.mode mode="single"/>
   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Initialize LTEMAC instances for 2 Cell
      <tapa.rg.multiInstMacInit/>
      #Initialize Saps for 2 Cells
      <tapa.rg.multiInstCellSapInit/>
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>
      #Initialize Cells per instance
      <tapa.rg.multiInstCellInit maxDlUeNewTxPerTti="4" maxUePerDlSf="4" maxUlUeNewTxPerTti="4" maxUePerUlSf="4"/>

      <tapa.rg.multiInst1UePerCellInit ueId="0" uniqueRntiVldt="FALSE"/>
      <tapa.rg.multiInst1UePerCellInit ueId="2" uniqueRntiVldt="FALSE"/>
      <tapa.rg.multiInst1UePerCellInit ueId="4" uniqueRntiVldt="FALSE"/>
      <tapa.rg.multiInst1UePerCellInit ueId="6" uniqueRntiVldt="FALSE"/>

      # Steps for LC creation for 1st Ue on instance 0
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0"  ueId="0" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="0" lcId="1" dir="3" lcType="5" instId="5" spId="0" />
      </tapa.send>



      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="0"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 1
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" spId="1" cellId="4" ueId="1" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="1" lcId="1" dir="3" lcType="5" instId="5" spId="1" cellId="4" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="1"/>
      </tapa.expect>


      # Steps for LC creation for 1st Ue on instance 0
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0"  ueId="2" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="2" lcId="1" dir="3" lcType="5" instId="5" spId="0" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="0"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 1
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" spId="1" cellId="4" ueId="3" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="3" lcId="1" dir="3" lcType="5" instId="5" spId="1" cellId="4" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="1"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 0
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0"  ueId="4" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="4" lcId="1" dir="3" lcType="5" instId="5" spId="0" />
      </tapa.send>



      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="0"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 1
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" spId="1" cellId="4" ueId="5" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="5" lcId="1" dir="3" lcType="5" instId="5" spId="1" cellId="4" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="1"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 0
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0"  ueId="6" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="6" lcId="1" dir="3" lcType="5" instId="5" spId="0" />
      </tapa.send>



      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="0"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 1
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" spId="1" cellId="4" ueId="7" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="7" lcId="1" dir="3" lcType="5" instId="5" spId="1" cellId="4" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="1"/>
      </tapa.expect>
      
      # send SR for first 4 Ues on UE on first instance
      <tapa.send>
        <tapa.tfu.sr.ind instId="5" suId="0" cellId="3">
           <tapa.tfu.sr ueId="0"/>
           <tapa.tfu.sr ueId="2"/>
           <tapa.tfu.sr ueId="4"/>
           <tapa.tfu.sr ueId="6"/>
        </tapa.tfu.sr.ind>
     </tapa.send>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expset>
         <tapa.tfu.cntrl.req expCntrlReq="4" schInstId="5" spId="0">
            <tapa.tfu.pdcch.cntrl.req cellId="3" ueId="0" saveTo="0" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
            <tapa.tfu.pdcch.cntrl.req cellId="3" ueId="2" saveTo="2" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
            <tapa.tfu.pdcch.cntrl.req cellId="3" ueId="4" saveTo="4" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
            <tapa.tfu.pdcch.cntrl.req cellId="3" ueId="6" saveTo="6" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
         </tapa.tfu.cntrl.req>
      </tapa.expset>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="4" schInstId="5" spId="0" >
            <tapa.tfu.pusch.recp.req use="0" vldtDatRecp="TRUE" ueId="0"/>
            <tapa.tfu.pusch.recp.req use="2" vldtDatRecp="TRUE" ueId="2"/>
            <tapa.tfu.pusch.recp.req use="4" vldtDatRecp="TRUE" ueId="4"/>
            <tapa.tfu.pusch.recp.req use="6" vldtDatRecp="TRUE" ueId="6"/>
         </tapa.tfu.recp.req>   
      </tapa.expect>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      #Send CRC for Msg
      <tapa.send>
         <tapa.tfu.crc.ind schInstId="5" suId="0" cellId="3" >
            <tapa.tfu.crc ueId="0" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="2" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="4" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="6" isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # Expect HARQ ACK in PHICH
      <tapa.expect>
         <tapa.tfu.cntrl.req expCntrlReq="4" schInstId="5" spId="0">
            <tapa.tfu.phich.cntrl.req ueId="0" isAck="TRUE"/>
            <tapa.tfu.phich.cntrl.req ueId="2" isAck="TRUE"/>
            <tapa.tfu.phich.cntrl.req ueId="4" isAck="TRUE"/>
            <tapa.tfu.phich.cntrl.req ueId="6" isAck="TRUE"/>
         </tapa.tfu.cntrl.req>
      </tapa.expect>

      # send SR for first 4 Ues on UE on second instance
      <tapa.send>
        <tapa.tfu.sr.ind instId="5" suId="1" cellId="4">
           <tapa.tfu.sr ueId="1"/>
           <tapa.tfu.sr ueId="3"/>
           <tapa.tfu.sr ueId="5"/>
           <tapa.tfu.sr ueId="7"/>
        </tapa.tfu.sr.ind>
     </tapa.send>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expset>
         <tapa.tfu.cntrl.req expCntrlReq="4" schInstId="5" spId="1">
            <tapa.tfu.pdcch.cntrl.req cellId="4" ueId="1" saveTo="1" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
            <tapa.tfu.pdcch.cntrl.req cellId="4" ueId="3" saveTo="3" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
            <tapa.tfu.pdcch.cntrl.req cellId="4" ueId="5" saveTo="5" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
            <tapa.tfu.pdcch.cntrl.req cellId="4" ueId="7" saveTo="7" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
         </tapa.tfu.cntrl.req>
      </tapa.expset>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="4" schInstId="5" spId="1" >
            <tapa.tfu.pusch.recp.req use="1" vldtDatRecp="TRUE" ueId="1"/>
            <tapa.tfu.pusch.recp.req use="3" vldtDatRecp="TRUE" ueId="3"/>
            <tapa.tfu.pusch.recp.req use="5" vldtDatRecp="TRUE" ueId="5"/>
            <tapa.tfu.pusch.recp.req use="7" vldtDatRecp="TRUE" ueId="7"/>
         </tapa.tfu.recp.req>   
      </tapa.expect>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      #Send CRC for Msg
      <tapa.send>
         <tapa.tfu.crc.ind schInstId="5" suId="1" cellId="4">
            <tapa.tfu.crc ueId="1" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="3" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="5" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="7" isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>

      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # Expect HARQ ACK in PHICH
      <tapa.expect>
         <tapa.tfu.cntrl.req expCntrlReq="4" schInstId="5" spId="1">
            <tapa.tfu.phich.cntrl.req ueId="1" isAck="TRUE"/>
            <tapa.tfu.phich.cntrl.req ueId="3" isAck="TRUE"/>
            <tapa.tfu.phich.cntrl.req ueId="5" isAck="TRUE"/>
            <tapa.tfu.phich.cntrl.req ueId="7" isAck="TRUE"/>
         </tapa.tfu.cntrl.req>
      </tapa.expect>
   </tapa.test>

   
   # Clean subsection
   <tapa.clean>
      #Command To ShutDown LTEMAC Layer
      <tapa.rg.multiInstmacDeInit/>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown/>

</tapa.testcase> 

#       Test:    36.9
#
#       Desc:   "To verify UL data on 4 Ue per instance with 4 Ue/TTI"
#
#       Notes:   None
#
#       Module:  "MAC Module"
#
#       File:    rgac_tc36.xml
#
#
<tapa.testcase id="36.9">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="" section=""/>
      <tapa.module id=""/>

      <tapa.desc>
         To verify UL data on 4 Ues per instance with 4Ue/TTI
      </tapa.desc>

      <tapa.longdesc>
         To verify UL data on 4 Ues per instance with 4Ue/TTI
      </tapa.longdesc>

   </tapa.doc>
 # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef/>

      <tapa.ifndef>
         <tapa.flag id="TFU_TDD"/>
      </tapa.ifndef>

      <tapa.mode mode="single"/>
   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Initialize LTEMAC instances for 2 Cell
      <tapa.rg.multiInstMacInit/>
      #Initialize Saps for 2 Cells
      <tapa.rg.multiInstCellSapInit/>
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>
      #Initialize Cells per instance
      <tapa.rg.multiInstCellInit maxDlUeNewTxPerTti="4" maxUePerDlSf="4" maxUlUeNewTxPerTti="4" maxUePerUlSf="4"/>

      <tapa.rg.multiInst1UePerCellInit ueId="0" uniqueRntiVldt="FALSE"/>
      <tapa.rg.multiInst1UePerCellInit ueId="2" uniqueRntiVldt="FALSE"/>
      <tapa.rg.multiInst1UePerCellInit ueId="4" uniqueRntiVldt="FALSE"/>
      <tapa.rg.multiInst1UePerCellInit ueId="6" uniqueRntiVldt="FALSE"/>


      # Steps for LC creation for 1st Ue on instance 0
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0"  ueId="0" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="0" lcId="1" dir="3" lcType="5" instId="5" spId="0" />
      </tapa.send>



      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="0"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 1
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" spId="1" cellId="4" ueId="1" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="1" lcId="1" dir="3" lcType="5" instId="5" spId="1" cellId="4" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="1"/>
      </tapa.expect>


      # Steps for LC creation for 1st Ue on instance 0
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0"  ueId="2" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="2" lcId="1" dir="3" lcType="5" instId="5" spId="0" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="0"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 1
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" spId="1" cellId="4" ueId="3" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="3" lcId="1" dir="3" lcType="5" instId="5" spId="1" cellId="4" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="1"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 0
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0"  ueId="4" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="4" lcId="1" dir="3" lcType="5" instId="5" spId="0" />
      </tapa.send>



      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="0"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 1
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" spId="1" cellId="4" ueId="5" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="5" lcId="1" dir="3" lcType="5" instId="5" spId="1" cellId="4" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="1"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 0
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="0"  ueId="6" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="6" lcId="1" dir="3" lcType="5" instId="5" spId="0" />
      </tapa.send>



      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="0"/>
      </tapa.expect>

      # Steps for LC creation for 1st Ue on instance 1
      # Configure a dedicated logical channel for the created UE  
      <tapa.send>
         <tapa.crg.cfgreq.cfg.lch instId="1" spId="1" cellId="4" ueId="7" lcId="1" lcgId="0" dir="3" lcType="5" />
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.crg.cfgcfm instId="1"/>
      </tapa.expect>

      # Configure DL LC on RGR
      <tapa.send>
         <tapa.rgr.cfgreq.cfg.lch ueId="7" lcId="1" dir="3" lcType="5" instId="5" spId="1" cellId="4" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm instId="5" spId="1"/>
      </tapa.expect>
      
      # send SR for first 4 Ues on UE on first instance
      <tapa.send>
        <tapa.tfu.sr.ind instId="5" suId="0" cellId="3">
           <tapa.tfu.sr ueId="0"/>
           <tapa.tfu.sr ueId="2"/>
           <tapa.tfu.sr ueId="4"/>
           <tapa.tfu.sr ueId="6"/>
        </tapa.tfu.sr.ind>
     </tapa.send>

      # send SR for first 4 Ues on UE on second instance
      <tapa.send>
        <tapa.tfu.sr.ind instId="5" suId="1" cellId="4">
           <tapa.tfu.sr ueId="1"/>
           <tapa.tfu.sr ueId="3"/>
           <tapa.tfu.sr ueId="5"/>
           <tapa.tfu.sr ueId="7"/>
        </tapa.tfu.sr.ind>
     </tapa.send>



      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expset>
         <tapa.tfu.cntrl.req expCntrlReq="4" schInstId="5" spId="0">
            <tapa.tfu.pdcch.cntrl.req cellId="3" ueId="0" saveTo="0" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
            <tapa.tfu.pdcch.cntrl.req cellId="3" ueId="2" saveTo="2" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
            <tapa.tfu.pdcch.cntrl.req cellId="3" ueId="4" saveTo="4" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
            <tapa.tfu.pdcch.cntrl.req cellId="3" ueId="6" saveTo="6" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
         </tapa.tfu.cntrl.req>
      </tapa.expset>

      <tapa.expset>
         <tapa.tfu.cntrl.req expCntrlReq="4" schInstId="5" spId="1">
            <tapa.tfu.pdcch.cntrl.req cellId="4" ueId="1" saveTo="1" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
            <tapa.tfu.pdcch.cntrl.req cellId="4" ueId="3" saveTo="3" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
            <tapa.tfu.pdcch.cntrl.req cellId="4" ueId="5" saveTo="5" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
            <tapa.tfu.pdcch.cntrl.req cellId="4" ueId="7" saveTo="7" isUlGrant="TRUE" vldtGrant="TRUE" vldtTx="TRUE"/>
         </tapa.tfu.cntrl.req>
      </tapa.expset>


      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="4" schInstId="5" spId="0">
            <tapa.tfu.pusch.recp.req use="0" vldtDatRecp="TRUE" ueId="0"/>
            <tapa.tfu.pusch.recp.req use="2" vldtDatRecp="TRUE" ueId="2"/>
            <tapa.tfu.pusch.recp.req use="4" vldtDatRecp="TRUE" ueId="4"/>
            <tapa.tfu.pusch.recp.req use="6" vldtDatRecp="TRUE" ueId="6"/>
         </tapa.tfu.recp.req>   
      </tapa.expect>

      <tapa.send>
         <tapa.tfu.ul.resetrb/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req expRecpReq="4" schInstId="5" spId="1" vldtRbOvrlap="FALSE">
            <tapa.tfu.pusch.recp.req use="1" vldtDatRecp="TRUE" ueId="1" />
            <tapa.tfu.pusch.recp.req use="3" vldtDatRecp="TRUE" ueId="3" />
            <tapa.tfu.pusch.recp.req use="5" vldtDatRecp="TRUE" ueId="5" />
            <tapa.tfu.pusch.recp.req use="7" vldtDatRecp="TRUE" ueId="7" />
         </tapa.tfu.recp.req>   
      </tapa.expect>


      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      #Send CRC for Msg
      <tapa.send>
         <tapa.tfu.crc.ind schInstId="5" suId="0" cellId="3" >
            <tapa.tfu.crc ueId="0" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="2" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="4" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="6" isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>

      #Send CRC for Msg
      <tapa.send>
         <tapa.tfu.crc.ind schInstId="5" suId="1" cellId="4">
            <tapa.tfu.crc ueId="1" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="3" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="5" isFailure="FALSE"/>
            <tapa.tfu.crc ueId="7" isFailure="FALSE"/>
         </tapa.tfu.crc.ind>
      </tapa.send>


      # Send TTI indication
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      # Expect HARQ ACK in PHICH
      <tapa.expect>
         <tapa.tfu.cntrl.req expCntrlReq="4" schInstId="5" spId="0">
            <tapa.tfu.phich.cntrl.req ueId="0" isAck="TRUE"/>
            <tapa.tfu.phich.cntrl.req ueId="2" isAck="TRUE"/>
            <tapa.tfu.phich.cntrl.req ueId="4" isAck="TRUE"/>
            <tapa.tfu.phich.cntrl.req ueId="6" isAck="TRUE"/>
         </tapa.tfu.cntrl.req>
      </tapa.expect>

      # Expect HARQ ACK in PHICH
      <tapa.expect>
         <tapa.tfu.cntrl.req expCntrlReq="4" schInstId="5" spId="1">
            <tapa.tfu.phich.cntrl.req ueId="1" isAck="TRUE"/>
            <tapa.tfu.phich.cntrl.req ueId="3" isAck="TRUE"/>
            <tapa.tfu.phich.cntrl.req ueId="5" isAck="TRUE"/>
            <tapa.tfu.phich.cntrl.req ueId="7" isAck="TRUE"/>
         </tapa.tfu.cntrl.req>
      </tapa.expect>

   </tapa.test>
   
   # Clean subsection
   <tapa.clean>
      #Command To ShutDown LTEMAC Layer
      <tapa.rg.multiInstmacDeInit/>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown/>

</tapa.testcase> 

#       Test:    36.10
#
#       Desc:   "To verify more than one cell per instance"
#
#       Notes:   None
#
#       Module:  "MAC Module"
#
#       File:    rgac_tc36.xml
#
#
<tapa.testcase id="36.10">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="" section=""/>
      <tapa.module id=""/>

      <tapa.desc>
         To verify 2 cells per instance
      </tapa.desc>

      <tapa.longdesc>
         To verify 2 cells per instance
      </tapa.longdesc>

   </tapa.doc>
 # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef/>

      <tapa.ifndef>
         <tapa.flag id="TFU_TDD"/>
      </tapa.ifndef>

      <tapa.mode mode="single"/>
   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Initialize LTEMAC instances for 2 Cell
      <tapa.rg.multiInstMacInit/>
      #Initialize Saps for 2 Cells
      <tapa.rg.multiInstCellSapInit/>
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>
      
      #Send CRG Cell Configuration
      <tapa.send>
         <tapa.crg.cfgreq.cfg.cell instId="0" spId="0" cellId="3"/>
      </tapa.send>
      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="0"/>
      </tapa.expect>

      #Send CRG Cell Configuration
      <tapa.send>
         <tapa.crg.cfgreq.cfg.cell instId="0" spId="0" cellId="4"/>
      </tapa.send>

      #Expect positive Configuration Confirm from LTEMAC
      <tapa.expect>
         <tapa.crg.cfgcfm instId="0" status="15"/>
      </tapa.expect>



  </tapa.test>

   # Clean subsection
   <tapa.clean>
      #Command To ShutDown LTEMAC Layer
      <tapa.rg.multiInstmacDeInit/>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown/>

</tapa.testcase> 


#       Test:    36.11
#
#       Desc:   "To verify one UE config per cell"
#
#       Notes:   None
#
#       Module:  "MAC Module"
#
#       File:    rgac_tc36.xml
#
#
<tapa.testcase id="36.11">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="" section=""/>
      <tapa.module id=""/>

      <tapa.desc>
         To verify 1 ue cfg per cell
      </tapa.desc>

      <tapa.longdesc>
         To verify 1 ue cfg per cell
      </tapa.longdesc>

   </tapa.doc>
 # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef/>

      <tapa.ifndef>
         <tapa.flag id="TFU_TDD"/>
      </tapa.ifndef>

      <tapa.mode mode="single"/>
   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Initialize LTEMAC instances for 2 Cell
      <tapa.rg.multiInstMacInit/>
      #Initialize Saps for 2 Cells
      <tapa.rg.multiInstCellSapInit/>
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>
      
      #Initialize Cells per instance
      <tapa.rg.multiInstCellInit/>

      #Initialize 1 UE per instance
      <tapa.rg.multiInst1UePerCellInit ueId="0" uniqueRntiVldt="FALSE"/>

  </tapa.test>

   # Clean subsection
   <tapa.clean>
      #Command To ShutDown LTEMAC Layer
      <tapa.rg.multiInstmacDeInit/>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown/>

</tapa.testcase> 


#       Test:    36.12
#
#       Desc:   "To verify RNTI allocated is within range configured to cell"
#
#       Notes:   None
#
#       Module:  "MAC Module"
#
#       File:    rgac_tc36.xml
#
#
<tapa.testcase id="36.12">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="" section=""/>
      <tapa.module id=""/>

      <tapa.desc>
         To verify RNTI allocated is within range configured to cell
      </tapa.desc>

      <tapa.longdesc>
         To verify RNTI allocated is within range configured to cell
      </tapa.longdesc>

   </tapa.doc>
 # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef/>

      <tapa.ifndef>
         <tapa.flag id="TFU_TDD"/>
      </tapa.ifndef>

      <tapa.mode mode="single"/>
   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Initialize LTEMAC instances for 2 Cell
      <tapa.rg.multiInstMacInit/>
      #Initialize Saps for 2 Cells
      <tapa.rg.multiInstCellSapInit/>
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>
      
      #Initialize Cells per instance
      <tapa.rg.multiInstCellInit/>

      #RACH procedure for first UE towards first instance
      <tapa.send>
         <tapa.tfu.rareq.ind instId="5" numRaRnti="1" suId="0">
            <tapa.tfu.rareq  numRapId="1" rapIds="2" timingAdvs="3"
               tpcs="1" cqiPres="TRUE" cqis="4" cellId="3"/>
         </tapa.tfu.rareq.ind>
      </tapa.send>

      # Ue starts expecting raResp after 3 subframes within the raResp window.
      # In this TC, it shall expect raResp in the first subframe after 3 Ttis.
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="2" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>
    
      # Expect RaResp for the rapId sent in RaReq
      <tapa.expset>
        <tapa.tfu.cntrl.req numCntrlReq="1" schInstId="5" spId="0">
           <tapa.tfu.pdcch.cntrl.req/>
        </tapa.tfu.cntrl.req>
        <tapa.tfu.dat.req datReqs="1" macInstId="0" spId="0">
           <tapa.tfu.rarsp.req validateTCrnti="TRUE" startRnti="10" endRnti="40" />
        </tapa.tfu.dat.req>
      </tapa.expset>

  </tapa.test>

   # Clean subsection
   <tapa.clean>
      #Command To ShutDown LTEMAC Layer
      <tapa.rg.multiInstmacDeInit/>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown/>

</tapa.testcase> 



#       Test:    36.13
#
#       Desc:   "To verify Same SR periodicity for one UE on both cell"
#
#       Notes:   None
#
#       Module:  "MAC Module"
#
#       File:    rgac_tc36.xml
#
#
<tapa.testcase id="36.13">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="" section=""/>
      <tapa.module id=""/>

      <tapa.desc>
         To verify Same SR periodicity for one UE on both cell
      </tapa.desc>

      <tapa.longdesc>
         To verify Same SR periodicity for one UE on both cell
      </tapa.longdesc>

   </tapa.doc>
 # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef/>

      <tapa.ifndef>
         <tapa.flag id="TFU_TDD"/>
      </tapa.ifndef>

      <tapa.mode mode="single"/>
   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Initialize LTEMAC instances for 2 Cell
      <tapa.rg.multiInstMacInit/>
      #Initialize Saps for 2 Cells
      <tapa.rg.multiInstCellSapInit/>
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>
      
      #Initialize Cells per instance
      <tapa.rg.multiInstCellInit/>
      
      #Initialize ue per Cell
      <tapa.rg.multiInst1UeOnFirstCell ueId="0" uniqueRntiVldt="FALSE"/>
      <tapa.rg.multiInst1UeOnSecondCell ueId="1" uniqueRntiVldt="FALSE"/>

      # Reconfiguring the UE with SR config
      <tapa.send>
          <tapa.rgr.cfgreq.recfg.ue  ueId="0" 
       srCfgPres ="TRUE" srCfgIdx ="8"  UeReCfgType="16384" />
      </tapa.send>

      <tapa.send>
          <tapa.rgr.cfgreq.recfg.ue  ueId="1" cellId="4" spId="1" 
       srCfgPres ="TRUE" srCfgIdx ="8"  UeReCfgType="16384" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expset>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm status="0" instId="5" suId="0" ueId="0"/>
         <tapa.rgr.cfgCfm status="0" instId="5" suId="1" ueId="1" cellId="4"/>
      </tapa.expset>


      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expset>
         <tapa.tfu.recp.req spId="0" ueId="0">
            <tapa.tfu.sr.recp.req/>
         </tapa.tfu.recp.req>

         <tapa.tfu.recp.req spId="1" ueId="1">
            <tapa.tfu.sr.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expset>


      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="10" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expset>
         <tapa.tfu.recp.req spId="0" ueId="0">
            <tapa.tfu.sr.recp.req/>
         </tapa.tfu.recp.req>

         <tapa.tfu.recp.req spId="1" ueId="1">
            <tapa.tfu.sr.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expset>


  </tapa.test>

   # Clean subsection
   <tapa.clean>
      #Command To ShutDown LTEMAC Layer
      <tapa.rg.multiInstmacDeInit/>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown/>

</tapa.testcase> 



#       Test:    36.14
#
#       Desc:   "To verify different SR periodicity for one UE on both cell"
#
#       Notes:   None
#
#       Module:  "MAC Module"
#
#       File:    rgac_tc36.xml
#
#
<tapa.testcase id="36.14">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="" section=""/>
      <tapa.module id=""/>

      <tapa.desc>
         To verify different SR periodicity for one UE on both cell
      </tapa.desc>

      <tapa.longdesc>
         To verify different SR periodicity for one UE on both cell
      </tapa.longdesc>

   </tapa.doc>
 # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef/>

      <tapa.ifndef>
         <tapa.flag id="TFU_TDD"/>
      </tapa.ifndef>

      <tapa.mode mode="single"/>
   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Initialize LTEMAC instances for 2 Cell
      <tapa.rg.multiInstMacInit/>
      #Initialize Saps for 2 Cells
      <tapa.rg.multiInstCellSapInit/>
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>
      
      #Initialize Cells per instance
      <tapa.rg.multiInstCellInit/>
      
      #Initialize ue per Cell
      <tapa.rg.multiInst1UeOnFirstCell ueId="0" uniqueRntiVldt="FALSE"/>
      <tapa.rg.multiInst1UeOnSecondCell ueId="1" uniqueRntiVldt="FALSE"/>

      # Reconfiguring the UE with SR config
      <tapa.send>
          <tapa.rgr.cfgreq.recfg.ue  ueId="0" 
       srCfgPres ="TRUE" srCfgIdx ="3"  UeReCfgType="16384" />
      </tapa.send>

      <tapa.send>
          <tapa.rgr.cfgreq.recfg.ue  ueId="1" cellId="4" spId="1" 
       srCfgPres ="TRUE" srCfgIdx ="8"  UeReCfgType="16384" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expset>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm status="0" instId="5" suId="0" ueId="0"/>
         <tapa.rgr.cfgCfm status="0" instId="5" suId="1" ueId="1" cellId="4"/>
      </tapa.expset>


      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="3" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expset>
         <tapa.tfu.recp.req spId="0" ueId="0">
            <tapa.tfu.sr.recp.req/>
         </tapa.tfu.recp.req>

         <tapa.tfu.recp.req spId="1" ueId="1">
            <tapa.tfu.sr.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expset>



      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="5" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req spId="0" ueId="0">
            <tapa.tfu.sr.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="5" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

     <tapa.expset>
         <tapa.tfu.recp.req spId="0" ueId="0">
            <tapa.tfu.sr.recp.req/>
         </tapa.tfu.recp.req>

         <tapa.tfu.recp.req spId="1" ueId="1">
            <tapa.tfu.sr.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expset>



  </tapa.test>

   # Clean subsection
   <tapa.clean>
      #Command To ShutDown LTEMAC Layer
      <tapa.rg.multiInstmacDeInit/>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown/>

</tapa.testcase> 



#       Test:    36.15
#
#       Desc:   "To verify Same CQI periodicity for one UE on both cell"
#
#       Notes:   None
#
#       Module:  "MAC Module"
#
#       File:    rgac_tc36.xml
#
#
<tapa.testcase id="36.15">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="" section=""/>
      <tapa.module id=""/>

      <tapa.desc>
         To verify Same CQI periodicity for one UE on both cell
      </tapa.desc>

      <tapa.longdesc>
         To verify Same CQI periodicity for one UE on both cell
      </tapa.longdesc>

   </tapa.doc>
 # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef/>

      <tapa.ifndef>
         <tapa.flag id="TFU_TDD"/>
      </tapa.ifndef>

      <tapa.mode mode="single"/>
   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Initialize LTEMAC instances for 2 Cell
      <tapa.rg.multiInstMacInit/>
      #Initialize Saps for 2 Cells
      <tapa.rg.multiInstCellSapInit/>
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>
      
      #Initialize Cells per instance
      <tapa.rg.multiInstCellInit/>
      
      #Initialize ue per Cell
      <tapa.rg.multiInst1UeOnFirstCell ueId="0" uniqueRntiVldt="FALSE"/>
      <tapa.rg.multiInst1UeOnSecondCell ueId="1" uniqueRntiVldt="FALSE"/>

      # Reconfiguring the UE with SR config
      <tapa.send>
          <tapa.rgr.cfgreq.recfg.ue  ueId="0" 
             cqiPResIdx="501" prdCqiCfg.type="TRUE" cqiPCfgIdx ="9" sANCQI="TRUE" 
             UeReCfgType="4096" />
      </tapa.send>

      <tapa.send>
          <tapa.rgr.cfgreq.recfg.ue  ueId="1" cellId="4" spId="1" 
             cqiPResIdx="501" prdCqiCfg.type="TRUE" cqiPCfgIdx ="9" sANCQI="TRUE" 
             UeReCfgType="4096" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expset>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm status="0" instId="5" suId="0" ueId="0"/>
         <tapa.rgr.cfgCfm status="0" instId="5" suId="1" ueId="1" cellId="4"/>
      </tapa.expset>


      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="2" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expset>
         <tapa.tfu.recp.req spId="0" ueId="0">
            <tapa.tfu.dlcqi.recp.req/>
         </tapa.tfu.recp.req>

         <tapa.tfu.recp.req spId="1" ueId="1">
            <tapa.tfu.dlcqi.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expset>


      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="10" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expset>
         <tapa.tfu.recp.req spId="0" ueId="0">
            <tapa.tfu.dlcqi.recp.req/>
         </tapa.tfu.recp.req>

         <tapa.tfu.recp.req spId="1" ueId="1">
            <tapa.tfu.dlcqi.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expset>


  </tapa.test>

   # Clean subsection
   <tapa.clean>
      #Command To ShutDown LTEMAC Layer
      <tapa.rg.multiInstmacDeInit/>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown/>

</tapa.testcase> 

#       Test:    36.16
#
#       Desc:   "To verify Different CQI periodicity for one UE on both cell"
#
#       Notes:   None
#
#       Module:  "MAC Module"
#
#       File:    rgac_tc36.xml
#
#
<tapa.testcase id="36.16">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="" section=""/>
      <tapa.module id=""/>

      <tapa.desc>
         To verify Different CQI periodicity for one UE on both cell
      </tapa.desc>

      <tapa.longdesc>
         To verify Different CQI periodicity for one UE on both cell
      </tapa.longdesc>

   </tapa.doc>
 # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef/>

      <tapa.ifndef>
         <tapa.flag id="TFU_TDD"/>
      </tapa.ifndef>

      <tapa.mode mode="single"/>
   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Initialize LTEMAC instances for 2 Cell
      <tapa.rg.multiInstMacInit/>
      #Initialize Saps for 2 Cells
      <tapa.rg.multiInstCellSapInit/>
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>
      
      #Initialize Cells per instance
      <tapa.rg.multiInstCellInit/>
      
      #Initialize ue per Cell
      <tapa.rg.multiInst1UeOnFirstCell ueId="0" uniqueRntiVldt="FALSE"/>
      <tapa.rg.multiInst1UeOnSecondCell ueId="1" uniqueRntiVldt="FALSE"/>

      # Reconfiguring the UE with SR config
      <tapa.send>
          <tapa.rgr.cfgreq.recfg.ue  ueId="0" 
             cqiPResIdx="501" prdCqiCfg.type="TRUE" cqiPCfgIdx ="5" sANCQI="TRUE" 
             UeReCfgType="4096" />
      </tapa.send>

      <tapa.send>
          <tapa.rgr.cfgreq.recfg.ue  ueId="1" cellId="4" spId="1" 
             cqiPResIdx="501" prdCqiCfg.type="TRUE" cqiPCfgIdx ="9" sANCQI="TRUE" 
             UeReCfgType="4096" />
      </tapa.send>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expset>
         # Expect success in cfg cfm
         <tapa.rgr.cfgCfm status="0" instId="5" suId="0" ueId="0"/>
         <tapa.rgr.cfgCfm status="0" instId="5" suId="1" ueId="1" cellId="4"/>
      </tapa.expset>


      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="2" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req spId="1" ueId="1">
            <tapa.tfu.dlcqi.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="1" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>


      <tapa.expect>
         <tapa.tfu.recp.req spId="0" ueId="0">
            <tapa.tfu.dlcqi.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="5" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req spId="0" ueId="0">
            <tapa.tfu.dlcqi.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>

      # Send TTI indication for default cell
      <tapa.send>
         <tapa.tfu.tti.ind multiInstEna="1"  numInst="2" numTti="4" macInstId="0:1" schInstId="5" macSuId="0:1" schSuId="0:1" cellId="3:4"/>
      </tapa.send>

      <tapa.expect>
         <tapa.tfu.recp.req spId="1" ueId="1">
            <tapa.tfu.dlcqi.recp.req/>
         </tapa.tfu.recp.req>
      </tapa.expect>

  </tapa.test>

   # Clean subsection
   <tapa.clean>
      #Command To ShutDown LTEMAC Layer
      <tapa.rg.multiInstmacDeInit/>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown/>

</tapa.testcase> 

