#
#/********************************************************************20**
#
#     Name:    PDCP 
#
#     Type:    XML Test File
#
#     Desc:    XML Based Test Cases
#
#     File:    pjac_grp1.xml
#
#     Sid:     $SID$
#
#     Prg:     Group 1 Test Cases  
#
#*********************************************************************21*/

# DO NOT DELETE THIS LINE -- TC number generation script depends on it.
# xyzabcstart=1:1:Group 1 Test Cases :pjac_grp1.xml

#
#
#       Test:    1.1
#
#       Desc:    PDCP Layer Manager Configuration
#
#       Notes:   None
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.1"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "Configuring PDCP Layer Manager.
          TC_LMM_GRP1_1"
      </tapa.desc>

      <tapa.longdesc/>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
    <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>
      <tapa.pj.init/>
   </tapa.cfg>
    
   # Test Steps subsection
   <tapa.test>

   <tapa.delay delay="2"/>

   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>

   <tapa.pj.deinit/>
      
   <tapa.delay delay="5"/>

   </tapa.shutdown>
</tapa.testcase>

#
#
#       Test:    1.2
#
#       Desc:    PDCP Layer Manager Sap state verification
#
#       Notes:   None
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.2"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "Configuring PDCP Layer Manager and verifying the SAP states.
          TC_LMM_GRP1_2"
      </tapa.desc>

      <tapa.longdesc/>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
    <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>
      <tapa.pj.init/>
   </tapa.cfg>
    
   # Test Steps subsection
   <tapa.test>

   #STSID status
   <tapa.send>
      <tapa.lpj.stareq elmnt="8"/>
   </tapa.send>

   <tapa.expect>
       <tapa.lpj.stacfm />
   </tapa.expect>

   #STSID status
   <tapa.send>
      <tapa.lpj.stareq elmnt="185"/>
   </tapa.send>

   <tapa.expect>
       <tapa.lpj.stacfm />
   </tapa.expect>
   
   #CPJ SAP status
   <tapa.send>
      <tapa.lpj.stareq elmnt="187"/>
   </tapa.send>

   <tapa.expect>
       <tapa.lpj.stacfm />
   </tapa.expect>

   #PJU SAP status
   <tapa.send>
      <tapa.lpj.stareq elmnt="188"/>
   </tapa.send>

   <tapa.expect>
       <tapa.lpj.stacfm />
   </tapa.expect>
   
   #STSID status
   <tapa.send>
      <tapa.lpj.stareq elmnt="189"/>
   </tapa.send>

   <tapa.expect>
       <tapa.lpj.stacfm />
   </tapa.expect>

   <tapa.delay delay="2"/>

   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>

   <tapa.pj.deinit/>
      
   </tapa.shutdown>
</tapa.testcase>

#
#
#       Test:    1.3
#
#       Desc:    Entity configuration for all the modes (TC_CFG_GRP2_1)
#
#       Notes:   None
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.3"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "Configuring PDCP Layer Control Interface(TC_CFG_GRP2_1)"
      </tapa.desc>

      <tapa.longdesc>
         "1. ueId=1, cellId=1, numEnt=6 (1-AM(SRB1), 2-AM(SRB2), 3-UM(DL), 4-UM(UL), 5-UM(BOTH), 6-AM(DRB)) successful configuration with discard timer for 6.
          2. Config Request for RLC for the 6 entities in step 1.
          3. Security Config Request for this UE - successful configuration.
          4. Delete RLC entities.
          5. Delete PDCP entities.
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>
      <tapa.pj.init/>
   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>

      <tapa.send>
         <tapa.cpj.cfgreq ueId="1" cellId="1" numEnt="6"
            rbId="1:2:3:4:5:6"
            cfgType="1:1:1:1:1:1"
            rbType="0:0:1:1:1:1"
            discReqd="1:1:0:0:0:0"
            cfmReqd="1:1:0:0:0:1"
            discardTmr="100:-1:0:0:200:100"

            dir="3:3:2:1:3:3"
            mode="3:3:2:2:2:3"
    
            umSnSize="0:0:5:0:0"
            statusRepReqd="0:0:0:0:0:1"
            pdcpSNSize="5:5:7:7:7:12"
    
            hdrCompUsed="0:0:1:1:1:1"
            maxCid="15:15:15:15:15"
            profile="0:0:0:0:24:8"
    
            bitFlag="0:0:0:0:0:0"
            isHoPres="0:0:0:0:0:0"
            dlCount="0:0:0:0:0:0"
            ulCount="0:0:0:0:0:0"
            numBits="0:0:0:0:0:0"
            ulBitMap="0:0:0:0:0:0"
         />
      </tapa.send>
      #Expect a config confirm for all of the above configured entities
      <tapa.expect>
         <tapa.cpj.cfgcfm ueId="1" cellId="1" numEnt="6"
            rbId="1:2:3:4:5:6"
            rbType="0:0:1:1:1:1"
            status="1:1:1:1:1:1"
            reason="0:0:0:0:0:0"
         />
      </tapa.expect>

      #Send a Security Config Req for the UE
      <tapa.send>
      <tapa.cpj.seccfgreq ueId="1" cellId="1" transId="1"
         selSecAct="TRUE"
         intalgoType="1"
         intkey=""
         ciphalgoType="1"
         ctrlplnkey=""
         usrplnkey=""
      />
      </tapa.send>
      #Expect a security config confirm for the UE
      <tapa.expect>
      <tapa.cpj.seccfgcfm ueId="1" cellId="1" transId="1"
         status="1"
         reason="0"
      />
      </tapa.expect>
    
      <!--  #Delete all the PDCP RBs in the ue
      <tapa.send>
         <tapa.cpj.cfgreq ueId="2" cellId="1" numEnt="6"
            cfgType="3:3:3:3:3:3"
            rbId="1:2:3:4:5:6"
            rbType="0:0:1:1:1:1"
         />
      </tapa.send>
      #Expect a confirm for the delete request
      <tapa.expect>
         <tapa.cpj.cfgcfm numEnt="6" ueId="1" cellId="1"
            rbId="1:2:3:4:5:6"
            rbType="0:0:1:1:1:1"
            status="2:2:2:2:2:2"
            reason="7:7:7:7:7:7"
         />
      </tapa.expect>  -->
      <tapa.delue1 />

   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
   </tapa.shutdown>

</tapa.testcase>



#
#
#       Test:    1.4
#
#       Desc:    Sec Config Request(TC_CFG_GRP2_11)
#
#       Notes:   None
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.4"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "PDCP Layer Control Interface - Sec Config Request(TC_CFG_GRP2_11)"
      </tapa.desc>

      <tapa.longdesc>
         "1. Config ueId=1, cellId=1, numEnt=1 DRB AM and expect a cfm.
          2. Security Config Request for this UE - expect failure for 
             Integrity Channel opening
          5. Delete PDCP entities.
      </tapa.longdesc>
         
   </tapa.doc>
   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef>
         <tapa.flag id="PJ_SEC_ASYNC"/>
      </tapa.ifdef>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>
      <tapa.pj.init/>
   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>
      
      #Send a configuration request for DRB - RB ID 1 
      <tapa.send>
         <tapa.cpj.cfgreq ueId="1" cellId="1" numEnt="1"
            rbId="1"
            cfgType="1"
            rbType="1"
            discReqd="0"
            cfmReqd="0"
            discardTmr="0"

            dir="3"
            mode="3"
    
            statusRepReqd="1"
            pdcpSNSize="0"
    
            hdrCompUsed="0"
            maxCid="0"
            profile="0"
    
            bitFlag="0"
            isHoPres="0"
            dlCount="0"
            ulCount="0"
            numBits="0"
            ulBitMap="0"
         />
      </tapa.send>
      #Expect a config confirm for all of the above configured entities
      <tapa.expect>
         <tapa.cpj.cfgcfm ueId="1" cellId="1" numEnt="1"
            rbId="1"
            status="1"
            reason="0"
         />
      </tapa.expect>

      #Send a Security Config Req for the UE with faliure for Integrity Channel JYOTI intInitFail="1"
      <tapa.send>
      <tapa.cpj.seccfgreq ueId="1" cellId="1" transId="1" 
         selSecAct="TRUE"
         intalgoType="1"
         intkey="12345678123456781234567812345678"
         ciphalgoType="1"
         ctrlplnkey="12345678123456781234567812345678"
         usrplnkey="12345678123456781234567812345678"
      />
      </tapa.send>

      #Set delay for OBD Wait timer expiry
      <tapa.delay delay="50"/>

      #Expect a security config confirm for the UE #JYOTI reason was 22 and sts 2
      <tapa.expect>
      <tapa.cpj.seccfgcfm ueId="1" cellId="1" transId="1"
         status="1"
         reason="0" 
      />
      </tapa.expect>
      #Send a Delete UE Request for UE ID - 1
      <tapa.send>
         <tapa.cpj.cfgreq ueId="1" cellId="1" numEnt="1"
            rbId="1"
            cfgType="5"
         />
      </tapa.send>
      #Expect a config confirm
      <tapa.expect>
         <tapa.cpj.cfgcfm ueId="1" cellId="1" numEnt="1"
            rbId="1"
            status="1"
            reason="0"
         />
      </tapa.expect>


   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.5
#
#       Desc:    Verify the control interface reconfiguration procedure
#       (TC_CFG_GRP2_2)
#
#       Notes:   None
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.5"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "Verify the control interface reconfiguration procedure (TC_CFG_GRP2_2)"
      </tapa.desc>

      <tapa.longdesc>
         "1. ueId=1, cellId=1, numEnt=2 (1-AM(DRB1), 2-AM(DRB2)successful
             configuration with discard timer for 6.
          2. Send Config Request with MODIFY (reconfiguration) cfgType for ROHC
             for DBR1 and Hand over information for DRB2.
          3. Delete PDCP entities.
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>
      <tapa.pj.init/>
   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>

      #Send a configuration request for DRB - RB ID 1 
      <tapa.send>
         <tapa.cpj.cfgreq ueId="1" cellId="1" numEnt="2"
            rbId="1:2"
            cfgType="1:1"
            rbType="1:1"
            discReqd="0:0"
            cfmReqd="0:0"
            discardTmr="0:0"

            dir="3:3"
            mode="3:3"
    
            statusRepReqd="0:0"
            pdcpSNSize="0:0"
    
            hdrCompUsed="0:0"
            maxCid="0:0"
            profile="0:0"
    
            bitFlag="0:0"
            isHoPres="0:0"
            dlCount="0:0"
            ulCount="0:0"
            numBits="0:0"
            ulBitMap="0:0"
         />
      </tapa.send>
      #Expect a config confirm for all of the above configured entities
      <tapa.expect>
         <tapa.cpj.cfgcfm ueId="1" cellId="1" numEnt="2"
            rbId="1:1"
            rbType="1:1"
            status="1:1"
            reason="0:0"
         />
      </tapa.expect>

      #add test case with hdrCompUsed="1:1" : TODO
      #Send a Re-config request for RB ID 1 
      <tapa.send>
         <tapa.cpj.cfgreq ueId="1" cellId="1" numEnt="2"
            rbId="1:2"
            cfgType="2:2"
            rbType="1:1"
            discReqd="1:1"
            cfmReqd="1:1"
            discardTmr="10:10"

            dir="3:3"
            mode="3:3"
    
            statusRepReqd="0:0"
            pdcpSNSize="0:0"
            hdrCompUsed="0:0"
            maxCid="0:0"
            profile="0:0"
    
            bitFlag="0:0"
            isHoPres="0:0"
            dlCount="0:0"
            ulCount="0:0"
            numBits="0:0"
            ulBitMap="0:0"
         />
      </tapa.send>
      #Expect a config confirm for all of the above configured entities
      <tapa.expect>
         # Expect Bind Request From PDCP
         <tapa.cpj.cfgcfm ueId="1" cellId="1" numEnt="2"
            rbId="1:2"
            rbType="1:1"
            status="1:1"
            reason="0:0"
         />
   </tapa.expect>

   <tapa.delue1 />
     
   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.6
#
#       Desc:    Verify end-to-end scenario for SRB1 and SRB2 with SecCfgReq enabled and
#       isSecAct is TRUE. Send data on both the SRBs. 
#
#       Notes:  Send data after enabling the security. 
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.6"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="36.323 v:8.5.0" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "Verify end-to-end scenario for SRBs with secCfgReq enabled and isSecAct
is TRUE. (TC_DL_UL_GRP3_2)"
      </tapa.desc>

      <tapa.longdesc>
         "1. ueId=1, cellId=1, numEnt=1 (1-AM(SRB1)) successful configuration .
          2. Config Request for RLC  and PDCP for 1 entities ueId=1, cellId=1.
          3. Config Security for ueId=1, cellId=1.
          4. ueId=2, cellId=1, numEnt=1 (1-AM(SRB1)) successful configuration .
          5. Config Request for RLC  and PDCP for 1 entities  ueId=2, cellId=1.
          6. Send Data on SRB1(ueId=1, CellId=1).
          7. Receive Data on SRB1 (ueId=2, CellId=1).
          8. Verify the data recived in step:7 is same data sent in step 6.
          9. Send Data on SRB1(ueId=2, CellId=1).
          10. Receive Data on SRB1 (ueId=1, CellId=1).
          11. Verify the data recived in step:9 is same data sent in step 10.
          12. ueId=1, cellId=1, numEnt=1 (1-AM(SRB2)) successful configuration.
          13. Config Request for RLC  and PDCP for 1 entities ueId=1, cellId=1.
          14. ueId=2, cellId=1, numEnt=1 (1-AM(SRB2)) successful configuration .
          15. Config Request for RLC  and PDCP for 1 entities  ueId=2, cellId=1.
          17. Send Data on SRB2(ueId=1, CellId=1).
          18. Receive Data on SRB2 (ueId=2, CellId=1).
          19. Verify the data recived in step:18 is same data sent in step 17.
          20. Send Data on SRB2(ueId=2, CellId=1).
          21. Receive Data on SRB2 (ueId=1, CellId=1).
          22. Send Data on SRB1, SRB2(ueId=1, CellId=1)
          23. Receive Data on SRB1, SRB2(ueId=2, CellId=1)
          24. Delete RLC UE entities.
          25. Delete PDCP UE entities."
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

      <tapa.delay delay="2"/>

      #Configure the SRB1 at RLC and PDCP Layer 
      <tapa.srb1cfg discardTmr0="1000" />
      <tapa.delay delay="2"/>


   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>

      #Send Data on SRB1 from ueId=1 CellId=1 to ueId=2 CellId=1 
      <tapa.dsrb1ue1T2 />
      <tapa.delay delay="2"/>

      #Send Data on SRB1 from ueId=2 CellId=1 to ueId=1 CellId=1 
      <tapa.dsrb1ue2T1 />
      <tapa.delay delay="2"/>
      
      #Configure the SRB2 at RLC and PDCP Layer 
      <tapa.srb2cfg discardTmr0="1000" />
      <tapa.delay delay="2"/>

      #Send Data on SRB2 from ueId=1 CellId=1 to ueId=2 CellId=1 
      <tapa.dsrb2ue1T2 />
      <tapa.delay delay="2"/>
     
      #Send Data on SRB2 from ueId=2 CellId=1 to ueId=1 CellId=1 
      <tapa.dsrb2ue2T1 />
      <tapa.delay delay="2"/>

      #Send Data on SRB1 from ueId=1 CellId=1 to ueId=2 CellId=1 
      <tapa.dsrb1ue1T2  />  
      <tapa.delay delay="2"/> 
     
       #Send Data on SRB1 for ueId=2 CellId=1 and Received on ueId=1 CellId=1 
      <tapa.dsrb1ue2T1 pdcpSn="1" /> 
      <tapa.delay delay="2"/>  

      <tapa.delue1N2 />
   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.7
#
#       Desc:    PDCP Discard Timer expiry for SRB data 
#
#       Notes:  Send data after enabling the security. 
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.7"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="36.323 v:8.5.0" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "Discard Timer Expirty handling while sending data on SRB1.
(TC_DL_UL_GRP3_5)"
      </tapa.desc>

      <tapa.longdesc>
         "1. ueId=1, cellId=1, numEnt=1 (1-AM(SRB1)) successful configuration .
          2. Config Request for RLC  and PDCP for 1 entities ueId=1, cellId=1.
          3. Config Security for ueId=1, cellId=1.
          4. ueId=2, cellId=1, numEnt=1 (1-AM(SRB1)) successful configuration .
          5. Config Request for RLC  and PDCP for 1 entities  ueId=2, cellId=1.
          6. Send Data on SRB1(ueId=1, CellId=1).
          7. Receive Data on SRB1 (ueId=2, CellId=1).
          8. Verify the data recived in step:7 is same data sent in step 6.
          9. Send Data on SRB1(ueId=1, CellId=1).
          10. Let Discard Timer Exp.
          11. Recevice DataCfm with PJU_DISCARD_TMR_EXP
          12. Send late Ack for data received in step 9.  
          13. Delete RLC UE entities.
          14. Delete PDCP UE entities."
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

      #Configure the SRB1 at RLC and PDCP Layer 
      <tapa.srb1cfg/>

   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>

      #Send Data on SRB1 from ueId=1 CellId=1 to ueId=2 CellId=1 
      <tapa.dsrb1ue1T2/>

       #Send Data on SRB1 from ueId=2 CellId=1 to ueId=1 CellId=1 
      <tapa.dsrb1ue2T1/>

      #Send Data on SRB1 from ueId=1 CellId=1 to ueId=2 CellId=1 
      <tapa.dsrb1ue1T2 pdcpSn="2" />

      <tapa.delue1N2 />

   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.8
#
#       Desc:    SRB1 SN Wrap around Check 
#
#       Notes:   
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.8"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="36.323 v:8.5.0" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "SRB1 SN Wrap around check.(TC_DL_UL_GRP3_11)"
      </tapa.desc>

      <tapa.longdesc>
         "1. ueId=1, cellId=1, numEnt=1 (1-AM(SRB1)) successful configuration .
          2. Config Request for RLC  and PDCP for 1 entities ueId=1, cellId=1.
          3. Config Security for ueId=1, cellId=1.
          4. ueId=2, cellId=1, numEnt=1 (1-AM(SRB1)) successful configuration .
          5. Config Request for RLC  and PDCP for 1 entities  ueId=2, cellId=1.
          6. Send Data on SRB1(ueId=1, CellId=1) of 70 pkts.
          7. Receive Data on SRB1 (ueId=2, CellId=1).
          8. Delete RLC UE entities.
          9. Delete PDCP UE entities."
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

      #Configure the SRB1 at RLC and PDCP Layer 
      <tapa.srb1cfg discardTmr0="0" />

   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>


      # Count Req and Cfm 
      #<tapa.srb1cntReq dlcount="0" ulcount="0"/>

      #TODO: How can we make sure the SN is correct, need to check in RGU Interface 
      <tapa.repeat.start repeatCount="80"/>

      #Send Data on SRB1 from ueId=1 CellId=1 to ueId=2 CellId=1 
      <tapa.dsrb1ue1T2 vrfPdcp0="FALSE" />

      <tapa.repeat.end/>

      # Count Req and Cfm 
      #<tapa.srb1cntReq dlcount="79" ulcount="79"/>

      #Send Data on SRB1 from ueId=1 CellId=1 to ueId=2 CellId=1 
      <tapa.dsrb1ue1T2 pdcpSn="16" />
      <tapa.delay delay="2"/>

      #Send Data on SRB0 from ueId=2 CellId=1 to ueId=1 CellId=1 
      <tapa.dsrb1ue2T1/>
      <tapa.delay delay="2"/>

      <tapa.delue1N2 />

   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>


#
#
#       Test:    1.9
#
#       Desc:    Transfer Data on DRB(DL:UM-7bit SN) and DRB(AM) No Rohc Comp.
#                Reconfig with Rohc Enabled and continue sending data.
#
#       Notes:   
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.9"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="36.323 v:8.5.0" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "Data Tranfer on DRB(AM), DRB(UM, 7bit SN) with out rohc compression and
rohc compression enabled (TC_DL_UL_GRP3_20)"
      </tapa.desc>

      <tapa.longdesc>
         "1. Configure DRB1(AM)for ueId=1, cellId=1, comp disabled with successful configuration.
          2. Configure DRB1(AM)for ueId=2, cellId=1, comp disabled with successful configuration.
          3. Configure DRB2(UM, DL)for ueId=1, cellId=1, comp enabled  with successful configuration.
          4. Configure DRB2(UM, UL )for ueId=2, cellId=1, comp enabled with successful configuration.
          5. Send Data from DRB1(ueId=1, CellId=1) to DRB1(udId=2, CellId=1).
          6. Send Data from DRB2(ueId=1, CellId=1) to DRB1(udId=2, CellId=1).
          7. ReConfigure DRB1 with Compression enabled (ueId=1, CellId=1).
          8. ReConfigure DRB1 with Compression enabled (ueId=2, CellId=1).
          9. Send Data from DRB1(ueId=1, CellId=1) to DRB1(ueId=2, CellId=1).
          10. Send Data from DRB2(ueId=1, CellId=1) to DRB2(ueId=2, CellId=1).
          11. Delete RLC UE entities.
          12. Delete PDCP UE entities."
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

      <tapa.delay delay="2"/>

      #Configure the SRB1 at RLC and PDCP Layer 
      <tapa.srb1cfg discardTmr0="0"/>

      <tapa.delay delay="2"/>


   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>

      #Send Data on SRB1 from ueId=1 CellId=1 to ueId=2 CellId=1 
      <tapa.dsrb1ue1T2/>

       #Send Data on SRB1 from ueId=2 CellId=1 to ueId=1 CellId=1 
      <tapa.dsrb1ue2T1/>
 
     #Cfg DRB1 and DRB2 
      <tapa.drb1cfg />
 
      <tapa.drb2cfg />

     #Send data on DRB1 and DRB2 
      <tapa.ddrb1ue1T2 bo="302"  totBufSize0="309" />
 
      <tapa.ddrb2ue1T2/>

       #Send the reconfig request for drb 1 with cmp enabled
      <tapa.send>
         <tapa.cpj.cfgreq ueId="1" cellId="1" numEnt="1"
            rbId="1"
            cfgType="2"
            rbType="1"
            discReqd="1"
            cfmReqd="1"
            discardTmr="500"

            dir="3"
            mode="3"
    
            statusRepReqd="0"
            pdcpSNSize="12"
    
            hdrCompUsed="1"
            maxCid="0"
            profile="0"
    
            bitFlag="0"
            isHoPres="0"
            dlCount="0"
            ulCount="0"
            numBits="0"
            ulBitMap="0"
         />
      </tapa.send>

      #Expect a config confirm for the above reconfig request
      <tapa.expect>
         <tapa.cpj.cfgcfm ueId="1" cellId="1" numEnt="1"
            rbId="1"
            rbType="1"
            status="1"
            reason="0"
         />
      </tapa.expect>
 

      #Send the reconfig request for drb 1 with cmp enabled
      <tapa.send>
         <tapa.cpj.cfgreq ueId="2" cellId="1" numEnt="1"
            rbId="1"
            cfgType="2"
            rbType="1"
            discReqd="1"
            cfmReqd="1"
            discardTmr="500"

            dir="3"
            mode="3"
    
            statusRepReqd="0"
            pdcpSNSize="12"
    
            hdrCompUsed="1"
            maxCid="0"
            profile="0"
    
            bitFlag="0"
            isHoPres="0"
            dlCount="0"
            ulCount="0"
            numBits="0"
            ulBitMap="0"
         />
      </tapa.send>

      #Expect a config confirm for the above reconfig request
      <tapa.expect>
         <tapa.cpj.cfgcfm ueId="2" cellId="1" numEnt="1"
            rbId="1"
            rbType="1"
            status="1"
            reason="0"
         />
   </tapa.expect>   

      <tapa.obd.directive feedback="TRUE" />
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduId="0" sduSize="300" rbId="1" ueId="1" cellId="1" rbType="1" />
      </tapa.send>

      #Expect the first SDU on DRB1 with size 307 at KWU
      <tapa.expect>
         <tapa.dummy.kwu.datreq  numLch="1" ueId="1" cellId="1" 
            lchData="0:0:0:3:1:-1:
                     -1:-1:-1:-1:-1"
            pdcpHdr="1:-1:0:-1" intgProt="FALSE"  ciph ="FALSE" 
            snSize="12" mode = "3" vrfPdcp="TRUE" /> 
      </tapa.expect>

      #Send DRB1 Data to Peer PDCP
      <tapa.send>
         <tapa.dummy.kwu.datind numLch="1" cellId="1"  ueId="2"  rbId="1" rbType="1"
            lchData="3:2:0,0:0,0:0,0:0,0"/>
      </tapa.send>

      #Expect DatInd at PJU for DRB1 Data
      <tapa.expset>
         <tapa.dummy.kwu.datreq cellId="1" ueId="2" rbId="1" />
         <tapa.pju.datind  entity="ENTPX" sduSize="300" 
            cellId="1" ueId="2" rbId="1" rbType="1" status="0" numSdu="1"/>
      </tapa.expset>

      #Send a data Cfm to PDCP
      <tapa.send>
         <tapa.dummy.kwu.datcfm cellId="1"  ueId="1" rbId="1" rbType="1"
            />
      </tapa.send>

      #Expect a Data Confirm at RRC for DRB1
      <tapa.expect>
         <tapa.pju.datcfm entity="ENTPX" sduId="0" status="0" numSdu="1" />
      </tapa.expect> 
      <tapa.delay delay="2"/>
      
      <tapa.ddrb2ue1T2 pdcpSn="1" />
      <tapa.delay delay="2"/>
         

     #Delete RCL and PDCP entity
     <tapa.delue1N2/>
      <tapa.delay delay="2"/>

   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>


#
#
#       Test:    1.10
#
#       Desc:    Verfiy PDCP header while transfering Data on DRB(DL:UM-7bit SN) and DRB(AM) No Rohc Comp.
#                
#       Notes:   
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.10"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="36.323 v:8.5.0" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "Verify PDCP Header while transfer data on on DRB(AM), DRB(UM, 7bit SN)
with out rohc compression (TC_DL_UL_GRP3_30)"
      </tapa.desc>

      <tapa.longdesc>
         "1. Configure DRB1(AM)for ueId=1, cellId=1, comp disabled with successful configuration.
          2. Configure DRB1(AM)for ueId=2, cellId=1, comp disabled with successful configuration.
          3. Configure DRB2(UM, DL)for ueId=1, cellId=1, comp enabled  with successful configuration.
          4. Configure DRB2(UM, UL )for ueId=2, cellId=1, comp enabled with successful configuration.
          5. Send Data from DRB1(ueId=1, CellId=1) to DRB1(udId=2, CellId=1).
          6. Send Data from DRB2(ueId=1, CellId=1) to DRB1(udId=2, CellId=1).
          7. Verify the PDCP Header.
          8. Get Rx/Tx Count
          9. Get Count request  
          10. Delete RLC UE entities.
          11. Delete PDCP UE entities."
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

      <tapa.delay delay="2"/>

      #Configure the SRB1 at RLC and PDCP Layer 
      <tapa.srb1cfg discardTmr0="1000" />

      <tapa.delay delay="2"/>


   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>

      #Send Data on SRB1 from ueId=1 CellId=1 to ueId=2 CellId=1 
      <tapa.dsrb1ue1T2/>
      <tapa.delay delay="2"/>

       #Send Data on SRB1 from ueId=2 CellId=1 to ueId=1 CellId=1 
      <tapa.dsrb1ue2T1/>
      <tapa.delay delay="2"/>
 
     #Cfg DRB1 and DRB2 
      <tapa.drb1cfg discardTmr0="1000" />
      <tapa.delay delay="2"/>
 
       <tapa.drb2cfg discardTmr0="1000" />
      <tapa.delay delay="2"/>

     #Send data on DRB1 
      <tapa.ddrb1ue1T2  bo="302"  totBufSize0="309"  pdcpSn="0" />
      <tapa.delay delay="2"/>
 
     #Send data on DRB2 
       <tapa.ddrb2ue1T2 />
      <tapa.delay delay="2"/>

    # Count Request for DRB1 (UE1, UE2)
    <!--tapa.drb1cntReq/-->
   


    # Statistics Count Request
#Pradeep
    <!--tapa.pdcpstareq/--> 
    <tapa.delay delay="2"/>

     #Delete RCL and PDCP entity
     <tapa.delue1N2/>
      <tapa.delay delay="2"/>

   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>


#
#
#       Test:    1.11
#
#       Desc:    SN Wrap around condition for DRB(DL:UM-7bit SN)
#
#       Notes:   
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.11"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="36.323 v:8.5.0" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "SN Wrap around condition for DRB(UM: DL, 7bit SN) (TC_DL_UL_GRP3_21)"
      </tapa.desc>

      <tapa.longdesc>
          1. Configure DRB1(UM, DL)for ueId=1, cellId=1, comp enabled  with successful configuration.
          2. Configure DRB1(UM, UL )for ueId=2, cellId=1, comp enabled with successful configuration.
          3. Send Data from DRB1(ueId=1, CellId=1) to DRB1(udId=2, CellId=1).
          4. Repeate step 3 for 70 pkts.
          5. Delete RLC UE entities.
          6. Delete PDCP UE entities."
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

      <tapa.delay delay="2"/>

      #Configure the SRB1 at RLC and PDCP Layer 
      <tapa.srb1cfg  discardTmr0="0"/>

      <tapa.delay delay="2"/>


   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>

      #Send Data on SRB1 from ueId=1 CellId=1 to ueId=2 CellId=1 
      <tapa.dsrb1ue1T2/>
      <tapa.delay delay="2"/>

       #Send Data on SRB1 from ueId=2 CellId=1 to ueId=1 CellId=1 
      <tapa.dsrb1ue2T1/>
      <tapa.delay delay="2"/>
 
     #Cfg DRB2 
       <tapa.drb2cfg/>
      <tapa.delay delay="2"/>
 
 <tapa.repeat.start repeatCount="80"/>
     #Send data on DRB2 
      <tapa.ddrb2ue1T2 pdcpSn="0"  vrfPdcp0="FALSE" />
<tapa.repeat.end/>

     #Delete RCL and PDCP entity
     <tapa.delue1N2/>
      <tapa.delay delay="2"/>

   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.12
#
#       Desc:    Verify end-to-end scenario for SRB1 and SRB2 with Secutiy not configured.
#
#       Notes:   TC_REEST_GRP3_1
#                Priority 2
#                Positive Testcase
#                SYNC and ASYNC
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.12"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="36.323 v:8.5.0" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "Verify end-to-end scenario for SRBs without secCfgReq enabled ."
      </tapa.desc>

      <tapa.longdesc>
         "1. Configure SRB1, SRB2 for UE 1,2 .
          2. Security is not configured.
          3. Send SRB1 data between UE1 and UE2.
          4. Send SRB2 data between UE1 and UE2.
          4. Verify that neither integration nor ciphering takes place.
          5. Shutdown layer.
          "
      </tapa.longdesc>
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>
      <tapa.ifdef/>
      <tapa.ifndef/>
      <tapa.mode mode="single"/>
   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

      #Configure the SRB1 at RLC and PDCP Layer 
      <tapa.srb1cfg.nosecact discardTmr0="1000" />
      <tapa.srb2cfg discardTmr0="1000" />

   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>

      #Send Data on SRB1 from UE1 to UE2
      <tapa.dsrb1ue1T2 vrfNoSec="TRUE"/>

      #Send Data on SRB1 from UE2 to UE1
      <tapa.dsrb1ue2T1 vrfNoSec="TRUE"/>

      #Send Data on SRB1 from UE1 to UE2
      <tapa.dsrb2ue1T2 vrfNoSec="TRUE"/>

      #Send Data on SRB1 from UE2 to UE1
      <tapa.dsrb2ue2T1 vrfNoSec="TRUE"/>

      <tapa.delue1N2 />

   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.13
#
#       Desc:    Verify end-to-end scenario for SRB1 and SRB2 with Secutiy not configured.
#
#       Notes:   TC_REEST_GRP3_3
#                Priority 2
#                Positive Testcase
#                SYNC and ASYNC
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.13"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="36.323 v:8.5.0" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "Verify end-to-end scenario for SRBs without secCfgReq enabled ."
      </tapa.desc>

      <tapa.longdesc>
         "1. Configure SRB1, SRB2 for UE 1,2 .
          2. Security is configured.
          3. Send SRB2 data between UE1 and UE2.
          4. Send SRB1 data between UE1 and UE2.
          5. Verify that neither integration nor ciphering takes place.
          6. Shutdown layer.
          "
      </tapa.longdesc>
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>
      <tapa.ifdef/>
      <tapa.ifndef/>
      <tapa.mode mode="single"/>
   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

      #Configure the SRB1 at RLC and PDCP Layer 
      <tapa.srb1cfg discardTmr0="0"/>
      <tapa.srb2cfg discardTmr0="0"/>

   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>

      #Send Data on SRB1 from UE1 to UE2
      <tapa.dsrb2ue1T2 vrfNoCiph="TRUE"/>

      #Send Data on SRB1 from UE2 to UE1
      <tapa.dsrb2ue2T1 vrfNoCiph="TRUE"/>

      #Send Data on SRB1 from UE1 to UE2
      <tapa.dsrb1ue1T2 />

      #Send Data on SRB1 from UE2 to UE1
      <tapa.dsrb1ue2T1 />

      <tapa.delue1N2 />
   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>


#
#
#       Test:    1.14
#
#       Desc:    Verify end-to-end scenario for SRB1 and SRB2 with selSecAc FALSE
#
#       Notes:   TC_REEST_GRP3_4
#                Priority 2
#                Positive Testcase
#                SYNC and ASYNC
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.14"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="36.323 v:8.5.0" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "Verify end-to-end scenario for SRBs with selSecAc disable ."
      </tapa.desc>

      <tapa.longdesc>
         "1. Configure SRB1, SRB2 for UE 1,2 .
          2. SelSecAc is disabled .
          3. Send SRB1 data between UE1 and UE2.
          4. Send SRB2 data between UE1 and UE2.
          5. Verify that neither integration nor ciphering takes place.
          6. Shutdown layer.
          "
      </tapa.longdesc>
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>
      <tapa.ifdef/>
      <tapa.ifndef/>
      <tapa.mode mode="single"/>
   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

      #Configure the SRB1 at RLC and PDCP Layer 
      <tapa.srb1cfg selSecAct0="FALSE" discardTmr0="0" />
      <tapa.srb2cfg discardTmr0="0"/>

   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>

      #Send Data on SRB1 from UE1 to UE2
      <tapa.dsrb1ue1T2 vrfSec="TRUE"/>

      #Send Data on SRB1 from UE2 to UE1
      <tapa.dsrb1ue2T1 vrfSec="TRUE"/>

      #Send Data on SRB1 from UE1 to UE2
      <tapa.dsrb2ue1T2 vrfSec="TRUE"/>

      #Send Data on SRB1 from UE2 to UE1
      <tapa.dsrb2ue2T1 vrfSec="TRUE"/>

      <tapa.delue1N2/>
   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.15
#
#       Desc:    Verification of compresion with no security cfg.
#                
#       Notes:   
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.15"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="36.323 v:8.5.0" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         " Verification of invalid DRB AM  data PDUs. (TC_DL_UL_GRP3_19)"
      </tapa.desc>

      <tapa.longdesc>
         "1. Configure DRB1(AM)for ueId=1, cellId=1, comp disabled with successful configuration.
          2. Configure DRB1(AM)for ueId=2, cellId=1, comp disabled with successful configuration.
          3. Configure DRB2(UM, DL)for ueId=1, cellId=1, comp enabled  with successful configuration.
          4. Configure DRB2(UM, UL )for ueId=2, cellId=1, comp enabled with successful configuration.
          5. Send Data from DRB1(ueId=1, CellId=1) to DRB1(udId=2, CellId=1).
          6. Send Data from DRB2(ueId=1, CellId=1) to DRB1(udId=2, CellId=1).
          7. Verify the PDCP Header.
          8. Get Rx/Tx Count
          9. Get Count request  
          10. Delete RLC UE entities.
          11. Delete PDCP UE entities."
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef>
      </tapa.ifdef>

      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init0/>

      <tapa.delay delay="2"/>
       #Configure the SRB1 at RLC and PDCP Layer  
      <tapa.srb1cfg.nosecact discardTmr0="0" />
      <tapa.delay delay="2"/>

      #Configure the DRB1 at RLC and PDCP Layer
      <tapa.drb1cfg  discardTmr0="0" />
      <tapa.delay delay="2"/>

      <tapa.drb2cfg hdrCompUsed0="0" discardTmr0="0" cfmReq="0" discReqd="0"/>

   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>
      <tapa.ddrb1ue1T2 bo="302"  totBufSize0="309" />

      <tapa.ddrb2ue1T2.nocmp bo="301" totBufSize0="308" />
      <tapa.ddrb1ue1T2 bo="302"  totBufSize0="309" pdcpSn="1" />
      <tapa.ddrb2ue1T2.nocmp pdcpSn="1" totBufSize0="308"  />

      #Send the reconfig request for drb 1 with cmp enabled
      <tapa.send>
         <tapa.cpj.cfgreq ueId="1" cellId="1" numEnt="2"
            rbId="1:2"
            cfgType="2:2"
            rbType="1:1"
            discReqd="1:0"
            cfmReqd="1:0"
            discardTmr="0:0"

            dir="3:2"
            mode="3:2"
    
            statusRepReqd="0:0"
            pdcpSNSize="12:7"
    
            hdrCompUsed="1:1"
            maxCid="15:15"
            profile="0:0"
    
            bitFlag="0:0"
            isHoPres="0:0"
            dlCount="0:0"
            ulCount="0:0"
            numBits="0:0"
            ulBitMap="0:0"
         />
      </tapa.send>

      #Expect a config confirm for the above reconfig request
      <tapa.expect>
         <tapa.cpj.cfgcfm ueId="1" cellId="1" numEnt="2"
            rbId="1:2"
            rbType="1:1"
            status="1:1"
            reason="0:0"
         />
      </tapa.expect>

      #Send the reconfig request for drb 1 with cmp enabled
      <tapa.send>
         <tapa.cpj.cfgreq ueId="2" cellId="1" numEnt="2"
            rbId="1:2"
            cfgType="2:2"
            rbType="1:1"
            discReqd="1:0"
            cfmReqd="1:0"
            discardTmr="0:0"

            dir="3:1"
            mode="3:2"
    
            statusRepReqd="0:0"
            pdcpSNSize="12:7"
    
            hdrCompUsed="1:1"
            maxCid="15:15"
            profile="0:0"
    
            bitFlag="0:0"
            isHoPres="0:0"
            dlCount="0:0"
            ulCount="0:0"
            numBits="0:0"
            ulBitMap="0:0"
         />
      </tapa.send>

      #Expect a config confirm for the above reconfig request
      <tapa.expect>
         <tapa.cpj.cfgcfm ueId="2" cellId="1" numEnt="2"
            rbId="1:2"
            rbType="1:1"
            status="1:1"
            reason="0:0"
         />
      </tapa.expect>

      <tapa.obd.directive feedback="TRUE" />
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduId="0" sduSize="300" rbId="1" ueId="1" cellId="1" rbType="1" />
      </tapa.send>

      #Expect the first SDU on DRB1 with size 307 at KWU
      <tapa.expect>
         <tapa.dummy.kwu.datreq  numLch="1" ueId="1" cellId="1" 
            lchData="0:0:0:3:1:-1:
                     -1:-1:-1:-1:-1"
            pdcpHdr="1:-1:0:-1" intgProt="FALSE"  ciph ="FALSE" 
            snSize="12" mode = "3" vrfPdcp="TRUE" /> 
      </tapa.expect>

      #Send DRB1 Data to Peer PDCP
      <tapa.send>
         <tapa.dummy.kwu.datind numLch="1" cellId="1"  ueId="2"  rbId="1" rbType="1"
            lchData="3:2:0,0:0,0:0,0:0,0"/>
      </tapa.send>

      #Expect DatInd at PJU for DRB1 Data
      <tapa.expset>
         <tapa.dummy.kwu.datreq cellId="1" ueId="2" rbId="1" />
         <tapa.pju.datind  entity="ENTPX" sduSize="300" 
            cellId="1" ueId="2" rbId="1" rbType="1" status="0" numSdu="1"/>
      </tapa.expset>

      #Send a data Cfm to PDCP
      <tapa.send>
         <tapa.dummy.kwu.datcfm cellId="1"  ueId="1" rbId="1" rbType="1"
            />
      </tapa.send>

      #Expect a Data Confirm at RRC for DRB1
      <tapa.expect>
         <tapa.pju.datcfm entity="ENTPX" sduId="0" status="0" numSdu="1" />
      </tapa.expect> 
      
      #Send PDCP SDU from NH interface for DRB2
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduId="0" sduSize="300" rbId="2"  rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect the first SDU on DRB2 with size 307 at KWU
      # TODO: Need to look the lcID
      <tapa.expect>
         <tapa.dummy.kwu.datreq  numLch="1" ueId="1" cellId="1" 
            lchData="0:0:0:4:1:-1:
                     -1:-1:-1:-1:-1"
            pdcpHdr="-1:-1:0:-1" intgProt="FALSE"  ciph ="FALSE" vrfPdcp="TRUE" snSize="7" mode="2" />
      </tapa.expect>

       #Send DRB2 Data to Peer PDCP
      <tapa.send>
         <tapa.dummy.kwu.datind numLch="1" cellId="1"  ueId="2"  rbId="2" rbType="1"
            lchData="4:1:0:0:0:0"/>
      </tapa.send>

      #Expect DatInd at PJU for DRB2 Data
      <tapa.expect>
         <tapa.pju.datind  entity="ENTPX" sduSize="300" 
            cellId="1" ueId="2" rbId="2"  rbType="1" status="0" numSdu="1"/>
         <tapa.dummy.kwu.datreq cellId="1" ueId="2" rbId="2" />
      </tapa.expect>
      
      
      <tapa.delue1N2 />
   
   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>




#
#
#       Test:    1.16
#
#       Desc:    Verification of feedback packet from decompressor.
#                
#       Notes:   
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.16"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="36.323 v:8.5.0" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         " Verification of feedback packet from decompressor.(TC_DL_UL_GRP3_28)"
      </tapa.desc>

      <tapa.longdesc>
         "1. Configure DRB1(AM)for ueId=1, cellId=1, comp enabled with successful configuration.
          2. Configure DRB1(AM)for ueId=2, cellId=1, comp enabled with successful configuration.
          3. Configure DRB2(UM, DL)for ueId=1, cellId=1, comp enabled  with successful configuration.
          4. Configure DRB2(UM, UL )for ueId=2, cellId=1, comp enabled with successful configuration.
          5. Send Data from DRB1(ueId=1, CellId=1) to DRB1(udId=2, CellId=1).
          6. Send Data from DRB1(ueId=1, CellId=1) and get the sta rsp at RLC after ciphering and compression.
          7. Send Status indication to DRB1 in ueId=1 and cellId=1.
          8. Get the data and verify the header.
          9. Pass this data to DRB1 at ueId=2 and cellId=1.
          10. Save the message and pop a feedback packet and make the decompression fail. 
          11. Expect a status indication and updation of variables,.
          12. Send the next in sequence packet to the decompressor and expect a data indication.
          13. Because of the ROHC feed back, expect a status response.
          14. Get the data through status indication.
          15. Send the data as data indication to ueId=1 and cellId=1."
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef>
         <tapa.flag id="PJ_SEC_ASYNC"/>
         <tapa.flag id="PJ_CMP_ASYNC"/>
      </tapa.ifdef>

      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init0/>

      <tapa.delay delay="2"/>
       #Configure the SRB1 at RLC and PDCP Layer  
      <tapa.srb1cfg discardTmr0="0" cfmReq="0" discReqd="0"/>
      <tapa.delay delay="2"/>

      #Configure the DRB1 at RLC and PDCP Layer
      <tapa.drb1cfg hdrCompUsed0="1" discardTmr0="0" cfmReq="0" discReqd="0"/>
      <tapa.delay delay="2"/>

      <tapa.drb2cfg hdrCompUsed0="1" discardTmr0="0" cfmReq="0" discReqd="0"/>

   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>

      # Send data on DRB1
      <tapa.ddrb1ue1T2   bo="303"  totBufSize0="319"  />

      <tapa.obd.directive saveCpMsg="FALSE" id="12"/>

      # OOS Cipher Cfm with fail from OBD for SRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduId="12" sduSize="30" rbId="1" rbType="1"  
            ueId="1" cellId="1" />
      </tapa.send>

      <tapa.delay delay="10" />

      <tapa.obd.directive saveCpMsg="FALSE" cipFail="FALSE" id="13"/>

      <tapa.send>
          <tapa.pju.datreq entity="ENTPX" sduId="13" sduSize="10"  rbId="1" rbType="1" 
            ueId="1" cellId="1" />
      </tapa.send>

      <tapa.delay delay="10" />

      #TODO : expect data here
      <tapa.expect> 
         #Expect Status Response for the received SDU at RGU
         <tapa.dummy.kwu.datreq cellId="1" ueId="1" rbId="1" />
      </tapa.expect>

      <tapa.obd.directive saveDecpMsg="TRUE" id="21" />

      # Late Reponse from OBD Intergrity Cfm
      <tapa.send>
         <tapa.obd.decipher.out id="21"/>
      </tapa.send>

      <tapa.delay delay="2" />
#TODO
<!--
      <tapa.expset>
         <tapa.pju.datind  entity="ENTPX" sduSize="300" cellId="1" ueId="2" valdType="1"/>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="2" lcId="3"  valdType="1"
            bo="305" estHdrSz="2" staPduPrsnt="0"/>
         <tapa.pju.staind entity="ENTPX" bufPrsnt="0" cellId="1" ueId="2" rbId="1" cause="3" rbType="1" />
      </tapa.expset>

       #Send StaInd  to RLC to accomodate SDU at SRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="31" lcId="3" ueId="2" cellId="1" 
            numLch="1" transId="18" />
      </tapa.send>
      #kw002.201
      #Expect the first SDU on SRB1 with size 307 at RGU
      <tapa.expect>
         <tapa.dummy.rgu.ddatreq  numLch="1" ueId="2" cellId="1" transId="18"
            lchData="0:-1:1:3:2:-1:-1"  
            vrfPdcp="FALSE" pdcpHdr="-1:-1:1:-1" mode="3" snSize="5" />
      </tapa.expect>

      <tapa.obd.directive id="20" decmpFail="FALSE" saveDecmpMsg="FALSE" errComp="FALSE" />

      <tapa.send>
         <tapa.dummy.rgu.ddatind numLch="1" cellId="1"  ueId="1" transId="18"
            lchData="3:1:1:0:0:0" />
      </tapa.send>

      <tapa.expect> 
         #Expect Status Response for the received SDU at RGU
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" 
            bo="2" estHdrSz="0" staPduPrsnt="1"/>
      </tapa.expect>
-->
   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.17
#
#       Desc:    Perform Reestablishment of SRB 1 and DRB 1/2
#
#       Notes:   TC_REEST_GRP4_2
#                Priority 1
#                SYNC and ASYNC
#                Positive Testcase
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.17"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="36.323 v:8.5.0" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "To verify ReEstablishment of SRBs and DRBs "
      </tapa.desc>

      <tapa.longdesc>
        " 1. Configure SRB1 on RLC and PDCP on ueId=1/2, cellId=1.
          2. Configure DRB1 on RLC and PDCP on ueId=1/2, cellId=1.
          3. Configure DRB2 on RLC and PDCP on ueId=1/2, cellId=1.
          4. Send Data on SRB1 from (ueId=1, CellId=1)to (ueId=2, CellId=1) and validate the data.
          5. Send Data on SRB1 from (ueId=2, CellId=1)to (ueId=1, CellId=1) and validate the data.
          6. Send Data on DRB1 from (ueId=1, CellId=1)to (ueId=2, CellId=1) and validate the data.
          7. Send Data on DRB1 from (ueId=2, CellId=1)to (ueId=1, CellId=1) and validate the data.
          8. Send Data on DRB2 from (ueId=1, CellId=1)to (ueId=2, CellId=1) and validate the data.
          9. ReEstablish SRB1 on PDCP and RLC.
          10. Reestablish DRB1 and DRB2 on PDCP and RLC.
          11. Verify successful reestablishment of SRB1.
          12. Verify successful reestablishment of DRB1 and DRB2.
          13. Shutdown the layer."
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

      #Configure the SRB1 at RLC and PDCP Layer 
      <tapa.srb1cfg discardTmr0="0"/>

      #Configure the DRB1 at RLC and PDCP Layer 
      <tapa.drb1cfg discardTmr0="0" statusRepReqd0="0" />

      #Configure the DRB2 at RLC and PDCP Layer 
      <tapa.drb2cfg discardTmr0="0"/>

      #Send Data on SRB1 from ueId=1 CellId=1 to ueId=2 CellId=1 
      <tapa.dsrb1ue1T2/>

       #Send Data on SRB1 from ueId=2 CellId=1 to ueId=1 CellId=1 
      <tapa.dsrb1ue2T1/>

      #Send Data on DRB1 from ueId=1 CellId=1 to ueId=2 CellId=1 
      <tapa.ddrb1ue1T2 bo="302"  totBufSize0="309" />

      #Send Data on DRB2 from ueId=1 CellId=1 to ueId=2 CellId=1 
      <tapa.ddrb2ue1T2/>
   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>

      <tapa.delay delay="5"/>

      #Send a ReEstablish Request to  SRB1
      <tapa.pj.srb1.reEstReq />
      
      <tapa.expset>
         <tapa.cpj.reestcfm ueId="1" cellId="1" status="1" transId="-1"/>
      </tapa.expset> 
       
       #Send a ReEstablishment request on DRBs ans SRB1
       <tapa.send>
         <tapa.cpj.cfgreq  ueId="1" cellId="1" numEnt="2"
         rbId    = "1:2"
         rbType  = "1:1"
         cfgType = "4:4"/>
      </tapa.send> 
      
      <tapa.send>
         <tapa.dummy.kwu.reestcmpind ueId="1" cellId="1" rbId="1:2" rbType="1:1" suId="1" />
      </tapa.send> 

      <tapa.expset>
         <tapa.cpj.cfgcfm ueId="1" cellId="1" numEnt="2" status  = "1:1" reason = "0:0" transId="-1"/> 
      </tapa.expset> 

      <tapa.delue1N2 />

   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.18
#
#       Desc:    Perform Reestablishment of SRB 1/2 and DRB 1/2
#
#       Notes:   TC_REEST_GRP4_4
#                Prioity 1
#                ASYNC
#                Positive Testcase
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.18"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="36.323 v:8.5.0" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "To verify ReEstablishment of SRBs and DRBs "
      </tapa.desc>

      <tapa.longdesc>
         "1. Configure SRB1 ueId=1/2, cellId=1, numEnt=1 .
          2. Configure SRB2 ueId=1/2, cellId=1, numEnt=1 .
          3. Configure DRB1 AM ueId=1/2, cellId=1, numEnt=1 .
          4. Configure DRB2 UM ueId=1/2, cellId=1, numEnt=1 .
          5. Configure DRB3 UM ueId=1/2, cellId=1, numEnt=1 .
          6. Configure DRB4 UM ueId=1/2, cellId=1, numEnt=1 .
          7. Configure DRB5 UM ueId=1/2, cellId=1, numEnt=1 .
          8. Drop DL Data on DRB1 from UE 1 to 2. 
          9. Drop DL Data on DRB2 from UE 2 to 1. 
          10. Send a Reestablish Request to Reestatblish SRB1.
          11. Send a CfgReq to 
                11.1 ReEstablish  SRB2, DRB1 and DRB2 and DRB3 
                11.2 Modify DRB4
                11.3 DEL DRB5
                11.4 Add DRB6 
          12. Shutdown the layer."
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef>
         <tapa.flag id="PJ_SEC_ASYNC"/>
         <tapa.flag id="PJ_CMP_ASYNC"/>
      </tapa.ifdef>

      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

      #Configure the SRB1 at RLC and PDCP Layer 
      <tapa.srb1cfg discardTmr0="1000"/>

      #Configure the SRB2 at RLC and PDCP Layer 
      <tapa.srb2cfg discardTmr0="1000"/>

      #Configure the DRB1 at RLC and PDCP Layer 
      #<tapa.drb1cfg discardTmr0="1000" amUlReOrdTmr0="1000"/>
      <tapa.drb1cfg amUlReOrdTmr0="1500"  discardTmr0="0"/>

      #Configure the DRB2 at RLC and PDCP Layer 
      <tapa.drb2cfg />

      #Configure the DRB3, DRB4, DRB 5 at RLC and PDCP Layer 
      <tapa.pj.drb345.cfg/>

   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>

#initially send some data.
      #Step 1. Send Data on SRB1 from ueId=1 CellId=1 to ueId=2 CellId=1 
      <tapa.dsrb1ue1T2/>

      #Step 2. Send Data on SRB1 from ueId=2 CellId=1 to ueId=1 CellId=1 
      <tapa.dsrb1ue2T1/>

      #Step 3. Send Data on SRB1 from ueId=1 CellId=1 to ueId=2 CellId=1 
      <tapa.dsrb2ue1T2/>

      #Step 4. Send Data on SRB1 from ueId=2 CellId=1 to ueId=1 CellId=1 
      <tapa.dsrb2ue2T1/>

#Send 1-5 sn from ue 1 to 5. Drop 2. DRB1

      #Step 5. Send data for SN 0
      <tapa.ddrb1ue1T2.noCfm bo="302" totBufSize0="309" transId="1"/>
      #Step 6. Expect confirm at other end.
       <tapa.expset>

         <tapa.pju.datind  entity="ENTPX" sduSize="300" cellId="1" ueId="1" rbId="1" />
      </tapa.expset>

      #Step 7. Drop data for SN 1
      <tapa.ddrb1ue1T2.drop bo="302" totBufSize0="309" transId="2"/>

      #Step 8. Send data for SN 2
      <tapa.ddrb1ue1T2.noCfm bo="302" totBufSize0="309" transId="1"/>
      #Step 9. Send data for SN 2

      #Step 10. Send data for SN 3
      <tapa.ddrb1ue1T2.noCfm bo="302" totBufSize0="309" transId="1"/>
      #Step 11. Send data for SN 3


      #Step 12. Send data for SN 4
      <tapa.ddrb1ue1T2.noCfm bo="302" totBufSize0="309" transId="1"/>

#Send 1-5 sn from ue 2 to 5. Drop 2. DRB3

      #Step 14. Send data for SN 0
      <tapa.ddrb1ue2T1.noCfm bo="302" totBufSize0="309" transId="1"/>
      #Step 15. Send data for SN 3
      <tapa.expset>
         <tapa.pju.datind  entity="ENTPX" sduSize="300" cellId="1" ueId="1" rbId="3" valdType="1"/>

      </tapa.expset>
      #Step 16. Drop data for SN 1
      <tapa.ddrb1ue2T1.drop bo="302" totBufSize0="309" transId="2"/>

      #Step 17. Send data for SN 2
      <tapa.ddrb1ue2T1.noCfm bo="302" totBufSize0="309" transId="1"/>

#Pradeep
      #Step 19. Send data for SN 3
#      <tapa.ddrb1ue2T1.noCfm bo="302" totBufSize0="309" transId="1"/>



      #Step 24. ReEstablish  SRB1
      <tapa.pj.srb1.reEstReq />

    #Step 25. ReEstablish  SRB2, DRB1 and DRB2 and DRB3 
    #Modify DRB4
    #DEL DRB5
    #Add DRB6 
      <tapa.send>
         <tapa.cpj.cfgreq  ueId="1" cellId="1" numEnt="7"
            rbId          = "2:1:2:3:4:5:6"
            rbType        = "0:1:1:1:1:1:1"
            cfgType       = "4:4:4:4:2:3:1"
            discReqd      = "1:1:1:1:0:1:1"
            cfmReqd       = "0:0:0:0:1:0:0"
            discardTmr    = "0:0:0:0:100:100:100"
            dir           = "3:3:3:3:3:3:3"
            mode          = "3:3:3:3:3:3:3"
            statusRepReqd = "0:0:0:0:0:0:0"
         />
      </tapa.send>


      #Step 20.  Send a Reestablishment request to RLC
     <tapa.send>
     </tapa.send>


      #Step 21.  Expect General Configuration Confirm
     <tapa.expset>
         <tapa.cpj.reestcfm ueId="1" cellId="1" rbId="1" rbType="1" status="0" transId="-1"/>
         <tapa.cpj.cfgcfm ueId="1" numEnt="1" cellId="1" 
            rbId   = "2:1:2:3:4:5:6"
            rbType = "0:1:1:1:1:1:1"
            status = "1:1:1:1:1:1:1"
            reason = "0:0:0:0:0:0:0"
            />
      </tapa.expset>
      
   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
   </tapa.shutdown>
</tapa.testcase>

#
#
#       Test:    1.19
#
#       Desc:    Perform Reestablishment at DRB1 with DL data present
#
#       Notes:   TC_REEST_GRP4_10
#                Priority 1
#                SYNC and ASYNC
#                Positive Testcase
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.19"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="36.323 v:8.5.0" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "To verify ReEstablishment of DRBs with DL data present "
      </tapa.desc>

      <tapa.longdesc>
        " 1. Configure SRB1 on RLC and PDCP on ueId=1/2, cellId=1.
          5. Configure DRB1 on RLC and PDCP on ueId=1/2, cellId=1.
          7. Send Data on SRB1 from (ueId=1, CellId=1)to (ueId=2, CellId=1) and validate the data.
          8. Send Data on SRB1 from (ueId=2, CellId=1)to (ueId=1, CellId=1) and validate the data.
          11. Send Data on DRB1 from (ueId=1, CellId=1)to (ueId=2, CellId=1) and validate the data.
          12. Send Data on DRB1 from (ueId=2, CellId=1)to (ueId=1, CellId=1) and validate the data.
          13. ReEstablish SRB1 on PDCP and RLC.
          14. Reestablish DRB1 and DRB2 on PDCP and RLC.
          15. Verify successful reestablishment of SRB1.
          16. Verify successful reestablishment of DRB1 and DRB2.
          17. Shutdown the layer."
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>


      #Configure the SRB1 at RLC and PDCP Layer 
      <tapa.srb1cfg discardTmr0="1000" />

      #Configure the DRB1 at RLC and PDCP Layer 
      <tapa.drb1cfg discardTmr0="1000" />

      #Configure the DRB3 at RLC and PDCP Layer 
      <tapa.drb3cfg discardTmr0="1000" />

      #Send Data on SRB1 from ueId=1 CellId=1 to ueId=2 CellId=1 
      <tapa.dsrb1ue1T2/>

       #Send Data on SRB1 from ueId=2 CellId=1 to ueId=1 CellId=1 
      <tapa.dsrb1ue2T1/>

      #Send Data on DRB1 from ueId=1 CellId=1 to ueId=2 CellId=1 
      <tapa.ddrb1ue1T2 bo="302"  totBufSize0="309" />

   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>

      #send data that is dropped at RGU.
      <tapa.pj.dDrbUe1T2.dlErr/>

      #ReEstablish  SRB1
      <tapa.pj.srb1.reEstReq />

     <tapa.expect>
         <tapa.cpj.reestcfm ueId="1" cellId="1" transId="-1" status="1"/>
     </tapa.expect>
   
     #Send a ReEstablishment request on DRBs ans SRB1
      <tapa.send>
         <tapa.cpj.cfgreq  ueId="1" cellId="1" numEnt="2"
         rbId    = "1:3"
         rbType  = "1:1"
         cfgType = "4:4"
         reason  = "0:0"
         />
      </tapa.send>
      
      <tapa.send>
         <tapa.dummy.kwu.reestcmpind ueId="1" cellId="1" rbId="1:3" rbType="1:1" suId="1" />
      </tapa.send>   

     <tapa.expect>
         <tapa.cpj.cfgcfm ueId="1" cellId="1" transId="-1" numEnt="2"
         status="1:1"/>
     </tapa.expect>

     <tapa.delue1N2 />
   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.20
#
#       Desc:    Perform Reestablishment at DRB1 with UL data present
#
#       Notes:   TC_REEST_GRP4_11
#                Priority 1
#                SYNC and ASYNC
#                Positive Testcase
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.20"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="36.323 v:8.5.0" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "To verify ReEstablishment of DRBs with DL data present "
      </tapa.desc>

      <tapa.longdesc>
        " 1. Configure SRB1 on RLC and PDCP on ueId=1/2, cellId=1.
          5. Configure DRB1 on RLC and PDCP on ueId=1/2, cellId=1.
          7. Send Data on SRB1 from (ueId=1, CellId=1)to (ueId=2, CellId=1) and validate the data.
          8. Send Data on SRB1 from (ueId=2, CellId=1)to (ueId=1, CellId=1) and validate the data.
          9. Send Data on DRB1 from (ueId=1, CellId=1)to (ueId=2, CellId=1) and validate the data.
          10. Send Data on DRB1 from (ueId=2, CellId=1)to (ueId=1, CellId=1) and validate the data.
          13. ReEstablish SRB1 on PDCP and RLC.
          14. Reestablish DRB1  on PDCP and RLC.
          15. Verify successful reestablishment of SRB1.
          16. Verify successful reestablishment of DRB1 and DRB2.
          17. Shutdown the layer."
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>


      #Configure the SRB1 at RLC and PDCP Layer 
      <tapa.srb1cfg/>

      #Configure the DRB1 at RLC and PDCP Layer 
      <tapa.drb1cfg discardTmr0="0" amUlReOrdTmr0="1500"/>

      #Configure the DRB3 at RLC and PDCP Layer 
      <tapa.drb3cfg discardTmr0="0" amUlReOrdTmr0="1500"/>


   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>

      #send data that is dropped at RGU.
      <tapa.pj.dDrbUe2T1.dlErr/>

      #ReEstablish  SRB1
      <tapa.pj.srb1.reEstReq />

     <tapa.expect>
         <tapa.cpj.reestcfm ueId="1" cellId="1" transId="-1" status="1"/>
     </tapa.expect>

       #Send a ReEstablishment request on DRBs ans SRB1
      <tapa.send>
         <tapa.cpj.cfgreq  ueId="1" cellId="1" numEnt="2"
         rbId    = "1:3"
         rbType  = "1:1"
         cfgType = "4:4"
         reason  = "0:0"
         />
      </tapa.send>

      <tapa.send>
         <tapa.dummy.kwu.reestcmpind ueId="1" cellId="1" rbId="1:3" rbType="1:1" suId="1" />
      </tapa.send>   

     <tapa.expect>
         <tapa.cpj.cfgcfm ueId="1" cellId="1" transId="-1" numEnt="2"
         status="1:1"/>
     </tapa.expect>

     <tapa.delue1N2 />
   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.21
#
#       Desc:    Verify Post-Reestablishment data transfer
#
#       Notes:   TC_REEST_GRP4_15
#                Priority 1
#                Positive Testcase
#                SYNC and ASYNC
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.21"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="36.323 v:8.5.0" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "To verify Post-ReEstablishment data transfer "
      </tapa.desc>

      <tapa.longdesc>
        " 1. Configure SRB1 on RLC and PDCP on ueId=1/2, cellId=1.
          2. Configure SRB2 on RLC and PDCP on ueId=1/2, cellId=1.
          3. Configure DRB1 on RLC and PDCP on ueId=1/2, cellId=1.
          4. Configure DRB2 on RLC and PDCP on ueId=1/2, cellId=1.
          5. ReEstablish SRB1, SRB2, DRB1, DRB2.
          6. Send DATA on SRB1, SRB2, DRB1, DRB2.
          7. Shutdown the layer."
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

      <tapa.delay delay="2"/>

      #Configure the SRB1 at RLC and PDCP Layer 
      <tapa.srb1cfg discardTmr0="0"/>
      <tapa.delay delay="2"/>

      #Configure the SRB1 at RLC and PDCP Layer 
      <tapa.srb2cfg discardTmr0="0"/>
      <tapa.delay delay="2"/>

      #Configure the DRB1 at RLC and PDCP Layer 
      <tapa.drb1cfg discardTmr0="0"/>
      <tapa.delay delay="2"/>

      #Configure the DRB2 at RLC and PDCP Layer 
      <tapa.drb2cfg/>
      <tapa.delay delay="2"/>

   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>

      #ReEstablish  SRB1
      <tapa.pj.srb1.reEstReq />

     <tapa.expect>
         <tapa.cpj.reestcfm ueId="1" cellId="1" status="1" transId="-1"/>
     </tapa.expect>
#Pradeep - start
       #Send a ReEstablishment request on DRBs ans SRB1
      <tapa.send>
         <tapa.cpj.cfgreq  ueId="1" cellId="1" numEnt="2"
         rbId    = "1:2"
         rbType  = "1:1"
         cfgType = "4:4"/>
      </tapa.send>
      
      <tapa.send>
         <tapa.dummy.kwu.reestcmpind ueId="1" cellId="1" rbId="1:2" rbType="1:1" suId="1" />
      </tapa.send>   

     <tapa.expect>
         <tapa.cpj.cfgcfm ueId="1" cellId="1" numEnt="2" status  = "1:1" reason = "0:0" transId="-1"/>
     </tapa.expect>
     
      <tapa.send>
      <tapa.cpj.datresumereq ueId="1" cellId="1" transId="1" />
      </tapa.send>
     
      <tapa.expect guardTmr="10">
      <tapa.cpj.datresumecfm ueId="1" cellId="1" transId="1" status="1" />
      </tapa.expect>              


      #Send Data on SRB1 from ueId=1 CellId=1 to ueId=2 CellId=1 
      <tapa.dsrb1ue1T2/>


      #Send Data on SRB1 from ueId=1 CellId=1 to ueId=2 CellId=1 
      <tapa.dsrb2ue1T2/>


      #Send Data on DRB2 from ueId=1 CellId=1 to ueId=2 CellId=1 
      <tapa.ddrb2ue1T2/>  

      <tapa.delue1N2 />

   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>


#
#
#       Test:    1.22
#
#       Desc:    Perform Reestablishment of SRBs with no data after re-establishment.
#
#       Notes:   TC_REEST_GRP4_6
#                Prioity 2
#                SYNC and ASYNC
#                Positive Testcase
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.22"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="36.323 v:8.5.0" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "To verify ReEstablishment of SRBs and DRBs "
      </tapa.desc>

      <tapa.longdesc>
         "1. Configure SRB1 ueId=1/2, cellId=1, numEnt=1 .
          2. Configure SRB2 ueId=1/2, cellId=1, numEnt=1 .
          3. Send some data on SRB 1 from UE 1 to UE 2 and get confirmations.
          4. Send some data on SRB 2 from UE 1 to UE 2 and get confirmations.
          5. Send some data on SRB 1 from UE 1 and keep waiting for OBD output.
          6. Send a re-est request for SRB1.
          7. Send a re-est request for SRB2 also.
          8. Expect the data to be discared at the SRBs.
          9. Check for 0 SN when data transfer resumes."
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef>
         <tapa.flag id="PJ_SEC_ASYNC"/>
         <tapa.flag id="PJ_CMP_ASYNC"/>
      </tapa.ifdef>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

      #Configure the SRB1 at RLC and PDCP Layer 
      <tapa.srb1cfg discardTmr0="0" />
      #Configure the SRB2 at RLC and PDCP Layer 
      <tapa.srb2cfg discardTmr0="0" />
   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>

#initially send some data.
      #Step 1. Send Data on SRB1 from ueId=1 CellId=1 to ueId=2 CellId=1 
      <tapa.dsrb1ue1T2/>

      <tapa.dsrb1ue1T2 pdcpSn="1" />

      <tapa.obd.directive saveIntMsg="TRUE" id="1"/>

      # Send data on SRB1 let discard tmr expire before integrity cfm received from
      <tapa.send>
         <tapa.pju.datreq entity="ENTNH" sduId="1" sduSize="300" rbId="1" rbType="0"
             ueId="1" cellId="1" />
      </tapa.send>

      <tapa.obd.directive saveIntMsg="TRUE" id="1"/>

      <tapa.send>
         <tapa.pju.datreq entity="ENTNH" sduId="1" sduSize="300" rbId="1" rbType="0"
            ueId="1" cellId="1"/>
       </tapa.send>

       #kw005.201, added delay so that deletion of Ack-ed PDU is completed before
       #sending the reestablish request
       <tapa.delay delay="5"/>

       #Send a ReEstablishment request on SRB1
      <tapa.send>
         <tapa.cpj.reestreq  ueId="1" cellId="1"
            rbId="1"
            rbType="0"
            intkey="123456789012345678901234567890123"
            ctrlplnkey="123456789012345678901234567890123"
            usrplnkey="123456789012345678901234567890123"
         />
      </tapa.send>
         #Send a ReEstablishment request on SRB1
      <tapa.send>
         #<tapa.ckw.cfgreq  ueId="1" cellId="1" numEnt="1"
         #   rbId   = "1"
         #   rbType = "0"
         #   cfgType= "4"
         #   dir    = "3"
         #/>
      </tapa.send>

      <tapa.expect>
         #<tapa.ckw.cfgcfm ueId="1" cellId="1" transId="-1" numEnt="1"
         #   rbId    = "1"
         #   rbType  = "0"
         #   status = "1"
         #/>
       </tapa.expect>

         #Send a ReEstablishment request on SRB1
      <tapa.send>
         <tapa.cpj.cfgreq  ueId="1" cellId="1" numEnt="1"
            rbId   = "2"
            rbType = "0"
            cfgType= "4"
         />
      </tapa.send>
   
      # Send a Reestablishment request to RLC
      <tapa.send>
        #<tapa.ckw.cfgreq ueId="1" cellId="1" numEnt="1"
        # rbId    = "2"
        # rbType  = "0"
        # cfgType = "4"
        # dir     = "3"
        # />
      </tapa.send>

      <tapa.expset>
         <tapa.cpj.reestcfm ueId="1" cellId="1" status="0" transId="-1"/> 
         <tapa.cpj.cfgcfm ueId="1" cellId="1" transId="-1" numEnt="1"
            rbId    = "2"
            rbType  = "0"
            status = "1"
         />
         #<tapa.ckw.cfgcfm ueId="1" cellId="1" transId="-1" numEnt="1"
         #   rbId    = "2"
         #rbType  = "0"
         #status = "1"
         #/>

      </tapa.expset>


   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
   </tapa.shutdown>
</tapa.testcase>

#
#
#       Test:    1.23
#
#       Desc:    Handover scenario at the source node.
#
#       Notes:   None
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.23"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "Configuring PDCP Layer Control Interface(TC_HO_GRP5_1)"
      </tapa.desc>

      <tapa.longdesc>
         "1. ueId=1, cellId=1 and ueId=2, cellId=1 : Configure SRB1, SRB2, DRB1(AM), DRB2(UM-DL) and DRB4(AM).
          2. Send some data to SRB1
          3. Send some data on DRB1. 
          4. Send some data on DRB4 and also on DRB2
          5. Send a SduStaReq to the ueId = 1.
          6. Expect a DatFwdInd for DRB1 and DRB4(The only AM DRBs present) and not for DRB2.
          7. After this expect a SduStaCfm for the two DRBs.
          8. Delete the two UEs."
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>


      #RLC control interface CKW Congiuration
      <tapa.srb1cfg discardTmr0="0"/>
    
      <tapa.srb2cfg discardTmr0="0"/>
  
      <tapa.drb1cfg discardTmr0="0"/>
  
      <tapa.drb2cfg discardTmr0="0"/>

      <tapa.drb4cfg discardTmr0="0"/>

   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>

      #Send PDCP SDU from NH interface for SRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTNH" sduId="1" sduSize="300" rbId="1" rbType="0" ueId="1" cellId="1"/>
      </tapa.send>
      
      <tapa.expect>
         <tapa.dummy.kwu.datreq  numLch="1" ueId="1" cellId="1" 
            lchData="0:-1:0:1:1:-1:-1"  
            pdcpHdr="-1:-1:0:-1" 
            snSize="5" mode = "3" vrfPdcp="TRUE" /> 
      </tapa.expect>

      <tapa.repeat.start repeatCount="5"/>     
         #Send PDCP SDU from NH interface for DRB1
         <tapa.send>
            <tapa.pju.datreq entity="ENTPX" sduId="1" sduSize="300" rbId="1" rbType="1" ueId="1" cellId="1"/>
         </tapa.send>
         <tapa.expect>
            <tapa.dummy.kwu.datreq  numLch="1" ueId="1" cellId="1" 
            lchData="0:0:0:3:1:-1:-1:-1:-1:-1:-1"  
            pdcpHdr="-1:-1:0:-1" intgProt="FALSE" ciph="FALSE"
            snSize="12" mode = "3" vrfPdcp="TRUE" /> 
      </tapa.expect>
      <tapa.repeat.end/>

      <tapa.repeat.start repeatCount="5"/> 
         #Send PDCP SDU from NH interface for DRB4
         <tapa.send>
            <tapa.pju.datreq entity="ENTPX" sduId="1" sduSize="100" rbId="4" rbType="1" ueId="1" cellId="1"/>
         </tapa.send>
         <tapa.expect>
            <tapa.dummy.kwu.datreq  numLch="1" ueId="1" cellId="1" 
               lchData="0:0:0:3:1:-1:-1:-1:-1:-1:-1"  
               pdcpHdr="-1:-1:0:-1" intgProt="FALSE" ciph="FALSE"
            snSize="12" mode = "3" vrfPdcp="TRUE" /> 
         </tapa.expect>
      <tapa.repeat.end/>

      <tapa.repeat.start repeatCount="2"/>
         #Send PDCP SDU from NH interface for DRB2
         <tapa.send>
            <tapa.pju.datreq entity="ENTPX" sduId="1" sduSize="200" rbId="2" rbType="1" ueId="1" cellId="1"/>
         </tapa.send>
         <tapa.expect>
            <tapa.dummy.kwu.datreq  numLch="1" ueId="1" cellId="1" 
            lchData="0:0:0:4:1:-1:-1:-1:-1:-1:-1"  
            pdcpHdr="-1:-1:0:-1" intgProt="FALSE" ciph="FALSE"
            snSize="7" mode = "2" vrfPdcp="TRUE" /> 
      </tapa.expect>
      <tapa.repeat.end/>


      # Send SDU Status Request for reestablishment during HO 
      <tapa.send>
         <tapa.cpj.sdustareq ueId="1" cellId="1"  />
      </tapa.send>

      <tapa.send>
         <tapa.dummy.kwu.reestcmpind ueId="1" cellId="1" rbId="1:2:4" rbType="1:1:1" suId="1" />
      </tapa.send>   

      <tapa.expect> 
        <tapa.cpj.sdustacfm  ueId="1" cellId="1" status="0" reason="0" transId="10" inst="1"
            numRb="2"
            rbId="1:4"
            dir="3:3"
            ulcount="0:0"
            dlcount="5:5"
            ulnumelm="0:0"
            ulstapdu="0:0"
            />

      </tapa.expect>   
      <tapa.send>
         <tapa.cpj.datforwardreq ueId="1" cellId="1" transId="0" />
      </tapa.send>
      <tapa.expset>

        <tapa.pju.datfwdind ueId="1" cellId="1" rbId="1" rbType="1" dir="2" numSdus="1" 
            sduId="0"
            sn   ="0"
            sduSzLst="300"
            inst="0"
            module="1"
            isLastFwdInd="FALSE"
       />  

        <tapa.pju.datfwdind ueId="1" cellId="1" rbId="1" rbType="1" dir="2" numSdus="1" 
            sduId="1"
            sn   ="1"
            sduSzLst="300"
	         inst="0"
            module="1"
            isLastFwdInd="FALSE"
       />  
        <tapa.pju.datfwdind ueId="1" cellId="1" rbId="1" rbType="1" dir="2" numSdus="1" 
            sduId="2"
            sn   ="2"
            sduSzLst="300"
            inst="0"
            module="1"
            isLastFwdInd="FALSE"
       />  
        <tapa.pju.datfwdind ueId="1" cellId="1" rbId="1" rbType="1" dir="2" numSdus="1" 
            sduId="3"
            sn   ="3"
            sduSzLst="300"
            inst="0"
            module="1"
            isLastFwdInd="FALSE"
       />  
        <tapa.pju.datfwdind ueId="1" cellId="1" rbId="1" rbType="1" dir="2" numSdus="1" 
            sduId="4"
            sn   ="4"
            sduSzLst="300"
            inst="0"
            module="1"
            isLastFwdInd="FALSE"
       />  
        <tapa.pju.datfwdind ueId="1" cellId="1" rbId="1" rbType="1" dir="2" numSdus="0" 
            sduId="0"
            sn   ="0"
            sduSzLst="0"
            inst="0"
            module="1"
            isLastFwdInd="TRUE"
       />  
       <tapa.pju.datfwdind ueId="1" cellId="1" rbId="4" rbType="1" dir="2" numSdus="1" 
            sduId="0"
            sn   ="0"
            sduSzLst="100"
            inst="0"
            module="1"
            isLastFwdInd="FALSE"
       />  
       <tapa.pju.datfwdind ueId="1" cellId="1" rbId="4" rbType="1" dir="2" numSdus="1" 
            sduId="1"
            sn   ="1"
            sduSzLst="100"
            inst="0"
            module="1"
            isLastFwdInd="FALSE"
       />  
       <tapa.pju.datfwdind ueId="1" cellId="1" rbId="4" rbType="1" dir="2" numSdus="1" 
            sduId="2"
            sn   ="2"
            sduSzLst="100"
            inst="0"
            module="1"
            isLastFwdInd="FALSE"
       />  
       <tapa.pju.datfwdind ueId="1" cellId="1" rbId="4" rbType="1" dir="2" numSdus="1" 
            sduId="3"
            sn   ="3"
            sduSzLst="100"
            inst="0"
            module="1"
            isLastFwdInd="FALSE"
       />  
       <tapa.pju.datfwdind ueId="1" cellId="1" rbId="4" rbType="1" dir="2" numSdus="1" 
            sduId="4"
            sn   ="4"
            sduSzLst="100"
            inst="0"
            module="1"
            isLastFwdInd="FALSE"
       />  
       <tapa.pju.datfwdind ueId="1" cellId="1" rbId="4" rbType="1" dir="2" numSdus="0" 
            sduId="0"
            sn   ="0"
            sduSzLst="0"
            inst="0"
            module="1"
            isLastFwdInd="TRUE"
       />  

      </tapa.expset> 

      #Delay added to handle ciphercfm in async case 
      <tapa.delay delay="20"/> 

   <tapa.delue1N2 />

       
   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.24
#
#       Desc:    Handover scenario without datfwdreq at target.
#
#       Notes:   None
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.24"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "Configuring PDCP Layer Control Interface(TC_HO_GRP5_4)"
      </tapa.desc>

      <tapa.longdesc>
         "1. ueId=1, cellId=1 and ueId=2, cellId=1 : Configure SRB1, SRB2, DRB1(AM), DRB2(UM-DL) and DRB4(AM).
          2. Send a re-config request to the DRB1 with  the HO data
          3. Send the data directly without any DatFwdReq.
          4. Expect the configured SN at RGU when data comes.
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

      <tapa.delay delay="2"/>

      #RLC control interface CKW Congiuration
      <tapa.srb1cfg discardTmr0="0"/>
    
      <tapa.srb2cfg discardTmr0="0"/>
  
      <tapa.drb1cfg discardTmr0="0"/>
  
      <tapa.drb2cfg discardTmr0="0"/>

      <tapa.drb4cfg discardTmr0="0"/>

      <tapa.delay delay="2"/>
   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>
      #Send the reconfig request for drb 1 with DL info 
      <tapa.send>
         <tapa.cpj.cfgreq ueId="1" cellId="1" numEnt="1"
            rbId="1"
            cfgType="2"
            rbType="1"
            discReqd="1"
            cfmReqd="1"
    
            hdrCompUsed="0"
            maxCid="0"
            profile="0"
    
            bitFlag="2"
            isHoPres="2"
            dlCount="10"
            ulCount="0"
            numBits="0"
            ulBitMap="0"
         />
      </tapa.send>
      #Expect a config confirm for the above reconfig request
      <tapa.expect>
         <tapa.cpj.cfgcfm ueId="1" cellId="1" numEnt="1"
            rbId="1"
            rbType="1"
            status="1"
            reason="0"
         />
      </tapa.expect>

      #Send PDCP SDU from NH interface for DRB1
      <tapa.repeat.start repeatCount="2" />
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduId="1" sduSize="300" rbId="1" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>
      <tapa.expect>
            <tapa.dummy.kwu.datreq  numLch="1" ueId="1" cellId="1" 
            lchData="0:0:0:3:1:-1:-1:-1:-1:-1:-1"  
            pdcpHdr="-1:-1:0:-1" intgProt="FALSE" ciph="FALSE"
            snSize="12" mode = "3" vrfPdcp="TRUE" /> 
      </tapa.expect>
      <tapa.repeat.end />

      <tapa.delue1N2 />
   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>



#
#
#       Test:    1.25
#
#       Desc:    Handover scenario at target with datFwdReq.
#
#       Notes:   None
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.25"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         " Handover scenario at the target PDCP entity with datFwdReq(TC_HO_GRP5_2)"
      </tapa.desc>

      <tapa.longdesc>
         "1. ueId=1, cellId=1 and ueId=2, cellId=1 : Configure SRB1, SRB2, DRB1(AM), DRB2(UM-DL) and DRB4(AM).
          2. Reconfig DRB1 with DL and UL info. 
          3. Expect a status respone for the UL bitmap.
          4. Send the StaInd and expect data with the PDCP SNs as sent in DatFwdReq
          5. Send new data and expect the configured SN in reconfig to be assigned to this."
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

      <tapa.delay delay="2"/>

      #PDCP control interface CPJ Congiuration
      <tapa.srb1cfg/>
    
      <tapa.srb2cfg/>
  
      <tapa.drb1cfg discardTmr0="0" />
  
      <tapa.drb2cfg/>

      <tapa.drb4cfg/>

      <tapa.delay delay="2"/>
   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>
      <tapa.repeat.start repeatCount="2"/>
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduId="1" sduSize="300" rbId="1" ueId="1" cellId="1" rbType="1" />
      </tapa.send>
         <tapa.expect>
            <tapa.dummy.kwu.datreq  numLch="1" ueId="1" cellId="1" 
            lchData="0:0:0:3:1:-1:-1:-1:-1:-1:-1"  
            pdcpHdr="-1:-1:0:-1" intgProt="FALSE" ciph="FALSE"
            snSize="12" mode = "3" vrfPdcp="TRUE" /> 
      </tapa.expect>
      <tapa.repeat.end/>  

      <tapa.send>
         <tapa.cpj.sdustareq ueId="1" cellId="1" />
      </tapa.send>
      
      <tapa.send>
      <tapa.dummy.kwu.reestcmpind ueId="1" cellId="1" rbId="1:2:4" rbType="1:1:1" suId="1" />
      </tapa.send>

      <tapa.expect>
         <tapa.cpj.sdustacfm ueId="1" cellId="1" status="0" reason="0" transId="10" inst="1" 
            numRb="2"
            rbId="1:4"
            dir="3:3"
            ulcount="0:0"
            dlcount="2:1"
            ulnumelm="0:0"
            ulstapdu="0:0" />
      </tapa.expect>  

      <tapa.send>
         <tapa.cpj.datforwardreq ueId="1" cellId="1" transId="0" />
      </tapa.send>   
      <tapa.expset>
         <tapa.pju.datfwdind ueId="1" cellId="1" rbId="1" rbType="1" dir="2" numSdus="1"
            sduId="0"
            sn="0"
            sduSzLst="300"
            inst="0"
            module="1"
            isLastFwdInd="FALSE" />
         <tapa.pju.datfwdind ueId="1" cellId="1" rbId="1" rbType="1" dir="2" numSdus="1"
            sduId="1"
            sn="1"
            sduSzLst="300"
            inst="0"
            module="1"
            isLastFwdInd="FALSE" />
         <tapa.pju.datfwdind ueId="1" cellId="1" rbId="1" rbType="1" dir="2" numSdus="0"
            sduId="0"
            sn="0"
            sduSzLst="0"
            inst="0"
            module="1"
            isLastFwdInd="TRUE" />
         <tapa.pju.datfwdind ueId="1" cellId="1" rbId="4" rbType="1" dir="2" numSdus="0"
            sduId="0"
            sn="0"
            sduSzLst="0"
            inst="0"
            module="1"
            isLastFwdInd="TRUE" />
      </tapa.expset>    

      #Send the reconfig request for drb 1 with DL info
      <tapa.send>
         <tapa.cpj.cfgreq ueId="1" cellId="1" numEnt="1"
            rbId="1"
            cfgType="2"
            rbType="1"
            discReqd="1"
            cfmReqd="1"
            discardTmr="100"

            dir="3"
            mode="3"
    
            statusRepReqd="0"
            pdcpSNSize="12"
    
            hdrCompUsed="0"
            maxCid="0"
            profile="0"
    
            bitFlag="2"
            isHoPres="2"
            dlCount="2"
            ulCount="0"
            numBits="0"
            ulBitMap="0"
         />
      </tapa.send>


      <tapa.expset>
         <tapa.cpj.cfgcfm ueId="1" cellId="1" numEnt="1"
            rbId="1"
            rbType="1"
            status="1"
            reason="0"
            />
      </tapa.expset>  
     <tapa.send>
         <tapa.pju.datfwdreq ueId="1" cellId="1" rbId="1" rbType="1" dir="2" numSdus="2"
            sduId="0:1"
            sn="0:1"
            sduSzLst="300:300"
            module="1"
            sduData="0:0"
         />
      </tapa.send>
      <tapa.repeat.start repeatCount="2"/>
      <tapa.expect>
         <tapa.dummy.kwu.datreq  numLch="1" ueId="1" cellId="1"
            lchData="0:0:0:3:1:-1:
            -1:-1:-1:-1:-1"
             pdcpHdr="1:-1:0:-1" intgProt="FALSE"  ciph ="FALSE"
             snSize="12" mode = "3" vrfPdcp="TRUE" /> 
      </tapa.expect>   
      <tapa.repeat.end/>          

      <tapa.delue1N2 />

   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>


#
#
#       Test:    1.26
#
#       Desc:    Handover scenario with check for wrap around.
#
#       Notes:   None
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.26"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "Handover scenario with check for wrap around at the target(TC_HO_GRP5_9)"
      </tapa.desc>

      <tapa.longdesc>
         "1. ueId=1, cellId=1 and ueId=2, cellId=1 : Configure SRB1, SRB2, DRB1(AM), DRB2(UM-DL) and DRB4(AM).
          2. Send the re-config request with DL and UL data for DRB1. 
          3. Send the data in a DatFwdReq with SNs 4094, 4095, 0,1,2 and 3.
          4. Expect the Data at RGU with these SNs in sequence.
          5. Send new DatReq from upper interface and check if the new SN is applied.
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

      <tapa.delay delay="2"/>

      #RLC control interface CKW Congiuration
      <tapa.srb1cfg/>
    
      <tapa.srb2cfg/>
  
      <tapa.drb1cfg discardTmr0="0" />
  
      <tapa.drb2cfg/>

      <tapa.drb4cfg/>

      <tapa.delay delay="2"/>
   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>
      #Send the reconfig request for drb 1 with DL info 
      <tapa.send>
         <tapa.cpj.cfgreq ueId="1" cellId="1" numEnt="1"
            rbId="1"
            cfgType="2"
            rbType="1"
            discReqd="1"
            cfmReqd="1"
            discardTmr="100"

            dir="3"
            mode="3"
    
            statusRepReqd="0"
            pdcpSNSize="12"
    
            hdrCompUsed="0"
            maxCid="0"
            profile="0"
    
            bitFlag="2"
            isHoPres="2"
            dlCount="4094"
            ulCount="0"
            numBits="0"
            ulBitMap="0"
         />
      </tapa.send>
      #Expect a config confirm for the above reconfig request
      <tapa.expect>
         <tapa.cpj.cfgcfm ueId="1" cellId="1" numEnt="1"
            rbId="1"
            rbType="1"
            status="1"
            reason="0"
         />
      </tapa.expect>
      #DatfwdReq for downlink data
      <tapa.send>
         <tapa.pju.datfwdreq ueId="1" cellId="1" rbId="1" rbType="1" dir="2" numSdus="6"
            sduId="4093:4094:4095:4096:4097:4098"
            sn="4094:4095:0:1:2:3"
            sduSzLst="300:300:300:300:300:300"
            module="1"
            sduData="0:0:0:0:0:0"
         />
      </tapa.send>

      <tapa.repeat.start repeatCount="6"/>
      <tapa.expect>
         <tapa.dummy.kwu.datreq  numLch="1" ueId="1" cellId="1"
            lchData="0:0:0:3:1:-1:
            -1:-1:-1:-1:-1"
             pdcpHdr="1:-1:0:-1" intgProt="FALSE"  ciph ="FALSE"
             snSize="12" mode = "3" vrfPdcp="TRUE" />
      </tapa.expect>    
      <tapa.repeat.end />

      <tapa.delue1N2 />

   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>



#
#
#       Test:    1.27
#
#       Desc:    Complete test scenario with Cfg, SecCfg, Data Transfer,ReEst,
#                Data Transfer, HO, ReEst(because of HO failure), Data transfer 
#
#       Notes:   None
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.27"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "Configuring PDCP Layer Control Interface(TC_HO_GRP5_16)"
      </tapa.desc>

      <tapa.longdesc>
         "1. ueId=1, cellId=1 and ueId=2, cellId=1 : Configure SRB1, SRB2, DRB1(AM), DRB2(UM-DL) and DRB4(AM).
          2. Data transfer with confirms on DRB1 and SRBs.
          3. Send a Re-Est Req for SRB1 followed by modify, add and delete config requests.
          4. Do a data transfer for the entities.
          5. Send a SduStaReq to initiate HO procedure.
          6. Expect DatFwdInd for AM DRBs with data.
          7. Send s re-est request for HO failure.
          8. Do a normal data transfer after re-establishment and check if the SN is retained."
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

      #RLC control interface CKW Congiuration
      <tapa.srb1cfg discardTmr0="0"/>
    
      <tapa.srb2cfg discardTmr0="0"/>
  
      <tapa.drb1cfg discardTmr0="0"/>
  
      <tapa.drb2cfg discardTmr0="0"/>

      <tapa.drb4cfg discardTmr0="0"/>

   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>

#SEND SOME DATA
      #Step 1.
      <tapa.dsrb1ue1T2 pdcpSn="0"/>
      #Step 2.
      <tapa.dsrb2ue1T2 pdcpSn="0"/>
      #Step 3.
      <tapa.ddrb1ue1T2 bo="302"  totBufSize0="309" />

      <tapa.delay delay="2"/>
#REESTABLISH 
      #Step 4. Send re-establishment request for SRB1
      <tapa.pj.srb1.reEstReq />  

      <tapa.expect>
         <tapa.cpj.reestcfm ueId="1" cellId="1" rbId="1"
            status="1"
            reason="0"
            transId="-1"
            />
      </tapa.expect>
      #Send a ReEstablishment request on SRB2
      <tapa.send>
         <tapa.cpj.reestreq  ueId="1" cellId="1"
            rbId="2"
            rbType="0"
            intkey="123456789012345678901234567890123"
            ctrlplnkey="123456789012345678901234567890123"
            usrplnkey="123456789012345678901234567890123"
         />
      </tapa.send>

      <tapa.expect>
         <tapa.cpj.reestcfm ueId="1" cellId="1" rbId="2"
            status="1"
            reason="0"
            transId="-1"
            />
      </tapa.expect>

      #Step 5. Send a re-est for SRB2 , DRB1 , modify DRB2 , add DRB 7 and del for DRB4
      <tapa.send>
         <tapa.cpj.cfgreq ueId="1" cellId="1" numEnt="4"
            rbId          = "1:2:4:7"
            rbType        = "1:1:1:1"
            cfgType       = "4:2:3:1"

            discReqd      = "0:0:0:1"
            cfmReqd       = "0:0:0:1"
            discardTmr    = "0:0:0:500"

            dir           = "3:2:3:3"
            mode          = "3:2:3:3"

            statusRepReqd = "0:0:0:1"
            pdcpSNSize    = "12:7:12:12"

            hdrCompUsed   = "0:1:0:1"
            maxCid        = "0:15:0:15"
            profile       = "0:0:0:4"

            bitFlag       = "0:0:0:0"
            isHoPres      = "0:0:0:0"
            dlCount       = "0:0:0:0"
            ulCount       = "0:0:0:0"
            numBits       = "0:0:0:0"
            ulBitMap      = "0:0:0:0"
         />
      </tapa.send>

      <tapa.send>
         <tapa.dummy.kwu.reestcmpind ueId="1" cellId="1" rbId="1" rbType="1" suId="1" />
      </tapa.send>   
      
      <tapa.expect>
         <tapa.cpj.cfgcfm ueId="1" cellId="1" numEnt="3"
            rbId="1:2:4:7"
            rbType="1:1:1:1"
            status="1:1:1:1"
            reason="0:0:0:0"
         />
      </tapa.expect>
      
      <tapa.delay delay="20"/>
      <tapa.send>
         <tapa.cpj.datresumereq ueId="1" cellId="1" transId="1" />
      </tapa.send>
      <tapa.expect guardTmr="1000">
         <tapa.cpj.datresumecfm ueId="1" cellId="1" transId="1" status="1" reason ="0" />
      </tapa.expect> 

      <tapa.ddrb1ue1T2 />

       #Step 8. Send PDCP SDU from NH interface for SRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTNH" sduId="1" sduSize="300" rbId="1" rbType="0" ueId="1" cellId="1"/>
      </tapa.send>

      <tapa.expect>
         <tapa.dummy.kwu.datreq numLch="1" ueId="1" cellId="1" lchData="0:-1:0:1:1:-1:-1"
            pdcpHdr="-1:-1:0:-1" snSize="5" mode="3" vrfPdcp="TRUE" />
      </tapa.expect>                                        


      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduId="1" sduSize="300" rbId="1" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Step 13. Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.kwu.datreq numLch="1" ueId="1" cellId="1" 
            lchData="0:0:0:3:1:-1:-1:-1:-1:-1:-1" 
            pdcpHdr="1:-1:0:-1" intgProt="FALSE" ciph="FALSE"
            snSize="12" mode="3" vrfPdcp="TRUE" />
      </tapa.expect>

       #Step 16. Send PDCP SDU from NY interface for DRB7
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduId="1" sduSize="300" rbId="7" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      <tapa.expset>
         <tapa.dummy.kwu.datreq numLch="1" ueId="1" cellId="1" 
            lchData="0:0:0:3:1:-1:-1:-1:-1:-1:-1" 
            pdcpHdr="1:-1:0:-1" intgProt="FALSE" ciph="FALSE"
            snSize="12" mode="3" vrfPdcp="TRUE" />
      </tapa.expset> 

#START HANDOVER
      #Step 20.  Sending a SduStaReq to initiate Handover
      <tapa.send>
         <tapa.cpj.sdustareq ueId="1" cellId="1" />
      </tapa.send>   

      <tapa.send>
         <tapa.dummy.kwu.reestcmpind ueId="1" cellId="1" rbId="1:2:7" rbType="1:1:1" suId="1" />
      </tapa.send>   

      #Step 22. Expect cfms and datfwd ind.
      <tapa.expect>
         <tapa.cpj.sdustacfm  ueId="1" cellId="1" status="0" reason="0" transId="13" 
            numRb    = "2"
            rbId     = "1:7"
            dir      = "3:3"
            ulcount  = "0:0"
            dlcount  = "3:1"
            ulnumelm = "0:0"
            ulstapdu = "0:0"
            />
      </tapa.expect> 

         <tapa.send>
            <tapa.cpj.datforwardreq ueId="1" cellId="1" transId="0" />
         </tapa.send> 
         <tapa.expset>
         <tapa.pju.datfwdind ueId="1" cellId="1" rbId="1" rbType="1" dir="2" numSdus="1" 
            sduId    = "2"
            sn       = "2"
            sduSzLst = "300"
            inst     = "0"
            module   ="1"
            isLastFwdInd = "FALSE"
         />
         <tapa.pju.datfwdind ueId="1" cellId="1" rbId="1" rbType="1" dir="2" numSdus="0" 
            sduId    = "0"
            sn       = "0"
            sduSzLst = "0"
            inst     = "0"
            module   = "1"
            isLastFwdInd = "TRUE"
         />
         <tapa.pju.datfwdind ueId="1" cellId="1" rbId="7" rbType="1" dir="2" numSdus="1" 
            sduId    = "0"
            sn       = "0"
            sduSzLst = "300"
            inst     = "0"
            module   = "1"
            isLastFwdInd = "FALSE"
            /> 
            <tapa.pju.datfwdind ueId="1" cellId="1" rbId="7" rbType="1" dir="2" numSdus="0" 
            sduId    = "0"
            sn       = "0"
            sduSzLst = "0"
            inst     = "0"
            module   = "1"
            isLastFwdInd = "TRUE"
         />
   </tapa.expset> 

#REESTABLISH BECAUSE OF HANDOVER FAILURE
      #Step 23. Send re-establishment request for SRB1
      <tapa.send>
         <tapa.cpj.reestreq ueId="1" cellId="1" rbId="1"
            intkey="9876543210abcdef9876543210abcdef"
            ctrlplnkey="fedcba9876543210fedcba9876543210"
            usrplnkey="4123456789abcdef4123456789abcdef"
         />
      </tapa.send>   
      
      <tapa.expect>
         <tapa.cpj.reestcfm ueId="1" cellId="1" rbId="1" transId="-1"
            status="1"
            reason="0"
         />
      </tapa.expect>

      #Step 25. Send a re-est request for all the entities
      <tapa.send>
         <tapa.cpj.cfgreq ueId="1" cellId="1" numEnt="3"
            rbId    = "1:2:7"
            rbType  = "1:1:1"
            cfgType = "4:4:4"
	         dir     = "3:3:3"
         />
      </tapa.send>  

      <tapa.send>
         <tapa.dummy.kwu.reestcmpind ueId="1" cellId="1" rbId="1:2:7" rbType="1:1:1" suId="1" />
      </tapa.send> 


      <tapa.expect>
         <tapa.dummy.kwu.datreq numLch="1" ueId="1" cellId="1" 
            lchData="0:0:0:3:1:-1:-1:-1:-1:-1:-1" 
            pdcpHdr="1:-1:0:-1" intgProt="FALSE" ciph="FALSE"
            snSize="12" mode="3" vrfPdcp="TRUE" />
      </tapa.expect>
    
      #Step 29. Expect a Cfg cfm and reestCfm
      <tapa.expect>
	      <tapa.cpj.cfgcfm ueId="1" cellId="1" numEnt="3"
            rbId   = "1:2:7"
            rbType = "1:1:1"
            status = "1:1:1"
            reason = "0:0:0"
	      inst = "1"
         />
      </tapa.expect>

      <tapa.delue1N2 />
   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>


#
#
#       Test:    1.28
#
#       Desc:    Handover scenario with only ULM data in RBS.
#
#       Notes:   None
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.28"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "Handover scenario with only ULM data in RBS(TC_HO_GRP5_5)"
      </tapa.desc>

      <tapa.longdesc>
         "1. ueId=1, cellId=1 and ueId=2, cellId=1 : Configure SRB1, SRB2, DRB1(AM), DRB2(UM-DL) and DRB4(AM).
          2. Send some data on SRB1 SRB2 and DRB1 and get confirmation for the data and delete the data.
             So currently we have no data in the RB control blocks.
          3. Send packets to the ULM by building some PDUs with out of sequence.
          4. Send a sdu status request.
          5. Send a re-establishment to RLC to get the PDUs of PDCP.
          6. Expect a dat forward indication for uplink data.
          7. After that expect a sdu status confirmation.
          8. Then expect a cfg cfm for re-establishment request of RLC."
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

      #RLC control interface CKW Congiuration
      <tapa.srb1cfg discardTmr0="0"/>
    
      <tapa.srb2cfg discardTmr0="0"/>
  
      <tapa.drb1cfg discardTmr0="0"/>
  
      <tapa.drb2cfg discardTmr0="0"/>

      <tapa.drb4cfg discardTmr0="0"/>

   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>
     
      <!--  <tapa.dsrb1ue1T2/>
      <tapa.dsrb2ue1T2/>
      <tapa.ddrb1ue1T2 bo="302" totBufSize0="309" />  
      #Step 6. Send a SDU Status request
      <tapa.send>
         <tapa.cpj.sdustareq ueId="1" cellId="1"  />
      </tapa.send>   
      
      
      <tapa.send>
         <tapa.dummy.kwu.reestcmpind ueId="1" cellId="1" rbId="1:2:4" rbType="1:1:1" suId="1" /> 
      </tapa.send>        -->

      <!--  <tapa.ddrb1oos />  
      <tapa.expset>
         <tapa.cpj.sdustacfm ueId="1" cellId="1" status="0" reason="0" transId="10" inst="1"
            numRb="2"
            rbId="1:4"
            dir="2:2"
            ulcount="4:0"
            dlcount="0:0"
            ulnumelm="0:0"
            ulstapdu="0:0" />
      </tapa.expset>         -->



      <!--
      #Step 8. Expect a data forward indication as we have data due to re-establishment
      <tapa.expset>
         #Expect a data forward indication as we have data due to re-establishment
         <tapa.pju.datfwdind ueId="1" cellId="1" rbId="1" rbType="1" dir="3" numSdus="4" inst="1"
            sduId    = "0:0:0:0"
            sn       = "2:4:5:6"
            sduSzLst = "100:100:100:100"
            />
         #kw005.201 fix after sending datFwdInd when numSdu is zero
         <tapa.pju.datfwdind ueId="1" cellId="1" rbId="1" rbType="1" inst="0"/>

         #Expect a SDU Sta Cfm after processing of all RBs
         <tapa.cpj.sdustacfm ueId="1" cellId="1" status="0" reason="0" transId="10" numRb="1"
            rbId     = "1"
            dir      = "3"
            ulcount  = "0"
            dlcount  = "1"
            ulnumelm = "6"
            ulstapdu = "5c"
            />

      </tapa.expset>
      -->

      <tapa.delue1N2 />
   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.29
#
#       Desc:    Verification of Data transfer after HO-Recfg updates only the ULM.
#
#       Notes:   (TC_HO_GRP5_07)
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.29"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "Verification of Data transfer after HO-Recfg updates only the ULM."
      </tapa.desc>

      <tapa.longdesc>
         "1. ueId=1, cellId=1 and ueId=2, cellId=1 : Configure SRB1, SRB2, DRB1(AM).
          2. Reconfigure DRB for only UL count.
          3. Send and validate data on the uplink.
          4. Send and validate data on the downlink.
          5. Shutdown layer.
          "
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

      #RLC control interface CKW Congiuration
      <tapa.srb1cfg/>
    
      <tapa.srb2cfg/>
  
      <tapa.drb1cfg/>
  
      <tapa.delay delay="2"/>
   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>

      #Step 1. Send the reconfig request for drb 1 with DL info
      <tapa.send>
         <tapa.cpj.cfgreq ueId="1" cellId="1" numEnt="1"
            rbId          = "1"
            cfgType       = "2"
            rbType        = "1"
            discReqd      = "1"
            cfmReqd       = "1"
            discardTmr    = "100"

            dir           = "1"
            mode          = "3"

            statusRepReqd = "0"
            pdcpSNSize    = "12"

            hdrCompUsed   = "0"
            maxCid        = "0"
            profile       = "0"

            bitFlag       = "1"
            isHoPres      = "1"
            dlCount       = "0"
            ulCount       = "4093"
            numBits       = "8"
            ulBitMap      = "0"
         />
      </tapa.send>

       #Step 2. Expect a status response and config cfm
      <tapa.expset>
         <tapa.dummy.kwu.datreq numLch="1" ueId="1" cellId="1"
            lchData="0:0:0:3:1:-1:-1:-1:-1:-1:-1:-1"
            pdcpHdr="1:-1:0:-1" intgProt="FALSE" ciph="FALSE"
            snSize="12" mode="3" vrfPdcp="TRUE" /> 
        
         <tapa.cpj.cfgcfm ueId="1" cellId="1" numEnt="1"
            rbId   = "1"
            rbType = "1"
            status = "1"
            reason = "0"
         />
      </tapa.expset>

      #Step 5. DatFwdReq for uplink data
      <tapa.send>
         <tapa.pju.datfwdreq ueId="1" cellId="1" rbId="1" rbType="1" dir="1" numSdus="6" inst="1"
            sduId    = "0:0:0:0:0:0"
            sn       = "4093:4094:4095:1:2:4"
            sduSzLst = "300:300:300:300:300:300"
            module   = "2"
            sduData  = "0:0:0:0:0:0"
         />
   </tapa.send>

   <tapa.delue1N2 />

   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>


#
#
#       Test:    1.30
#
#       Desc:    Verification of duplicate data
#
#       Notes:   TC_HO_GRP5_08
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.30"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "Verification of ULM processing  duplicated data."
      </tapa.desc>

      <tapa.longdesc>
         "1. ueId=1, cellId=1 and ueId=2, cellId=1 : Configure SRB1, SRB2, DRB1(AM), DRB2(UM-DL) and DRB4(AM).
          2. Do HO re-cfg with ULM data.
          3. Receive the status response for ulm bitmap.
          4. Send some data via dat fwd ind.
          5. Send all data in response to ULM bitmap from fms.
          6. Discard the duplicate data. 
          7. Shutdown the layer.
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

      #RLC control interface CKW Congiuration
      <tapa.srb1cfg/>
      <tapa.srb2cfg/>
      <tapa.drb1cfg/>
      <tapa.delay delay="2"/>
   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>
      <!--
#RECONFIGURE FOR HO AND EXPECT STATUS RESPONSE
      #Step 1. Send the reconfig request for drb 1 with DL info
      <tapa.send>
         <tapa.cpj.cfgreq ueId="2" cellId="1" numEnt="1"
            rbId          = "1"
            cfgType       = "2"
            rbType        = "1"
            discReqd      = "1"
            cfmReqd       = "1"
            discardTmr    = "100"

            dir           = "3"
            mode          = "3"

            statusRepReqd = "0"
            pdcpSNSize    = "12"

            hdrCompUsed   = "0"
            maxCid        = "0"
            profile       = "0"

            bitFlag       = "1"
            isHoPres      = "1"
            dlCount       = "4"
            ulCount       = "10"
            numBits       = "8"
            ulBitMap      = "55"
         />
      </tapa.send>

      #Step 2. Expect a status response for the UL bitmap and cfg cfm
      <tapa.expset>
         <tapa.dummy.kwu.datreq numLch="1" ueId="2" cellId="1"
            lchData="0:0:0:3:1:-1:-1:-1:-1:-1:-1:-1"
            pdcpHdr="1:-1:0:-1" intgProt="FALSE" ciph="FALSE"
            snSize="12" mode="3" vrfPdcp="TRUE" />
         <tapa.cpj.cfgcfm ueId="2" cellId="1" numEnt="1"
            rbId="1"
            rbType="1"
            status="1"
            reason="0"
         />
      </tapa.expset>

#SEND DATAFWDREQ For sn 12, 14, 16, 18

      #Step 3. DatFwdReq for uplink data
      <tapa.send>
         <tapa.pju.datfwdreq ueId="2" cellId="1" rbId="1" rbType="1" dir="1" numSdus="4"
            sduId    = "0:0:0:0"
            sn       = "12:12:16:18"
            sduSzLst = "300:300:300:300"
            sduData  = "0:0:0:0"
         />
   </tapa.send>  -->

      <tapa.delue1N2 />
   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>

#kw005.201 added test case for R9 upgrade
#
#
#       Test:    1.31
#
#       Desc:    PDCP SN Wrap around Check 
#
#       Notes:   
#              
#       Module:  Internal TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.31" altid="4.27"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="36.323 v:9.0.0" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "Verify that PDCP Sequence number wraps around after 4095"
      </tapa.desc>

      <tapa.longdesc>
         "1. Configure DRB1(AM)for ueId=1, cellId=1, comp disabled with successful configuration.
          2. Send Data from DRB1(ueId=1, CellId=1) 4095 times.
          3. Send Data from DRB1 with PDCP SN=0.
          4. Delete RLC UE entities.
          5. Delete PDCP UE entities."
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

      #Configure the SRB1 at RLC and PDCP Layer 
      <tapa.srb1cfg discardTmr0="1000" />  

   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>

     #Cfg DRB1 and DRB2 
     <tapa.drb1cfg discardTmr0="1000" />
     
     #kw006.201 changes for ccpu00111716
     <tapa.repeat.start repeatCount="4096"/>
     #Send data on DRB1 
     <tapa.ddrb1ue1  bo="302" totBufSize0="309" />
     <tapa.repeat.end/>    

     #Send data on DRB1 
     <tapa.ddrb1ue1  bo="302" totBufSize0="309" />
     #kw006.201 changes for ccpu00111716
     <tapa.delay delay="5"/>

     #Delete RLC and PDCP entity
     <tapa.delue1N2/>

   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.32
#
#       Desc:   Validation of measurement request in PDCP layer
#
#       Notes:   None
#              
#       Module:  PDCP
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.32" altid="7.1"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="l2m"/>

      <tapa.desc>
	   "Configure PDCP layer and send L2 Measurement request from
	    LM to PDCP layer. This test case is to test the validation of
	    each parameter in the L2 measurement request and send the appropriate
	    confirm with status and reason"
      </tapa.desc>

      <tapa.longdesc>
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>
       <tapa.ifdef>
         <tapa.flag id="LTE_L2_MEAS"/>
       </tapa.ifdef>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

      <tapa.delay delay="2"/>
   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>
     
      #Send Measurement request from LM to PDCP with measType is 0
      <tapa.send>
	      <tapa.lpj.l2measreq measType="0" />
      </tapa.send>
      
      #Expect measurement confirm with invalid measType
      <tapa.expect>
	      <tapa.lpj.l2meascfm numCfm="1"  status="LCM_PRIM_NOK" measType="0"
            reason="LPJ_CAUSE_INVALID_MEASTYPE" measData="0:0"/>
      </tapa.expect>
      
      #Send Measurement request from LM to PDCP with invalid measType
      <tapa.send>
	      <tapa.lpj.l2measreq measType="30" />
      </tapa.send>
      
      #Expect measurement confirm with invalid measType
      <tapa.expect>
	      <tapa.lpj.l2meascfm numCfm="1" status="LCM_PRIM_NOK" measType="30"
	      reason="LPJ_CAUSE_INVALID_MEASTYPE" measData="0:0"/>
      </tapa.expect>
     
      #Send L2 Measurement request with qci as 1 and 2
      <tapa.send>
	     <tapa.lpj.l2measreq measType="1" measPeriod="10" numQci="2" qci="1:2"/>
      </tapa.send>
      
      #Expect L2 Measurement confirm with status as invalid and reason as invalid qci
      <tapa.expect>
         <tapa.lpj.l2meascfm numCfm="2" status="LCM_PRIM_NOK"  measType="1"
            reason="LPJ_CAUSE_INVALID_QCI" measData="1:0;2:0"/>
      </tapa.expect>
      
      <!--    #Send UE configuration in AM  with qci 0 to 9
      #Configure the corresponding RLC entities
      <tapa.send>
         <tapa.ckw.cfgreq  ueId="1" cellId="1" numEnt="10"
            cfgType="1:1:1:1:1:1:1:1:1:1"
            rbId="1:2:3:4:5:6:7:8:9:10"
            rbType="1:1:1:1:1:1:1:1:1:1"
            entMode="3:3:3:3:3:3:3:3:3:3"
            dir="3:3:3:3:3:3:3:3:3:3"
            logChId0Id="3:4:5:6:7:8:9:10:11:12"
            logChId0Type="4:4:4:4:4:4:4:4:4:4"
            logChId1Id="3:3:3:3:3:3:3:3:3:3"
            logChId1Type="4"
            umDlSnLen="0"
            umUlSnLen="0"
            umUlReOrdTmr="0"
            amDlPollRetxTmr="200:200:200:200:200:200:200:200:200:200"
            amDlPollPdu="1:1:1:1:1:1:1:1:1:1"
            amDlPollByte="25000:25000:25000:25000:25000:25000:25000:25000:25000:25000"
            amDlMaxRetx="1:1:1:1:1:1:1:1:1:1"
            amUlStaProhTmr="0:0:0:0:0:0:0:0:0:0"
            amUlReOrdTmr="2:2:2:2:2:2:2:2:2:2"
            qci="0:1:2:3:4:5:6:7:8:9"
         />
      </tapa.send>

      # Expect General Configuration Confirm
      <tapa.expect>
         <tapa.ckw.cfgcfm ueId="1" cellId="1" numEnt="10" 
            rbId="1:2:3:4:5:6:7:8:9:10" 
            rbType="1:1:1:1:1:1:1:1:1:1"
            status="1:1:1:1:1:1:1:1:1:1" reason="0:0:0:0:0:0:0:0:0:0:0"/>
      </tapa.expect> -->
 
      #Send PDCP Config for  DRB1
      <tapa.send>
         <tapa.cpj.cfgreq ueId="1" cellId="1" numEnt="10"
            rbId="1:2:3:4:5:6:7:8:9:10"
            cfgType="1:1:1:1:1:1:1:1:1:1"
            rbType="1:1:1:1:1:1:1:1:1:1"
            discReqd="1:1:1:1:1:1:1:1:1:1"
            cfmReqd="1:1:1:1:1:1:1:1:1:1"
            discardTmr="1000:1000:1000:1000:1000:1000:1000:1000:1000:1000"

            dir="3:3:3:3:3:3:3:3:3:3"
            mode="3:3:3:3:3:3:3:3:3:3"
    
            statusRepReqd="0:0:0:0:0:0:0:0:0:0"
            pdcpSNSize="12:12:12:12:12:12:12:12:12:12"
    
            hdrCompUsed="0:0:0:0:0:0:0:0:0:0"
            maxCid="0:0:0:0:0:0:0:0:0:0"
            profile="0:0:0:0:0:0:0:0:0:0"
    
            bitFlag="0:0:0:0:0:0:0:0:0:0"
            isHoPres="0:0:0:0:0:0:0:0:0:0"
            dlCount="0:0:0:0:0:0:0:0:0:0"
            ulCount="0:0:0:0:0:0:0:0:0:0"
            numBits="0:0:0:0:0:0:0:0:0:0"
            ulBitMap="0:0:0:0:0:0:0:0:0:0"
            qci="0:1:2:3:4:5:6:7:8:9"
         />
      </tapa.send>
      #Expect a config confirm for all of the above configured entities
      <tapa.expect>
         <tapa.cpj.cfgcfm ueId="1" cellId="1" numEnt="10"
            rbId="1:2:3:4:5:6:7:8:9:10"
            rbType="1:1:1:1:1:1:1:1:1:1"
            status="1:1:1:1:1:1:1:1:1:1"
            reason="0:0:0:0:0:0:0:0:0:0"
         />
     </tapa.expect>
    
      #Send L2 Measurement request with measPeriod as 0
      <tapa.send>
	      <tapa.lpj.l2measreq measType="1" measPeriod="0"/>
      </tapa.send>
      
      #Expect L2 Measurement confirm with status as invalid and reason as invlaid qci
      <tapa.expect>
         <tapa.lpj.l2meascfm numCfm="1" measData="0:0" measType="1"
            status="LCM_PRIM_NOK" reason="LPJ_CAUSE_ZERO_MEASPERIOD"/>
      </tapa.expect>

      # Send measReq 10 times for diff qci with same measType
      <tapa.send>
	      <tapa.lpj.l2measreq measType="1" measPeriod="10" numQci="1" qci="0"/>
      </tapa.send>
      <tapa.send>
	      <tapa.lpj.l2measreq measType="1" measPeriod="10" numQci="1" qci="1"/>
      </tapa.send>
      <tapa.send>
       	<tapa.lpj.l2measreq measType="1" measPeriod="10" numQci="1" qci="2"/>
      </tapa.send>
      <tapa.send>
      	<tapa.lpj.l2measreq measType="1" measPeriod="10" numQci="1" qci="3"/>
      </tapa.send>
      <tapa.send>
       	<tapa.lpj.l2measreq measType="1" measPeriod="10" numQci="1" qci="4"/>
      </tapa.send>
      <tapa.send>
      	<tapa.lpj.l2measreq measType="1" measPeriod="10" numQci="1" qci="5"/>
      </tapa.send>
      <tapa.send>
      	<tapa.lpj.l2measreq measType="1" measPeriod="10" numQci="1" qci="6"/>
      </tapa.send>
      <tapa.send>
      	<tapa.lpj.l2measreq measType="1" measPeriod="10" numQci="1" qci="7"/>
      </tapa.send>
      <tapa.send>
      	<tapa.lpj.l2measreq measType="1" measPeriod="10" numQci="1" qci="8"/>
      </tapa.send>
      <tapa.send>
      	<tapa.lpj.l2measreq measType="1" measPeriod="10" numQci="1" qci="9"/>
      </tapa.send>
      
      #Send measReq with measType as 1 for qci 0
      <tapa.send>
	     <tapa.lpj.l2measreq measType="2" measPeriod="10" numQci="1" qci="0"/>
      </tapa.send>
      
      #Expect L2 Measurement confirm with status as invalid and reason as invlaid qci
      <tapa.expset>
         <tapa.lpj.l2meascfm numCfm="1" measData="0:0" measType="2"
            status="LCM_PRIM_NOK" reason="LPJ_CAUSE_EXCEED_MEASREQ"/>
         <tapa.lpj.l2meascfm numCfm="1" measData="0:0" measType="1"
            status="LCM_PRIM_OK" reason="LCM_REASON_NOT_APPL"/>
         <tapa.lpj.l2meascfm numCfm="1" measData="1:0" measType="1"
            status="LCM_PRIM_OK" reason="LCM_REASON_NOT_APPL"/>
         <tapa.lpj.l2meascfm numCfm="1" measData="2:0" measType="1"
            status="LCM_PRIM_OK" reason="LCM_REASON_NOT_APPL"/>
         <tapa.lpj.l2meascfm numCfm="1" measData="3:0" measType="1"
            status="LCM_PRIM_OK" reason="LCM_REASON_NOT_APPL"/>
         <tapa.lpj.l2meascfm numCfm="1" measData="4:0" measType="1"
            status="LCM_PRIM_OK" reason="LCM_REASON_NOT_APPL"/>
         <tapa.lpj.l2meascfm numCfm="1" measData="5:0" measType="1"
            status="LCM_PRIM_OK" reason="LCM_REASON_NOT_APPL"/>
         <tapa.lpj.l2meascfm numCfm="1" measData="6:0" measType="1"
            status="LCM_PRIM_OK" reason="LCM_REASON_NOT_APPL"/>
         <tapa.lpj.l2meascfm numCfm="1" measData="7:0" measType="1"
            status="LCM_PRIM_OK" reason="LCM_REASON_NOT_APPL"/>
         <tapa.lpj.l2meascfm numCfm="1" measData="8:0" measType="1"
            status="LCM_PRIM_OK" reason="LCM_REASON_NOT_APPL"/>
         <tapa.lpj.l2meascfm numCfm="1" measData="9:0" measType="1"
            status="LCM_PRIM_OK" reason="LCM_REASON_NOT_APPL"/>
      </tapa.expset>
    
   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.33
#
#       Desc:    To test the packet delay in L2 Measurement
#
#       Notes:   None
#              
#       Module:  PDCP
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.33" altid="7.2"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="l2m"/>

      <tapa.desc>
         "To test the packet delay calculation in L2 Measurement with 1 UE and 1 RB"
      </tapa.desc>

      <tapa.longdesc>
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef>
	     <tapa.flag id="LTE_L2_MEAS"/>
      </tapa.ifdef>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>
     
      #Configure 1UE with 1 RB, one in AM with qci 1
      (rbId 3->lcId 3->qci 1)
      
      <!--    #Configure the corresponding RLC entities
      <tapa.send>
         <tapa.ckw.cfgreq  ueId="1" cellId="1" numEnt="1"
            cfgType="1"
            rbId="3"
            rbType="1"
            entMode="3"
            dir="3"
            logChId0Id="3"
            logChId0Type="4"
            logChId1Id="3"
            logChId1Type="4"
            amDlPollRetxTmr="200"
            amDlPollPdu="1"
            amDlPollByte="25000"
            amDlMaxRetx="1"
            amUlStaProhTmr="0"
            amUlReOrdTmr="2"
            qci="1"
         />
      </tapa.send>

      # Expect General Configuration Confirm
      <tapa.expect>
         <tapa.ckw.cfgcfm ueId="1" cellId="1" numEnt="1" 
            rbId="3" 
            rbType="1"
            status="1" reason="0"/>
      </tapa.expect>  -->
      
       #Send PDCP Config for  DRB1
         
      <tapa.send>
         <tapa.cpj.cfgreq ueId="1" cellId="1" numEnt="1"
            rbId="3"
            cfgType="1"
            rbType="1"
            discReqd="1"
            cfmReqd="1"
            discardTmr="1000"

            dir="3"
            mode="3"
    
            statusRepReqd="0"
            pdcpSNSize="12"
    
            hdrCompUsed="0"
            maxCid="0"
            profile="0"
    
            bitFlag="0"
            isHoPres="0"
            dlCount="0"
            ulCount="0"
            numBits="0"
            ulBitMap="0"
            qci="1"
         />
      </tapa.send>
      #Expect a config confirm for all of the above configured entities
      <tapa.expect>
         <tapa.cpj.cfgcfm ueId="1" cellId="1" numEnt="1"
            rbId="3"
            rbType="1"
            status="1"
            reason="0"
         />
      </tapa.expect>

      <!--   #Send L2 Measurement request from LM to RLC with measType as DL packet delay
      <tapa.send>
         <tapa.lkw.l2measreq measType="2" measPeriod="10" numQci="1" qci="1"/>     
      </tapa.send> -->
      
      #Send L2 Measurement request from LM to PDCP with measType as DL packet delay
      <tapa.send>
         <tapa.lpj.l2measreq measType="1" measPeriod="1" numQci="1" qci="1"/>     
      </tapa.send>
      
      <!--   ############Send data on DRB1###################
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the first SDU on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the first SDU on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the first SDU on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the first SDU on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the first SDU on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
    </tapa.expect> 

      ###################Send Harq indication on LcId 3 for all the data request#############
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="1" cellId="1" 
          numTbs="1" status="1" snMapInfo="1:2:3,0;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="1" cellId="1" 
          numTbs="1" status="1" snMapInfo="2:1:3,1;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="1" cellId="1" 
          numTbs="1" status="1" snMapInfo="3:1:3,2;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="1" cellId="1" 
          numTbs="1" status="1" snMapInfo="4:1:3,3;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="1" cellId="1" 
          numTbs="1" status="1" snMapInfo="5:1:3,4;"/>
    </tapa.send>

     #Expect L2 Measurement confirm for DL packet delay
     <tapa.expset>
         <tapa.lkw.l2meascfm status="LCM_PRIM_OK" reason="LCM_REASON_NOT_APPL"
		     numCfm="1" measData="1:0;" measType="2"/>
         <tapa.lpj.l2meascfm status="LCM_PRIM_OK" reason="LCM_REASON_NOT_APPL"
		     numCfm="1" measData="1:1;" measType="1"/>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expset> -->
   
   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.34
#
#       Desc:    To test the packet delay in L2 Measurement with multiple UE 
#                and 2 RB each
#
#       Notes:   None
#              
#       Module:  PDCP
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.34" altid="7.5"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="l2m"/>

      <tapa.desc>
	     "To test the packet delay calculation in L2 Measurement with
	      2 UE with 2 RBs, here negative harq ack for rb 3 and 4 for few
	      data request."
      </tapa.desc>

      <tapa.longdesc>
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef>
	 <tapa.flag id="LTE_L2_MEAS"/>
      </tapa.ifdef>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>
     
      #Configure 2 UE with 2 RB, two in AM and another in UM with qci 1 and 2
      (UE1->rbId 3->lcId 3->qci->1, UE1->rbId 4->lcId 4->qci->2, 
       UE2->rbId 3->lcId 3->qci->1, UE2->rbId 4->lcId 4->Qci->2
      )
      
      <!--      #Configure the corresponding RLC entities
      <tapa.send>
         <tapa.ckw.cfgreq  ueId="1" cellId="1" numEnt="2"
            cfgType="1:1"
            rbId="3:4"
            rbType="1:1"
            entMode="3:2"
            dir="3:2"
            logChId0Id="3:4"
            logChId0Type="4:4"
            logChId1Id="3"
            logChId1Type="4"
            umDlSnLen="5"
            umUlSnLen="5"
            umUlReOrdTmr="0"
            amDlPollRetxTmr="200"
            amDlPollPdu="1"
            amDlPollByte="25000"
            amDlMaxRetx="1"
            amUlStaProhTmr="0"
            amUlReOrdTmr="2"
            qci="1:2"
         />
      </tapa.send>

      # Expect General Configuration Confirm
      <tapa.expect>
         <tapa.ckw.cfgcfm ueId="1" cellId="1" numEnt="2" 
            rbId="3:4" 
            rbType="1:1"
            status="1:1" reason="0:0"/>
      </tapa.expect>  -->
      
       #Send PDCP Config for  DRB1
         
      <tapa.send>
         <tapa.cpj.cfgreq ueId="1" cellId="1" numEnt="2"
            rbId="3:4"
            cfgType="1:1"
            rbType="1:1"
            discReqd="1:1"
            cfmReqd="1:1"
            discardTmr="1000:1000"

            dir="3:2"
            mode="3:2"
    
            statusRepReqd="0"
            pdcpSNSize="7"
    
            hdrCompUsed="0:0"
            maxCid="0:0"
            profile="0:0"
    
            bitFlag="0:0"
            isHoPres="0:0"
            dlCount="0:0"
            ulCount="0:0"
            numBits="0:0"
            ulBitMap="0:0"
            qci="1:2"
         />
      </tapa.send>
      #Expect a config confirm for all of the above configured entities
      <tapa.expect>
         <tapa.cpj.cfgcfm ueId="1" cellId="1" numEnt="2"
            rbId="3:4"
            rbType="1:1"
            status="1:1"
            reason="0:0"
         />
      </tapa.expect>

      #Configure the corresponding RLC entities
      <!--     <tapa.send>
         <tapa.ckw.cfgreq  ueId="2" cellId="1" numEnt="2"
            cfgType="1:1"
            rbId="3:4"
            rbType="1:1"
            entMode="3:2"
            dir="3:2"
            logChId0Id="3:4"
            logChId0Type="4:4"
            logChId1Id="3"
            logChId1Type="4"
            umDlSnLen="5"
            umUlSnLen="5"
            umUlReOrdTmr="0"
            amDlPollRetxTmr="200"
            amDlPollPdu="1"
            amDlPollByte="25000"
            amDlMaxRetx="1"
            amUlStaProhTmr="0"
            amUlReOrdTmr="2"
            qci="1:2"
         />
      </tapa.send>

      # Expect General Configuration Confirm
      <tapa.expect>
         <tapa.ckw.cfgcfm ueId="2" cellId="1" numEnt="2" 
            rbId="3:4" 
            rbType="1:1"
            status="1:1" reason="0:0"/>
      </tapa.expect>  -->
      
       #Send PDCP Config for  DRB1
         
      <tapa.send>
         <tapa.cpj.cfgreq ueId="2" cellId="1" numEnt="2"
            rbId="3:4"
            cfgType="1:1"
            rbType="1:1"
            discReqd="1:1"
            cfmReqd="1:1"
            discardTmr="1000:1000"

            dir="3:2"
            mode="3:2"
    
            statusRepReqd="0"
            pdcpSNSize="7"
    
            hdrCompUsed="0:0"
            maxCid="0:0"
            profile="0:0"
    
            bitFlag="0:0"
            isHoPres="0:0"
            dlCount="0:0"
            ulCount="0:0"
            numBits="0:0"
            ulBitMap="0:0"
            qci="1:2"
         />
      </tapa.send>
      #Expect a config confirm for all of the above configured entities
      <tapa.expect>
         <tapa.cpj.cfgcfm ueId="2" cellId="1" numEnt="2"
            rbId="3:4"
            rbType="1:1"
            status="1:1"
            reason="0:0"
         />
       </tapa.expect>

      #Send L2 Measurement request from LM to PDCP with measType as DL packet delay
      <tapa.send>
         <tapa.lpj.l2measreq measType="1" measPeriod="1" numQci="2" qci="1:2"/>   
      </tapa.send>
      
      <!--   #Send L2 Measurement request from LM to RLC with measType as DL packet delay
      <tapa.send>
         <tapa.lkw.l2measreq measType="2" measPeriod="10" numQci="2" qci="1:2"/>     
      </tapa.send>  -->

      <!--    ############Send data on DRB1 in UE1###################
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      ############Send data on DRB2 in UE1###################
      #Send PDCP SDU from NH interface for DRB2
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="4" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="4" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB2
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="4" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB2 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>

      #Send PDCP SDU from NH interface for DRB2
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="4" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="4" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB2
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="4" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB2 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB2
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="4" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="4" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB2
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="4" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB2 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB2
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="4" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="4" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB2
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="4" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB2 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB2
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="4" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="4" valdType="1"/>
      </tapa.expect>

      #Send StaInd  to RLC to accomodate SDU at DRB2
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="4" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB2 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB2
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="4" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="4" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB2
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="4" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB2 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>

      #Send PDCP SDU from NH interface for DRB2
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="4" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="4" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB2
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="4" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB2 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB2
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="4" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="4" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB2
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="4" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB2 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB2
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="4" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="4" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB2
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="4" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB2 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB2
      <tapa.send>
          <tapa.pju.datreq entity="ENTPX"  sduSize="300" 
		      rbId="4" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="4" valdType="1"/>
      </tapa.expect>

      #Send StaInd  to RLC to accomodate SDU at DRB2
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="4" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB2 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      ############Send data on DRB1 in UE2###################
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="3" rbType="1" ueId="2" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="2" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="2" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="2" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="2" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="2" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="2" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="2" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="2" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="2" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="2" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="2" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="2" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="2" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="2" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="2" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="3" rbType="1" ueId="2" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="2" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="2" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="2" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="2" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="2" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="2" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="2" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="3" rbType="1" ueId="2" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="2" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="2" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="2" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="3" rbType="1" ueId="2" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="2" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="2" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="2" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="2" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="2" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="2" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="2" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="3" rbType="1" ueId="2" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="2" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="2" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="2" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>

      ############Send data on DRB2 for UE2###################
      #Send PDCP SDU from NH interface for DRB2
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="4" rbType="1" ueId="2" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="2" lcId="4" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB2
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="4" ueId="2" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB2 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="2" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>

      #Send PDCP SDU from NH interface for DRB2
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="4" rbType="1" ueId="2" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="2" lcId="4" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB2
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="4" ueId="2" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB2 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="2" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB2
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="4" rbType="1" ueId="2" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="2" lcId="4" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB2
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="4" ueId="2" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB2 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="2" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB2
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="4" rbType="1" ueId="2" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="2" lcId="4" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB2
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="4" ueId="2" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB2 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="2" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB2
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="4" rbType="1" ueId="2" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="2" lcId="4" valdType="1"/>
      </tapa.expect>

      #Send StaInd  to RLC to accomodate SDU at DRB2
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="4" ueId="2" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB2 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="2" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB2
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="4" rbType="1" ueId="2" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="2" lcId="4" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB2
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="4" ueId="2" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB2 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="2" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>

      #Send PDCP SDU from NH interface for DRB2
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="4" rbType="1" ueId="2" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="2" lcId="4" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB2
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="4" ueId="2" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB2 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="2" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB2
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="4" rbType="1" ueId="2" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="2" lcId="4" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB2
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="4" ueId="2" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB2 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="2" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB2
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="4" rbType="1" ueId="2" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="2" lcId="4" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB2
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="4" ueId="2" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB2 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="2" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB2
      <tapa.send>
          <tapa.pju.datreq entity="ENTPX"  sduSize="300" 
		      rbId="4" rbType="1" ueId="2" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="2" lcId="4" valdType="1"/>
      </tapa.expect>

      #Send StaInd  to RLC to accomodate SDU at DRB2
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="4" ueId="2" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB2 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="2" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
     
      ###################Send Harq indication on LcId 3 for all the data request for UE 1#############
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="1" cellId="1" 
          numTbs="1" status="1" snMapInfo="1:1:3,0;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="1" cellId="1" 
          numTbs="1" status="0" snMapInfo="2:1:3,1;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="1" cellId="1" 
          numTbs="1" status="1" snMapInfo="3:1:3,2;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="1" cellId="1" 
          numTbs="1" status="0" snMapInfo="4:1:3,3;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="1" cellId="1" 
          numTbs="1" status="1" snMapInfo="5:1:3,4;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="1" cellId="1" 
          numTbs="1" status="0" snMapInfo="6:1:3,5;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="1" cellId="1" 
          numTbs="1" status="1" snMapInfo="7:1:3,6;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="1" cellId="1" 
          numTbs="1" status="0" snMapInfo="8:1:3,7;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="1" cellId="1" 
          numTbs="1" status="1" snMapInfo="9:1:3,8;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="1" cellId="1" 
          numTbs="1" status="0" snMapInfo="10:1:3,9;"/>
     </tapa.send>
    
     ###################Send Harq indication on LcId 4 for all the data request for UE 1#############
      #Send Harq ack indication on LcId 4
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="4" ueId="1" cellId="1" 
          numTbs="1" status="1" snMapInfo="11:1:4,0;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 4
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="4" ueId="1" cellId="1" 
          numTbs="1" status="1" snMapInfo="12:1:4,1;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 4
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="4" ueId="1" cellId="1" 
          numTbs="1" status="1" snMapInfo="13:1:4,2;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 4
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="4" ueId="1" cellId="1" 
          numTbs="1" status="1" snMapInfo="14:1:4,3;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 4
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="4" ueId="1" cellId="1" 
          numTbs="1" status="1" snMapInfo="15:1:4,4;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 4
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="4" ueId="1" cellId="1" 
          numTbs="1" status="0" snMapInfo="16:1:4,5;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 4
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="4" ueId="1" cellId="1" 
          numTbs="1" status="0" snMapInfo="17:1:4,6;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 4
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="4" ueId="1" cellId="1" 
          numTbs="1" status="0" snMapInfo="18:1:4,7;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 4
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="4" ueId="1" cellId="1" 
          numTbs="1" status="0" snMapInfo="19:1:4,8;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 4
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="4" ueId="1" cellId="1" 
          numTbs="1" status="0" snMapInfo="20:1:4,9;"/>
     </tapa.send>

      ###################Send Harq indication on LcId 3 for all the data request for UE 2#############
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="2" cellId="1" 
          numTbs="1" status="1" snMapInfo="21:1:3,0;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="2" cellId="1" 
          numTbs="1" status="0" snMapInfo="22:1:3,1;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="2" cellId="1" 
          numTbs="1" status="1" snMapInfo="23:1:3,2;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="2" cellId="1" 
          numTbs="1" status="0" snMapInfo="24:1:3,3;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="2" cellId="1" 
          numTbs="1" status="1" snMapInfo="25:1:3,4;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="2" cellId="1" 
          numTbs="1" status="0" snMapInfo="26:1:3,5;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="2" cellId="1" 
          numTbs="1" status="1" snMapInfo="27:1:3,6;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="2" cellId="1" 
          numTbs="1" status="0" snMapInfo="28:1:3,7;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="2" cellId="1" 
          numTbs="1" status="1" snMapInfo="29:1:3,8;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="2" cellId="1" 
          numTbs="1" status="0" snMapInfo="30:1:3,9;"/>
     </tapa.send>
     
     ###################Send Harq indication on LcId 4 for all the data request for UE 1#############
      #Send Harq ack indication on LcId 4
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="4" ueId="2" cellId="1" 
          numTbs="1" status="1" snMapInfo="31:1:4,0;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 4
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="4" ueId="2" cellId="1" 
          numTbs="1" status="1" snMapInfo="32:1:4,1;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 4
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="4" ueId="2" cellId="1" 
          numTbs="1" status="1" snMapInfo="33:1:4,2;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 4
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="4" ueId="2" cellId="1" 
          numTbs="1" status="1" snMapInfo="34:1:4,3;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 4
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="4" ueId="2" cellId="1" 
          numTbs="1" status="1" snMapInfo="35:1:4,4;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 4
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="4" ueId="2" cellId="1" 
          numTbs="1" status="0" snMapInfo="36:1:4,5;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 4
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="4" ueId="2" cellId="1" 
          numTbs="1" status="0" snMapInfo="37:1:4,6;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 4
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="4" ueId="2" cellId="1" 
          numTbs="1" status="0" snMapInfo="38:1:4,7;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 4
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="4" ueId="2" cellId="1" 
          numTbs="1" status="0" snMapInfo="39:1:4,8;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 4
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="4" ueId="2" cellId="1" 
          numTbs="1" status="0" snMapInfo="40:1:4,9;"/>
    </tapa.send>    -->
     
     #Expect L2 Measurement confirm for DL packet delay
     <tapa.expset>
         <tapa.lpj.l2meascfm status="LCM_PRIM_OK" reason="LCM_REASON_NOT_APPL"
		     numCfm="2" measData="1:1;2:1;" measType="1"/>
        <!--    <tapa.lkw.l2meascfm status="LCM_PRIM_OK" reason="LCM_REASON_NOT_APPL"
           numCfm="2" measData="1:0;2:0;" measType="2"/> -->
     </tapa.expset>
   
   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.35
#
#       Desc:    To test the packet delay in L2 Measurement with  single UE 
#                and 1 RB.
#
#       Notes:   None
#              
#       Module:  PDCP
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.35" altid="7.7"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="l2m"/>

      <tapa.desc>
	     "To test the packet delay calculation in L2 Measurement with
	      1 UE with 1 RB, here L2 measurement request comes after 5
	      data request from Appl."
      </tapa.desc>

      <tapa.longdesc>
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef>
	 <tapa.flag id="LTE_L2_MEAS"/>
      </tapa.ifdef>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>
   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>
     
      #Configure 1 UE with 1 RB with qci 1.
      (UE1->rbId 3->lcId 3->qci->1)

      <!--   #Configure the corresponding RLC entities
      <tapa.send>
         <tapa.ckw.cfgreq  ueId="1" cellId="1" numEnt="1"
            cfgType="1"
            rbId="3"
            rbType="1"
            entMode="2"
            dir="2"
            logChId0Id="3"
            logChId0Type="4"
            logChId1Id="3"
            logChId1Type="4"
            umDlSnLen="5"
            umUlSnLen="5"
            umUlReOrdTmr="0"
            qci="1"
         />
      </tapa.send>

      # Expect General Configuration Confirm
      <tapa.expect>
         <tapa.ckw.cfgcfm ueId="1" cellId="1" numEnt="1" 
            rbId="3" 
            rbType="1"
            status="1" reason="0"/>
      </tapa.expect>  -->
      
       #Send PDCP Config for  DRB1
         
      <tapa.send>
         <tapa.cpj.cfgreq ueId="1" cellId="1" numEnt="1"
            rbId="3"
            cfgType="1"
            rbType="1"
            discReqd="1"
            cfmReqd="1"
            discardTmr="1000"

            dir="2"
            mode="2"
    
            statusRepReqd="0"
            pdcpSNSize="7"
    
            hdrCompUsed="0"
            maxCid="0"
            profile="0"
    
            bitFlag="0"
            isHoPres="0"
            dlCount="0"
            ulCount="0"
            numBits="0"
            ulBitMap="0"
            qci="1:2:3"
         />
      </tapa.send>
      #Expect a config confirm for all of the above configured entities
      <tapa.expect>
         <tapa.cpj.cfgcfm ueId="1" cellId="1" numEnt="1"
            rbId="3"
            rbType="1"
            status="1"
            reason="0"
         />
      </tapa.expect>
      <!--    ############Send data on DRB1 in UE1###################
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
	     <tapa.pju.datreq entity="ENTPX" sduSize="300" 
		         rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
    </tapa.expect> -->
      
      #Send L2 Measurement request from LM to PDCP with measType as DL packet delay
      <tapa.send>
         <tapa.lpj.l2measreq measType="1" measPeriod="1" numQci="1" qci="1"/>   
      </tapa.send>
      
      <!--    #Send L2 Measurement request from LM to RLC with measType as DL packet delay
      <tapa.send>
         <tapa.lkw.l2measreq measType="2" measPeriod="10" numQci="1" qci="1"/>     
      </tapa.send>

      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>

      ###################Send Harq indication on LcId 3 for all the data request for UE 1#############
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="1" cellId="1" 
          numTbs="1" status="1" snMapInfo="1:1:3,0;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="1" cellId="1" 
          numTbs="1" status="1" snMapInfo="2:1:3,1;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="1" cellId="1" 
          numTbs="1" status="1" snMapInfo="3:1:3,2;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="1" cellId="1" 
          numTbs="1" status="1" snMapInfo="4:1:3,3;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="1" cellId="1" 
          numTbs="1" status="1" snMapInfo="5:1:3,4;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="1" cellId="1" 
          numTbs="1" status="1" snMapInfo="6:1:3,5;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="1" cellId="1" 
          numTbs="1" status="1" snMapInfo="7:1:3,6;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="1" cellId="1" 
          numTbs="1" status="1" snMapInfo="8:1:3,7;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="1" cellId="1" 
          numTbs="1" status="1" snMapInfo="9:1:3,8;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="1" cellId="1" 
          numTbs="1" status="1" snMapInfo="10:1:3,9;"/>
    </tapa.send>    -->
     
     #Expect L2 Measurement confirm for DL packet delay
     <tapa.expset>
         <tapa.lpj.l2meascfm status="LCM_PRIM_OK" reason="LCM_REASON_NOT_APPL"
		     numCfm="1" measData="1:1;" measType="1"/>
        <!--    <tapa.lkw.l2meascfm status="LCM_PRIM_OK" reason="LCM_REASON_NOT_APPL"
           numCfm="1" measData="1:0;" measType="2"/> -->
     </tapa.expset>
     
   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.36
#
#       Desc:    To test the packet delay in L2 Measurement with allocation
#                less than the sdu size  and negative status in few harqAckInd
#
#       Notes:   None
#              
#       Module:  PDCP
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.36" altid="7.9"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="l2m"/>

      <tapa.desc>
         "To test the packet delay calculation in L2 Measurement with 1 UE and 1 RB
         with allocation less than sdu size from application and negative status in few
         harq status indication"
      </tapa.desc>

      <tapa.longdesc>
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef>
	     <tapa.flag id="LTE_L2_MEAS"/>
      </tapa.ifdef>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>
     
      #Configure 1UE with 1 RB, one in AM with qci 1
      (rbId 3->lcId 3->qci 1)
      
      <!--   #Configure the corresponding RLC entities
      <tapa.send>
         <tapa.ckw.cfgreq  ueId="1" cellId="1" numEnt="1"
            cfgType="1"
            rbId="3"
            rbType="1"
            entMode="3"
            dir="3"
            logChId0Id="3"
            logChId0Type="4"
            logChId1Id="3"
            logChId1Type="4"
            amDlPollRetxTmr="200"
            amDlPollPdu="1"
            amDlPollByte="25000"
            amDlMaxRetx="1"
            amUlStaProhTmr="0"
            amUlReOrdTmr="2"
            qci="1"
         />
      </tapa.send>

      # Expect General Configuration Confirm
      <tapa.expect>
         <tapa.ckw.cfgcfm ueId="1" cellId="1" numEnt="1" 
            rbId="3" 
            rbType="1"
            status="1" reason="0"/>
      </tapa.expect>    -->
      
       #Send PDCP Config for  DRB1
         
      <tapa.send>
         <tapa.cpj.cfgreq ueId="1" cellId="1" numEnt="1"
            rbId="3"
            cfgType="1"
            rbType="1"
            discReqd="1"
            cfmReqd="1"
            discardTmr="1000"

            dir="3"
            mode="3"
    
            statusRepReqd="0"
            pdcpSNSize="12"
    
            hdrCompUsed="0"
            maxCid="0"
            profile="0"
    
            bitFlag="0"
            isHoPres="0"
            dlCount="0"
            ulCount="0"
            numBits="0"
            ulBitMap="0"
            qci="1"
         />
      </tapa.send>
      #Expect a config confirm for all of the above configured entities
      <tapa.expect>
         <tapa.cpj.cfgcfm ueId="1" cellId="1" numEnt="1"
            rbId="3"
            rbType="1"
            status="1"
            reason="0"
         />
      </tapa.expect>

      <!--   #Send L2 Measurement request from LM to RLC with measType as DL packet delay
      <tapa.send>
         <tapa.lkw.l2measreq measType="2" measPeriod="10" numQci="1" qci="1"/>     
      </tapa.send>  -->
      
      #Send L2 Measurement request from LM to PDCP with measType as DL packet delay
      <tapa.send>
         <tapa.lpj.l2measreq measType="1" measPeriod="10" numQci="1" qci="1"/>     
      </tapa.send>
      
      <!--    ############Send data on DRB1###################
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="210" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the first SDU on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="210" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the first SDU on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="210" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the first SDU on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="210" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the first SDU on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="210" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the first SDU on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>

      ###################Send Harq indication on LcId 3 for all the data request#############
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="1" cellId="1" 
          numTbs="1" status="1" snMapInfo="1:2:3,0;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="1" cellId="1" 
          numTbs="1" status="0" snMapInfo="2:1:3,1;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="1" cellId="1" 
          numTbs="1" status="1" snMapInfo="3:1:3,2;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="1" cellId="1" 
          numTbs="1" status="0" snMapInfo="4:1:3,3;"/>
     </tapa.send>
      #Send Harq ack indication on LcId 3
     <tapa.send>
       <tapa.dummy.rgu.hqstaind lcId="3" ueId="1" cellId="1" 
          numTbs="1" status="1" snMapInfo="5:1:3,4;"/>
    </tapa.send>  -->

     <tapa.delay delay="10"/>
     #Expect L2 Measurement confirm for DL packet delay
     <tapa.expset>
        <!--    <tapa.lkw.l2meascfm status="LCM_PRIM_OK" reason="LCM_REASON_NOT_APPL"
           numCfm="1" measData="1:0;" measType="2"/>  -->
         <tapa.lpj.l2meascfm status="LCM_PRIM_OK" reason="LCM_REASON_NOT_APPL"
		     numCfm="1" measData="1:0;" measType="1"/>
     </tapa.expset>
   
   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.37
#
#       Desc:    To test downlink discard rate in PDCP per qci, with single UE and 
#                single RB.
#
#       Notes:   None
#              
#       Module:  PDCP
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.37" altid="7.10"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="l2m"/>

      <tapa.desc>
	      "To test downlink discard rate per qci in PDCP with single UE and RB"
      </tapa.desc>

      <tapa.longdesc>
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef>
	      <tapa.flag id="LTE_L2_MEAS"/>
      </tapa.ifdef>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>
     
      <!--      #Configure 1 UE with 1 RB with qci 1.
      (UE1->rbId 3->lcId 3->qci->1)
      
      #Configure the corresponding RLC entities
      <tapa.send>
         <tapa.ckw.cfgreq  ueId="1" cellId="1" numEnt="1"
            cfgType="1"
            rbId="3"
            rbType="1"
            entMode="3"
            dir="3"
            logChId0Id="3"
            logChId0Type="4"
            logChId1Id="3"
            logChId1Type="4"
            amDlPollRetxTmr="200"
            amDlPollPdu="1"
            amDlPollByte="25000"
            amDlMaxRetx="1"
            amUlStaProhTmr="0"
            amUlReOrdTmr="2"
            qci="1"
         />
      </tapa.send>

      # Expect General Configuration Confirm
      <tapa.expect>
         <tapa.ckw.cfgcfm ueId="1" cellId="1" numEnt="1" 
            rbId="3" 
            rbType="1"
            status="1" reason="0"/>
      </tapa.expect>  -->
      
       #Send PDCP Config for  DRB1
         
      <tapa.send>
         <tapa.cpj.cfgreq ueId="1" cellId="1" numEnt="1"
            rbId="3"
            cfgType="1"
            rbType="1"
            discReqd="1"
            cfmReqd="1"
            discardTmr="1000"

            dir="3"
            mode="3"
    
            statusRepReqd="0"
            pdcpSNSize="7"
    
            hdrCompUsed="0"
            maxCid="0"
            profile="0"
    
            bitFlag="0"
            isHoPres="0"
            dlCount="0"
            ulCount="0"
            numBits="0"
            ulBitMap="0"
            qci="1"
         />
      </tapa.send>
      #Expect a config confirm for all of the above configured entities
      <tapa.expect>
         <tapa.cpj.cfgcfm ueId="1" cellId="1" numEnt="1"
            rbId="3"
            rbType="1"
            status="1"
            reason="0"
         />
      </tapa.expect>

      #Send L2 Measurement request from LM to PDCP with measType as DL packet delay
      <tapa.send>
         <tapa.lpj.l2measreq measType="2" measPeriod="10" numQci="1" qci="1"/>   
      </tapa.send>
      <!--    
      #Send L2 Measurement request from LM to RLC with measType as DL packet delay
      <tapa.send>
         <tapa.lkw.l2measreq measType="4" measPeriod="10" numQci="1" qci="1"/>     
      </tapa.send>

      ############Send data on DRB1 in UE1###################
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
	     <tapa.pju.datreq entity="ENTPX"  sduSize="300" 
		      rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
    </tapa.expect>  -->
     
      # wait for sdu discard time to expire for few sdus
      <tapa.delay delay="200"/>

     #Expect L2 Measurement confirm for DL packet delay
     <tapa.expset>
         <tapa.lpj.l2meascfm status="LCM_PRIM_OK" reason="LCM_REASON_NOT_APPL"
		     numCfm="1" measData="1:0:0;" measType="2"/>
        <!--   <tapa.lkw.l2meascfm status="LCM_PRIM_OK" reason="LCM_REASON_NOT_APPL"
           numCfm="1" measData="1:0;" measType="4"/> -->
        <tapa.pju.datcfm entity="ENTPX" sduId="0:1:2:3:4:5:6:7:8:9" ueId="1" cellId="1" rbId="3" rbType="1"
           status="2:2:2:2:2:2:2:2:2:2" numSdu="10" />
        <!--   <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/> -->
     </tapa.expset>
     
   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.38
#
#       Desc:    To test downlink discard rate in PDCP per qci, with single UE and 
#                multiple RB.
#
#       Notes:   None
#              
#       Module:  PDCP
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.38" altid="7.13"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="l2m"/>

      <tapa.desc>
         "To test downlink discard rate per qci in PDCP with single UE and multiple 
          RB here allocation does not comes from MAC and sdu discard times is lesser
          than measPeriod"
      </tapa.desc>

      <tapa.longdesc>
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef>
	      <tapa.flag id="LTE_L2_MEAS"/>
      </tapa.ifdef>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>
     
      <!--      #Configure 1 UE with 2 RB with qci 1.
      (UE1->rbId 3->lcId 3->qci->1, UE 1->rbId 4->lcId 4->qci->1)
      
      #Configure the corresponding RLC entities
      <tapa.send>
         <tapa.ckw.cfgreq  ueId="1" cellId="1" numEnt="2"
            cfgType="1:1"
            rbId="3:4"
            rbType="1:1"
            entMode="3:3"
            dir="3:3"
            logChId0Id="3:4"
            logChId0Type="4:4"
            logChId1Id="3:4"
            logChId1Type="4:4"
            amDlPollRetxTmr="200:200"
            amDlPollPdu="1:1"
            amDlPollByte="25000:25000"
            amDlMaxRetx="1:1"
            amUlStaProhTmr="0:0"
            amUlReOrdTmr="2:2"
            qci="1:1"
         />
      </tapa.send>

      # Expect General Configuration Confirm
      <tapa.expect>
         <tapa.ckw.cfgcfm ueId="1" cellId="1" numEnt="2" 
            rbId="3:4" 
            rbType="1:1"
            status="1:1" reason="0:0"/>
      </tapa.expect>   -->
      
       #Send PDCP Config for  DRB1
         
      <tapa.send>
         <tapa.cpj.cfgreq ueId="1" cellId="1" numEnt="2"
            rbId="3:4"
            cfgType="1:1"
            rbType="1:1"
            discReqd="1:1"
            cfmReqd="1:1"
            discardTmr="10:10"

            dir="3:3"
            mode="3:3"
    
            statusRepReqd="0:0"
            pdcpSNSize="7:7"
    
            hdrCompUsed="0:0"
            maxCid="0:0"
            profile="0:0"
    
            bitFlag="0:0"
            isHoPres="0:0"
            dlCount="0:0"
            ulCount="0:0"
            numBits="0:0"
            ulBitMap="0:0"
            qci="1:1"
         />
      </tapa.send>
      #Expect a config confirm for all of the above configured entities
      <tapa.expect>
         <tapa.cpj.cfgcfm ueId="1" cellId="1" numEnt="2"
            rbId="3:4"
            rbType="1:1"
            status="1:1"
            reason="0:0"
         />
      </tapa.expect>
      
      #Send L2 Measurement request from LM to PDCP with measType as DL packet delay
      <tapa.send>
         <tapa.lpj.l2measreq measType="2" measPeriod="10000" numQci="1" qci="1"/>   
      </tapa.send>
      
      <!--    #Send L2 Measurement request from LM to RLC with measType as DL packet delay
      <tapa.send>
         <tapa.lkw.l2measreq measType="4" measPeriod="10000" numQci="1" qci="1"/>     
      </tapa.send>
      
      ############Send data on DRB1 in UE1###################
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
	     <tapa.pju.datreq entity="ENTPX"  sduSize="300" 
		      rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>

      ############Send data on DRB2 in UE1###################
      #Send PDCP SDU from NH interface for DRB2
      <tapa.send>
	     <tapa.pju.datreq entity="ENTPX"  sduSize="300" 
		      rbId="4" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="4" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB2
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="4" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the first SDU on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="4"
            rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="4" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB2
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="4" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the first SDU on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="4"
            rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="4" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB2
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="310" lcId="4" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the first SDU on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="4" 
            rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="4" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="4"
            rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="4" valdType="1"/>
      </tapa.expect>  -->
      
      # wait for sdu discard time to expire for few sdus
      <tapa.delay delay="100"/>

     #Expect L2 Measurement confirm for DL packet delay
     <tapa.expset>
        <tapa.pju.datcfm entity="ENTPX" sduId="0:1:2:3:4:5:6:7:8:9" ueId="1" cellId="1" rbId="3" rbType="1"
           status="2:2:2:2:2:2:2:2:2:2" numSdu="10" />
        <tapa.pju.datcfm entity="ENTPX" sduId="10:11:12:13:14" ueId="1" cellId="1" rbId="4" rbType="1"
           status="2:2:2:2:2" numSdu="5" />
        <!--   <tapa.lkw.l2meascfm status="LCM_PRIM_OK" reason="LCM_REASON_NOT_APPL"
           numCfm="1" measData="1:0" measType="4"/> -->
         <tapa.lpj.l2meascfm status="LCM_PRIM_OK" reason="LCM_REASON_NOT_APPL"
		     numCfm="1" measData="1:0:800000;" measType="2"/>
        <!--    <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="4" valdType="1"/> -->
     </tapa.expset>
      
   </tapa.test>
  
   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.39
#
#       Desc:    To test downlink discard rate in PDCP per qci, with single UE and 
#                single RB here MAC gives allocation to transmit partial SDUs from RLC"
#
#       Notes:   None
#              
#       Module:  PDCP
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.39" altid="7.15"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="l2m"/>

      <tapa.desc>
         "To test downlink discard rate per qci in PDCP with single UE and RB
          with allocation from MAC such away that RLC splitts the SDU 
          in one data request"
      </tapa.desc>

      <tapa.longdesc>
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef>
	      <tapa.flag id="LTE_L2_MEAS"/>
      </tapa.ifdef>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>
     
      <!--     #Configure 1 UE with 1 RB with qci 1.
      (UE1->rbId 3->lcId 3->qci->1)
      
      #Configure the corresponding RLC entities
      <tapa.send>
         <tapa.ckw.cfgreq  ueId="1" cellId="1" numEnt="1"
            cfgType="1"
            rbId="3"
            rbType="1"
            entMode="3"
            dir="3"
            logChId0Id="3"
            logChId0Type="4"
            logChId1Id="3"
            logChId1Type="4"
            amDlPollRetxTmr="200"
            amDlPollPdu="1"
            amDlPollByte="25000"
            amDlMaxRetx="1"
            amUlStaProhTmr="0"
            amUlReOrdTmr="2"
            qci="1"
         />
      </tapa.send>

      # Expect General Configuration Confirm
      <tapa.expect>
         <tapa.ckw.cfgcfm ueId="1" cellId="1" numEnt="1" 
            rbId="3" 
            rbType="1"
            status="1" reason="0"/>
      </tapa.expect>   -->
      
       #Send PDCP Config for  DRB1
         
      <tapa.send>
         <tapa.cpj.cfgreq ueId="1" cellId="1" numEnt="1"
            rbId="3"
            cfgType="1"
            rbType="1"
            discReqd="1"
            cfmReqd="1"
            discardTmr="10"

            dir="3"
            mode="3"
    
            statusRepReqd="0"
            pdcpSNSize="7"
    
            hdrCompUsed="0"
            maxCid="0"
            profile="0"
    
            bitFlag="0"
            isHoPres="0"
            dlCount="0"
            ulCount="0"
            numBits="0"
            ulBitMap="0"
            qci="1"
         />
      </tapa.send>
      #Expect a config confirm for all of the above configured entities
      <tapa.expect>
         <tapa.cpj.cfgcfm ueId="1" cellId="1" numEnt="1"
            rbId="3"
            rbType="1"
            status="1"
            reason="0"
         />
      </tapa.expect>

      #Send L2 Measurement request from LM to PDCP with measType as DL packet delay
      <tapa.send>
         <tapa.lpj.l2measreq measType="2" measPeriod="10000" numQci="1" qci="1"/>   
      </tapa.send>
      
      <!--    #Send L2 Measurement request from LM to RLC with measType as DL packet delay
      <tapa.send>
         <tapa.lkw.l2measreq measType="4" measPeriod="10000" numQci="1" qci="1"/>     
      </tapa.send>

      ############Send data on DRB1 in UE1###################
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
	     <tapa.pju.datreq entity="ENTPX"  sduSize="300" 
		      rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send StaInd  to RLC to accomodate SDU at DRB1
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="110" lcId="3" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      #Expect the data on DRB1 at RGU
      <tapa.expect>
        <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" 
          transId="1" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>
      
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX"  sduSize="300" rbId="3" rbType="1" ueId="1" cellId="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU at RGU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" valdType="1"/>
      </tapa.expect>   -->
      
      # wait for sdu discard time to expire for few sdus
      <tapa.delay delay="100"/>

     #Expect L2 Measurement confirm for DL packet delay
     <tapa.expset>
         <tapa.lpj.l2meascfm status="LCM_PRIM_OK" reason="LCM_REASON_NOT_APPL"
		     numCfm="1" measData="1:0:800000;" measType="2"/>
        <!--   <tapa.lkw.l2meascfm status="LCM_PRIM_OK" reason="LCM_REASON_NOT_APPL"
           numCfm="1" measData="1:0;" measType="4"/>    -->
        <tapa.pju.datcfm entity="ENTPX" sduId="0:1:2:3:4" ueId="1" cellId="1" rbId="3" rbType="1"
           status="2:2:2:2:2" numSdu="5" />
     </tapa.expset>
     
   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.40
#
#       Desc:    To test measurement is valid only for DRB
#
#       Notes:   None
#              
#       Module:  PDCP
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.40" altid="7.16"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="l2m"/>

      <tapa.desc>
         "To test L2 measurement is valid only for DRB not for SRB"
      </tapa.desc>

      <tapa.longdesc>
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef>
	      <tapa.flag id="LTE_L2_MEAS"/>
      </tapa.ifdef>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>
     
      <!--   #Configure 1 UE with 1 SRB with qci 1
      (UE1->rbId 3->lcId 3->qci->1)
      
      #Configure the corresponding RLC entities
      <tapa.send>
         <tapa.ckw.cfgreq  ueId="1" cellId="1" numEnt="1"
            cfgType="1"
            rbId="3"
            rbType="0"
            entMode="3"
            dir="3"
            logChId0Id="3"
            logChId0Type="5"
            logChId1Id="3"
            logChId1Type="5"
            amDlPollRetxTmr="200"
            amDlPollPdu="1"
            amDlPollByte="25000"
            amDlMaxRetx="1"
            amUlStaProhTmr="0"
            amUlReOrdTmr="2"
            qci="1"
         />
      </tapa.send>

      # Expect General Configuration Confirm
      <tapa.expect>
         <tapa.ckw.cfgcfm ueId="1" cellId="1" numEnt="1" 
            rbId="3" 
            rbType="0"
            status="2" reason="0"/>
      </tapa.expect>  -->
      
       #Send PDCP Config for  DRB1
         
      <tapa.send>
         <tapa.cpj.cfgreq ueId="1" cellId="1" numEnt="1"
            rbId="3"
            cfgType="1"
            rbType="0"
            discReqd="1"
            cfmReqd="1"
            discardTmr="10"

            dir="3"
            mode="3"
    
            statusRepReqd="0"
            pdcpSNSize="7"
    
            hdrCompUsed="0"
            maxCid="0"
            profile="0"
    
            bitFlag="0"
            isHoPres="0"
            dlCount="0"
            ulCount="0"
            numBits="0"
            ulBitMap="0"
            qci="1"
         />
      </tapa.send>
      #Expect a config confirm for all of the above configured entities
      <tapa.expect>
         <tapa.cpj.cfgcfm ueId="1" cellId="1" numEnt="1"
            rbId="3"
            rbType="0"
            status="2"
            reason="0"
         />
      </tapa.expect>

      #Send L2 Measurement request from LM to PDCP with measType as DL packet delay
      <tapa.send>
         <tapa.lpj.l2measreq measType="2" measPeriod="10000" numQci="1" qci="1"/>   
      </tapa.send>
      
      <!--   #Send L2 Measurement request from LM to RLC with measType as DL packet delay
      <tapa.send>
         <tapa.lkw.l2measreq measType="4" measPeriod="100" numQci="1" qci="1"/>     
      </tapa.send> -->
      
      #Expect L2 Measurement confirm for DL packet delay
     <tapa.expset>
         <tapa.lpj.l2meascfm status="LCM_PRIM_NOK" reason="LPJ_CAUSE_INVALID_QCI"
            numCfm="1" measData="1:0;" measType="2"/>
         <!--     <tapa.lkw.l2meascfm status="LCM_PRIM_NOK" reason="LKW_CAUSE_INVALID_QCI"
            numCfm="1" measData="1:0;" measType="4"/> -->
     </tapa.expset>
     
   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.41
#
#       Desc:    To test UL loss in PDCP
#
#       Notes:   None
#              
#       Module:  PDCP
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.41" altid="7.18"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="l2m"/>

      <tapa.desc>
         "To test UL loss in PDCP. Here measurement request comes before all the data from 
         lower layer with 1 UE and 1 RB"
      </tapa.desc>

      <tapa.longdesc>
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef>
	      <tapa.flag id="LTE_L2_MEAS"/>
      </tapa.ifdef>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>
     
      <!--     #Configure 1 UE with 1 DRB with qci 1
      (UE1->rbId 3->lcId 3->qci->1)
      
      #Configure the corresponding RLC entities
      <tapa.send>
         <tapa.ckw.cfgreq  ueId="1" cellId="1" numEnt="1"
            cfgType="1"
            rbId="3"
            rbType="1"
            entMode="3"
            dir="3"
            logChId0Id="3"
            logChId0Type="4"
            logChId1Id="3"
            logChId1Type="4"
            amDlPollRetxTmr="200"
            amDlPollPdu="1"
            amDlPollByte="25000"
            amDlMaxRetx="1"
            amUlStaProhTmr="0"
            amUlReOrdTmr="2"
            qci="1"
         />
      </tapa.send>

      # Expect General Configuration Confirm
      <tapa.expect>
         <tapa.ckw.cfgcfm ueId="1" cellId="1" numEnt="1" 
            rbId="3" 
            rbType="1"
            status="1" reason="0"/>
      </tapa.expect> -->
      
       #Send PDCP Config for  DRB1
         
      <tapa.send>
         <tapa.cpj.cfgreq ueId="1" cellId="1" numEnt="1"
            rbId="3"
            cfgType="1"
            rbType="1"
            discReqd="1"
            cfmReqd="1"
            discardTmr="10"

            dir="3"
            mode="3"
    
            statusRepReqd="0"
            pdcpSNSize="7"
    
            hdrCompUsed="0"
            maxCid="0"
            profile="0"
    
            bitFlag="0"
            isHoPres="0"
            dlCount="0"
            ulCount="0"
            numBits="0"
            ulBitMap="0"
            qci="1"
         />
      </tapa.send>
      #Expect a config confirm for all of the above configured entities
      <tapa.expect>
         <tapa.cpj.cfgcfm ueId="1" cellId="1" numEnt="1"
            rbId="3"
            rbType="1"
            status="1"
            reason="0"
         />
      </tapa.expect>
      
      #Send L2 Measurement request from LM to PDCP with measType as UL Loss
      <tapa.send>
         <tapa.lpj.l2measreq measType="4" measPeriod="10" numQci="1" qci="1"/>   
      </tapa.send>

      <!--    # Send a pdcp pdu with sn as 5 on lcId 3
      <tapa.send>
         <tapa.dummy.rgu.rxPdcpPduCreate cellId="1" ueId="1" numLch="1" transId="1" sn="5"
            lchData="3:3:1:200:0:0:0:1:1:0:0:0:1:102"
            pdcppdutype="5" />
      </tapa.send>
      
      # MAC indicates Data Indication to Peer RLC
      <tapa.send>
         <tapa.dummy.rgu.ddatind numLch="1" cellId="1"  ueId="1" transId="1"
            lchData="3:1:0"/>
      </tapa.send>  -->
      
      #Expect L2 Measurement confirm for UL Loss
     <tapa.expset>
         <tapa.lpj.l2meascfm status="LCM_PRIM_OK" reason="LCM_REASON_NOT_APPL"
            numCfm="1" measData="1:0:0:833333;" measType="4"/>
         <tapa.pju.datind  entity="ENTPX" sduSize="100" cellId="1" ueId="1" valdType="1"/>
         <!--    <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" 
            valdType="1"/> -->
     </tapa.expset>
     
   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.42
#
#       Desc:    To test UL loss in PDCP with 2 UE and 2 RB
#
#       Notes:   None
#              
#       Module:  PDCP
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.42" altid="7.20"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="l2m"/>

      <tapa.desc>
         "To test UL loss in PDCP. Here measurement request comes before all the data from 
         lower layer for 2 UE."
      </tapa.desc>

      <tapa.longdesc>
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef>
	      <tapa.flag id="LTE_L2_MEAS"/>
      </tapa.ifdef>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>
     
      <!--  #Configure 1 UE with 2 DRB with qci 1 and 2
      (UE1->rbId 3->lcId 3->qci->1, UE1->rbId 4->lcId 4->qci 2)
      
      #Configure the corresponding RLC entities
      <tapa.send>
         <tapa.ckw.cfgreq  ueId="1" cellId="1" numEnt="2"
            cfgType="1:1"
            rbId="3:4"
            rbType="1:1"
            entMode="3:3"
            dir="3:3"
            logChId0Id="3:4"
            logChId0Type="4:4"
            logChId1Id="3:4"
            logChId1Type="4:4"
            amDlPollRetxTmr="200:200"
            amDlPollPdu="1:1"
            amDlPollByte="25000:25000"
            amDlMaxRetx="1:1"
            amUlStaProhTmr="0:0"
            amUlReOrdTmr="2:2"
            qci="1:2"
         />
      </tapa.send>

      # Expect General Configuration Confirm
      <tapa.expect>
         <tapa.ckw.cfgcfm ueId="1" cellId="1" numEnt="2" 
            rbId="3:4" 
            rbType="1:1"
            status="1:1" reason="0:0"/>
      </tapa.expect>  -->
      
       #Send PDCP Config for  DRB1
         
      <tapa.send>
         <tapa.cpj.cfgreq ueId="1" cellId="1" numEnt="2"
            rbId="3:4"
            cfgType="1:1"
            rbType="1:1"
            discReqd="1:1"
            cfmReqd="1:1"
            discardTmr="10:10"

            dir="3:3"
            mode="3:3"
    
            statusRepReqd="0:0"
            pdcpSNSize="7:7"
    
            hdrCompUsed="0:0"
            maxCid="0:0"
            profile="0:0"
    
            bitFlag="0:0"
            isHoPres="0:0"
            dlCount="0:0"
            ulCount="0:0"
            numBits="0:0"
            ulBitMap="0:0"
            qci="1:2"
         />
      </tapa.send>
      #Expect a config confirm for all of the above configured entities
      <tapa.expect>
         <tapa.cpj.cfgcfm ueId="1" cellId="1" numEnt="2"
            rbId="3:4"
            rbType="1:1"
            status="1:1"
            reason="0:0"
         />
      </tapa.expect>
      
      <!--     #Configure 2 UE with 2 DRB with qci 1 and 2
      (UE1->rbId 3->lcId 3->qci->1, UE1->rbId 4->lcId 4->qci 2)
      
      #Configure the corresponding RLC entities
      <tapa.send>
         <tapa.ckw.cfgreq  ueId="2" cellId="1" numEnt="2"
            cfgType="1:1"
            rbId="3:4"
            rbType="1:1"
            entMode="3:3"
            dir="3:3"
            logChId0Id="3:4"
            logChId0Type="4:4"
            logChId1Id="3:4"
            logChId1Type="4:4"
            amDlPollRetxTmr="200:200"
            amDlPollPdu="1:1"
            amDlPollByte="25000:25000"
            amDlMaxRetx="1:1"
            amUlStaProhTmr="0:0"
            amUlReOrdTmr="2:2"
            qci="1:2"
         />
      </tapa.send>

      # Expect General Configuration Confirm
      <tapa.expect>
         <tapa.ckw.cfgcfm ueId="2" cellId="1" numEnt="2" 
            rbId="3:4" 
            rbType="1:1"
            status="1:1" reason="0:0"/>
      </tapa.expect>  -->
      
       #Send PDCP Config for  DRB1
         
      <tapa.send>
         <tapa.cpj.cfgreq ueId="2" cellId="1" numEnt="2"
            rbId="3:4"
            cfgType="1:1"
            rbType="1:1"
            discReqd="1:1"
            cfmReqd="1:1"
            discardTmr="10:10"

            dir="3:3"
            mode="3:3"
    
            statusRepReqd="0:0"
            pdcpSNSize="7:7"
    
            hdrCompUsed="0:0"
            maxCid="0:0"
            profile="0:0"
    
            bitFlag="0:0"
            isHoPres="0:0"
            dlCount="0:0"
            ulCount="0:0"
            numBits="0:0"
            ulBitMap="0:0"
            qci="1:2"
         />
      </tapa.send>
      #Expect a config confirm for all of the above configured entities
      <tapa.expect>
         <tapa.cpj.cfgcfm ueId="2" cellId="1" numEnt="2"
            rbId="3:4"
            rbType="1:1"
            status="1:1"
            reason="0:0"
         />
      </tapa.expect>
     
      #Send L2 Measurement request from LM to PDCP with measType as UL Loss
      <tapa.send>
         <tapa.lpj.l2measreq measType="4" measPeriod="10" numQci="2" qci="1:2"/>   
      </tapa.send>
     
      <!--    # Send a pdcp pdu with sn as 5 on lcId 3
      <tapa.send>
         <tapa.dummy.rgu.rxPdcpPduCreate cellId="1" ueId="1" numLch="1" transId="1" sn="5"
            lchData="3:3:1:200:0:0:0:1:1:0:0:0:1:102"
            pdcppdutype="5" />
      </tapa.send>
      
      # MAC indicates Data Indication to Peer RLC
      <tapa.send>
         <tapa.dummy.rgu.ddatind numLch="1" cellId="1"  ueId="1" transId="1"
            lchData="3:1:0"/>
      </tapa.send>

     #Expect data indication and status response
      <tapa.expset>
         <tapa.pju.datind  entity="ENTPX" sduSize="100" cellId="1" ueId="1" valdType="1"/>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" 
            valdType="1"/>
      </tapa.expset>

      # Send a pdcp pdu with sn as 5 on lcId 4
      <tapa.send>
         <tapa.dummy.rgu.rxPdcpPduCreate cellId="1" ueId="1" numLch="1" transId="1" sn="9"
            lchData="3:4:1:200:0:0:0:1:1:0:0:0:1:102"
            pdcppdutype="5" />
      </tapa.send>
      
      # MAC indicates Data Indication to Peer RLC
      <tapa.send>
         <tapa.dummy.rgu.ddatind numLch="1" cellId="1"  ueId="1" transId="1"
            lchData="4:1:0"/>
      </tapa.send>

     #Expect status response
      <tapa.expset>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="4" 
            valdType="1"/>
         <tapa.pju.datind  entity="ENTPX" sduSize="100" cellId="1" ueId="1" valdType="1"/>
      </tapa.expset>

      # Send a pdcp pdu with sn as 5 on lcId 3
      <tapa.send>
         <tapa.dummy.rgu.rxPdcpPduCreate cellId="1" ueId="2" numLch="1" transId="1" sn="5"
            lchData="3:3:1:200:0:0:0:1:1:0:0:0:1:102"
            pdcppdutype="5" />
      </tapa.send>
      
      # MAC indicates Data Indication to Peer RLC
      <tapa.send>
         <tapa.dummy.rgu.ddatind numLch="1" cellId="1"  ueId="2" transId="1"
            lchData="3:1:0"/>
      </tapa.send>

      #kw006.201 changes for ccpu00117290
      #Expect status response message
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="2" lcId="3" 
            valdType="1"/>
      </tapa.expect>
     #Expect data indication and status response
      <tapa.expect>
          <tapa.pju.datind  entity="ENTPX" sduSize="100" cellId="1" ueId="2" valdType="1"/>
      </tapa.expect>

      # Send a pdcp pdu with sn as 5 on lcId 4
      <tapa.send>
         <tapa.dummy.rgu.rxPdcpPduCreate cellId="1" ueId="2" numLch="1" transId="1" sn="9"
            lchData="3:4:1:200:0:0:0:1:1:0:0:0:1:102"
            pdcppdutype="5" />
      </tapa.send>
      
      # MAC indicates Data Indication to Peer RLC
      <tapa.send>
         <tapa.dummy.rgu.ddatind numLch="1" cellId="1"  ueId="2" transId="1"
            lchData="4:1:0"/>
      </tapa.send> -->
      
      #kw006.201 changes for ccpu00111716
      #Expect L2 Measurement confirm for UL Loss
     <tapa.expset>
        <tapa.lpj.l2meascfm status="LCM_PRIM_OK" reason="LCM_REASON_NOT_APPL"
           numCfm="2" measData="1:0:0:833333;2:0:0:900000" measType="4"/>
        <!--   <tapa.pju.datind  entity="ENTPX" sduSize="100" cellId="1" ueId="2" valdType="1"/>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="2" lcId="4" 
            valdType="1"/> -->
     </tapa.expset>
    
   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.43
#
#       Desc:    Deletion of RB when measurement in running on same RB
#
#       Notes:   None
#              
#       Module:  PDCP
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.43" altid="7.22"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="l2m"/>

      <tapa.desc>
         "To test RB deletion when measurement is on going on the same RB
          with same qci"
      </tapa.desc>

      <tapa.longdesc>
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef>
	      <tapa.flag id="LTE_L2_MEAS"/>
      </tapa.ifdef>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>
     
      <!--   #Configure 1 UE with 2 DRB with qci 1 and 1
      (UE1->rbId 3->lcId 3->qci->1, UE1->rbId 4->lcId 4->qci 1)
      
      #Configure the corresponding RLC entities
      <tapa.send>
         <tapa.ckw.cfgreq  ueId="1" cellId="1" numEnt="2"
            cfgType="1:1"
            rbId="3:4"
            rbType="1:1"
            entMode="3:3"
            dir="3:3"
            logChId0Id="3:4"
            logChId0Type="4:4"
            logChId1Id="3:4"
            logChId1Type="4:4"
            amDlPollRetxTmr="200:200"
            amDlPollPdu="1:1"
            amDlPollByte="25000:25000"
            amDlMaxRetx="1:1"
            amUlStaProhTmr="0:0"
            amUlReOrdTmr="2:2"
            qci="1:1"
         />
      </tapa.send>

      # Expect General Configuration Confirm
      <tapa.expect>
         <tapa.ckw.cfgcfm ueId="1" cellId="1" numEnt="2" 
            rbId="3:4" 
            rbType="1:1"
            status="1:1" reason="0:0"/>
      </tapa.expect>  -->
      
       #Send PDCP Config for  DRB1
         
      <tapa.send>
         <tapa.cpj.cfgreq ueId="1" cellId="1" numEnt="2"
            rbId="3:4"
            cfgType="1:1"
            rbType="1:1"
            discReqd="1:1"
            cfmReqd="1:1"
            discardTmr="10:10"

            dir="3:3"
            mode="3:3"
    
            statusRepReqd="0:0"
            pdcpSNSize="7:7"
    
            hdrCompUsed="0:0"
            maxCid="0:0"
            profile="0:0"
    
            bitFlag="0:0"
            isHoPres="0:0"
            dlCount="0:0"
            ulCount="0:0"
            numBits="0:0"
            ulBitMap="0:0"
            qci="1:1"
         />
      </tapa.send>
      #Expect a config confirm for all of the above configured entities
      <tapa.expect>
         <tapa.cpj.cfgcfm ueId="1" cellId="1" numEnt="2"
            rbId="3:4"
            rbType="1:1"
            status="1:1"
            reason="0:0"
         />
      </tapa.expect>
      
      #Send L2 Measurement request from LM to PDCP with measType as UL Loss
      <tapa.send>
         <tapa.lpj.l2measreq measType="4" measPeriod="10" numQci="1" qci="1"/>   
      </tapa.send>

      <!--   # Send a pdcp pdu with sn as 5 on lcId 3
      <tapa.send>
         <tapa.dummy.rgu.rxPdcpPduCreate cellId="1" ueId="1" numLch="1" transId="1" sn="5"
            lchData="3:3:1:200:0:0:0:1:1:0:0:0:1:102"
            pdcppdutype="5" />
      </tapa.send>
      
      # MAC indicates Data Indication to Peer RLC
      <tapa.send>
         <tapa.dummy.rgu.ddatind numLch="1" cellId="1"  ueId="1" transId="1"
            lchData="3:1:0"/>
      </tapa.send>

     #Expect data indication and status response
      <tapa.expset>
         <tapa.pju.datind  entity="ENTPX" sduSize="100" cellId="1" ueId="1" valdType="1"/>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="3" 
            valdType="1"/>
      </tapa.expset>   -->
      #kw006.201 modified for ccpu00117290
      <tapa.delay delay="1"/>

      #Now send RB deletion, to delete RB  3
      <tapa.send>
         <tapa.cpj.cfgreq ueId="1" cellId="1" numEnt="1"
            rbId="3"
            rbType="1"
            cfgType="3"
         />
      </tapa.send>

      #Step 10. Expect a config confirm for the deleted entity also an alarm
      <tapa.expset>
         <tapa.cpj.cfgcfm ueId="1" cellId="1" numEnt="1"
            rbId="3"
            rbType="1"
            status="1"
            reason="0"
         />
         <tapa.lpj.staind category="2" event="98" qci="1" cause="268"/>
      </tapa.expset>
      <!--   # Send a pdcp pdu with sn as 5 on lcId 4
      <tapa.send>
         <tapa.dummy.rgu.rxPdcpPduCreate cellId="1" ueId="1" numLch="1" transId="1" sn="7"
            lchData="3:4:1:200:0:0:0:1:1:0:0:0:1:102"
            pdcppdutype="5" />
      </tapa.send>
      
      # MAC indicates Data Indication to Peer RLC
      <tapa.send>
         <tapa.dummy.rgu.ddatind numLch="1" cellId="1"  ueId="1" transId="1"
            lchData="4:1:0"/>
      </tapa.send>  -->

      #Expect L2 Measurement confirm for UL Loss
     <tapa.expset>
         <tapa.lpj.l2meascfm status="LCM_PRIM_OK" reason="LCM_REASON_NOT_APPL"
            numCfm="1" measData="1:0:0:857142;" measType="4"/>
         <!--      <tapa.pju.datind  entity="ENTPX" sduSize="100" cellId="1" ueId="1" valdType="1"/>
            <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="4" 
               valdType="1"/>  -->
     </tapa.expset>
     
   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>



#
#
#       Test:    1.44
#
#       Desc:    Entity configuration for all the modes (TC_CFG_GRP2_1)
#
#       Notes:   None
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.44"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "Configuring PDCP Layer Control Interface(TC_CFG_GRP2_1)"
      </tapa.desc>

      <tapa.longdesc>
         "1. ueId=1, cellId=1, numEnt=6 (1-AM(SRB1), 2-AM(SRB2), 3-UM(DL), 4-UM(UL), 5-UM(BOTH), 6-AM(DRB)) successful configuration with discard timer for 6.
          2. Config Request for RLC for the 6 entities in step 1.
          3. Delete RLC entities.
          4. Delete PDCP entities.
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>
      <tapa.pj.init/>
   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>

      <tapa.send>
         <tapa.cpj.cfgreq ueId="1" cellId="1" numEnt="6"
            rbId="1:2:3:4:5:6"
            cfgType="1:1:1:1:1:1"
            rbType="0:0:1:1:1:1"
            discReqd="1:1:0:0:0:0"
            cfmReqd="1:1:0:0:0:1"
            discardTmr="100:-1:0:0:200:100"

            dir="3:3:2:1:3:3"
            mode="3:3:2:2:2:3"
    
            umSnSize="0:0:5:0:0"
            statusRepReqd="0:0:0:0:0:1"
            pdcpSNSize="5:5:7:7:7:12"
    
            hdrCompUsed="0:0:1:1:1:1"
            maxCid="15:15:15:15:15"
            profile="0:0:0:0:24:8"
    
            bitFlag="0:0:0:0:0:0"
            isHoPres="0:0:0:0:0:0"
            dlCount="0:0:0:0:0:0"
            ulCount="0:0:0:0:0:0"
            numBits="0:0:0:0:0:0"
            ulBitMap="0:0:0:0:0:0"
         />
      </tapa.send>
      #Expect a config confirm for all of the above configured entities
      <tapa.expect>
         <tapa.cpj.cfgcfm ueId="1" cellId="1" numEnt="6"
            rbId="1:2:3:4:5:6"
            rbType="0:0:1:1:1:1"
            status="1:1:1:1:1:1"
            reason="0:0:0:0:0:0"
         />
      </tapa.expect>

      #Send a Security Config Req for the UE
      <tapa.send>
      <tapa.cpj.seccfgreq ueId="1" cellId="1" transId="1"
         selSecAct="TRUE"
         intalgoType="1"
         intkey=""
         ciphalgoType="1"
         ctrlplnkey=""
         usrplnkey=""
      />
      </tapa.send>
      #Expect a security config confirm for the UE
      <tapa.expect>
      <tapa.cpj.seccfgcfm ueId="1" cellId="1" transId="1"
         status="1"
         reason="0"
      />
      </tapa.expect>
    
      <tapa.delue1 />
   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
   </tapa.shutdown>

</tapa.testcase>


#
#
#       Test:    1.45
#
#       Desc:    Entity configuration for all the modes (TC_CFG_GRP2_1)
#
#       Notes:   None
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.45"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "Configuring PDCP Layer Control Interface(TC_CFG_GRP2_1)"
      </tapa.desc>

      <tapa.longdesc>
         "1. ueId=1, cellId=1, numEnt=1 (1-AM(DRB1) successful configuration with discard timer for 6.
          2. Send DL data on DRB1 , RLC sends a discard Cfm for first SDU.
          3. PDCP indicates this discard to the upper layer .
          4. Delete PDCP entities.
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>
      <tapa.pj.init/>
      <tapa.drb1cfg/>
   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>
      #Send PDCP SDU from NH interface for DRB1
      <tapa.repeat.start repeatCount="5"/>
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduId="0" sduSize="300" rbId="1" ueId="1" cellId="1" rbType="1" 
            pass="FALSE" />
      </tapa.send>

      #Expect the first SDU on DRB1 with size 307 at KWU
      <tapa.expect>
         <tapa.dummy.kwu.datreq  numLch="1" ueId="1" cellId="1" 
            lchData="0:0:0:3:1:-1:
                     -1:-1:-1:-1:-1"
            pdcpHdr="1:-1:0:-1" intgProt="FALSE"  ciph ="FALSE" 
            snSize="12" mode = "3" vrfPdcp="TRUE" pass="FALSE"/> 
      </tapa.expect>
      <tapa.repeat.end/>
      <tapa.send>
         <tapa.dummy.kwu.discsducfm ueId="1" cellId ="1" rbId="1" rbType="1" sduId="0"/>
      </tapa.send>   
      <tapa.expect>
         <tapa.pju.datcfm entity="ENTPX" sduId="0" status="2" numSdu="1" />
      </tapa.expect> 

      <tapa.delue1N2 />
   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
   </tapa.shutdown>

</tapa.testcase>


#
#
#       Test:    1.46
#
#       Desc:    Perform Reestablishment of SRB 1 and DRB 2
#
#       Notes:   TC_REEST_GRP4_2
#                Priority 1
#                SYNC and ASYNC
#                Positive Testcase
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.46"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="36.323 v:8.5.0" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "To verify ReEstablishment of SRBs and DRBs "
      </tapa.desc>

      <tapa.longdesc>
        " 1. Configure SRB1 on RLC and PDCP on ueId=1/2, cellId=1.
          3. Configure DRB2 on RLC and PDCP on ueId=1/2, cellId=1.
          4. Send Data on SRB1 from (ueId=1, CellId=1)to (ueId=2, CellId=1) and validate the data.
          5. Send Data on SRB1 from (ueId=2, CellId=1)to (ueId=1, CellId=1) and validate the data.
          8. Send Data on DRB2 from (ueId=1, CellId=1)to (ueId=2, CellId=1) and validate the data.
          9. ReEstablish SRB1 on PDCP and RLC.
          10. Reestablish DRB2 on PDCP and RLC.
          11. Verify successful reestablishment of SRB1.
          12. Verify successful reestablishment of DRB2.
          13. Shutdown the layer."
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

      #Configure the SRB1 at RLC and PDCP Layer 
      <tapa.srb1cfg discardTmr0="0"/>

      #Configure the DRB2 at RLC and PDCP Layer 
      <tapa.drb2cfg discardTmr0="0"/>

      #Send Data on SRB1 from ueId=1 CellId=1 to ueId=2 CellId=1 
      <tapa.dsrb1ue1T2/>

       #Send Data on SRB1 from ueId=2 CellId=1 to ueId=1 CellId=1 
      <tapa.dsrb1ue2T1/>

      #Send Data on DRB2 from ueId=1 CellId=1 to ueId=2 CellId=1 
      <tapa.ddrb2ue1T2/>
   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>

      #Send PDCP SDU from NH interface for DRB2
      <tapa.repeat.start repeatCount="5"/>
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduId="0" sduSize="300" rbId="2"  rbType="1" ueId="1" cellId="1" pass="FALSE"/>
      </tapa.send>
      <tapa.expect>
         <tapa.dummy.kwu.datreq  numLch="1" ueId="1" cellId="1" 
            lchData="0:0:0:4:1:-1:
                     -1:-1:-1:-1:-1"
            pdcpHdr="-1:-1:0:-1" intgProt="FALSE"  ciph ="FALSE" vrfPdcp="TRUE" snSize="7" mode="2" pass="FALSE"/>
      </tapa.expect>
      <tapa.repeat.end/>
      
      <tapa.delay delay="5"/>

      #Send a ReEstablish Request to  SRB1
      <tapa.pj.srb1.reEstReq />
      
      <tapa.expect>
         <tapa.cpj.reestcfm ueId="1" cellId="1" status="1" transId="-1"/>
      </tapa.expect> 
    
      #Send a ReEstablishment request on DRBs ans SRB1
       <tapa.send>
         <tapa.cpj.cfgreq  ueId="1" cellId="1" numEnt="1"
         rbId    = "2"
         rbType  = "1"
         cfgType = "4"/>
      </tapa.send> 

      <tapa.send>
         <tapa.dummy.kwu.reestcmpind ueId="1" cellId="1" rbId="2" rbType="1" suId="1" />
      </tapa.send> 

      <tapa.expect>
         <tapa.cpj.cfgcfm ueId="1" cellId="1" numEnt="1" status  = "1" reason = "0" transId="-1"/> 
      </tapa.expect> 

      <tapa.delue1N2 />

   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
   </tapa.shutdown>

</tapa.testcase>



#
#
#       Test:    1.47
#
#       Desc:    Perform  SRB 1 and DRB 2
#
#       Notes:   TC_REEST_GRP4_2
#                Priority 1
#                SYNC and ASYNC
#                Positive Testcase
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.47"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="36.323 v:8.5.0" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "To verify ReEstablishment of SRBs and DRBs "
      </tapa.desc>

      <tapa.longdesc>
        " 1. Configure SRB1 on RLC and PDCP on ueId=1/2, cellId=1.
          3. Configure DRB2 on RLC and PDCP on ueId=1/2, cellId=1.
          4. Send Data on SRB1 from (ueId=1, CellId=1)to (ueId=2, CellId=1) and validate the data.
          5. Send Data on SRB1 from (ueId=2, CellId=1)to (ueId=1, CellId=1) and validate the data.
          8. Send Data on DRB2 from (ueId=1, CellId=1)to (ueId=2, CellId=1) and validate the data.
          9. ReEstablish SRB1 on PDCP and RLC.
          10. Reestablish DRB2 on PDCP and RLC.
          11. Verify successful reestablishment of SRB1.
          12. Verify successful reestablishment of DRB2.
          13. Shutdown the layer."
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>
      <tapa.drb1cfg />

   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>
      <tapa.ddrb1ue1T2 />

      <tapa.send>
         <tapa.cpj.cfgreq ueId="1" cellId="1" numEnt="1"
            rbId="1"
            cfgType="2"
            rbType="1"
            discReqd="1"
            cfmReqd="1"
            discardTmr="1000"
            dir="3"
            mode="3"
            statusRepReqd="0"
            pdcpSNSize="12"
            hdrCompUsed="1"
            maxCid="0"
            profile="0"
            bitFlag="0"
            isHoPres="0"
            dlCount="0"
            ulCount="0"
            numBits="0"
            ulBitMap="0"
         />
      </tapa.send>
      #Expect a config confirm for all of the above configured entities
      <tapa.expect>
         <tapa.cpj.cfgcfm ueId="1" cellId="1" numEnt="1"
            rbId="1"
            rbType="1"
            status="1"
            reason="0"
            inst="1"
         />
      </tapa.expect>


     #Send PDCP Config for  DRB1 for UE 2
         
      <tapa.send>
         <tapa.cpj.cfgreq ueId="2" cellId="1" numEnt="1"
            rbId="1"
            cfgType="2"
            rbType="1"
            discReqd="1"
            cfmReqd="1"
            discardTmr="1000"
            dir="3"
            mode="3"
            statusRepReqd="0"
            pdcpSNSize="12"
            hdrCompUsed="1"
            maxCid="0"
            profile="0"
            bitFlag="0"
            isHoPres="0"
            dlCount="0"
            ulCount="0"
            numBits="0"
            ulBitMap="0"
         />
      </tapa.send>
      #Expect a config confirm for all of the above configured entities
      <tapa.expect>
         <tapa.cpj.cfgcfm ueId="2" cellId="1" numEnt="1"
            rbId="1"
            rbType="1"
            status="1"
            reason="0"
            inst="1"
         />
      </tapa.expect>
      
      <tapa.obd.directive feedback="TRUE"/>
      #Send PDCP SDU from NH interface for DRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduId="0" sduSize="300" rbId="1" ueId="1" cellId="1" rbType="1" />
      </tapa.send>

      #Expect the first SDU on DRB1 with size 307 at KWU
      <tapa.expect>
         <tapa.dummy.kwu.datreq  numLch="1" ueId="1" cellId="1" 
            lchData="0:0:0:3:1:-1:
                     -1:-1:-1:-1:-1"
            pdcpHdr="1:-1:0:-1" intgProt="FALSE"  ciph ="FALSE" 
            snSize="12" mode = "3" vrfPdcp="TRUE" /> 
      </tapa.expect>

      #Send DRB1 Data to Peer PDCP
      <tapa.send>
         <tapa.dummy.kwu.datind numLch="1" cellId="1"  ueId="2"  rbId="1" rbType="1"
            lchData="3:2:0,0:0,0:0,0:0,0"/>
      </tapa.send>
      <tapa.expect> 
         #Expect Status Response for the received SDU at RGU
         <tapa.dummy.kwu.datreq cellId="1" ueId="2" rbId="1" />
      </tapa.expect>

      #Expect DatInd at PJU for DRB1 Data
      <tapa.expset>
         <tapa.pju.datind  entity="ENTPX" sduSize="300" 
            cellId="1" ueId="2" rbId="1" rbType="1" status="0" numSdu="1"/>
      </tapa.expset>

      #Send a data Cfm to PDCP
      <tapa.send>
         <tapa.dummy.kwu.datcfm cellId="1"  ueId="1" rbId="1" rbType="1"
            />
      </tapa.send>

      #Expect a Data Confirm at RRC for DRB1
      <tapa.expect>
         <tapa.pju.datcfm entity="ENTPX" sduId="0" status="0" numSdu="1" />
      </tapa.expect> 
      
      <tapa.delue1N2 />

   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
   </tapa.shutdown>

</tapa.testcase>


#
#
#       Test:    1.48
#
#       Desc:    Entity configuration for all the modes (TC_CFG_GRP2_1)
#
#       Notes:   None
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.48"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "Configuring PDCP Layer Control Interface(TC_CFG_GRP2_1)"
      </tapa.desc>

      <tapa.longdesc>
         "1. ueId=1, cellId=1, numEnt=6 (1-AM(SRB1), 2-AM(SRB2), 3-UM(DL), 4-UM(UL), 5-UM(BOTH), 6-AM(DRB)) successful configuration with discard timer for 6.
          2. Config Request for RLC for the 6 entities in step 1.
          3. Delete RLC entities.
          4. Delete PDCP entities.
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>
      <tapa.pj.init/>
      <tapa.drb1cfg/>
   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>
      
      <tapa.send>      
         <tapa.cpj.ueidchgreq transId="1" ueId="1" cellId="1" newUeId="1" newCellId="1"
         />
      </tapa.send>
  
      #Expect a confirm for the delete request
      <tapa.expect>
         <tapa.cpj.ueidchgcfm status="2" inst="1"/>
      </tapa.expect>

      <tapa.delue1N2/>
   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
   </tapa.shutdown>

</tapa.testcase>



#
#
#       Test:    1.49
#
#       Desc:    Entity configuration for all the modes (TC_CFG_GRP2_1)
#
#       Notes:   None
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.49"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "Configuring PDCP Layer Control Interface(TC_CFG_GRP2_1)"
      </tapa.desc>

      <tapa.longdesc>
         "1. ueId=1, cellId=1, numEnt=6 (1-AM(SRB1), 2-AM(SRB2), 3-UM(DL), 4-UM(UL), 5-UM(BOTH), 6-AM(DRB)) successful configuration with discard timer for 6.
          2. Config Request for RLC for the 6 entities in step 1.
          3. Delete RLC entities.
          4. Delete PDCP entities.
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>
      <tapa.pj.init/>
      <tapa.drb1cfg/>
   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>
      #Send PDCP SDU from NH interface for DRB1
      <tapa.repeat.start repeatCount="5"/>
      <tapa.send>
         <tapa.pju.datreq entity="ENTPX" sduId="0" sduSize="300" rbId="1" ueId="1" cellId="1" rbType="1" pass="FALSE"/>
      </tapa.send>

      #Expect the first SDU on DRB1 with size 307 at KWU
      <tapa.expect>
         <tapa.dummy.kwu.datreq  numLch="1" ueId="1" cellId="1" 
            lchData="0:0:0:3:1:-1:
                     -1:-1:-1:-1:-1"
            pdcpHdr="1:-1:0:-1" intgProt="FALSE"  ciph ="FALSE" 
            snSize="12" mode = "3" vrfPdcp="TRUE" pass="FALSE"/> 
      </tapa.expect>
      <tapa.repeat.end/>
    
      <tapa.send>
         <tapa.dummy.kwu.staind ueId="1" cellId ="1" rbId="1" rbType="1" sduId="0"/>
      </tapa.send> 
      
      <tapa.expect>
         <tapa.pju.datcfm entity="ENTPX" sduId="0" status="1" numSdu="1" />
      </tapa.expect> 
      
      <tapa.send>
         <tapa.dummy.kwu.staind ueId="1" cellId ="1" rbId="1" rbType="1" sduId="3"/>
      </tapa.send> 
      
      <tapa.expect>
         <tapa.pju.datcfm entity="ENTPX" sduId="3" status="1" numSdu="1" />
      </tapa.expect> 

      <tapa.delue1N2 />
   
   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
   </tapa.shutdown>

</tapa.testcase>



#
#
#       Test:    1.50
#
#       Desc:    Entity configuration for all the modes (TC_CFG_GRP2_1)
#
#       Notes:   None
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.50"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "Configuring PDCP Layer Control Interface(TC_CFG_GRP2_1)"
      </tapa.desc>

      <tapa.longdesc>
         "1. ueId=1, cellId=1, numEnt=6 (1-AM(SRB1), 2-AM(SRB2), 3-UM(DL), 4-UM(UL), 5-UM(BOTH), 6-AM(DRB)) successful configuration with discard timer for 6.
          2. Config Request for RLC for the 6 entities in step 1.
          3. Delete RLC entities.
          4. Delete PDCP entities.
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>
      <tapa.pj.init/>
      <tapa.srb1cfg/>
   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>
      #Send PDCP SDU from NH interface for DRB1
      <tapa.repeat.start repeatCount="5"/>
      #Send PDCP SDU from NH interface for SRB1
      <tapa.send>
         <tapa.pju.datreq entity="ENTNH"  sduId="0" sduSize="300"  rbId="1" rbType="0" ueId="1" cellId="1"/>
      </tapa.send>

      <tapa.expect>
         <tapa.dummy.kwu.datreq  numLch="1" ueId="1" cellId="1" 
            lchData="0:-1:0:1:1:-1:-1"  
            pdcpHdr="-1:-1:0:-1" 
            snSize="5" mode = "3" vrfPdcp="TRUE" /> 
      </tapa.expect>
      <tapa.repeat.end/>
    
      <tapa.send>
         <tapa.dummy.kwu.staind ueId="1" cellId ="1" rbId="1" rbType="0" sduId="1"/>
      </tapa.send> 
      
      <tapa.expect>
         <tapa.pju.datcfm entity="ENTNH" sduId="1" status="1" numSdu="1" />
      </tapa.expect> 
      
      <tapa.send>
         <tapa.dummy.kwu.staind ueId="1" cellId ="1" rbId="1" rbType="0" sduId="4"/>
      </tapa.send> 
      
      <tapa.expect>
         <tapa.pju.datcfm entity="ENTNH" sduId="4" status="1" numSdu="1" />
      </tapa.expect> 

      <tapa.delue1N2/>
   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.51
#
#       Desc:    Multicell configuration at PDCP
#
#       Notes:   
#              
#       Module:  External TCs
#
#       File:    pjac_grp1.xml
#
#
<tapa.testcase id="1.51"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="36.323 v:8.5.0" section="None"/>
      <tapa.module id="External"/>

      <tapa.desc>
         "Data Tranfer on DRB(AM), DRB(UM, 7bit SN) with out rohc compression and
rohc compression enabled (TC_DL_UL_GRP3_20)"
      </tapa.desc>

      <tapa.longdesc>
         "1. Configure DRB1(AM)for ueId=1, cellId=1 and cellId=2, comp disabled with successful configuration.
          2. Configure DRB1(AM)for ueId=2, cellId=1 and cellId=2, comp disabled with successful configuration.
          3. Configure DRB2(UM, DL)for ueId=1 and ueId=2, cellId=1 and cellId=2, comp enabled  with successful configuration.
          4. Configure DRB2(UM, UL )for ueId=3 and ueId=4, cellId=1 and cellId=2, comp enabled with successful configuration.
          5. Send Data from DRB1(ueId=1, CellId=1) to DRB1(udId=2, CellId=1).
          6. Send Data from DRB2(ueId=1, CellId=1) to DRB1(udId=2, CellId=1).
          9. Send Data from DRB1(ueId=1, CellId=2) to DRB1(ueId=2, CellId=2).
          10. Send Data from DRB2(ueId=1, CellId=2) to DRB2(ueId=2, CellId=2).
          11. Delete RLC UE entities.
          12. Delete PDCP UE entities."
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.pj.directive successTc="TRUE"/>

      #Initialize PDCP layer
      <tapa.pj.init/>

      <tapa.delay delay="2"/>

      #Configure the SRB1 at RLC and PDCP Layer 
      <tapa.srb1cfg discardTmr0="0"/>
      <tapa.srb1cfg.cell2 discardTmr0="0"/>

      <tapa.delay delay="2"/>


   </tapa.cfg>
 
   # Test Steps subsection
   <tapa.test>

      #Send Data on SRB1 from ueId=1 CellId=1 to ueId=2 CellId=1 
      <tapa.dsrb1ue1T2/>

       #Send Data on SRB1 from ueId=2 CellId=1 to ueId=1 CellId=1 
      <tapa.dsrb1ue2T1/>

	  #Send Data on SRB1 from ueId=1 CellId=2 to ueId=2 CellId=2 
      <tapa.dsrb1ue1T2.cell2/>

       #Send Data on SRB1 from ueId=2 CellId=2 to ueId=1 CellId=2 
      <tapa.dsrb1ue2T1.cell2/>
 
     #Cfg DRB1 and DRB2 
      <tapa.drb1cfg />
 
      <tapa.drb2cfg />

	 #Cfg DRB1 and DRB2 
      <tapa.drb1cfg.cell2 />
 
      <tapa.drb2cfg.cell2 />

     #Send data on DRB1 and DRB2 
      <tapa.ddrb1ue1T2 bo="302"  totBufSize0="309" />
 
      <tapa.ddrb2ue1T2/>

	  #Send data on DRB1 and DRB2 
      <tapa.ddrb1ue1T2.cell2 bo="302"  totBufSize0="309" />
 
      <tapa.ddrb2ue1T2.cell2/>


     #Delete RCL and PDCP entity
     <tapa.delue1N2/>
      <tapa.delay delay="2"/>

	  #Delete RCL and PDCP entity
     <tapa.delue1N2.cell2/>
      <tapa.delay delay="2"/>

   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>
      <tapa.pj.deinit/>
      <tapa.delay delay="2"/> 
   </tapa.shutdown>

</tapa.testcase>


   # Shutdown subsectitn
# DO NOT DELETE THIS LINE -- TC number generation script depends on it.
# xyzabcend

#/********************************************************************30**
#
#         End of file:     $SID$
#
#*********************************************************************31*/
#
#
#/********************************************************************40**
#
#        Notes:
#
#*********************************************************************41*/
#
#/********************************************************************50**
#
#*********************************************************************51*/
#
#
#/********************************************************************60**
#
#        Revision history:
#
#*********************************************************************61*/
#
#/********************************************************************90**
#
#     ver       pat    init                  description
#------------ -------- ---- ----------------------------------------------
#/main/1         ---     vb    1. LTE PDCP Initial Release 2.1.
#*********************************************************************91*/
