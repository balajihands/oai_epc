#
#/********************************************************************20**
#
#     Name:    RLC 
#
#     Type:    XML Test File
#
#     Desc:    XML Based Test Cases
#
#     File:    kwac_grp2.xml
#
#     Sid:      $SID$
#
#     Prg:     Group 2 Test Cases  
#
#*********************************************************************21*/

# DO NOT DELETE THIS LINE -- TC number generation script depends on it.
# xyzabcstart=2:1:Group 2 Test Cases :kwac_grp2.xml

#
#
#       Test:    2.1
#
#       Desc:    Statistics Request Verification
#
#       Notes:   None
#              
#       Module:  LMM
#
#       File:    kwac_grp2.xml
#
#
<tapa.testcase id="2.1"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="lmm"/>

      <tapa.desc>
         "Configuring RLC Layer Manager and getting default values of statistics"
      </tapa.desc>

      <tapa.longdesc/>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
    <tapa.cfg>
      <tapa.kw.init/>
      <tapa.delay delay="2"/>  
   </tapa.cfg>
    
   # Test Steps subsection
   <tapa.test>
   <tapa.delay delay="2"/>
 
   <tapa.send>
      <tapa.lkw.stsreq inst="1" action="0" elmnt="1"/>
   </tapa.send>

   <tapa.expect>
       <tapa.lkw.stscfm inst="1"/>
   </tapa.expect>

   <tapa.delay delay="2"/>

   <tapa.send>
      <tapa.lkw.stsreq inst="1" action="1" elmnt="1"/>
   </tapa.send>

   <tapa.expect>
       <tapa.lkw.stscfm inst="1"/>
   </tapa.expect>

   <tapa.delay delay="2"/>

   <tapa.send>
      <tapa.lkw.stsreq inst="1" action="1" elmnt="185"/>
   </tapa.send>

   <tapa.expect>
       <tapa.lkw.stscfm inst="1"/>
   </tapa.expect>

   <tapa.delay delay="2"/>

   <tapa.send>
      <tapa.lkw.stsreq inst="1" action="0" elmnt="185"/>
   </tapa.send>

   <tapa.expect>
       <tapa.lkw.stscfm inst="1"/>
   </tapa.expect>

   <tapa.delay delay="2"/>

   <tapa.send>
      <tapa.lkw.stsreq inst="1" action="0" elmnt="184"/>
   </tapa.send>

   <tapa.expect>
       <tapa.lkw.stscfm inst="1"/>
   </tapa.expect>

   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>

   <tapa.kw.deinit/>
      
   <tapa.delay delay="5"/> 
      
   </tapa.shutdown>
</tapa.testcase>

#
#
#       Test:    2.2
#
#       Desc:    Debug and Trace Control Request Verification
#
#       Notes:   None
#              
#       Module:  LMM
#
#       File:    kwac_grp2.xml
#
#
<tapa.testcase id="2.2"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="lmm"/>

      <tapa.desc>
         "Configuring RLC Layer Manager and debug and trace control request"
      </tapa.desc>

      <tapa.longdesc/>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
    <tapa.cfg>
      <tapa.kw.init/>
      <tapa.delay delay="2"/>  
   </tapa.cfg>
    
   # Test Steps subsection
   <tapa.test>
   <tapa.delay delay="2"/>
 
   <tapa.send>
      <tapa.lkw.dbgcntrlreq inst="0" isEnable="1" dbgMask="100"/>
   </tapa.send>

   <tapa.expect>
       <tapa.lkw.cntrlcfm inst="0"/>
   </tapa.expect>

   <tapa.delay delay="2"/>
   
  <tapa.send>
      <tapa.lkw.dbgcntrlreq inst="0" isEnable="0" dbgMask="100"/>
   </tapa.send>

   <tapa.expect>
       <tapa.lkw.cntrlcfm inst="0" />
   </tapa.expect>

  <tapa.delay delay="2"/>  
 
   <tapa.send>
      <tapa.lkw.trccntrlreq inst="0" isEnable="1" trcMask="1" trcLen="1"/>
   </tapa.send>

   <tapa.expect>
       <tapa.lkw.cntrlcfm inst="0"/>
   </tapa.expect>

   <tapa.delay delay="2"/>

   <tapa.send>
      <tapa.lkw.trccntrlreq inst="0" isEnable="0" traMask="1" trcLen="1"/>
   </tapa.send>

   <tapa.expect>
       <tapa.lkw.cntrlcfm inst="0"/>
   </tapa.expect>

   <tapa.delay delay="2"/>

   <tapa.send>
      <tapa.lkw.ustacntrlreq inst="0" isEnable="0"/>
   </tapa.send>

   <tapa.expect>
       <tapa.lkw.cntrlcfm inst="0"/>
   </tapa.expect>

  <tapa.delay delay="2"/>

   <tapa.send>
      <tapa.lkw.ustacntrlreq inst="0" isEnable="1"/>
   </tapa.send>

   <tapa.expect>
       <tapa.lkw.cntrlcfm inst="0"/>
   </tapa.expect>

   <tapa.delay delay="2"/>

   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>

   <tapa.kw.deinit/>
      
   <tapa.delay delay="5"/> 
      
   </tapa.shutdown>

</tapa.testcase>


#
#
#       Test:    2.3
#
#       Desc:    RLC Layer Manager Configuration with bind timer expiry
#
#       Notes:   None
#              
#       Module:  LMM
#
#       File:    kwac_grp2.xml
#
#
<tapa.testcase id="2.3"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="lmm"/>

      <tapa.desc>
         "Configuring RLC Layer Manager"
      </tapa.desc>

      <tapa.longdesc/>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
    <tapa.cfg>
      <tapa.kw.init2/>
      <tapa.delay delay="2"/>  
   </tapa.cfg>
    
   # Test Steps subsection
   <tapa.test>

   <tapa.delay delay="2"/>

   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>

   <tapa.kw.deinit/>
      
   <tapa.delay delay="5"/> 
      
   </tapa.shutdown>
</tapa.testcase>

#
#
#       Test:    2.4
#
#       Desc:    Verification of BCCH PCCH and CCCH SDU transfer with trace
#       enabled
#
#       Notes:   None
#              
#       Module:  RLC 
#
#       File:    kwac_grp2.xml
#
#
<tapa.testcase id="2.4">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="TM"/>

      <tapa.desc>
         "RLC TM mode data transfer for BCCH PCCH and CCCH"
      </tapa.desc>

      <tapa.longdesc>
        "Acceptance test case No:1
         1.Configure RLC . With general configuration , sap configuration
         2.Configurre RLC entity with BCCH PCCH and CCCH.
         4.Dummy RRC sends Dat request with size (configured value) for all the three entity types
         5.RLC sends StaRes()
         6.Dummy MAC sends StaInd()
         7.RLC sends DatReq() to MAC
         8.Dummy MAC sends DatInd() to RLC for CCCH data
         9.RLC sends DatInd() to Dummy RRC" 
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>

      <tapa.ifndef/>

      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.kw.init/>
      <tapa.ckw.tmcfg/>
   </tapa.cfg>

   <tapa.test>
      # Send Trace Control Request to enable trace
      <tapa.send>
         <tapa.lkw.trccntrlreq inst="1" isEnable="1" trcMask="1" trcLen="50"/>
      </tapa.send>

      # Expect the Trace control confirm
      <tapa.expect>
         <tapa.lkw.cntrlcfm inst="1" />
      </tapa.expect>

#Pradeep - start added Trace Control Request for RLC-DL
      <tapa.send>
         <tapa.lkw.trccntrlreq inst="0" isEnable="1" trcMask="1" trcLen="50"/>
      </tapa.send>

      # Expect the Trace control confirm
      <tapa.expect>
         <tapa.lkw.cntrlcfm inst="0" />
      </tapa.expect>
#Pradeep - end
      
      #Send SDU from RRC for BCCH
      <tapa.send>
         <tapa.kwu.datreq entity="ENTNH" rbId="1" rbType="0" ueId="0" cellId="1" 
            sduId="1" sduSize="300" sfn="2" subframe="3" type="1"/>
      </tapa.send>

      # Expect Trace Indication for CStaRsp Event
      <tapa.expect>
         <tapa.lkw.trcind event="8" inst="0"/>
      </tapa.expect>

      #Expect Status Response for the received SDU
      <tapa.expect>
         <tapa.dummy.rgu.cstarsp bo="300" cellId="1" lcId="1" sfn="2" subframe="3"/>
      </tapa.expect>

      #Send SDU from RRC for PCCH
      <tapa.send>
         <tapa.kwu.datreq entity="ENTNH" rbId="2" rbType="0" ueId="0" cellId="1"
            sduId="2" sduSize="400" sfn="3" subframe="4" type="2"/>
      </tapa.send>

      # Expect Trace Indication for CStaRsp Event
      <tapa.expect>
         <tapa.lkw.trcind event="8" inst="0"/>
      </tapa.expect>

      #Expect Status Response for the received SDU
      <tapa.expect>
         <tapa.dummy.rgu.cstarsp bo="400" cellId="1" lcId="2" sfn="3" subframe="4"/>
      </tapa.expect>

      #Send SDU from RRC for CCCH
      <tapa.send>
         <tapa.kwu.datreq entity="ENTNH" rbId="3" rbType="0" ueId="0" cellId="1"
            type="3" sduId="3" sduSize="500" conResId="100" rnti="30"
            isRej="FALSE"/>
      </tapa.send>

      # Expect Trace Indication for CStaRsp Event
      <tapa.expect>
         <tapa.lkw.trcind event="8" inst="0"/>
      </tapa.expect>

      #Expect Status Response for the received SDU
      <tapa.expect>
         <tapa.dummy.rgu.cstarsp bo="500" cellId="1" lcId="3" 
            conResId="100" rnti="30" isRej="FALSE"/>
      </tapa.expect>

      ########################################################################################
      #Expect the first SDU with sfn 2 and subframe 3 for BCCH
      <tapa.send>
         <tapa.dummy.rgu.cstaind bo="300" lcId="1" cellId="1" transId="320"/>
      </tapa.send>

      # Expect Trace Indication for CDatReq Event
      <tapa.expect>
         <tapa.lkw.trcind event="9" inst="0"/>
      </tapa.expect>
      <!--   # Expect Trace Indication for CDatReq Event
      <tapa.expect>
         <tapa.lkw.trcind event="4" inst="0"/>
      </tapa.expect>  
      
#pradeep - fixing here

      # Expect CDatReq
      <tapa.expect>
         <tapa.dummy.rgu.cdatreq cellId="1" lcId="3" lcType="3"
            pduSz="500" conResId="100" rnti="30" isRej="FALSE" transId="3"/>
      </tapa.expect>  

      #Send only CCCH data in uplink
      <tapa.send>
         <tapa.dummy.rgu.cdatind inst="1" lcId="3" cellId="2" rnti="30"
            pduSize="500" transId="3"/>
      </tapa.send>  

#Venki - fixing here
      # Expect Trace Indication for DatInd Event
      <tapa.expect>
         <tapa.lkw.trcind event="84" inst="1"/>
      </tapa.expect>
      
      # Expect DatInd in KWU
      <tapa.expect>
         <tapa.kwu.datind  entity="ENTNH" sduSize="500" rnti="30" inst="1" />
      </tapa.expect>   -->

      # Send Trace Control Request to enable trace
      <tapa.send>
         <tapa.lkw.trccntrlreq isEnable="0" trcMask="1" trcLen="50" inst="1"/>
      </tapa.send>

      # Expect the Trace control confirm
      <tapa.expect>
         <tapa.lkw.cntrlcfm inst="1"/>
      </tapa.expect>

      <tapa.delay delay="2"/>

   </tapa.test> 
   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>

   <tapa.kw.deinit/>
      
   <tapa.delay delay="5"/> 
      
   </tapa.shutdown>
</tapa.testcase>

#
#
#       Test:    2.5
#
#       Desc:    Verification of single UM SDU with trace enabled
#
#       Notes:   None
#
#       Module:  RLC
#
#       File:    kwac_grp2.xml
#
#
<tapa.testcase id="2.5">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="um"/>

      <tapa.desc>
         "Verification of BO"
      </tapa.desc>

      <tapa.longdesc>
        "Acceptance test case No:1
         1.Configure RLC . With general configuration , sap configuration
         2.RLC entity Configuration.
         3.PDCP sends Dat request with size (configured value)
         4.RLC sends StaRes()
         5.MAC sends StaInd()
         6.RLC sends DatReq() to MAC
         7.MAC sends DatInd() to RLC
         8.RLC sends DatInd() to PDCP"
      </tapa.longdesc>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef/>

      <tapa.ifndef/>

      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection

   <tapa.cfg>
      <tapa.kw.init/>
      <tapa.delay delay="2"/>
      <tapa.kw.umcfg/>
      <tapa.delay delay="2"/>
   </tapa.cfg>

#Venki - fixing here      
   # Test Steps subsection
   <tapa.test>
      # Send Trace Control Request to UL RLC(inst = 1)to enable trace
      <tapa.send>
         <tapa.lkw.trccntrlreq isEnable="1" traMask="1" trcLen="50" inst="1"/>
      </tapa.send>

      # Expect the Trace control confirm
      <tapa.expect>
         <tapa.lkw.cntrlcfm inst="1"/>
      </tapa.expect>

      # Send Trace Control Request to DL RLC(inst = 0)to enable trace
      <tapa.send>
         <tapa.lkw.trccntrlreq isEnable="1" traMask="1" trcLen="50" inst="0"/>
      </tapa.send>

      # Expect the Trace control confirm
      <tapa.expect>
         <tapa.lkw.cntrlcfm inst="0"/>
      </tapa.expect>

      # PDCP sends data request with SDU size 300
      <tapa.send>
         <tapa.kwu.datreq entity="ENTPJ" sduId="1" sduSize="300" rbId="1"
            ueId="1" cellId="1" rbType="1"/>
      </tapa.send>

      # Expect Trace Indication for DatInd Event
      <tapa.expect>
         <tapa.lkw.trcind event="10" inst="0"/>
      </tapa.expect>

      #MAC expects the Status Response from RLC
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="1" 
            bo="300" estHdrSz="3" staPduPrsnt="0"/>
      </tapa.expect>

      # MAC notifies BO with size as 304
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="305" lcId="1" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      # Expect Trace Indication for DatInd Event
      <tapa.expect>
         <tapa.lkw.trcind event="6" inst="0"/>
      </tapa.expect>

      #MAC expects data request from RLC
      <tapa.expect>
         <tapa.dummy.rgu.ddatreq numLch="1" ueId="1" cellId="1" transId="1"
            lchData="0:0:0:1:1:302:
            0:0:1:0:0"/>
      </tapa.expect>

      #MAC indicates Data Indication to Peer RLC
      <tapa.send>
         <tapa.dummy.rgu.ddatind numLch="1" cellId="1"  ueId="2" transId="1"
            lchData="1:2:0,0:0,0:0,0:0,0"/>
      </tapa.send>

      # Expect Trace Indication for DatInd Event
      <tapa.expect>
         <tapa.lkw.trcind event="84" inst="1"/>
      </tapa.expect>

      #RLC Indicates Data Indication to Peer PDCP
      <tapa.expect>
         <tapa.kwu.datind entity="ENTPJ" 
            cellId="1" ueId="2" rbId="1" inst="1"/>
      </tapa.expect>

      # Send Trace Control Request to enable trace
      <tapa.send>
         <tapa.lkw.trccntrlreq isEnable="0" traMask="1" trcLen="50" inst="1"/>
      </tapa.send>

      # Expect the Trace control confirm
      <tapa.expect>
         <tapa.lkw.cntrlcfm inst="1"/>
      </tapa.expect>

   </tapa.test>

   <tapa.clean/>

   # Shutdown subsectitn
   <tapa.shutdown>

   <tapa.kw.deinit/>

   <tapa.delay delay="5"/>

   </tapa.shutdown>
</tapa.testcase>

#
#
#       Test:    2.6
#
#       Desc:    Verification of Successful delivery of a AM sdu with trace
#       enabled
#
#       Notes:   None
#
#       Module:  RLC
#
#       File:    kwac_grp2.xml
#
#
<tapa.testcase id="2.6">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="AM"/>

      <tapa.desc>
         "RLC AM mode data transfer for a SDU"
      </tapa.desc>

      <tapa.longdesc>
         "1.Configure RLC . With general configuration , sap configuration
         2.RLC entity Configuration.
         3.Tx PDCP sends Dat request with size (configured value)
         4.Tx RLC sends DStaRsp()
         5.MAC sends DStaInd()
         6.Tx RLC sends DDatReq() to MAC
         7.MAC sends DDatInd() to RLC
         8.Rx RLC sends DDatInd() to Rx PDCP
         9.Rx RLC send DStaRsp() to MAC
         10.MAC sends DStaInd() to Rx RLC
         11.Rx RLC sends DDatReq() to MAC
         12.MAC sends DDatReq() to Tx RLC
         13.Tx RLC sends DatCfm() to Tx PDCP"
      </tapa.longdesc>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef/>

      <tapa.ifndef/>

      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.kw.init/>
      <tapa.delay delay="2"/>
      <tapa.ckw.amcfg/>
      <tapa.delay delay="2"/>
   </tapa.cfg>

   <tapa.test>
      # Send Trace Control Request to enable trace
      <tapa.send>
         <tapa.lkw.trccntrlreq isEnable="1" traMask="1" trcLen="50" inst="1"/>
      </tapa.send>

      # Expect the Trace control confirm
      <tapa.expect>
         <tapa.lkw.cntrlcfm  inst="1"/>
      </tapa.expect>
      
      # Send Trace Control Request to enable trace
      <tapa.send>
         <tapa.lkw.trccntrlreq isEnable="1" traMask="1" trcLen="50" inst="0"/>
      </tapa.send>

      # Expect the Trace control confirm
      <tapa.expect>
         <tapa.lkw.cntrlcfm  inst="0"/>
      </tapa.expect>


      #Send SDU from PDCP for DCCH in ue 1
      <tapa.send>
         <tapa.kwu.datreq entity="ENTPJ" rbId="1" ueId="1" cellId="1" rbType="1"
            sduId="1" sduSize="300" />
      </tapa.send>

      # Expect Trace Indication for DatInd Event
      <tapa.expect>
         <tapa.lkw.trcind event="10" inst="0"/>
      </tapa.expect>

      #Expect Status Response for the received SDU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="1" 
            bo="300" estHdrSz="2" staPduPrsnt="0"/>
      </tapa.expect>

      ########################################################################################
      #Expect the first SDU with size 302
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="305" lcId="1" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      # Expect Trace Indication for DatInd Event
      <tapa.expect>
         <tapa.lkw.trcind event="6" inst="0"/>
      </tapa.expect>

      # Expect DDatReq RGU
      <tapa.expect>
         <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" transId="1"
            lchData="0:0:0:1:1:302:
            0:0:1:1:0"  />
      </tapa.expect>
      ########################################################################################
      #Send the PDU in uplink for lcId 1 in ue 2
      <tapa.send>
         <tapa.dummy.rgu.ddatind numLch="1" cellId="1"  ueId="2" transId="1"
            lchData="1:2:0,0:0,0:0,0:0,0"/>
      </tapa.send>

      # Expect Trace Indication for DatInd Event
      <tapa.expect>
         <tapa.lkw.trcind event="84" inst="1"/>
      </tapa.expect>

      #Expect a Data Indication to KWU in ue 2
      <tapa.expect>
         <tapa.kwu.datind  entity="ENTPJ" sduSize="300" 
            cellId="1" ueId="2" rbId="1" />
      </tapa.expect>

      # Expect Trace Indication for DatInd Event
      <tapa.expect>
         <tapa.lkw.trcind event="10" inst="0"/>
      </tapa.expect>
      
      #Expect a starsp for logical channel 1 in ue 2 for the control PDU
      #since we have a trigger for status report as duplicate pdu is received
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="2" lcId="1" 
            bo="2" estHdrSz="0"  staPduPrsnt="1"/>
      </tapa.expect>
      ########################################################################################
      #Send a datind for logical channel 1 in ue 2 for the status pdu
      <tapa.send>
         <tapa.dummy.rgu.dstaind lcId="1" ueId="2" cellId="1" numLch="1" 
            totBufSize="5" transId="2" />
      </tapa.send>

      # Expect Trace Indication for DatInd Event
      <tapa.expect>
         <tapa.lkw.trcind event="6" inst="0"/>
      </tapa.expect>

      #Expect a data request for logical channel 1 in ue 2
      <tapa.expect>
         <tapa.dummy.rgu.ddatreq  numLch="1"  cellId="1" ueId="2" transId="2"
            lchData="0:0:1:1:1:2:-1:-1:-1:0:-1" />
      </tapa.expect>
      #Send a data indication of the Status PDU for the PDU sent to 2nd AM entity
      <tapa.send>
         <tapa.dummy.rgu.ddatind numLch="1" cellId="1"  ueId="1" transId="2"
            lchData="1:1:0:0:0:0" />
      </tapa.send>

      # AGHOSH commented test
      # Expect Trace Indication for DatInd Event
      #<tapa.expect>
      #   <tapa.lkw.trcind event="85" inst="0"/>
      #</tapa.expect>

      #Expect a Status Indication to PDCP about reception of the SDU at the peer entity
      <tapa.expect>
         <tapa.kwu.datcfm entity="ENTPJ" numSduIds="1" sduId="0" ueId="1" cellId="1" rbId="1"
            rbType="1"/>
      </tapa.expect>

      # Send Trace Control Request to enable trace
      <tapa.send>
         <tapa.lkw.trccntrlreq isEnable="0" traMask="1" trcLen="50" inst="1"/>
      </tapa.send>

      # Expect the Trace control confirm
      <tapa.expect>
         <tapa.lkw.cntrlcfm inst="1"/>
      </tapa.expect>

   </tapa.test>
   # Clean subsection
   <tapa.clean/>

   # Shutdown subsectitn
   <tapa.shutdown>

   <tapa.kw.deinit/>

   <tapa.delay delay="5"/>

   </tapa.shutdown>
</tapa.testcase>

#
#
#       Test:    2.7
#
#       Desc:    RLC Layer Manager Configuration SAP Bind Error scenario.
#
#       Notes:   None
#              
#       Module:  LMM
#
#       File:    kwac_grp2.xml
#
#
<tapa.testcase id="2.7"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="lmm"/>

      <tapa.desc>
         "Configuring RLC Layer Manager"
      </tapa.desc>

      <tapa.longdesc/>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
    <tapa.cfg>
      <tapa.kw.init/>
      <tapa.delay delay="2"/>  
   </tapa.cfg>
    
   # Test Steps subsection
   <tapa.test>

      # Send CKW Bind Request with invalid suId
      <tapa.send>
         <tapa.ckw.bndreq inst="1" spId="0" suId="1"/>
      </tapa.send>

      # Expect Unsolicitated status Indication
      <tapa.expect>
         <tapa.lkw.staind inst="1" event="259" cause="13"/>
      </tapa.expect>

      # Expect Bind Confirm
      # By default sucess status="1"
      # For failure expect status="2"
      <tapa.expect>
         <tapa.ckw.bndcfm inst="1" status="2"/>
      </tapa.expect>

      # Send KWU RRC Bind Request with invalid suId
      <tapa.send>
         <tapa.kwu.bndreq inst="0" spId="0" suId="1" entity="ENTNH" error="1"/>
      </tapa.send>

      # Expect Unsolicitated status Indication
      <tapa.expect>
         <tapa.lkw.staind inst="0" event="258" cause="13"/>
      </tapa.expect>

      # Expect Bind Confirm
      # By default sucess status="1"
      # For failure expect status="2"
      <tapa.expect>
         <tapa.kwu.bndcfm inst="0" status="2" entity="ENTNH"/>
      </tapa.expect>

      # Send KWU PDCP Bind Request with invalid suId
      # By default sucess status="1"
      # For failure expect status="2"
      <tapa.send>
         <tapa.kwu.bndreq inst="1" spId="1" suId="1" entity="ENTPJ" error="1"/>
      </tapa.send>

      # Expect Unsolicitated status Indication
      <tapa.expect>
         <tapa.lkw.staind inst="1" event="258" cause="13"/>
      </tapa.expect>

      # Expect Bind Confirm
      <tapa.expect>
         <tapa.kwu.bndcfm  inst="1" status="2" entity="ENTPJ"/>
      </tapa.expect>

      ############# CONTROL REQUEST TO BIND RGU ##############

      # Send control request to Bind RGU SAP
      <tapa.send>
         <tapa.lkw.sapcntrlreq inst="0" elmnt="STRGUSAP" action="ABND" spId="0" suId="0"/>
      </tapa.send>

      <tapa.expect>
         # Expect Control Confirm with Bind Confirm
         <tapa.lkw.cntrlcfm inst="0" status="LCM_PRIM_NOK" reason="LCM_REASON_INVALID_STATE"/>
      </tapa.expect>

      ############# CONTROL REQUEST TO BIND RGU END ##########
   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>

   <tapa.kw.deinit/>
      
   <tapa.delay delay="5"/> 
      
   </tapa.shutdown>
</tapa.testcase>


#
#
#       Test:    2.8
#
#       Desc:    RLC Layer Manager Configuration RGU Bind Confirm Failure
#
#       Notes:   None
#              
#       Module:  LMM
#
#       File:    kwac_grp2.xml
#
#
<tapa.testcase id="2.8"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="lmm"/>

      <tapa.desc>
         "Configuring RLC Layer Manager"
      </tapa.desc>

      <tapa.longdesc/>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg/>
    
   # Test Steps subsection
   <tapa.test>
 
      #################### GEN CONFIG for RLC-DL ###################
      # Send General Configuration Request
      <tapa.send>
         <tapa.lkw.gencfg inst="0" rlcMode="1" maxUe="3" maxKwuSaps="2" idleIntv="15"
            timeRes="10" />
      </tapa.send>

      # Expect General Configuration Confirm 
      <tapa.expect>
         <tapa.lkw.cfgcfm inst="0" status="0" reason="0"/>
      </tapa.expect>

      #################### GEN CONFIG for RLC-UL ###################
      <tapa.send>
         <tapa.lkw.gencfg inst="1" rlcMode="2" maxUe="3" maxKwuSaps="2" idleIntv="15"
            timeRes="10" />
      </tapa.send>

      # Expect General Configuration Confirm
      <tapa.expect>
         <tapa.lkw.cfgcfm inst="1" status="0" reason="0"/>
      </tapa.expect>


      ################## SAP CONFIGURATION START #################
      ################## SAP CONFIGURATION START RLC-UL#################

      # Send CKW SAP Configuration Request
      <tapa.send>
         <tapa.lkw.sapcfg inst="1" elmnt="STCKWSAP" ent="ENTNH" sapId="KWAC_CKW_SAP" />
      </tapa.send>

      # Expect SAP Configuration Confirm
      <tapa.expect>
         <tapa.lkw.cfgcfm inst="1" status="0" reason="0"/>
      </tapa.expect>

      # Send KWU SAP RRC Configuration Request
      <tapa.send>
         <tapa.lkw.sapcfg elmnt="STKWUSAP" ent="ENTNH" sapId="KWAC_NH_SAP"
            selector="1" inst="1"/>
      </tapa.send>

      # Expect KWU SAP RRC Configuration Confirm
      <tapa.expect>
         <tapa.lkw.cfgcfm inst="1" status="0" reason="0"/>
      </tapa.expect>

      # Send KWU SAP PDCP Configuration Request
      <tapa.send>
         <tapa.lkw.sapcfg elmnt="STKWUSAP" ent="ENTPJ" sapId="KWAC_PJ_SAP"
            selector="2" inst="1"/>
      </tapa.send>

      # Expect KWU SAP PDCP Configuration Confirm
      <tapa.expect>
         <tapa.lkw.cfgcfm inst="1" status="0" reason="0"/>
      </tapa.expect>

      # Send RGU SAP MAC Configuration Request
      <tapa.send>
         <tapa.lkw.sapcfg inst="1" elmnt="STRGUSAP" ent="ENTRG" sapId="KWAC_RG_SAP"/>
      </tapa.send>

      # Expect RGU SAP MAC Configuration Confirm
      <tapa.expect>
         <tapa.lkw.cfgcfm inst="1" status="0" reason="0"/>
      </tapa.expect>

      # Send UDX SAP Configuration Request
      <tapa.send>
         <tapa.lkw.sapcfg elmnt="STUDXSAP" ent="ENTKW" sapId="KWAC_UDX_SAP" inst="1"/>
      </tapa.send>

      # Expect SAP Configuration Confirm
      <tapa.expect>
         <tapa.lkw.cfgcfm inst="1" status="0" reason="0"/>
      </tapa.expect>
      ################## SAP CONFIGURATION END RLC-UL ##################

      ################## SAP CONFIGURATION START RLC-DL ################
      # Send KWU SAP RRC Configuration Request
      <tapa.send>
         <tapa.lkw.sapcfg elmnt="STKWUSAP" ent="ENTNH" sapId="KWAC_NH_SAP"
            selector="1" inst="0"/>
      </tapa.send>

      # Expect KWU SAP RRC Configuration Confirm
      <tapa.expect>
         <tapa.lkw.cfgcfm inst="0" status="0" reason="0"/>
      </tapa.expect>

      # Send KWU SAP PDCP Configuration Request
      <tapa.send>
         <tapa.lkw.sapcfg elmnt="STKWUSAP" ent="ENTPJ" sapId="KWAC_PJ_SAP"
            selector="2" inst="0"/>
      </tapa.send>

      # Expect KWU SAP PDCP Configuration Confirm
      <tapa.expect>
         <tapa.lkw.cfgcfm inst="0" status="0" reason="0"/>
      </tapa.expect>

      # Send RGU SAP MAC Configuration Request
      <tapa.send>
         <tapa.lkw.sapcfg elmnt="STRGUSAP" ent="ENTRG" sapId="KWAC_RG_SAP" inst="0"/>
      </tapa.send>

      # Expect RGU SAP MAC Configuration Confirm
      <tapa.expect>
         <tapa.lkw.cfgcfm inst="0" status="0" reason="0"/>
      </tapa.expect>

      # Send UDX SAP Configuration Request
      <tapa.send>
         <tapa.lkw.sapcfg elmnt="STUDXSAP" ent="ENTKW" sapId="KWAC_UDX_SAP" inst="0"/>
      </tapa.send>

      # Expect SAP Configuration Confirm
      <tapa.expect>
         <tapa.lkw.cfgcfm inst="0" status="0" reason="0"/>
      </tapa.expect>
      ################## SAP CONFIGURATION END RLC-DL #################

      ########################################################
      #           BINDING START
      ########################################################

      ########################################################
      #           RLC - UL
      ########################################################
      # Send CKW Bind Request
      <tapa.send>
         <tapa.ckw.bndreq inst="1" spId="0" suId="0"/>
      </tapa.send>

      # Expect Bind Confirm
      # By default sucess status="1"
      # For failure expect status="2"
      <tapa.expect>
         <tapa.ckw.bndcfm inst="1"/>
      </tapa.expect>

      # Send KWU RRC Bind Request
      <tapa.send>
         <tapa.kwu.bndreq inst="1" spId="0" suId="0" entity="ENTNH"/>
      </tapa.send>

      # Expect Bind Confirm
      # By default sucess status="1"
      # For failure expect status="2"
      <tapa.expect>
         <tapa.kwu.bndcfm inst="1" entity="ENTNH"/>
      </tapa.expect>

      # Send KWU PDCP Bind Request
      # By default sucess status="1"
      # For failure expect status="2"
      <tapa.send>
         <tapa.kwu.bndreq inst="1" spId="1" suId="0" entity="ENTPJ"/>
      </tapa.send>

      # Expect Bind Confirm
      <tapa.expect>
         <tapa.kwu.bndcfm inst="1" entity="ENTPJ"/>
      </tapa.expect>

#Pradeep - start trial
   <tapa.send>
      <tapa.lkw.ustacntrlreq inst="0" isEnable="1"/>
   </tapa.send>

   <tapa.expect>
       <tapa.lkw.cntrlcfm inst="0"/>
   </tapa.expect>

   <tapa.delay delay="2"/>

   <tapa.send>
      <tapa.lkw.ustacntrlreq inst="1" isEnable="1"/>
   </tapa.send>

   <tapa.expect>
       <tapa.lkw.cntrlcfm inst="1"/>
   </tapa.expect>

#Pradeep - end trial
      ############# CONTROL REQUEST TO BIND RGU ##############

      # Send control request to Bind RGU SAP
      <tapa.send>
         <tapa.lkw.sapcntrlreq inst="1" elmnt="STRGUSAP" action="ABND" spId="0" suId="0"/>
      </tapa.send>

      <tapa.expset>
         # Expect Bind Request From RLC
         <tapa.dummy.rgu.bndreq inst="1" spId="0" suId="0"/>
         # Expect Control Confirm with Bind Confirm
         <tapa.lkw.cntrlcfm inst="1" status="LCM_PRIM_OK"/>
      </tapa.expset>

      # Expect Bind Confirm to RLC
      <tapa.send>
         <tapa.dummy.rgu.bndcfm inst="1" suId="0" status="2" />
      </tapa.send>

      # Expect Unsolicitated status Indication
      <tapa.expect>
         <tapa.lkw.staind inst="1" event="8" cause="257"/>
      </tapa.expect>

      ############# CONTROL REQUEST TO BIND RGU END ##########

      ########################################################
      #                 BINDING END
      ########################################################

   </tapa.test>

   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>

   <tapa.kw.deinit/>
      
   <tapa.delay delay="5"/> 
      
   </tapa.shutdown>
</tapa.testcase>

#kw005.201 added test cases for LM statistics
#
#
#       Test:    2.9
#
#       Desc:    Statistics verification in RLC
#
#       Notes:   None
#              
#       Module:  CKW CFG
#
#       File:    kwac_grp2.xml
#
#

<tapa.testcase id="2.9"> 

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="ckwcfg"/>

      <tapa.desc>
         "Statistics verification in RLC. This test case verifies numOfRb and numUe
         configured."
      </tapa.desc>

      <tapa.longdesc>
         "1. ueId=1, cellId=1, numEnt=5 (1-UM, 2-UM, 3-UM, 4-AM, 5-AM) successful configuration.
          2. ueId=2, cellId=1, numEnt=5 (1-UM, 2-UM, 3-UM, 4-AM, 5-AM) successful configuration.
          3. ueId=3, cellId=1, numEnt=5 (1-UM, 2-UM, 3-UM, 4-AM, 5-AM) successful configuration.
          4. ueId=4, cellId=1, numEnt=5 (1-UM, 2-UM, 3-UM, 4-AM, 5-AM) successful configuration.
          5. Send statistics request to get numUe, numLch, numOfRb configured.
          6. Vefify the statistics confirmation.
          7. Send Configuration request to delete 1 UE.
          8. Send statistics request to RLC.
          9. Verify the statistics confirmation.
          10. Send configuration to configure deleted UE.
          11. Send statistics request to RLC.
          12. Verify the statistics confirmation.
          13. Send cell (ueID = 0) configuration.
          14. Send statistics request to RLC.
          15. Verify the statistics confirmation.
          16. Shutdown the layer."
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>
        
      <tapa.ifndef/>
         
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
    <tapa.cfg>
      <tapa.kw.init/>
      <tapa.delay delay="2"/>  
    </tapa.cfg>
    
   # Test Steps subsection
   <tapa.test>

      <tapa.delay delay="2"/>
      #Configure 5 RBs in a UE1 - 2 UM DL and 1 UM UL and 2 AM entities
      <tapa.send>
         <tapa.ckw.cfgreq ueId="1" cellId="1" numEnt="5"
            cfgType="1:1:1:1:1"
            rbId="1:2:3:4:5"
            rbType="1:1:1:1:1"
            entMode="2:2:2:3:3"
            dir="2:1:2:3:3"
            logChId0Id="1:2:3:4:5"
#Pradeep
#            logChId0Type="4:4:4:4:5"
            logChId0Type="4:4:4:4:4"
            logChId1Id="0:0:0:4:5"
            logChId1Type="0:0:0:4:5"
            umDlSnLen="1:0:1:0:0"
            umUlSnLen="0:1:0:0:0"
            umUlReOrdTmr="0:100:0:0:0"
            amDlPollRetxTmr="0:0:0:200:100"
            amDlPollPdu="0:0:0:10:15"
            amDlPollByte="0:0:0:2500:5000"
            amDlMaxRetx="0:0:0:7:5"
            amUlStaProhTmr="0:0:0:300:100"
            amUlReOrdTmr="0:0:0:300:600"
         />
      </tapa.send>
      #Expect a config confirm for all of the above configured entities
      <tapa.expect>
         <tapa.ckw.cfgcfm numEnt="5" 
            rbId="1:2:3:4:5"
            rbType="1:1:1:1:1"
            status="1:1:1:1:1"
         />
      </tapa.expect>
      #Configure 5 RBs in a UE2 - 2 UM DL and 1 UM UL and 2 AM entities
      <tapa.send>
         <tapa.ckw.cfgreq ueId="2" cellId="1" numEnt="5"
            cfgType="1:1:1:1:1"
            rbId="1:2:3:4:5"
            rbType="1:1:1:1:1"
            entMode="2:2:2:3:3"
            dir="2:1:2:3:3"
            logChId0Id="1:2:3:4:5"
#Pradeep
#            logChId0Type="4:4:4:4:5"
            logChId0Type="4:4:4:4:4"
            logChId1Id="0:0:0:4:5"
            logChId1Type="0:0:0:4:5"
            umDlSnLen="1:0:1:0:0"
            umUlSnLen="0:1:0:0:0"
            umUlReOrdTmr="0:100:0:0:0"
            amDlPollRetxTmr="0:0:0:200:100"
            amDlPollPdu="0:0:0:10:15"
            amDlPollByte="0:0:0:2500:5000"
            amDlMaxRetx="0:0:0:7:5"
            amUlStaProhTmr="0:0:0:300:100"
            amUlReOrdTmr="0:0:0:300:600"
         />
      </tapa.send>
      #Expect a config confirm for all of the above configured entities
      <tapa.expect>
         <tapa.ckw.cfgcfm numEnt="5" 
            rbId="1:2:3:4:5"
            rbType="1:1:1:1:1"
            status="1:1:1:1:1"
         />
      </tapa.expect>
      #Configure 5 RBs in a UE3 - 2 UM DL and 1 UM UL and 2 AM entities
      <tapa.send>
         <tapa.ckw.cfgreq ueId="3" cellId="1" numEnt="5"
            cfgType="1:1:1:1:1"
            rbId="1:2:3:4:5"
            rbType="1:1:1:1:1"
            entMode="2:2:2:3:3"
            dir="2:1:2:3:3"
            logChId0Id="1:2:3:4:5"
#Pradeep
#            logChId0Type="4:4:4:4:5"
            logChId0Type="4:4:4:4:4"
            logChId1Id="0:0:0:4:5"
            logChId1Type="0:0:0:4:5"
            umDlSnLen="1:0:1:0:0"
            umUlSnLen="0:1:0:0:0"
            umUlReOrdTmr="0:100:0:0:0"
            amDlPollRetxTmr="0:0:0:200:100"
            amDlPollPdu="0:0:0:10:15"
            amDlPollByte="0:0:0:2500:5000"
            amDlMaxRetx="0:0:0:7:5"
            amUlStaProhTmr="0:0:0:300:100"
            amUlReOrdTmr="0:0:0:300:600"
         />
      </tapa.send>
      #Expect a config confirm for all of the above configured entities
      <tapa.expect>
         <tapa.ckw.cfgcfm numEnt="5" 
            rbId="1:2:3:4:5"
            rbType="1:1:1:1:1"
            status="1:1:1:1:1"
         />
      </tapa.expect>
      #Configure 5 RBs in a UE4 - 2 UM DL and 1 UM UL and 2 AM entities
      <tapa.send>
         <tapa.ckw.cfgreq ueId="4" cellId="1" numEnt="5"
            cfgType="1:1:1:1:1"
            rbId="1:2:3:4:5"
            rbType="1:1:1:1:1"
            entMode="2:2:2:3:3"
            dir="2:1:2:3:3"
            logChId0Id="1:2:3:4:5"
#Pradeep
#            logChId0Type="4:4:4:4:5"
            logChId0Type="4:4:4:4:4"
            logChId1Id="0:0:0:4:5"
            logChId1Type="0:0:0:4:5"
            umDlSnLen="1:0:1:0:0"
            umUlSnLen="0:1:0:0:0"
            umUlReOrdTmr="0:100:0:0:0"
            amDlPollRetxTmr="0:0:0:200:100"
            amDlPollPdu="0:0:0:10:15"
            amDlPollByte="0:0:0:2500:5000"
            amDlMaxRetx="0:0:0:7:5"
            amUlStaProhTmr="0:0:0:300:100"
            amUlReOrdTmr="0:0:0:300:600"
         />
      </tapa.send>
      #Expect a config confirm for all of the above configured entities
      <tapa.expect>
         <tapa.ckw.cfgcfm numEnt="5" 
            rbId="1:2:3:4:5"
            rbType="1:1:1:1:1"
            status="1:1:1:1:1"
         />
      </tapa.expect>

   <tapa.send>
      <tapa.lkw.stsreq action="1" elmnt="1" inst="1"/>
   </tapa.send>

   <tapa.expect>
       <tapa.lkw.stscfm numUe="4" numOfRb="12" elmnt="1" inst="1"/>
   </tapa.expect>
#Pradeep - added stats req/cfm for DL
   <tapa.send>
      <tapa.lkw.stsreq action="1" elmnt="1" inst="0"/>
   </tapa.send>

   <tapa.expect>
       <tapa.lkw.stscfm numUe="4" numOfRb="16" elmnt="1" inst="0"/>
   </tapa.expect>


    #Send config request to delete 1 UE.
      <tapa.send>
         <tapa.ckw.cfgreq ueId="4" cellId="1" numEnt="1"
            cfgType="5"/>
      </tapa.send>
      #Expect a config confirm for all of the above configured entities
      <tapa.expect>
         <tapa.ckw.cfgcfm numEnt="1" status="1"/>
      </tapa.expect>

   <tapa.send>
      <tapa.lkw.stsreq action="1" elmnt="1" inst="1"/>
   </tapa.send>

   <tapa.expect>
       <tapa.lkw.stscfm numUe="3" numOfRb="12" elmnt="1" inst="1"/>
   </tapa.expect>
#Pradeep - added stats req/cfm for DL
   <tapa.send>
      <tapa.lkw.stsreq action="1" elmnt="1" inst="0"/>
   </tapa.send>

   <tapa.expect>
       <tapa.lkw.stscfm numUe="3" numOfRb="16" elmnt="1" inst="0"/>
   </tapa.expect>

      #Configure 5 RBs in a UE4 - 2 UM DL and 1 UM UL and 2 AM entities
      <tapa.send>
         <tapa.ckw.cfgreq ueId="4" cellId="1" numEnt="5"
            cfgType="1:1:1:1:1"
            rbId="1:2:3:4:5"
            rbType="1:1:1:1:1"
            entMode="2:2:2:3:3"
            dir="2:1:2:3:3"
            logChId0Id="1:2:3:4:5"
#Pradeep
#            logChId0Type="4:4:4:4:5"
            logChId0Type="4:4:4:4:4"
            logChId1Id="0:0:0:4:5"
            logChId1Type="0:0:0:4:5"
            umDlSnLen="1:0:1:0:0"
            umUlSnLen="0:1:0:0:0"
            umUlReOrdTmr="0:100:0:0:0"
            amDlPollRetxTmr="0:0:0:200:100"
            amDlPollPdu="0:0:0:10:15"
            amDlPollByte="0:0:0:2500:5000"
            amDlMaxRetx="0:0:0:7:5"
            amUlStaProhTmr="0:0:0:300:100"
            amUlReOrdTmr="0:0:0:300:600"
         />
      </tapa.send>
      #Expect a config confirm for all of the above configured entities
      <tapa.expect>
         <tapa.ckw.cfgcfm numEnt="5" 
            rbId="1:2:3:4:5"
            rbType="1:1:1:1:1"
            status="1:1:1:1:1"
         />
      </tapa.expect>
   <tapa.send>
      <tapa.lkw.stsreq action="1" elmnt="1" inst="1"/>
   </tapa.send>

   <tapa.expect>
       <tapa.lkw.stscfm numUe="4" numOfRb="15" elmnt="1" inst="1"/>
   </tapa.expect>

    # Configure RLC in TM(ueId=0, cellId=1  cellId=2)
   <tapa.ckw.tmcfg/>

   <tapa.send>
      <tapa.lkw.stsreq action="1" elmnt="1" inst="1"/>
   </tapa.send>

   <tapa.expect>
       <tapa.lkw.stscfm numUe="4" numOfRb="16" elmnt="1" inst="1"/>
    </tapa.expect>

#Pradeep - added stats req/cfm for DL
   <tapa.send>
      <tapa.lkw.stsreq action="1" elmnt="1" inst="0"/>
   </tapa.send>

   <tapa.expect>
       <tapa.lkw.stscfm numUe="4" numOfRb="27" elmnt="1" inst="0"/>
   </tapa.expect>
   </tapa.test>


   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>

   <tapa.kw.deinit/>
      
   <tapa.delay delay="2"/> 
      
   </tapa.shutdown>
</tapa.testcase>
#
#
#       Test:    2.10
#
#       Desc:    Statistics verification in RLC
#
#       Notes:   None
#              
#       Module:  RLC 
#
#       File:    kwac_grp2.xml
#
#
<tapa.testcase id="2.10">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="TM"/>

      <tapa.desc>
         "Verification of statistics in RLC. This test case verifies 
          numOfRb, sduRx, sduTx, pdusRecv, pdusSent, bytesRecv and bytesSent
          statistics variables."
      </tapa.desc>

      <tapa.longdesc>
        "Acceptance test case No:1
         1.Configure RLC . With general configuration , sap configuration
         2.Configurre RLC entity with BCCH PCCH and CCCH.
         4.Dummy RRC sends Dat request with size (configured value) for all the three entity types
         5.RLC sends StaRes()
         6.Dummy MAC sends StaInd()
         7.RLC sends DatReq() to MAC
         8.Dummy MAC sends DatInd() to RLC for CCCH data
         9.RLC sends DatInd() to Dummy RRC 
         10. Repeat step 4 to 9 100 times.
         11. Send stsReq to RLC, to measure sduRx and sduTx.
         12. Verify stsCfm received from RLC."
      </tapa.longdesc>
         
   </tapa.doc>

   # Require features and flags subsection 
   <tapa.require>

      <tapa.ifdef/>

      <tapa.ifndef/>

      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.kw.init/>
      <tapa.ckw.tmcfg/>
   </tapa.cfg>

   <tapa.test>
      <tapa.repeat.start repeatCount="100"/>
      #Send SDU from RRC for BCCH
      <tapa.send>
         <tapa.kwu.datreq entity="ENTNH" rbId="1" rbType="0" ueId="0" cellId="1" 
            sduId="1" sduSize="300" sfn="2" subframe="3" type="1"/>
      </tapa.send>

      #Expect Status Response for the received SDU
      <tapa.expect>
         <tapa.dummy.rgu.cstarsp bo="300" cellId="1" lcId="1" sfn="2" subframe="3"/>
      </tapa.expect>

      #Send SDU from RRC for PCCH
      <tapa.send>
         <tapa.kwu.datreq entity="ENTNH" rbId="2" rbType="0" ueId="0" cellId="1"
            sduId="2" sduSize="400" sfn="3" subframe="4" type="2"/>
      </tapa.send>

      #Expect Status Response for the received SDU
      <tapa.expect>
         <tapa.dummy.rgu.cstarsp bo="400" cellId="1" lcId="2" sfn="3" subframe="4"/>
      </tapa.expect>

      #Send SDU from RRC for CCCH
      <tapa.send>
         <tapa.kwu.datreq entity="ENTNH" rbId="3" rbType="0" ueId="0" cellId="1"
            type="3" sduId="3" sduSize="500" conResId="100" rnti="30"
            isRej="FALSE"/>
      </tapa.send>

      #Expect Status Response for the received SDU
      <tapa.expect>
         <tapa.dummy.rgu.cstarsp bo="500" cellId="1" lcId="3" 
            conResId="100" rnti="30" isRej="FALSE"/>
      </tapa.expect>

      <!--  ########################################################################################
      #Expect the first SDU with sfn 2 and subframe 3 for BCCH
      <tapa.send>
         <tapa.dummy.rgu.cstaind bo="300" lcId="1" cellId="1" transId="1"/>
      </tapa.send>

      # Expect CDatReq
      <tapa.expect guardTmr="80">
         <tapa.dummy.rgu.cdatreq  cellId="1" lcId="1" lcType="1"
            pduSz="300" sfn="2" subframe="3" transId="1"/>
      </tapa.expect>

      #Expect the second SDU with sfn 3 and subframe 4 for PCCH
      <tapa.send>
         <tapa.dummy.rgu.cstaind bo="400" lcId="2" cellId="1" transId="2"/>
      </tapa.send>

      # Expect CDatReq
      <tapa.expect>
         <tapa.dummy.rgu.cdatreq cellId="1" lcId="2" lcType="2"
            pduSz="400" sfn="3" subframe="4" transId="2"/>
      </tapa.expect>  -->

      #Expect the third SDU with conResId 100 rnti 30 and isRej False for CCCH
      <tapa.send>
         <tapa.dummy.rgu.cstaind bo="500" lcId="3" cellId="1" transId="3"
            rnti="30"/>
      </tapa.send>

      # Expect CDatReq
      <tapa.expect>
         <tapa.dummy.rgu.cdatreq cellId="1" lcId="3" lcType="3"
            pduSz="500" conResId="100" rnti="30" isRej="FALSE" transId="3"/>
      </tapa.expect>

      #Send only CCCH data in uplink
      <tapa.send>
         <tapa.dummy.rgu.cdatind inst="1" lcId="3" cellId="2" rnti="30"
            pduSize="500" transId="3"/>
      </tapa.send>

      # Expect DatInd in KWU
      <tapa.expect>
         <tapa.kwu.datind  entity="ENTNH" sduSize="500" rnti="30" />
      </tapa.expect>

      <tapa.repeat.end/>
   
      # Send stsReq to measure sduRx and sduTx.
      <tapa.send>
        <tapa.lkw.stsreq action="1" elmnt="185" inst="0"/>
      </tapa.send>

      <tapa.expect>
         <tapa.lkw.stscfm elmnt="185" kwuSduTx="100" kwuSduRx="300" inst="0"/>
      </tapa.expect>

      # Send stsReq to measure pdusSent and bytesSent.
      <tapa.send>
        <tapa.lkw.stsreq action="1" elmnt="1" inst="0"/>
      </tapa.send>

      <tapa.expect>
         <tapa.lkw.stscfm elmnt="1" pdusSent="100"
            bytesSent="120000" numOfRb="7" inst="0"/>
      </tapa.expect>
      
      # Send stsReq to measure pduRecv bytesRecv.
      <tapa.send>
        <tapa.lkw.stsreq action="1" elmnt="1" inst="1"/>
      </tapa.send>

      <tapa.expect>
         <tapa.lkw.stscfm elmnt="1" pdusRecv="100"
            bytesRecv="50000" numOfRb="1" inst="1"/>
      </tapa.expect>
     
     <tapa.delay delay="2"/>

   </tapa.test> 
   # Clean subsection
   <tapa.clean/>
         
   # Shutdown subsectitn
   <tapa.shutdown>

   <tapa.kw.deinit/>
      
   <tapa.delay delay="5"/> 
      
   </tapa.shutdown>
</tapa.testcase>

#
#       Test:    2.11
#
#       Desc:    Statistics verification in RLC
#
#       Notes:   None
#
#       Module:  RLC
#
#       File:    kwac_grp2.xml
#
#
<tapa.testcase id="2.11">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="AM"/>

      <tapa.desc>
         "Statistics verification in RLC. This test case verifies statistics variables
          pdusRecv, pdusSent, pdusRetx, bytesRecv, bytesSent, numUe, numOfRb"
      </tapa.desc>

      <tapa.longdesc>
        "1.Configure RLC with general configuration , sap configuration.
         2.RLC entity Configuration.
         3.Tx PDCP sends DatReq with 3 SDUs size of 3000.
         4.Tx RLC sends DDatReq() to MAC with 1 PDU.
         5.MAC sends DDatInd() to Rx RLC.
         6.Rx RLC sends DatInd() to Rx PDCP.
         7.Rx RLC send DStaRsp() to MAC.
         8.MAC sends DStaInd() to Rx RLC.
         9.Rx RLC sends DDatReq() to MAC.
         10.MAC sends DDatInd() to Tx RLC.
         11.Tx RLC sends DatCfm() to Tx PDCP.
         12.Repeat step 3 to 11, 100 times.
         13.Send statistics request to RLC.
         14.Verify the statistics confirm.
         15.Shutdown the layer."
      </tapa.longdesc>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef/>

      <tapa.ifndef/>

      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
    <tapa.cfg>
       <tapa.kw.init/>
       <tapa.ckw.amcfg/>
    </tapa.cfg>

    <tapa.test>

      #Send SDU from PDCP for DCCH
      <tapa.send>
         <tapa.kwu.datreq entity="ENTPJ" rbId="1" rbType="1" ueId="1" cellId="1" 
            sduId="1" sduSize="3000"/>
      </tapa.send>
      #Expect Status Response for the received SDU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" bo="3000" lcId="1" estHdrSz="2" staPduPrsnt="0"/>
      </tapa.expect>

      <tapa.send>
         <tapa.kwu.datreq entity="ENTPJ" rbId="1" rbType="1" ueId="1" cellId="1" 
            sduId="2" sduSize="3000"/>
      </tapa.send>
      #Expect Status Response for the received SDU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" bo="6000" lcId="1" estHdrSz="4" staPduPrsnt="0"/>
      </tapa.expect>

      <tapa.send>
         <tapa.kwu.datreq entity="ENTPJ" rbId="1" rbType="1" ueId="1" cellId="1" 
            sduId="3" sduSize="3000"/>
      </tapa.send>
      #Expect Status Response for the received SDU
      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" bo="9000" lcId="1" estHdrSz="6" staPduPrsnt="0"/>
      </tapa.expect>

      #########Send Data Request for Logical channel 1 and verify path
      <tapa.send>
         <tapa.dummy.rgu.dstaind totBufSize="9015" lcId="1" ueId="1" cellId="1" 
            numLch="1" transId="1" />
      </tapa.send>

      <tapa.expect>
         <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" transId="1"
            lchData="3000:2:0:1:2:3002,3002:
                    0,1:0,0:1,1:1,1:0,0"  />
      </tapa.expect>
      #Send the PDU in uplink
      <tapa.send>
         <tapa.dummy.rgu.ddatind numLch="1" lcId="1" cellId="1"  ueId="2" transId="1"
            lchData="1:4:0,1,2,2:0,0,0:0,0,0:0,0,0"/>
      </tapa.send>
      #Expect a Data Indication to KWU for PDU 1
      <tapa.expect>
         <tapa.kwu.datind  entity="ENTPJ" sduSize="3000" cellId="1" ueId="2"
            rbId="1" rbType="1" />
      </tapa.expect>

       #Expect a Data Indication to KWU for PDU 2
      <tapa.expect>
         <tapa.kwu.datind  entity="ENTPJ" sduSize="3000" cellId="1" ueId="2"
            rbId="1" rbType="1" />
      </tapa.expect>
  
      <!--  #Expect a Data Indication to KWU for PDU 3
      <tapa.expect>
         <tapa.kwu.datind  entity="ENTPJ" sduSize="3000" cellId="1" ueId="2"
            rbId="1" rbType="1" />
      </tapa.expect>    -->
      #Expect a status response for logical channel 2 for the control PDU

      <tapa.expect>
         <tapa.dummy.rgu.dstarsp cellId="1" ueId="2" bo="2" lcId="1" estHdrSz="0" staPduPrsnt="1"/>
      </tapa.expect>
      #Send a status indication for logical channel 2 for the status pdu
      <tapa.send>
      /* Venki */
         <tapa.dummy.rgu.dstaind totBufSize="5" lcId="1" ueId="2" cellId="1" numLch="1" transId="2"/>
      </tapa.send>
      #Expect a data request for logical channel 2
      <tapa.expect>
         <tapa.dummy.rgu.ddatreq  numLch="1" ueId="2" cellId="1" transId="2"
            lchData="0:0:1:1:1:2:
            -1:0:0:-1:-1"/>
      </tapa.expect>
      #Send a data indication of the Status PDU for the PDU sent to 2nd AM entity
      <tapa.send>
         <tapa.dummy.rgu.ddatind numLch="1" lcId="1" cellId="1"  ueId="1" transId="2"
            lchData="1:1:0:0:0:0"/>
      </tapa.send>
      #Expect a Status Indication to PDCP about reception of the SDU at the peer entity
       <tapa.expect>
         <tapa.kwu.datcfm entity="ENTPJ" numSduIds="2" sduId="0:1" ueId="1" cellId="1" rbId="1"
            rbType="1"/>
      </tapa.expect>

      #Send stsReq 
      <tapa.send>
        <tapa.lkw.stsreq action="1" elmnt="1" inst="0"/>
      </tapa.send>

      <tapa.expect>
         <tapa.lkw.stscfm numUe="2" numOfRb="4" pdusSent="2" 
            bytesSent="9000" elmnt="1" inst="0"/>
      </tapa.expect>
      
      #Send stsReq 
      <tapa.send>
        <tapa.lkw.stsreq action="1" elmnt="1" inst="1"/>
      </tapa.send>

      <tapa.expect>
         <tapa.lkw.stscfm numUe="2" numOfRb="4" pdusRecv="5" 
            bytesRecv="6000" unexpPdusRecv="0" errorPdusRecv="1" elmnt="1" inst="1"/>
      </tapa.expect>

      #Send stsReq 
      <tapa.send>
        <tapa.lkw.stsreq action="1" elmnt="185" spId="1" inst="0"/>
      </tapa.send>

      <tapa.expect>
         <tapa.lkw.stscfm elmnt="185" kwuSduTx="2" kwuSduRx="3" inst="0"/>
      </tapa.expect>
      
      #Send stsReq 
      #<tapa.send>
       # <tapa.lkw.stsreq action="1" elmnt="184" spId="1" inst="1"/>
      #</tapa.send>

      #<tapa.expect>
       #  <tapa.lkw.stscfm elmnt="184" ckwStatMsgs="1" inst="1"/>
      #</tapa.expect>

   </tapa.test>
   # Clean subsection 
   <tapa.clean/>

   # Shutdown subsectitn
   <tapa.shutdown>
         
   <tapa.kw.deinit/>
         
   <tapa.delay delay="5"/>

   </tapa.shutdown>
</tapa.testcase>

#
#
#       Test:    2.12
#
#       Desc:    Verification of statistics
#
#       Notes:   None
#
#       Module:  RLC
#
#       File:    kwac_grp6.xml
#
#
<tapa.testcase id="2.12">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="AM"/>

      <tapa.desc>
         "RLC AM mode Verifcation of statistics after expiry of poll retransmit timer."
      </tapa.desc>

      <tapa.longdesc>
        "Acceptance Test Case No:1
         1.Configure RLC with general configuration , sap configuration
         2.RLC entity Configuration.
         3.Tx PDCP sends Dat request with size (configured value)
         4.Tx RLC sends DStaRsp()
         5.MAC sends DStaInd()
         6.Tx RLC sends DDatReq() to MAC
         7.MAC sends DDatInd() to RLC
         8.Rx RLC sends DDatInd() to Rx PDCP
         9.Rx RLC send DStaRsp() to MAC
         10.MAC sends DStaInd() to Rx RLC
         11.Rx RLC sends DDatReq() to MAC
         12.MAC sends DDatInd() to Tx RLC
         13.Tx RLC sends DatCfm() to Tx PDCP
         14.Send statistics request from LM
         15.Verify the statistics confirm."
      </tapa.longdesc>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef/>

      <tapa.ifndef/>

      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
    <tapa.cfg>
       <tapa.kw.init/>
       <tapa.ckw.amcfg8/>
    </tapa.cfg>

    <tapa.test>

       ########################################################################################
       #Status Prohitbit Timer expiry
       ########################################################################################
       #Send SDU from PDCP for DCCH in ue 1
       <tapa.send>
          <tapa.kwu.datreq entity="ENTPJ" rbId="1" rbType="1" ueId="1" cellId="1" 
             sduId="1" sduSize="300"/>
       </tapa.send>
       #Expect Status Response for the received SDU
       <tapa.expect>
          <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="1" 
             bo="300" estHdrSz="-1" staPduPrsnt="0"/>
       </tapa.expect>

       #Expect the first SDU with size 302
       <tapa.send>
          <tapa.dummy.rgu.dstaind totBufSize="305" lcId="1" ueId="1" cellId="1" 
             numLch="1" transId="1" />
       </tapa.send>
       <tapa.expect>
          <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" transId="1"
             lchData="0:-1:0:1:1:302:
             0:0:1:1:0"  />
       </tapa.expect>

       #Send the PDU in uplink for lcId 1 in ue 2
       <tapa.send>
          <tapa.dummy.rgu.ddatind numLch="1" cellId="1"  ueId="2" transId="1"
             lchData="1:2:0,0:0,0:0,0:0,0"/>
       </tapa.send>
      #Expect a Data Indication to KWU for PDU 1
      <tapa.expect>
         <tapa.kwu.datind  entity="ENTPJ" cellId="1" ueId="2" rbId="1"
            rbType="1" />
      </tapa.expect>
       #Expect a starsp for logical channel 1 in ue 2 for the control PDU
       #since we have a trigger for status report as duplicate pdu is received
       <tapa.expect>
          <tapa.dummy.rgu.dstarsp cellId="1" ueId="2" lcId="1" 
             bo="2" estHdrSz="0"  staPduPrsnt="1" valdType="1"/>
       </tapa.expect>

       #Send a datind for logical channel 1 in ue 2 for the status pdu
       <tapa.send>
          <tapa.dummy.rgu.dstaind lcId="1" ueId="2" cellId="1" numLch="1" 
             totBufSize="9" transId="5" />
       </tapa.send>
       #Expect a data request for logical channel 1 in ue 2
       <tapa.expect>
          <tapa.dummy.rgu.ddatreq  numLch="1"  cellId="1" ueId="2" transId="5"
             lchData="0:0:1:1:1:2:
             -1:-1:-1:0:-1" />
       </tapa.expect>
       #Send a data indication of the Status PDU for the PDU sent to 2nd AM entity
       <tapa.send>
          <tapa.dummy.rgu.ddatind numLch="1" cellId="1"  ueId="1" transId="5"
             lchData="1:1:0:0:0:0" />
       </tapa.send>

       #Expect a Status Indication to PDCP about reception of the SDU at the peer entity
       <tapa.expect>
          <tapa.kwu.datcfm entity="ENTPJ" numSduIds="1" sduId="0" ueId="1" cellId="1" rbId="1"
             rbType="1"/>
       </tapa.expect>
       ##################################################################
       ##################################################################
       #Send SDU from PDCP for DCCH in ue 1
       <tapa.send>
          <tapa.kwu.datreq entity="ENTPJ" rbId="1" rbType="1" ueId="1" cellId="1" 
             sduId="1" sduSize="300"/>
       </tapa.send>
       #Expect Status Response for the received SDU
       <tapa.expect>
          <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="1" 
             bo="300" estHdrSz="-1" staPduPrsnt="0"/>
       </tapa.expect>

       #Expect the first SDU with size 302
       <tapa.send>
          <tapa.dummy.rgu.dstaind totBufSize="305" lcId="1" ueId="1" cellId="1" 
             numLch="1" transId="2" />
       </tapa.send>
       <tapa.expect>
          <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" transId="2"
             lchData="0:-1:0:1:1:302:
             1:0:1:1:0"  />
       </tapa.expect>

       #Send the PDU in uplink for lcId 1 in ue 2
       <tapa.send>
          <tapa.dummy.rgu.ddatind numLch="1" cellId="1"  ueId="2" transId="2"
             lchData="1:2:0,0:0,0:0,0:0,0"/>
       </tapa.send>
      #Expect a Data Indication to KWU for PDU 1
      <tapa.expect>
         <tapa.kwu.datind  entity="ENTPJ" cellId="1" ueId="2" rbId="1"
            rbType="1" />
      </tapa.expect>
       ####################################################################

       #Delay for StaProhTmr Expiry
       #kw005.201 changed delay from 30 to 3
       #<tapa.delay delay="3"/>

       ####################################################################
       #Expect Status Response for the received SDU - added for staprotmr exp
       <!--  <tapa.expect guardTmr="20">
          <tapa.dummy.rgu.dstarsp cellId="1" ueId="2" lcId="1" 
             bo="2" estHdrSz="-1" staPduPrsnt="1"/>
       </tapa.expect>    -->
       #Send SDU from PDCP for DCCH in ue 1
       <tapa.send>
          <tapa.kwu.datreq entity="ENTPJ" rbId="1" rbType="1" ueId="1" 
                           cellId="1" sduId="1" sduSize="300"/>
       </tapa.send>
       #Expect Status Response for the received SDU
       <tapa.expect>
          <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="1" 
             bo="300" estHdrSz="-1" staPduPrsnt="0"/>
       </tapa.expect>

       #Expect the first SDU with size 302
       <tapa.send>
          <tapa.dummy.rgu.dstaind totBufSize="305" lcId="1" ueId="1" cellId="1" 
             numLch="1" transId="3" />
       </tapa.send>
       <tapa.expect>
          <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" transId="3"
             lchData="0:-1:0:1:1:302:
             2:0:1:1:0"  />
       </tapa.expect>

       #Send the PDU in uplink for lcId 1 in ue 2
       <tapa.send>
          <tapa.dummy.rgu.ddatind numLch="1" cellId="1"  ueId="2" transId="3"
             lchData="1:2:0,0:0,0:0,0:0,0"/>
       </tapa.send>
      #Expect a Data Indication to KWU for PDU 1
      <tapa.expect>
         <tapa.kwu.datind  entity="ENTPJ" cellId="1" ueId="2" rbId="1"
            rbType="1" />
      </tapa.expect>
       #Expect a starsp for logical channel 1 in ue 2 for the control PDU
       #since we have a trigger for status report as duplicate pdu is received
       <!--   <tapa.expect>
          <tapa.dummy.rgu.dstarsp cellId="1" ueId="2" lcId="1" 
             bo="2" estHdrSz="0"  staPduPrsnt="1" valdType="1"/>
       </tapa.expect>  -->
       ################################################################
       ################################################################
       #Send a datind for logical channel 1 in ue 2 for the status pdu
       <tapa.send>
          <tapa.dummy.rgu.dstaind lcId="1" ueId="2" cellId="1" numLch="1" 
             totBufSize="9" transId="4" />
       </tapa.send>
       #Expect a data request for logical channel 1 in ue 2
       <tapa.expect>
          <tapa.dummy.rgu.ddatreq  numLch="1"  cellId="1" ueId="2" transId="4"
             lchData="0:0:-1:1:-1:-1:
             -1:-1:-1:-1:-1" />
       </tapa.expect>
       #Send a data indication of the Status PDU for the PDU sent to 2nd AM ent
       <tapa.send>
          <tapa.dummy.rgu.ddatind numLch="1" cellId="1"  ueId="1" transId="4"
             lchData="1:1:0:0:0:0" />
       </tapa.send>
       
       <tapa.expect>
          <tapa.dummy.rgu.dstarsp cellId="1" ueId="2" lcId="1" 
             bo="2" estHdrSz="0"  staPduPrsnt="1" valdType="1"/>
       </tapa.expect>  

       <tapa.expect>
          <tapa.dummy.rgu.dstarsp cellId="1" ueId="2" lcId="1" 
             bo="2" estHdrSz="0"  staPduPrsnt="1" valdType="1"/>
       </tapa.expect>  
       <!--
       #Expect a Status Ind to PDCP about reception of the SDU at the peer ent
       <tapa.expect>
          <tapa.kwu.datcfm entity="ENTPJ" numSduIds="2" sduId="1:2" ueId="1" cellId="1" rbId="1"
             rbType="1"/>
       </tapa.expect>    -->

      
       #Send SDU from PDCP for DCCH in ue 1
       <tapa.send>
          <tapa.kwu.datreq entity="ENTPJ" rbId="1" rbType="1" ueId="1" cellId="1" 
             sduId="1" sduSize="300"/>
       </tapa.send>
       #Expect Status Response for the received SDU
       <tapa.expect>
          <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="1" 
             bo="300" estHdrSz="-1" staPduPrsnt="0" valdType="1"/>
       </tapa.expect>

       #################################################################
       #Expect the first SDU with size 302
       <tapa.send>
          <tapa.dummy.rgu.dstaind totBufSize="305" lcId="1" ueId="1" cellId="1" 
             numLch="1" transId="5" />
       </tapa.send>
       <tapa.expect>
          <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" transId="5"
             lchData="-1:-1:-1:1:1:-1:
             -1:-1:-1:-1:-1"  />
       </tapa.expect>
       #################################################################
       #################################################################
       <!--   #Delay for PollRetxTmr Expiry
       <tapa.delay delay="40"/>

       #Expect Status Response for the pollRetxTmr Expiry Retransmission
       <tapa.expect>
          <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="1" 
             bo="300" estHdrSz="-1" staPduPrsnt="0"/>
       </tapa.expect>     -->
       ###################################################################
       ###################################################################
       #Expect the first SDU with size 302
       <tapa.send>
          <tapa.dummy.rgu.dstaind totBufSize="305" lcId="1" ueId="1" cellId="1" 
             numLch="1" transId="6" />
       </tapa.send>
       <tapa.expect>
          <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" transId="6"
             lchData="0:0:0:1:1:302:3:0:1:1:0"  />
       </tapa.expect>
       ###################################################################
       ###################################################################
       #Delay for PollRetxTmr Expiry
       <!--    <tapa.delay delay="20"/>

       #Expect Status Response for the pollRetxTmr Expiry Retransmission
       <tapa.expect>
          <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="1" 
             bo="300" estHdrSz="-1" staPduPrsnt="0"/>
       </tapa.expect>   -->
       ###################################################################
       ###################################################################
       #Expect the first SDU with size 302
       <tapa.send>
          <tapa.dummy.rgu.dstaind totBufSize="305" lcId="1" ueId="1" cellId="1" 
             numLch="1" transId="7" />
       </tapa.send>
       <tapa.expect>
          <tapa.dummy.rgu.ddatreq  numLch="1" ueId="1" cellId="1" transId="7"
             lchData="0:0:0:1:-1:-1:
             -1:-1:-1:-1:-1"  />
       </tapa.expect>
       ###################################################################
       ###################################################################
       #Delay for PollRetxTmr Expiry
       <tapa.delay delay="20"/>
       # aghosh added; now bo=0 is sent on max retx hit case
       <tapa.expect>
          <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="1" 
             bo="0" estHdrSz="0"  staPduPrsnt="0" valdType="1"/>
       </tapa.expect>

       <!--     <tapa.expect>
          <tapa.kwu.staind ueId="1" cellId="1" rbId="1" rbType="1" 
                           sduId="3" numSdu="1" />
       </tapa.expect>

       #Expect Status Response for the received SDU
       <tapa.expect>
          <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="1" 
             bo="0" estHdrSz="-1" staPduPrsnt="0"/>
       </tapa.expect>
 -->
       ###################################################################
       ###################################################################
       #Discard SDU
       ###################################################################
       #Send SDU from PDCP for DCCH in ue 1
       <tapa.send>
          <tapa.kwu.datreq entity="ENTPJ" rbId="1" rbType="1" ueId="1" 
                           cellId="1" sduId="1" sduSize="300"/>
       </tapa.send>
       #Expect Status Response for the received SDU
       <tapa.expect>
          <tapa.dummy.rgu.dstarsp cellId="1" ueId="1" lcId="1" 
             bo="300" estHdrSz="-1" staPduPrsnt="0" valdType="1"/>
       </tapa.expect>

      <tapa.send>
         <tapa.kwu.discsdu ueId="1" cellId="1" rbId="1" rbType="1" sduId="1" />
      </tapa.send>
       #################################################################
     #Venki - start  
       # Send stsReq to DL inst
      <tapa.send>
        <tapa.lkw.stsreq action="1" elmnt="1" inst="0"/>
      </tapa.send>

      <tapa.expect>
         <tapa.lkw.stscfm elmnt="1" numUe="2" numOfRb="4" pdusSent="4" 
            bytesSent="1200" protTimeOut="2" inst="0"/>
      </tapa.expect>
      
      # Send stsReq to UL Inst
      <tapa.send>
        <tapa.lkw.stsreq action="1" elmnt="1" inst="1"/>
      </tapa.send>

      <tapa.expect>
         <tapa.lkw.stscfm elmnt="1" numUe="2" numOfRb="4" pdusRecv="8" 
            bytesRecv="900" unexpPdusRecv="0" inst="1" errorPdusRecv="4"/>
      </tapa.expect>
   # Venki - end
    </tapa.test>
   # Clean subsection
   <tapa.clean/>

   # Shutdown subsectitn
   <tapa.shutdown>

   <tapa.kw.deinit/>

   <tapa.delay delay="5"/>

   </tapa.shutdown>
</tapa.testcase>
# DO NOT DELETE THIS LINE -- TC number generation script depends on it.
# xyzabcend

#/********************************************************************30**
#
#         End of file:     $SID$
#
#*********************************************************************31*/
#
#
#/********************************************************************40**
#
#        Notes:
#
#*********************************************************************41*/
#
#/********************************************************************50**
#
#*********************************************************************51*/
#
#
#/********************************************************************60**
#
#        Revision history:
#
#*********************************************************************61*/
#
#/********************************************************************90**
#
#     ver       pat    init                  description
#------------ -------- ---- ----------------------------------------------
#/main/1         ---     gk                   1. Initial Release.
#$SID$           ---     gk                   1. LTERLC Release 2.1.
#/main/2        kw005.201 ap                  1. Added test cases for LM statistics.
                          rd                  2. Changed delay in TC 12 since
                                                 wait calculation has changed.
#*********************************************************************91*/
