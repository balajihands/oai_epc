#*********************************************************************17*/
#
# DO NOT DELETE THIS LINE -- TC number generation script depends on it.
# xyzabcstart=14:rs:nhac_tc12.xml

#/********************************************************************20**
#
#     Name:    RRC
#
#     Type:    XML Test File
#
#     Desc:    XML Based Test Cases
#
#     File:    nhac_tc12.xml
#
#     Sid:     
#
#     Prg:      gjaha and rshek
#
#*********************************************************************21*/


##################################################################################
#       Test:    12.1
#       Desc:    Validation of Condition IE
#                RadioResourceConfigDedicated.SRB-ToAddModList
#                during RRC Connection Setup procedure
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.1">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE
         RadioResourceConfigDedicated.SRB-ToAddModList, during RRC Connection
         Setup procedure.

         RRC user will send request for RRC Connection Setup with
         below message fillings:

         RRCConnectionSetupIEs
         |
         +--> RadioResourceConfigDedicated is Present
            |
            +--> SRB-ToAddModList is NOT present
            |
            +--> DRB-ToAddModList is optional
            +--> MAC-MainConfig is optional
            +--> DRB-ToReleaseList is optional
            +--> SPS-Config is optional
            +--> PhysicalConfigDedicated is optional

         RRC will send error indidcation to RRC user as this IE is mandatory for
         this scenario.

         Steps:
         ------
         1. RRC recieves Data indication from PDCP for RRC Connection Request
            Message sent from UE
         2. RRC will send data indication for the same to RRC user
         3. RRC user sends RRC Connection Setup Request (data and Cfg)
            to RRC
         4. RRC will validate Message request before sending configuration
            request to lower layers.
         5. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: SRB-TOADDMODLIST)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />

   </tapa.cfg>
   <tapa.test>
      # Send RRC Connection Request from RLC 
      <tapa.send >
         <tapa.dummy.kwu.datind suId="0" spId="0" rbId="1" msgType="1" 
         cellId="2" tCrnti="2" />
      </tapa.send>

      <tapa.delay delay="5" />
      #Expect RRC Connection Request at RRC user
      <tapa.expect >
         <tapa.nhu.datind cellId="2" tCrnti="2" />
      </tapa.expect>

      #Send RRC Connection Setup from RRC user
      <tapa.send>
         <tapa.nhu.datrsp spId="0" bitMask="2" expCfgBitMask="11"
          rbCfgType="1"  numAddRb="0" msgCategory="3" msgType="3"
          rrc_transId="1" transId="10" rbId="1" tCrnti="2" cellId="2" 
          pdcpId="1" srbPresent="0"/>
      </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>

##################################################################################
#       Test:    12.2
#       Desc:    Validation of Condition IE
#                RadioResourceConfigDedicated.DRB-ToAddModList
#                during RRC Connection Setup procedure
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.2">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE
         RadioResourceConfigDedicated.DRB-ToAddModList, during RRC Connection
         Setup procedure.

         RRC user will send request for RRC Connection Setup with
         below message fillings:

         RRCConnectionSetupIEs
         |
         +--> RadioResourceConfigDedicated is Present
            |
            +--> SRB-ToAddModList is present
            |
            +--> DRB-ToAddModList is PRESENT
            +--> MAC-MainConfig is optional
            +--> DRB-ToReleaseList is optional
            +--> SPS-Config is optional
            +--> PhysicalConfigDedicated is optional

         RRC will send error indidcation to RRC user as this IE is should not be
         present for this scenario

         Steps:
         ------
         1. RRC recieves Data indication from PDCP for RRC Connection Request
            Message sent from UE
         2. RRC will send data indication for the same to RRC user
         3. RRC user sends RRC Connection Setup Request (data and Cfg)
            to RRC
         4. RRC will validate Message request before sending configuration
            request to lower layers.
         5. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: DRB-TOADDMODLIST)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />
   </tapa.cfg>
   <tapa.test>
      # Send RRC Connection Request from RLC 
      <tapa.send >
         <tapa.dummy.kwu.datind suId="0" spId="0" rbId="1" msgType="1" 
         cellId="2" tCrnti="2" />
      </tapa.send>

      <tapa.delay delay="5" />
      #Expect RRC Connection Request at RRC user
      <tapa.expect >
         <tapa.nhu.datind cellId="2" tCrnti="2" />
      </tapa.expect>

     #Send RRC Connection Setup from RRC user
      <tapa.send>
        <tapa.nhu.datrsp spId="0" bitMask="2" expCfgBitMask="11"
        rbCfgType="1"   msgCategory="3" msgType="3"
         rrc_transId="0" transId="10" rbId="1" pdcpId="1"
        valChk="0"
        cellId="2" tCrnti="2"  numAddRb="3" addRbIdStr="1,0,3,1,4,1"
        addLcIdStr="2,3,4" addBitMskStr="7,1,1"/>
     </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>

##################################################################################
#       Test:    12.3
#       Desc:    Validation of Condition IE
#                RadioResourceConfigDedicated.SRB-ToAddModList.RLC-Config
#                during RRC Connection Setup procedure
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.3">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE
         RadioResourceConfigDedicated.SRB-ToAddModList.RLC-Config
         during RRC Connection Setup procedure.

         RRC user will send request for RRC Connection Setup with
         below message fillings:

         RRCConnectionSetupIEs
         |
         +--> RadioResourceConfigDedicated is Present
            |
            +--> SRB-ToAddModList is present
            |   |
            |   +--> RLC-Config is NOT present
            |   |
            |   +--> logicalChannelConfig is present
            |
            +--> DRB-ToAddModList is optional
            +--> MAC-MainConfig is optional
            +--> DRB-ToReleaseList is optional
            +--> SPS-Config is optional
            +--> PhysicalConfigDedicated is optional

         RRC will send error indication to RRC user as this IE is mandatory for
         this scenario.

         Steps:
         ------
         1. RRC recieves Data indication from PDCP for RRC Connection Request
            Message sent from UE
         2. RRC will send data indication for the same to RRC user
         3. RRC user sends RRC Connection Setup Request (data and Cfg)
            to RRC
         4. RRC will validate Message request before sending configuration
            request to lower layers.
         5. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: RLC-CONFIG)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />
   </tapa.cfg>
   <tapa.test>
      # Send RRC Connection Request from RLC 
      <tapa.send >
         <tapa.dummy.kwu.datind suId="0" spId="0" rbId="1" msgType="1" 
         cellId="2" tCrnti="2" />
      </tapa.send>

      <tapa.delay delay="5" />
      #Expect RRC Connection Request at RRC user
      <tapa.expect >
         <tapa.nhu.datind cellId="2" tCrnti="2" />
      </tapa.expect>

     #Send RRC Connection Setup from RRC user
      <tapa.send>
        <tapa.nhu.datrsp spId="0" bitMask="2" expCfgBitMask="11"
        rbCfgType="1"   msgCategory="3" msgType="3"
         rrc_transId="0" transId="10" rbId="1" pdcpId="1"
        valChk="0"
        cellId="2" tCrnti="2"  numAddRb="1" addRbIdStr="1,0"
        addLcIdStr="2" addBitMskStr="7" srbRlcCfgAbsent="1" />
     </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>

##################################################################################
#       Test:    12.4
#       Desc:    Validation of Condition IE
#                RadioResourceConfigDedicated.SRB-ToAddModList
#                .logicalChannelConfig during RRC Connection Setup procedure
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.4">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE
         RadioResourceConfigDedicated.SRB-ToAddModList
         .logicalChannelConfig during RRC Connection Setup procedure

         RRC user will send request for RRC Connection Setup with
         below message fillings:

         RRCConnectionSetupIEs
         |
         +--> RadioResourceConfigDedicated is Present
            |
            +--> SRB-ToAddModList is present
            |   |
            |   +--> RLC-Config is present
            |   |
            |   +--> logicalChannelConfig is NOT present
            |
            +--> DRB-ToAddModList is optional
            +--> MAC-MainConfig is optional
            +--> DRB-ToReleaseList is optional
            +--> SPS-Config is optional
            +--> PhysicalConfigDedicated is optional

         RRC will send error indidcation to RRC user as RLC mode for SRBs is
         selected as TM instead of AM

         Steps:
         ------
         1. RRC recieves Data indication from PDCP for RRC Connection Request
            Message sent from UE
         2. RRC will send data indication for the same to RRC user
         3. RRC user sends RRC Connection Setup Request (data and Cfg)
            to RRC with massage filling as mentioned above
         4. RRC will validate Message request before sending configuration
            request to lower layers.
         5. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: LOGICALCHANNELCONFIG)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />
   </tapa.cfg>
   <tapa.test>
      # Send RRC Connection Request from RLC 
      <tapa.send >
         <tapa.dummy.kwu.datind suId="0" spId="0" rbId="1" msgType="1" 
         cellId="2" tCrnti="2" />
      </tapa.send>

      <tapa.delay delay="5" />
      #Expect RRC Connection Request at RRC user
      <tapa.expect >
         <tapa.nhu.datind cellId="2" tCrnti="2" />
      </tapa.expect>

     #Send RRC Connection Setup from RRC user
      <tapa.send>
        <tapa.nhu.datrsp spId="0" bitMask="2" expCfgBitMask="11"
        rbCfgType="1"   msgCategory="3" msgType="3"
         rrc_transId="0" transId="10" rbId="1" pdcpId="1"
        valChk="0"
        cellId="2" tCrnti="2"  numAddRb="1" addRbIdStr="1,0"
        addLcIdStr="2" addBitMskStr="7" srbLogChCfgAbsent="1" />
     </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>

##################################################################################
#       Test:    12.5
#       Desc:    Validation of Condition IE
#                RadioResourceConfigDedicated.PhysicalConfigDedicated
#                .AntennaInfoDedicated.codebookSubsetRestriction during RRC
#                Connection Setup procedure.
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.5">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE RadioResourceConfigDedicated
         .PhysicalConfigDedicated.AntennaInfoDedicated.codebookSubsetRestriction
         during RRC Connection Reconfiguration procedure

         RRC user will send RRC Connection Setup request with below message
         fillings:

         RRCConnectionSetupIEs
         |
         +--> RadioResourceConfigDedicated is Present
            |
            +--> SRB-ToAddModList is present
            +--> DRB-ToAddModList
            +--> PhysicalConfigDedicated is present
            |   |
            |   +--> AntennaInfoDedicated is Present
            |   |   |
            |   |   +--> transmissionMode (any value among tm3, tm4, tm5 and tm6)
            |   |   +--> codebookSubsetRestriction NOT Present
            |   |
            |   +--> All other elements - optional
            |
            +--> MAC-MainConfig is optional
            +--> DRB-ToReleaseList is optional
            +--> SPS-Config is optional

         This test cases is to check only for codebookSubsetRestriction element.
         procedure for RRC Connection Reconfiguration not during HO. RRC will send
         error indidcation to RRC user as this IE is mandatory for this scenario.

         Steps:
         ------
         1. RRC recieves Data indication from PDCP for RRC Connection Request
            Message sent from UE
         2. RRC will send data indication for the same to RRC user
         3. RRC user sends RRC Connection Setup Request (data and Cfg)
            to RRC with massage filing as mentioned above
         4. RRC will validate Message request before sending configuration
            request to lower layers.
         5. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: CODEBOOKSUBSETRESTRICTION)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />

   </tapa.cfg>
   <tapa.test>
      # Send RRC Connection Request from RLC 
      <tapa.send >
         <tapa.dummy.kwu.datind suId="0" spId="0" rbId="1" msgType="1" 
         cellId="2" tCrnti="2" />
      </tapa.send>

      <tapa.delay delay="5" />
      #Expect RRC Connection Request at RRC user
      <tapa.expect >
         <tapa.nhu.datind cellId="2" tCrnti="2" />
      </tapa.expect>

     #Send RRC Connection Setup from RRC user
      <tapa.send>
        <tapa.nhu.datrsp spId="0" bitMask="2" expCfgBitMask="11"
        rbCfgType="1"   msgCategory="3" msgType="3"
         rrc_transId="0" transId="10" rbId="1" pdcpId="1"
        valChk="0"
        cellId="2" tCrnti="2"  numAddRb="1" addRbIdStr="1,0"
        addLcIdStr="2" addBitMskStr="7" txMode="4" codeBookRestnPres="FALSE" />
     </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>

##################################################################################
#       Test:    12.6
#       Desc:    Validation of Condition IE
#                RadioResourceConfigDedicated.SRB-ToAddModList.RLC-Config
#                during RRC Connection Reconfiguration procedure
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.6">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE
         RadioResourceConfigDedicated.SRB-ToAddModList.RLC-Config
         during RRC Connection Reconfiguration procedure.

         RRC user will send request for RRC Connection Reconfiguration with
         below message fillings:

         RRCConnectionReconfigurationIEs
         |
         +--> RadioResourceConfigDedicated is Present
         |   |
         |   +--> SRB-ToAddModList is present
         |   |   |
         |   |   +--> RLC-Config is NOT present
         |   |   |
         |   |   +--> logicalChannelConfig is present
         |   |
         |   +--> DRB-ToAddModList is optional
         |   +--> MAC-MainConfig is optional
         |   +--> DRB-ToReleaseList is optional
         |   +--> SPS-Config is optional
         |   +--> PhysicalConfigDedicated is optional
         +--> MeasConfig is optional
         +--> MobilityControlInfo is NOT Present
         +--> DedicatedInfoNAS is optional
         +--> SecurityConfigHO is NOT present

         This test cases is to check only for RLC-Config element.
         "NOT rpesent" for other elements is just to make sure that this is a
         procedure for RRC Connection Reconfiguration not during HO. RRC will send
         error indidcation to RRC user as this IE is mandatory for this scenario.

         Steps:
         ------
         1. (RRC Connection is Established)
         2. (Initial Security has been activated)
         3. RRC user sends RRC Connection Reconfiguration Request (data and Cfg)
            to RRC for establishment if SRB2, DRB1, DRB2 and DRB3.
         4. RRC will validate Message request before sending configuration
            request to lower layers.
         5. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: RLC-CONFIG)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />

     #RRC Connection establishment procedure
     <tapa.rrc.consetup cellId="2" ueId="4" tCrnti="4" />

      # Security Activation for UE in connected mode
      <tapa.rrc.security_actv ueId="4" cellId="2"/>
   </tapa.cfg>
   <tapa.test>
      # Send Reconfiguration request
      <tapa.send>
         <tapa.nhu.datreq spId="0" bitMask="2" expCfgBitMask="1"
          msgCategory="1" msgType="4" transId="1" rrc_transId="1"
          cellId="2" ueId="4" pdcpId="1" numAddRb="3" addRbIdStr="2,0,3,1,4,1"
          addLcIdStr="2,3,4" addBitMskStr="7,1,1" rbCfgType="1" logChType="3"
          trChCfgDed="0" macSchedCfg="0"  valChk="0" rrcTransIdPres="1"
          srbRlcCfgAbsent="1" srbLogChCfgAbsent="0"/>
      </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.conrls ueId="4" cellId="2" />
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>

##################################################################################
#       Test:    12.7
#       Desc:    Validation of Condition IE
#                RadioResourceConfigDedicated.SRB-ToAddModList
#                .logicalChannelConfig during RRC Connection Reconfiguration
#                procedure
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.7">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE
         RadioResourceConfigDedicated.SRB-ToAddModList
         .logicalChannelConfig during RRC Connection Reconfiguration procedure

         RRC user will send request for RRC Connection Reconfiguration with
         below message fillings:

         RRCConnectionReconfigurationIEs
         |
         +--> RadioResourceConfigDedicated is Present
         |   |
         |   +--> SRB-ToAddModList is present
         |   |   |
         |   |   +--> RLC-Config is present
         |   |   |
         |   |   +--> logicalChannelConfig is NOT present
         |   |
         |   +--> DRB-ToAddModList is optional
         |   +--> MAC-MainConfig is optional
         |   +--> DRB-ToReleaseList is optional
         |   +--> SPS-Config is optional
         |   +--> PhysicalConfigDedicated is optional
         +--> MeasConfig is optional
         +--> MobilityControlInfo is NOT Present
         +--> DedicatedInfoNAS is optional
         +--> SecurityConfigHO is NOT present

         This test cases is to check only for logicalChannelConfig element.
         "NOT rpesent" for other elements is just to make sure that this is a
         procedure for RRC Connection Reconfiguration not during HO. RRC will send
         error indidcation to RRC user as this IE is mandatory for this scenario.

         Steps:
         ------
         1. (RRC Connection is Established)
         2. (Initial Security has been activated)
         3. RRC user sends RRC Connection Reconfiguration Request (data and Cfg)
            to RRC for establishment if SRB2, DRB1, DRB2 and DRB3.
         4. RRC will validate Message request before sending configuration
            request to lower layers.
         5. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: LOGICALCHANNELCONFIG)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />

     #RRC Connection establishment procedure
     <tapa.rrc.consetup cellId="2" ueId="4" tCrnti="4" />

      # Security Activation for UE in connected mode
      <tapa.rrc.security_actv ueId="4" cellId="2"/>
   </tapa.cfg>
   <tapa.test>
      # Send Reconfiguration request
      <tapa.send>
         <tapa.nhu.datreq spId="0" bitMask="2" expCfgBitMask="1"
          msgCategory="1" msgType="4" transId="1" rrc_transId="1"
          cellId="2" ueId="4" pdcpId="1" numAddRb="3" addRbIdStr="2,0,3,1,4,1"
          addLcIdStr="2,3,4" addBitMskStr="7,1,1" rbCfgType="1" logChType="3"
          trChCfgDed="0" macSchedCfg="0"  valChk="0" rrcTransIdPres="1"
          srbLogChCfgAbsent="1"/>
      </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.conrls ueId="4" cellId="2" />
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>


##################################################################################
#       Test:    12.8
#       Desc:    Validation of Condition IE
#                RadioResourceConfigDedicated.DRB-ToAddModList.eps-BearerIdentity
#                during RRC Connection Reconfiguration procedure.
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.8">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE
         RadioResourceConfigDedicated.DRB-ToAddModList.eps-BearerIdentity
         during RRC Connection Reconfiguration procedure.

         RRC user will send request for RRC Connection Reconfiguration with
         below message fillings:

         RRCConnectionReconfigurationIEs
         |
         +--> RadioResourceConfigDedicated is Present
         |   |
         |   +--> SRB-ToAddModList is present
         |   +--> DRB-ToAddModList is optional
         |   |   |
         |   |   +-->eps-BearerIdentity NOT present
         |   |   +--> DRB-Identity is present
         |   |   +--> PDCP-Config is present
         |   |   +--> RLC-Config is present
         |   |   +--> logicalChannelIdentity is present
         |   |   +--> LogicalChannelConfig is present
         |   |
         |   +--> MAC-MainConfig is optional
         |   +--> DRB-ToReleaseList is optional
         |   +--> SPS-Config is optional
         |   +--> PhysicalConfigDedicated is optional
         +--> MeasConfig is optional
         +--> MobilityControlInfo is NOT Present
         +--> DedicatedInfoNAS is optional
         +--> SecurityConfigHO is NOT present

         This test cases is to check only for eps-BearerIdentity element.
         "NOT rpesent" for other elements is just to make sure that this is a
         procedure for RRC Connection Reconfiguration not during HO. RRC will send
         error indidcation to RRC user as this IE is mandatory for this scenario.

         Steps:
         ------
         1. (RRC Connection is Established)
         2. (Initial Security has been activated)
         3. RRC user sends RRC Connection Reconfiguration Request (data and Cfg)
            to RRC for establishment if SRB2, DRB1, DRB2 and DRB3.
         4. RRC will validate Message request before sending configuration
            request to lower layers.
         5. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: EPS-BEARERIDENTITY)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />

     #RRC Connection establishment procedure
     <tapa.rrc.consetup cellId="2" ueId="4" tCrnti="4" />

      # Security Activation for UE in connected mode
      <tapa.rrc.security_actv ueId="4" cellId="2"/>
   </tapa.cfg>
   <tapa.test>
      # Send Reconfiguration request
      <tapa.send>
         <tapa.nhu.datreq spId="0" bitMask="2" expCfgBitMask="1"
          msgCategory="1" msgType="4" transId="1" rrc_transId="1"
          cellId="2" ueId="4" pdcpId="1" numAddRb="3" addRbIdStr="2,0,3,1,4,1"
          addLcIdStr="2,3,4" addBitMskStr="7,1,1" rbCfgType="1" logChType="3"
          trChCfgDed="0" macSchedCfg="0"  valChk="0" rrcTransIdPres="1"
          eps_BrIdAbsent="1"/>
      </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.conrls ueId="4" cellId="2" />
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>


##################################################################################
#       Test:    12.9
#       Desc:    Validation of Condition IE
#                RadioResourceConfigDedicated.DRB-ToAddModList.
#                logicalChannelIdentity during RRC Connection Reconfiguration
#                procedure.
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.9">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE
         RadioResourceConfigDedicated.DRB-ToAddModList.logicalChannelIdentity
         during RRC Connection Reconfiguration procedure.

         RRC user will send RRC Connection Reconfigration request to establish
         SRB2 and few (example DRB1, DRB2, DRB3) DRBs. After this, RRC user will
         send RRC Connection reconfiguration request again with below message
         fillings:

         RRCConnectionReconfigurationIEs
         |
         +--> RadioResourceConfigDedicated is Present
         |   |
         |   +--> SRB-ToAddModList is present
         |   +--> DRB-ToAddModList (For the already established DRB)
         |   |   |
         |   |   +-->eps-BearerIdentity is present
         |   |   +--> DRB-Identity is present
         |   |   +--> PDCP-Config is present
         |   |   +--> RLC-Config is present
         |   |   +--> logicalChannelIdentity is NOT present
         |   |   +--> LogicalChannelConfig is present
         |   |
         |   +--> MAC-MainConfig is optional
         |   +--> DRB-ToReleaseList is optional
         |   +--> SPS-Config is optional
         |   +--> PhysicalConfigDedicated is optional
         +--> MeasConfig is optional
         +--> MobilityControlInfo is NOT Present
         +--> DedicatedInfoNAS is optional
         +--> SecurityConfigHO is NOT present

         This test cases is to check only for eps-BearerIdentity element.
         "NOT rpesent" for other elements is just to make sure that this is a
         procedure for RRC Connection Reconfiguration not during HO. RRC will send
         error indidcation to RRC user as this IE should not be present for this
         scenario.

         Steps:
         ------
         1. (RRC Connection is Established)
         2. (Initial Security has been activated)
         3. (RRC Reconfiguration to create SRB2 and few DRB1, DRB2, DRB3 is done)
         4. RRC user sends RRC Connection Reconfiguration Request (data and Cfg)
            to RRC with above mentioned message filling for modification of DRB2.
         5. RRC will validate Message request before sending configuration
            request to lower layers.
         6. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: LOGICALCHANNELIDENTITY)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />

     #RRC Connection establishment procedure
     <tapa.rrc.consetup cellId="2" ueId="4" tCrnti="4" />

      # Security Activation for UE in connected mode
      <tapa.rrc.security_actv ueId="4" cellId="2"/>

      <tapa.rrc.conrecfg cellId="2" ueId="4"/>
   </tapa.cfg>
   <tapa.test>
      # Send Reconfiguration request
      <tapa.send>
         <tapa.nhu.datreq spId="0" bitMask="2" expCfgBitMask="1"
          msgCategory="1" msgType="4" transId="1" rrc_transId="1"
          cellId="2" ueId="4" pdcpId="1" modAddRb="2" modRbIdStr="3,1,4,1"
          addLcIdStr="2,3" rbCfgType="2" logChType="3"
          trChCfgDed="0" macSchedCfg="0"  valChk="0" rrcTransIdPres="1"/>
      </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.conrls ueId="4" cellId="2" />
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>


##################################################################################
#       Test:    12.10
#       Desc:    Validation of Condition IE
#                RadioResourceConfigDedicated.DRB-ToAddModList.PDCP-Config
#                during RRC Connection Reconfiguration procedure.(Not first time)
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.10">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE
         RadioResourceConfigDedicated.DRB-ToAddModList.PDCP-Config
         during RRC Connection Reconfiguration procedure.(Not first time)

         RRC user will send RRC Connection reconfiguration request again with
         below message fillings:

         RRCConnectionReconfigurationIEs
         |
         +--> RadioResourceConfigDedicated is Present
         |   |
         |   +--> SRB-ToAddModList is present
         |   +--> DRB-ToAddModList
         |   |   |
         |   |   +-->eps-BearerIdentity is PRESENT
         |   |   +--> DRB-Identity is present
         |   |   +--> PDCP-Config is NOT present
         |   |   +--> RLC-Config is present
         |   |   +--> logicalChannelIdentity is present
         |   |   +--> LogicalChannelConfig is present
         |   |
         |   +--> MAC-MainConfig is optional
         |   +--> DRB-ToReleaseList is optional
         |   +--> SPS-Config is optional
         |   +--> PhysicalConfigDedicated is optional
         +--> MeasConfig is optional
         +--> MobilityControlInfo is NOT Present
         +--> DedicatedInfoNAS is optional
         +--> SecurityConfigHO is NOT present

         This test cases is to check only for PDCP-Config element.
         "NOT rpesent" for other elements is just to make sure that this is a
         procedure for RRC Connection Reconfiguration not during HO. RRC will send
         error indidcation to RRC user as this IE is mandatory for this scenario.

         Steps:
         ------
         1. (RRC Connection is Established)
         2. (Initial Security has been activated)
         3. RRC user sends RRC Connection Reconfiguration Request (data and Cfg)
            to RRC with above mentioned message filling for establishment if SRB2,
            DRB1, DRB2 and DRB3.
         4. RRC will validate Message request before sending configuration
            request to lower layers.
         5. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: PDCP-CONFIG)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />

     #RRC Connection establishment procedure
     <tapa.rrc.consetup cellId="2" ueId="4" tCrnti="4" />

      # Security Activation for UE in connected mode
      <tapa.rrc.security_actv ueId="4" cellId="2"/>
   </tapa.cfg>
   <tapa.test>
      # Send Reconfiguration request
      <tapa.send>
         <tapa.nhu.datreq spId="0" bitMask="2" expCfgBitMask="1"
          msgCategory="1" msgType="4" transId="1" rrc_transId="1"
          cellId="2" ueId="4" pdcpId="1" numAddRb="3" addRbIdStr="2,0,3,1,4,1"
          addLcIdStr="2,3,4" addBitMskStr="7,1,1" rbCfgType="1" logChType="3"
          trChCfgDed="0" macSchedCfg="0"  valChk="0" rrcTransIdPres="1"
          pdcpCfgAbsent="1"/>
      </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.conrls ueId="4" cellId="2" />
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>


##################################################################################
#       Test:    12.11
#       Desc:    Validation of Condition IE
#                RadioResourceConfigDedicated.DRB-ToAddModList.PDCP-Config
#                during RRC Connection Reconfiguration procedure (Not first time)
#                (This field should not be present if RB is not being setup)
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.11">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE RadioResourceConfigDedicated.DRB-ToAddModList
         .PDCP-Config during RRC Connection Reconfiguration procedure (Not first
         time). (This field should not be present if RB is not being setup)

         RRC user will send RRC Connection Reconfigration request to establish
         SRB2 and few (example DRB1, DRB2, DRB3) DRBs. After reconfiguration
         procedure is successfull RRC user will send one more reconfiguration
         request to UE with below message fillings:

         RRCConnectionReconfigurationIEs
         |
         +--> RadioResourceConfigDedicated is Present
         |   |
         |   +--> SRB-ToAddModList is present
         |   +--> DRB-ToAddModList (For the already established DRB)
         |   |   |
         |   |   +-->eps-BearerIdentity is NOT present
         |   |   +--> DRB-Identity is present
         |   |   +--> PDCP-Config is PRESENT
         |   |   +--> RLC-Config is present
         |   |   +--> logicalChannelIdentity is NOT present
         |   |   +--> LogicalChannelConfig is present
         |   |
         |   +--> MAC-MainConfig is optional
         |   +--> DRB-ToReleaseList is optional
         |   +--> SPS-Config is optional
         |   +--> PhysicalConfigDedicated is optional
         +--> MeasConfig is optional
         +--> MobilityControlInfo is NOT Present
         +--> DedicatedInfoNAS is optional
         +--> SecurityConfigHO is NOT present

         This test cases is to check only for PDCP-Config element.
         "NOT rpesent" for other elements is just to make sure that this is a
         procedure for RRC Connection Reconfiguration not during HO. RRC will send
         error indidcation to RRC user as this IE should not be present for this
         scenario.

         Steps:
         ------
         1. (RRC Connection is Established)
         2. (Initial Security has been activated)
         3. (RRC Reconfiguration to create SRB2 and few DRB1, DRB2, DRB3 is done)
         4. RRC user sends RRC Connection Reconfiguration Request (data and Cfg)
            to RRC with above mentioned message filling for modification of DRB2.
         5. RRC will validate Message request before sending configuration
            request to lower layers.
         6. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: PDCP-CONFIG)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />

     #RRC Connection establishment procedure
     <tapa.rrc.consetup cellId="2" ueId="4" tCrnti="4" />

      # Security Activation for UE in connected mode
      <tapa.rrc.security_actv ueId="4" cellId="2"/>

      <tapa.rrc.conrecfg cellId="2" ueId="4"/>
   </tapa.cfg>
   <tapa.test>
      # Send Reconfiguration request
      <tapa.send>
         <tapa.nhu.datreq spId="0" bitMask="2" expCfgBitMask="1"
          msgCategory="1" msgType="4" transId="1" rrc_transId="1"
          cellId="2" ueId="4" pdcpId="1" numModRb="2" modRbIdStr="3,1,4,1"
          modLcIdStr="3,4"  rbCfgType="2" logChType="3"
          trChCfgDed="0" macSchedCfg="0"  valChk="0" rrcTransIdPres="1"
          pdcpCfgAbsent="0"/>
      </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.conrls ueId="4" cellId="2" />
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>


##################################################################################
#       Test:    12.12
#       Desc:    Validation of Condition IE
#                RadioResourceConfigDedicated.DRB-ToAddModList.RLC-Config
#                during RRC Connection Reconfiguration procedure
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.12">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE
         RadioResourceConfigDedicated.DRB-ToAddModList.RLC-Config
         during RRC Connection Reconfiguration procedure.

         RRC user will send RRC Connection reconfiguration request again with
         below message fillings:

         RRCConnectionReconfigurationIEs
         |
         +--> RadioResourceConfigDedicated is Present
         |   |
         |   +--> SRB-ToAddModList is present
         |   +--> DRB-ToAddModList
         |   |   |
         |   |   +-->eps-BearerIdentity is present
         |   |   +--> DRB-Identity is present
         |   |   +--> PDCP-Config is present
         |   |   +--> RLC-Config is NOT present
         |   |   +--> logicalChannelIdentity is present
         |   |   +--> LogicalChannelConfig is present
         |   |
         |   +--> MAC-MainConfig is optional
         |   +--> DRB-ToReleaseList is optional
         |   +--> SPS-Config is optional
         |   +--> PhysicalConfigDedicated is optional
         +--> MeasConfig is optional
         +--> MobilityControlInfo is NOT Present
         +--> DedicatedInfoNAS is optional
         +--> SecurityConfigHO is NOT present

         This test cases is to check only for RLC-Config element.
         "NOT rpesent" for other elements is just to make sure that this is a
         procedure for RRC Connection Reconfiguration not during HO. RRC will send
         error indidcation to RRC user as this IE should not be present for this
         scenario.

         Steps:
         ------
         1. (RRC Connection is Established)
         2. (Initial Security has been activated)
         3. RRC user sends RRC Connection Reconfiguration Request (data and Cfg)
            to RRC for establishment if SRB2, DRB1, DRB2 and DRB3.
         4. RRC will validate Message request before sending configuration
            request to lower layers.
         6. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: RLC-CONFIG)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />

     #RRC Connection establishment procedure
     <tapa.rrc.consetup cellId="2" ueId="4" tCrnti="4" />

      # Security Activation for UE in connected mode
      <tapa.rrc.security_actv ueId="4" cellId="2"/>
   </tapa.cfg>
   <tapa.test>
      # Send Reconfiguration request
      <tapa.send>
         <tapa.nhu.datreq spId="0" bitMask="2" expCfgBitMask="1"
          msgCategory="1" msgType="4" transId="1" rrc_transId="1"
          cellId="2" ueId="4" pdcpId="1" numAddRb="3" addRbIdStr="2,0,3,1,4,1"
          addLcIdStr="2,3,4" addBitMskStr="7,1,1" rbCfgType="1" logChType="3"
          trChCfgDed="0" macSchedCfg="0"  valChk="0" rrcTransIdPres="1"
          drbRlcCfgAbsent="1"/>
      </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.conrls ueId="4" cellId="2" />
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>


##################################################################################
#       Test:    12.13
#       Desc:    Validation of Condition IE
#                RadioResourceConfigDedicated.DRB-ToAddModList
#                .logicalChannelIdentity during RRC Connection Reconfiguration
#                procedure.
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.13">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE RadioResourceConfigDedicated.DRB-ToAddModList
         .logicalChannelIdentity during RRC Connection Reconfiguration

         RRC user will send RRC Connection reconfiguration request again with
         below message fillings:

         RRCConnectionReconfigurationIEs
         |
         +--> RadioResourceConfigDedicated is Present
         |   |
         |   +--> SRB-ToAddModList is present
         |   +--> DRB-ToAddModList
         |   |   |
         |   |   +-->eps-BearerIdentity is present
         |   |   +--> DRB-Identity is present
         |   |   +--> PDCP-Config is present
         |   |   +--> RLC-Config is present
         |   |   +--> logicalChannelIdentity is NOT present
         |   |   +--> LogicalChannelConfig is present
         |   |
         |   +--> MAC-MainConfig is optional
         |   +--> DRB-ToReleaseList is optional
         |   +--> SPS-Config is optional
         |   +--> PhysicalConfigDedicated is optional
         +--> MeasConfig is optional
         +--> MobilityControlInfo is NOT Present
         +--> DedicatedInfoNAS is optional
         +--> SecurityConfigHO is NOT present

         This test cases is to check only for logicalChannelIdentity element.
         "NOT rpesent" for other elements is just to make sure that this is a
         procedure for RRC Connection Reconfiguration not during HO. RRC will send
         error indidcation to RRC user as this IE is mandatory for for this
         scenario.

         Steps:
         ------
         1. (RRC Connection is Established)
         2. (Initial Security has been activated)
         3. RRC user sends RRC Connection Reconfiguration Request (data and Cfg)
            to RRC for establishment if SRB2, DRB1, DRB2 and DRB3.
         4. RRC will validate Message request before sending configuration
            request to lower layers.
         6. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: LOGICALCHANNELIDENTITY)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />

     #RRC Connection establishment procedure
     <tapa.rrc.consetup cellId="2" ueId="4" tCrnti="4" />

      # Security Activation for UE in connected mode
      <tapa.rrc.security_actv ueId="4" cellId="2"/>
   </tapa.cfg>
   <tapa.test>
      # Send Reconfiguration request
      <tapa.send>
         <tapa.nhu.datreq spId="0" bitMask="2" expCfgBitMask="1"
          msgCategory="1" msgType="4" transId="1" rrc_transId="1"
          cellId="2" ueId="4" pdcpId="1" numAddRb="3" addRbIdStr="2,0,3,1,4,1"
          addBitMskStr="7,1,1" rbCfgType="1" logChType="3"
          trChCfgDed="0" macSchedCfg="0"  valChk="0" rrcTransIdPres="1"/>
      </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.conrls ueId="4" cellId="2" />
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>


##################################################################################
#       Test:    12.14
#       Desc:    Validation of Condition IE
#                RadioResourceConfigDedicated.DRB-ToAddModList
#                .logicalChannelIdentity during RRC Connection Reconfiguration
#                procedure (Not first time)
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.14">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE RadioResourceConfigDedicated.DRB-ToAddModList
         .logicalChannelIdentity during RRC Connection Reconfiguration procedure
         (Not first time)

         RRC user will send RRC Connection Reconfigration request to establish
         SRB2 and few (example DRB1, DRB2, DRB3) DRBs. After reconfiguration
         procedure is successfull RRC user will send one more reconfiguration
         request to UE with below message fillings:

         RRCConnectionReconfigurationIEs
         |
         +--> RadioResourceConfigDedicated is Present
         |   |
         |   +--> SRB-ToAddModList is present
         |   +--> DRB-ToAddModList (For the already established DRB)
         |   |   |
         |   |   +-->eps-BearerIdentity is NOT present
         |   |   +--> DRB-Identity is present
         |   |   +--> PDCP-Config is NOT present
         |   |   +--> RLC-Config is present
         |   |   +--> logicalChannelIdentity is PRESENT
         |   |   +--> LogicalChannelConfig is present
         |   |
         |   +--> MAC-MainConfig is optional
         |   +--> DRB-ToReleaseList is optional
         |   +--> SPS-Config is optional
         |   +--> PhysicalConfigDedicated is optional
         +--> MeasConfig is optional
         +--> MobilityControlInfo is NOT Present
         +--> DedicatedInfoNAS is optional
         +--> SecurityConfigHO is NOT present

         This test cases is to check only for logicalChannelIdentity element.
         "NOT rpesent" for other elements is just to make sure that this is a
         procedure for RRC Connection Reconfiguration not during HO. RRC will send
         error indidcation to RRC user as this IE should not be present for this
         scenario.

         Steps:
         ------
         1. (RRC Connection is Established)
         2. (Initial Security has been activated)
         3. (RRC Reconfiguration to create SRB2 and few DRB1, DRB2, DRB3 is done)
         4. RRC user sends RRC Connection Reconfiguration Request (data and Cfg)
            to RRC with above mentioned message filling for modification of DRB2.
         5. RRC will validate Message request before sending configuration
            request to lower layers.
         6. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: LOGICALCHANNELIDENTITY)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />

     #RRC Connection establishment procedure
     <tapa.rrc.consetup cellId="2" ueId="4" tCrnti="4" />

      # Security Activation for UE in connected mode
      <tapa.rrc.security_actv ueId="4" cellId="2"/>

      <tapa.rrc.conrecfg cellId="2" ueId="4"/>
   </tapa.cfg>
   <tapa.test>
      # Send Reconfiguration request
      <tapa.send>
         <tapa.nhu.datreq spId="0" bitMask="2" expCfgBitMask="1"
          msgCategory="1" msgType="4" transId="1" rrc_transId="1"
          cellId="2" ueId="4" pdcpId="1" numModRb="2" modRbIdStr="3,1,4,1"
          rbCfgType="2" addLcIdStr="4,5" logChType="3" trChCfgDed="0" macSchedCfg="0"  valChk="0" 
          rrcTransIdPres="1" eps_BrIdAbsent="1" pdcpCfgAbsent="1"/>
      </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.conrls ueId="4" cellId="2" />
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>


##################################################################################
#       Test:    12.15
#       Desc:    Validation of Condition IE
#                RadioResourceConfigDedicated.DRB-ToAddModList.LogicalChannelConfig
#                during RRC Connection Reconfiguration procedure
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.15">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE
         RadioResourceConfigDedicated.DRB-ToAddModList.LogicalChannelConfig
         during RRC Connection Reconfiguration procedure.

         RRC user will send RRC Connection reconfiguration request again with
         below message fillings:

         RRCConnectionReconfigurationIEs
         |
         +--> RadioResourceConfigDedicated is Present
         |   |
         |   +--> SRB-ToAddModList is present
         |   +--> DRB-ToAddModList
         |   |   |
         |   |   +-->eps-BearerIdentity is present
         |   |   +--> DRB-Identity is present
         |   |   +--> PDCP-Config is present
         |   |   +--> RLC-Config is present
         |   |   +--> logicalChannelIdentity is present
         |   |   +--> LogicalChannelConfig is NOT present
         |   |
         |   +--> MAC-MainConfig is optional
         |   +--> DRB-ToReleaseList is optional
         |   +--> SPS-Config is optional
         |   +--> PhysicalConfigDedicated is optional
         +--> MeasConfig is optional
         +--> MobilityControlInfo is NOT Present
         +--> DedicatedInfoNAS is optional
         +--> SecurityConfigHO is NOT present

         This test cases is to check only for LogicalChannelConfig element.
         "NOT rpesent" for other elements is just to make sure that this is a
         procedure for RRC Connection Reconfiguration not during HO. RRC will send
         error indidcation to RRC user as this IE is mandatory for this scenario.

         Steps:
         ------
         1. (RRC Connection is Established)
         2. (Initial Security has been activated)
         3. RRC user sends RRC Connection Reconfiguration Request (data and Cfg)
            to RRC for establishment if SRB2, DRB1, DRB2 and DRB3.
         4. RRC will validate Message request before sending configuration
            request to lower layers.
         6. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: RLC-CONFIG)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />

     #RRC Connection establishment procedure
     <tapa.rrc.consetup cellId="2" ueId="4" tCrnti="4" />

      # Security Activation for UE in connected mode
      <tapa.rrc.security_actv ueId="4" cellId="2"/>
   </tapa.cfg>
   <tapa.test>
      # Send Reconfiguration request
      <tapa.send>
         <tapa.nhu.datreq spId="0" bitMask="2" expCfgBitMask="1"
          msgCategory="1" msgType="4" transId="1" rrc_transId="1"
          cellId="2" ueId="4" pdcpId="1" numAddRb="3" addRbIdStr="2,0,3,1,4,1"
          addLcIdStr="2,3,4" addBitMskStr="7,1,1" rbCfgType="1" logChType="3"
          trChCfgDed="0" macSchedCfg="0"  valChk="0" rrcTransIdPres="1"
          drbLogChCfgAbsent="1"/>
      </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.conrls ueId="4" cellId="2" />
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>


##################################################################################
#       Test:    12.16
#       Desc:    Validation of Condition IE
#                RadioResourceConfigDedicated.DRB-ToAddModList
#                .LogicalChannelConfig.ul-SpecificParameters during RRC Connection
#                Reconfiguration procedure - Test Type 1.
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.16">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE
         RadioResourceConfigDedicated.DRB-ToAddModList.LogicalChannelConfig
         during RRC Connection Reconfiguration procedure - Test Type 1.

         RRC user will send RRC Connection reconfiguration request again with
         below message fillings for configuration of SRB2, DRB1 and DRB2:

         RRCConnectionReconfigurationIEs
         |
         +--> RadioResourceConfigDedicated is Present
         |   |
         |   +--> SRB-ToAddModList is present
         |   +--> DRB-ToAddModList (DRB1 for DL and DRB2 for UL)
         |   |   |
         |   |   +-->eps-BearerIdentity is present
         |   |   +--> DRB-Identity is present
         |   |   +--> PDCP-Config is present
         |   |   +--> RLC-Config is present (DRBs in UM Uni-Directional)
         |   |   +--> logicalChannelIdentity is present
         |   |   +--> LogicalChannelConfig is present
         |   |      |
         |   |      +--> ul-SpecificParameters is NOT Present for DRB2
         |   |      +--> ul-SpecificParameters is NOT Present for DRB1
         |   |
         |   +--> MAC-MainConfig is optional
         |   +--> DRB-ToReleaseList is optional
         |   +--> SPS-Config is optional
         |   +--> PhysicalConfigDedicated is optional
         +--> MeasConfig is optional
         +--> MobilityControlInfo is NOT Present
         +--> DedicatedInfoNAS is optional
         +--> SecurityConfigHO is NOT present

         This test cases is to check only for ul-SpecificParameters element.
         "NOT rpesent" for other elements is just to make sure that this is a
         procedure for RRC Connection Reconfiguration not during HO. RRC will send
         error indidcation to RRC user as this IE is mandatory for this scenario.

         Steps:
         ------
         1. (RRC Connection is Established)
         2. (Initial Security has been activated)
         3. RRC user sends RRC Connection Reconfiguration Request (data and Cfg)
            to RRC for establishment if SRB2, DRB1 and DRB2.
         4. RRC will validate Message request before sending configuration
            request to lower layers.
         6. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: UL-SPECIFICPARAMETERS)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />

     #RRC Connection establishment procedure
     <tapa.rrc.consetup cellId="2" ueId="4" tCrnti="4" />

      # Security Activation for UE in connected mode
      <tapa.rrc.security_actv ueId="4" cellId="2"/>
   </tapa.cfg>
   <tapa.test>
      # Send Reconfiguration request
      <tapa.send>
         <tapa.nhu.datreq spId="0" bitMask="2" expCfgBitMask="1"
          msgCategory="1" msgType="4" transId="1" rrc_transId="1"
          cellId="2" ueId="4" pdcpId="1" numAddRb="3" addRbIdStr="2,0,3,1,4,1"
          addLcIdStr="2,3,4" addBitMskStr="7,1,1" rbCfgType="1" logChType="3"
          trChCfgDed="0" macSchedCfg="0"  valChk="0" rrcTransIdPres="1"
          ulSpecParamAbsent="1" />
      </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.conrls ueId="4" cellId="2" />
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>

##################################################################################
#       Test:    12.17
#       Desc:    Validation of Condition IE
#                RadioResourceConfigDedicated.DRB-ToAddModList.PDCP-Config
#                .discardTimer during RRC Connection Reconfiguration procedure.
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.17">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE RadioResourceConfigDedicated.DRB-ToAddModList
         .PDCP-Config.discardTimer during RRC Connection Reconfiguration
         procedure

         RRC user will send RRC Connection Reconfigration request to establish
         SRB2 and few (DRB1 and DRB2) DRBs with below message fillings:

         RRCConnectionReconfigurationIEs
         |
         +--> RadioResourceConfigDedicated is Present
         |   |
         |   +--> SRB-ToAddModList is present
         |   +--> DRB-ToAddModList (For the already established DRB)
         |   |   |
         |   |   +-->eps-BearerIdentity is present
         |   |   +--> DRB-Identity is present
         |   |   +--> PDCP-Config is present
         |   |   |   |
         |   |   |   +--> discardTimer is NOT present
         |   |   |   +--> rlc-AM is present for DRB1
         |   |   |   +--> rlc-UM is present for DRB2
         |   |   |   +--> headerCompression is present
         |   |   |
         |   |   +--> RLC-Config is present (DRB1 in AM and DRB2 in UM)
         |   |   +--> logicalChannelIdentity is present
         |   |   +--> LogicalChannelConfig is present
         |   |
         |   +--> MAC-MainConfig is optional
         |   +--> DRB-ToReleaseList is optional
         |   +--> SPS-Config is optional
         |   +--> PhysicalConfigDedicated is optional
         +--> MeasConfig is optional
         +--> MobilityControlInfo is NOT Present
         +--> DedicatedInfoNAS is optional
         +--> SecurityConfigHO is NOT present

         This test cases is to check only for discardTimer element.
         "NOT rpesent" for other elements is just to make sure that this is a
         procedure for RRC Connection Reconfiguration not during HO. RRC will send
         error indidcation to RRC user as this IE is mandatory for this scenario.

         Steps:
         ------
         1. (RRC Connection is Established)
         2. (Initial Security has been activated)
         3. RRC user sends RRC Connection Reconfiguration Request (data and Cfg)
            to RRC with above mentioned message filling.
         4. RRC will validate Message request before sending configuration
            request to lower layers.
         5. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: DISCARDTIMER)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />

     #RRC Connection establishment procedure
     <tapa.rrc.consetup cellId="2" ueId="4" tCrnti="4" />

      # Security Activation for UE in connected mode
      <tapa.rrc.security_actv ueId="4" cellId="2"/>
   </tapa.cfg>
   <tapa.test>
      # Send Reconfiguration request
      <tapa.send>
         <tapa.nhu.datreq spId="0" bitMask="2" expCfgBitMask="1"
          msgCategory="1" msgType="4" transId="1" rrc_transId="1"
          cellId="2" ueId="4" pdcpId="1" numAddRb="3" addRbIdStr="2,0,3,1,4,1"
          addLcIdStr="2,3,4" addBitMskStr="7,1,1" rbCfgType="1" logChType="3"
          trChCfgDed="0" macSchedCfg="0"  valChk="0" rrcTransIdPres="1"
          disTimAbsent="1"/>
      </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.conrls ueId="4" cellId="2" />
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>


##################################################################################
#       Test:    12.18
#       Desc:    Validation of Condition IE
#                RadioResourceConfigDedicated.DRB-ToAddModList.PDCP-Config
#                .rlc-AM during RRC Connection Reconfiguration procedure.
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.18">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE RadioResourceConfigDedicated.DRB-ToAddModList
         .PDCP-Config.rlc-AM during RRC Connection Reconfiguration
         procedure

         RRC user will send RRC Connection Reconfigration request to establish
         SRB2 and few (DRB1 and DRB2) DRBs with below message fillings:

         RRCConnectionReconfigurationIEs
         |
         +--> RadioResourceConfigDedicated is Present
         |   |
         |   +--> SRB-ToAddModList is present
         |   +--> DRB-ToAddModList (For the already established DRB)
         |   |   |
         |   |   +-->eps-BearerIdentity is present
         |   |   +--> DRB-Identity is present
         |   |   +--> PDCP-Config is present
         |   |   |   |
         |   |   |   +--> discardTimer is present
         |   |   |   +--> rlc-AM is NOT present for DRB1
         |   |   |   +--> rlc-UM is present for DRB2
         |   |   |   +--> headerCompression is present
         |   |   |
         |   |   +--> RLC-Config is present (DRB1 in AM and DRB2 in UM)
         |   |   +--> logicalChannelIdentity is present
         |   |   +--> LogicalChannelConfig is present
         |   |
         |   +--> MAC-MainConfig is optional
         |   +--> DRB-ToReleaseList is optional
         |   +--> SPS-Config is optional
         |   +--> PhysicalConfigDedicated is optional
         +--> MeasConfig is optional
         +--> MobilityControlInfo is NOT Present
         +--> DedicatedInfoNAS is optional
         +--> SecurityConfigHO is NOT present

         This test cases is to check only for rlc-AM element.
         "NOT rpesent" for other elements is just to make sure that this is a
         procedure for RRC Connection Reconfiguration not during HO. RRC will send
         error indidcation to RRC user as this IE is mandatory for this scenario.

         Steps:
         ------
         1. (RRC Connection is Established)
         2. (Initial Security has been activated)
         3. RRC user sends RRC Connection Reconfiguration Request (data and Cfg)
            to RRC with above mentioned message filling.
         4. RRC will validate Message request before sending configuration
            request to lower layers.
         5. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: RLC-AM)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />

     #RRC Connection establishment procedure
     <tapa.rrc.consetup cellId="2" ueId="4" tCrnti="4" />

      # Security Activation for UE in connected mode
      <tapa.rrc.security_actv ueId="4" cellId="2"/>
   </tapa.cfg>
   <tapa.test>
      # Send Reconfiguration request
      <tapa.send>
         <tapa.nhu.datreq spId="0" bitMask="2" expCfgBitMask="1"
          msgCategory="1" msgType="4" transId="1" rrc_transId="1"
          cellId="2" ueId="4" pdcpId="1" numAddRb="3" addRbIdStr="2,0,3,1,4,1"
          addLcIdStr="2,3,4" addBitMskStr="7,1,1" rbCfgType="1" logChType="3"
          trChCfgDed="0" macSchedCfg="0"  valChk="0" rrcTransIdPres="1"
          pdcpCfgRlcAmAbsent="1" rlcCfgMode="0"/>
      </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.conrls ueId="4" cellId="2" />
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>


##################################################################################
#       Test:    12.19
#       Desc:    Validation of Condition IE
#                RadioResourceConfigDedicated.DRB-ToAddModList.PDCP-Config
#                .rlc-UM during RRC Connection Reconfiguration procedure.
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.19">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE RadioResourceConfigDedicated.DRB-ToAddModList
         .PDCP-Config.rlc-UM during RRC Connection Reconfiguration
         procedure

         RRC user will send RRC Connection Reconfigration request to establish
         SRB2 and few (DRB1 and DRB2) DRBs with below message fillings:

         RRCConnectionReconfigurationIEs
         |
         +--> RadioResourceConfigDedicated is Present
         |   |
         |   +--> SRB-ToAddModList is present
         |   +--> DRB-ToAddModList (For the already established DRB)
         |   |   |
         |   |   +-->eps-BearerIdentity is present
         |   |   +--> DRB-Identity is present
         |   |   +--> PDCP-Config is present
         |   |   |   |
         |   |   |   +--> discardTimer is present
         |   |   |   +--> rlc-AM is present for DRB1
         |   |   |   +--> rlc-UM is NOT present for DRB2
         |   |   |   +--> headerCompression is present
         |   |   |
         |   |   +--> RLC-Config is present (DRB1 in AM and DRB2 in UM)
         |   |   +--> logicalChannelIdentity is present
         |   |   +--> LogicalChannelConfig is present
         |   |
         |   +--> MAC-MainConfig is optional
         |   +--> DRB-ToReleaseList is optional
         |   +--> SPS-Config is optional
         |   +--> PhysicalConfigDedicated is optional
         +--> MeasConfig is optional
         +--> MobilityControlInfo is NOT Present
         +--> DedicatedInfoNAS is optional
         +--> SecurityConfigHO is NOT present

         This test cases is to check only for rlc-UM element.
         "NOT rpesent" for other elements is just to make sure that this is a
         procedure for RRC Connection Reconfiguration not during HO. RRC will send
         error indidcation to RRC user as this IE is mandatory for this scenario.

         Steps:
         ------
         1. (RRC Connection is Established)
         2. (Initial Security has been activated)
         3. RRC user sends RRC Connection Reconfiguration Request (data and Cfg)
            to RRC with above mentioned message filling.
         4. RRC will validate Message request before sending configuration
            request to lower layers.
         5. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: RLC-UM)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />

     #RRC Connection establishment procedure
     <tapa.rrc.consetup cellId="2" ueId="4" tCrnti="4" />

      # Security Activation for UE in connected mode
      <tapa.rrc.security_actv ueId="4" cellId="2"/>
   </tapa.cfg>
   <tapa.test>
      # Send Reconfiguration request
      <tapa.send>
         <tapa.nhu.datreq spId="0" bitMask="2" expCfgBitMask="1"
          msgCategory="1" msgType="4" transId="1" rrc_transId="1"
          cellId="2" ueId="4" pdcpId="1" numAddRb="3" addRbIdStr="2,0,3,1,4,1"
          addLcIdStr="2,3,4" addBitMskStr="7,1,1" rbCfgType="1" logChType="3"
          trChCfgDed="0" macSchedCfg="0"  valChk="0" rrcTransIdPres="1"
          pdcpCfgRlcUmAbsent="1" rlcCfgMode="2"/>
      </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.conrls ueId="4" cellId="2" />
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>

##################################################################################
#       Test:    12.20
#       Desc:    Validation of Condition IE
#                RadioResourceConfigDedicated.PhysicalConfigDedicated
#                .AntennaInfoDedicated.codebookSubsetRestriction during RRC
#                Connection Reconfiguration procedure.
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.20">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE RadioResourceConfigDedicated
         .PhysicalConfigDedicated.AntennaInfoDedicated.codebookSubsetRestriction
         during RRC Connection Reconfiguration procedure.

         RRC user will send RRC Connection Reconfigration request to establish
         SRB2 and few (DRB1 and DRB2) DRBs with below message fillings:

         RRCConnectionReconfigurationIEs
         |
         +--> RadioResourceConfigDedicated is Present
         |   |
         |   +--> SRB-ToAddModList is present
         |   +--> DRB-ToAddModList
         |   +--> PhysicalConfigDedicated is present
         |   |   |
         |   |   +--> AntennaInfoDedicated is Present
         |   |   |   |
         |   |   |   +--> transmissionMode (any value among tm3, tm4, tm5 and tm6)
         |   |   |   +--> codebookSubsetRestriction NOT Present
         |   |   |
         |   |   +--> All other elements - optional
         |   |
         |   +--> MAC-MainConfig is optional
         |   +--> DRB-ToReleaseList is optional
         |   +--> SPS-Config is optional
         +--> MeasConfig is optional
         +--> MobilityControlInfo is NOT Present
         +--> DedicatedInfoNAS is optional
         +--> SecurityConfigHO is NOT present

         This test cases is to check only for codebookSubsetRestriction element.
         "NOT rpesent" for other elements is just to make sure that this is a
         procedure for RRC Connection Reconfiguration not during HO. RRC will send
         error indidcation to RRC user as this IE is mandatory for this scenario.

         Steps:
         ------
         1. (RRC Connection is Established)
         2. (Initial Security has been activated)
         3. RRC user sends RRC Connection Reconfiguration Request (data and Cfg)
            to RRC with above mentioned message filling.
         4. RRC will validate Message request before sending configuration
            request to lower layers.
         5. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: CODEBOOKSUBSETRESTRICTION)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />

     #RRC Connection establishment procedure
     <tapa.rrc.consetup cellId="2" ueId="4" tCrnti="4" />

      # Security Activation for UE in connected mode
      <tapa.rrc.security_actv ueId="4" cellId="2"/>
   </tapa.cfg>
   <tapa.test>
      # Send Reconfiguration request
      <tapa.send>
         <tapa.nhu.datreq spId="0" bitMask="2" expCfgBitMask="1"
          msgCategory="1" msgType="4" transId="1" rrc_transId="1"
          cellId="2" ueId="4" pdcpId="1" numAddRb="3" addRbIdStr="2,0,3,1,4,1"
          addLcIdStr="2,3,4" addBitMskStr="7,1,1" rbCfgType="1" logChType="3"
          trChCfgDed="0" macSchedCfg="0"  valChk="0" rrcTransIdPres="1"
          txMode="4" codeBookRestnPres="FALSE"/>
      </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.conrls ueId="4" cellId="2" />
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>

##################################################################################
#       Test:    12.21
#       Desc:    Validation of Condition IE
#                RadioResourceConfigDedicated.PhysicalConfigDedicated
#                .PUCCH-ConfigDedicated.tdd-AckNackFeedbackMode during RRC
#                Connection Reconfiguration procedure.
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.21">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE RadioResourceConfigDedicated
         .PhysicalConfigDedicated.PUCCH-ConfigDedicated.tdd-AckNackFeedbackMode
         during RRC Connection Reconfiguration procedure.

         RRC user will send RRC Connection Reconfigration request to establish
         SRB2 and few (DRB1 and DRB2) DRBs with below message fillings:

         RRCConnectionReconfigurationIEs
         |
         +--> RadioResourceConfigDedicated is Present
         |   |
         |   +--> SRB-ToAddModList is present
         |   +--> DRB-ToAddModList
         |   +--> PhysicalConfigDedicated is present
         |   |   |
         |   |   +--> PUCCH-ConfigDedicated is Present
         |   |   |   |
         |   |   |   +--> tdd-AckNackFeedbackMode is NOT present
         |   |   |
         |   |   +--> All other elements - optional
         |   |
         |   +--> MAC-MainConfig is optional
         |   +--> DRB-ToReleaseList is optional
         |   +--> SPS-Config is optional
         +--> MeasConfig is optional
         +--> MobilityControlInfo is NOT Present
         +--> DedicatedInfoNAS is optional
         +--> SecurityConfigHO is NOT present

         This test cases is to check only for tdd-AckNackFeedbackMode element.
         "NOT rpesent" for other elements is just to make sure that this is a
         procedure for RRC Connection Reconfiguration not during HO. RRC will send
         error indidcation to RRC user as this IE is mandatory for this scenario.

         Steps:
         ------
         1. (RRC Connection is Established)
         2. (Initial Security has been activated)
         3. RRC user sends RRC Connection Reconfiguration Request (data and Cfg)
            to RRC with above mentioned message filling.
         4. RRC will validate Message request before sending configuration
            request to lower layers.
         5. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: TDD-ACKNACKfEEDBACKMODE)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" duplexMode="2"/>

     #RRC Connection establishment procedure
     <tapa.rrc.consetup cellId="2" ueId="4" tCrnti="4" tddPres="TRUE"/>

      # Security Activation for UE in connected mode
      <tapa.rrc.security_actv ueId="4" cellId="2"/>
   </tapa.cfg>
   <tapa.test>
      # Send Reconfiguration request
      <tapa.send>
         <tapa.nhu.datreq spId="0" bitMask="2" expCfgBitMask="1"
          msgCategory="1" msgType="4" transId="1" rrc_transId="1"
          cellId="2" ueId="4" pdcpId="1" numAddRb="3" addRbIdStr="2,0,3,1,4,1"
          addLcIdStr="2,3,4" addBitMskStr="7,1,1" rbCfgType="1" logChType="3"
          trChCfgDed="0" macSchedCfg="0"  valChk="0" rrcTransIdPres="1"
          />
      </tapa.send>


      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.conrls ueId="4" cellId="2" />
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>


##################################################################################
#       Test:    12.22
#       Desc:    Validation of Condition IE
#                RadioResourceConfigDedicated.PhysicalConfigDedicated
#                .PUCCH-ConfigDedicated.tdd-AckNackFeedbackMode during RRC
#                Connection Setup procedure.
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.22">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE RadioResourceConfigDedicated
         .PhysicalConfigDedicated.PUCCH-ConfigDedicated.tdd-AckNackFeedbackMode
         during RRC Connection Setup procedure.

         RRC user will send RRC Connection Setup request with below message
         fillings:

         RRCConnectionSetupIEs
         |
         +--> RadioResourceConfigDedicated is Present
            |
            +--> SRB-ToAddModList is present
            +--> DRB-ToAddModList
            +--> PhysicalConfigDedicated is present
            |   |
            |   +--> PUCCH-ConfigDedicated is Present
            |   |   |
            |   |   +--> tdd-AckNackFeedbackMode is NOT present
            |   |
            |   +--> All other elements - optional
            |
            +--> MAC-MainConfig is optional
            +--> DRB-ToReleaseList is optional
            +--> SPS-Config is optional

         This test cases is to check only for tdd-AckNackFeedbackMode element.
         RRC will send error indidcation to RRC user as this IE is mandatory for
         this scenario.

         Steps:
         ------
         1. RRC recieves Data indication from PDCP for RRC Connection Request
            Message sent from UE
         2. RRC will send data indication for the same to RRC user
         3. RRC user sends RRC Connection Setup Request (data and Cfg)
            to RRC with massage filling as mentioned above
         4. RRC will validate Message request before sending configuration
            request to lower layers.
         5. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: TDD-ACKNACKfEEDBACKMODE)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" duplexMode="2" />
   </tapa.cfg>
   <tapa.test>
      # Send RRC Connection Request from RLC 
      <tapa.send >
         <tapa.dummy.kwu.datind suId="0" spId="0" rbId="1" msgType="1" 
         cellId="2" tCrnti="2" />
      </tapa.send>

      <tapa.delay delay="5" />
      #Expect RRC Connection Request at RRC user
      <tapa.expect >
         <tapa.nhu.datind cellId="2" tCrnti="2" />
      </tapa.expect>

      #Send RRC Connection Setup from RRC user
      <tapa.send>
         <tapa.nhu.datrsp spId="0" bitMask="2" expCfgBitMask="11"
          rbCfgType="1"  numAddRb="1" msgCategory="3" msgType="3"
          rrc_transId="1" transId="10" rbId="1" tCrnti="2" cellId="2" 
          addRbIdStr="1,0" pdcpId="1" />
      </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>

##################################################################################
#       Test:    12.23
#       Desc:    Validation of Condition IE SystemInformationBlockType1.TDD-Config
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.23">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE SystemInformationBlockType1.TDD-Config

         RRC user will send data request to RRC for system information (SIB1) with
         below message fillings:

         SystemInformationBlockType1
         |
         +--> cellAccessRelatedInfo is present
         +--> cellSelectionInfo is present
         +--> P-Max is optional
         +--> freqBandIndicator is present
         +--> SchedulingInfoList is present
         +--> TDD-Config is NOT present
         +--> si-WindowLength is present
         +--> systemInfoValueTag is present

         This test cases is to check only for TDD-Config element.
         RRC will send error indidcation to RRC user as this IE is mandatory for
         this scenario.

         Steps:
         ------
         1. (Perform Cell Configuration)
         2. RRC user sends data request for MIB and SIB1 transmission with timing
            info to RRC with above mentioned message filling.
         3. RRC will validate SI Message request before sending request to lower
            layers.
         4. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: TDD-CONFIG)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" duplexMode="2"/>

   </tapa.cfg>
   <tapa.test>
    <tapa.send>
      <tapa.nhu.datreq msgCategory="7" msgType="1" cellId="2" rbId="1" 
      fdd_mode="1"/>
    </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>

##################################################################################
#       Test:    12.24
#       Desc:    Validation of Condition IE SystemInformationBlockType4
#                .csg-PhysCellIdRange
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.24">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
          Validation of Condition IE SystemInformationBlockType4
          .csg-PhysCellIdRange

         RRC user will send data request to RRC for system information (SIB4) with
         below message fillings:

         SystemInformationBlockType4
         |
         +--> IntraFreqNeighCellList is present
         +--> IntraFreqBlackCellList is present
         +--> csg-PhysCellIdRange is NOT present

         This test cases is to check only for csg-PhysCellIdRange element.
         RRC will send error indidcation to RRC user as this IE is mandatory for
         this scenario.

         Steps:
         ------
         1. (Perform CSG Cell Configuration)
         2. RRC user sends data request for MIB and SIB1 transmission with timing
            info to RRC
         3. RRC will validate SI Message request before sending request to lower
            layers.
         4. RRC user sends data request for SIB4 transmission with timing
            info to RRC with above mentioned message filling.
         5. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: CSG-PHYSCELLIDRANGE)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />
   </tapa.cfg>
   <tapa.test>
    #send SIB1 message to indicate it is CSG Cell
    <tapa.send>
      <tapa.nhu.datreq msgCategory="7" msgType="1" cellId="2" rbId="1" 
          isCSGCell="1" />
    </tapa.send>

   #Check whether the message is received at RLC interface
    <tapa.expect>
      <tapa.dummy.kwu.datreq cellId="2" rbId="1" ueId="0"/>
    </tapa.expect>

    #send MIB message from NHU interface
    <tapa.send>
      <tapa.nhu.datreq msgCategory="7" msgType="0" cellId="2" rbId="1" sibNum="4"
      csgPhyRangAbsent="1"/>
    </tapa.send>
      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>


##################################################################################
#       Test:    12.25
#       Desc:    Validation of Condition IE SystemInformationBlockType11
#                .dataCodingScheme
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.25">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
          Validation of Condition IE SystemInformationBlockType11
          .dataCodingScheme

         RRC user will send data request to RRC for system information (SIB11) with
         below message fillings:

         SystemInformationBlockType11
         |
         +--> messageIdentifier is present
         +--> serialNumber is present
         +--> warningMessageSegmentType is present
         +--> warningMessageSegmentNumber is present
         +--> warningMessageSegment is present
         +--> dataCodingScheme is NOT present

         This test cases is to check only for dataCodingScheme element.
         RRC will send error indidcation to RRC user as this IE is mandatory for
         this scenario.

         Steps:
         ------
         1. (Perform Cell Configuration)
         2. RRC will validate SI Message request before sending request to lower
            layers.
         3. RRC user sends data request for SIB11 (first segment) transmission
            with timing info to RRC with above mentioned message filling.
         4. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: DATACODINGSCHEME)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />
   </tapa.cfg>
   <tapa.test>
    #send MIB message from NHU interface
    <tapa.send>
      <tapa.nhu.datreq msgCategory="7" msgType="0" cellId="2" rbId="1" sibNum="11"
      dataCodSchAbsent="1"/>
    </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>


##################################################################################
#       Test:    12.26
#       Desc:    Validation of Condition IE SystemInformationBlockType8
#                .parametersHRPD.PreRegistrationInfoHRPD
#                .PreRegistrationZoneIdHRPD
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.26">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE SystemInformationBlockType8
         .parametersHRPD.PreRegistrationInfoHRPD.PreRegistrationZoneIdHRPD

         RRC user will send data request to RRC for system information (SIB4) with
         below message fillings:

         SystemInformationBlockType8
         |
         +--> SystemTimeInfoCDMA2000 is optional
         +--> searchWindowSize is present
         +--> parametersHRPD is present
         |  |
         |  +--> PreRegistrationInfoHRPD is present
         |  |  |
         |  |  +--> preRegistrationAllowed is present (set to TRUE)
         |  |  +--> PreRegistrationZoneIdHRPD is NOT present
         |  |  +--> SecondaryPreRegistrationZoneIdListHRPD is optional
         |  |
         |  +--> CellReselectionParametersCDMA2000 is optional
         +--> parameters1XRTT is optional

         This test cases is to check only for PreRegistrationZoneIdHRPD element.
         RRC will send error indidcation to RRC user as this IE is mandatory for
         this scenario.

         Steps:
         ------
         1. (Perform Cell Configuration)
         2. RRC user sends data request for MIB and SIB1 transmission with
            timing info to RRC
         3. RRC will validate SI Message request before sending request to lower
            layers.
         4. RRC user sends data request for SIB8 transmission
            with timing info to RRC with above mentioned message filling.
         5. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: PREREGISTRATIONZONEIDHRPD)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />
   </tapa.cfg>
   <tapa.test>
    #send MIB message from NHU interface
    <tapa.send>
      <tapa.nhu.datreq msgCategory="7" msgType="0" cellId="2" rbId="1" sibNum="8"
      preRegAllowed="TRUE" zoneIdPres="FALSE"/>
    </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>



##################################################################################
#       Test:    12.27
#       Desc:    Validation of Condition IE
#                MeasConfig.PreRegistrationInfoHRPD.PreRegistrationZoneIdHRPD
#                during RRC Connection Reconfiguration procedure (Not first time).
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.27">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE
         RadioResourceConfigDedicated.DRB-ToAddModList.eps-BearerIdentity
         during RRC Connection Reconfiguration procedure (Not first time).

         RRC user will send RRC Connection Reconfigration request for measurement
         iconfiguration with below message fillings:

         RRCConnectionReconfigurationIEs
         |
         +--> RadioResourceConfigDedicated is Present
         +--> MeasConfig is optional
         |  |
         |  +--> All Measurement objects - present
         |  +--> All Reporting configurations - present
         |  +--> All Measurement identities - present
         |  +--> PreRegistrationInfoHRPD is present
         |  |  |
         |  |  +--> preRegistrationAllowed is present (set to TRUE)
         |  |  +--> preRegistrationZoneId is NOT present
         |  |  +--> SecondaryPreRegistrationZoneIdListHRPD is present
         |  +--> All Other parameters - optional
         +--> MobilityControlInfo is NOT Present
         +--> DedicatedInfoNAS is optional
         +--> SecurityConfigHO is NOT present

         This test cases is to check only for eps-BearerIdentity element.
         "NOT rpesent" for other elements is just to make sure that this is a
         procedure for RRC Connection Reconfiguration not during HO. RRC will send
         error indidcation to RRC user as this IE should not be present for this
         scenario.

         Steps:
         ------
         1. (RRC Connection is Established)
         2. (Initial Security has been activated)
         4. RRC user sends RRC Connection Reconfiguration Request (data and Cfg)
            to RRC with above mentioned message filling.
         5. RRC will validate Message request before sending configuration
            request to lower layers.
         6. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: PREREGISTRATIONZONEIDHRPD)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />

     #RRC Connection establishment procedure
     <tapa.rrc.consetup cellId="2" ueId="4" tCrnti="4" />

      # Security Activation for UE in connected mode
      <tapa.rrc.security_actv ueId="4" cellId="2"/>
   </tapa.cfg>
   <tapa.test>
      # Send Reconfiguration request
      <tapa.send>
         <tapa.nhu.datreq spId="0" bitMask="2" expCfgBitMask="1"
          msgCategory="1" msgType="4" transId="1" rrc_transId="1"
          cellId="2" ueId="4" pdcpId="1" numAddRb="3" addRbIdStr="2,0,3,1,4,1"
          addLcIdStr="2,3,4" addBitMskStr="7,1,1" rbCfgType="1" logChType="3"
          trChCfgDed="0" macSchedCfg="0"  valChk="0" rrcTransIdPres="1"
          preRegAllowed="TRUE" zoneIdPres="FALSE" />
      </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.conrls ueId="4" cellId="2" />
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>

##################################################################################
#       Test:    12.28
#       Desc:    Verification of Mobility from E-UTRA Command procedure 
#                failure scenario due to Handover.nas-SecurityParamFromEUTRA 
#                conditional IE check failure.
#       Module:  rrc.cpm
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.28">
   #<tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>

      <tapa.rfc id="36.331-8.5.0" section="6.2"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
           "This test case tests the Mobility from E-UTRA Command procedure"
           "failure scenario due to Handover.nas-SecurityParamFromEUTRA"
           "conditional IE check failure."
     
           "Pretest includes RRC layer initialization,Cell Configuration,"
           "Connection Setup and Security Activation."

           "It involves sending of the mobility from E-UTRA command message"
           "from RRC user to RRC with 
             - Handover IE present (choice set to handover).
               --> targetRAT-Type set to UTRA.
               --> 'Cond UTRAGERAN' nas-SecurityParamFromEUTRA IE not present
                    (mobilityFromEUTRACommand-->handover-->nas-SecurityParamFromEUTRA).
             - Other mandatory fields present."

           "RRC on getting this message checks whether the UE context exists"
           "and if exists, checks if security is activated.RRC then checks if"
           "nas-SecurityParamFromEUTRA is present as target type is UTRA."
           "As nas-SecurityParamFromEUTRA is not present, RRC issues error"
           "indication with error cause as 'conditional IE failure' and error"
           "type as 'invalid sdu param'."

           Steps:
           "1. RRC user sends Mobility from E-UTRA Command message to RRC using
               NhUiNhuDatReq(tapa.nhu.datreq)."
           "2. Due to validation failure, RRC issues error indication to RRC 
               user using NhUiNhuErrInd(tapa.nhu.errind) with error type as 
               'NHU_ERRTYPE_INV_SDU_PARAM' and error cause as 'NHU_ERRCAUSE_COND_IE_FAIL'."
           "3. RRC user validates the error cause and type received by RRC."
      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
        <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Bring up the RRC layer using LM
      <tapa.rrc.init />
      # Configure Cell
      <tapa.rrc.cellcfg cellId="1"/>
      # Connection setup procedure
      <tapa.rrc.consetup ueId="2" cellId="1" tCrnti="2"/>
      # Security activation procedure
      <tapa.rrc.security_actv ueId="2" cellId="1"/>
   </tapa.cfg>

   <tapa.test>
          
          #Send Connection Reconfiguration For ueId 1, cellId=1
          #msgCategory="1" DLDCCH, msgType="4" Connection recfg
          #expCfgBitMask=1 Only RbConfig is given
          #Adding 1 SRB, 2 DRBs rbCfgType="1"
          #logChType="3" id logical chanel type DLDCCH=3(enum)
          #addLcIdStr logical channels wrt to RBs added
          #addBitMskStr direction UL/DL/PDCP for RBs added
          #trChCfgDed=0 indicates transport channel config not present.
          #macSchedCfg="0" indicates MAC Scheduling config not present.
          <tapa.send>
         <tapa.nhu.datreq spId="0" bitMask="2" expCfgBitMask="1"
                 msgCategory="1" msgType="4" transId="1" rrc_transId="1"
                 cellId="1" ueId="2" pdcpId="1" numAddRb="3" addRbIdStr="2,0,3,1,4,1"
                 addLcIdStr="2,3,4" addBitMskStr="7,1,1" rbCfgType="1" logChType="3"
                 trChCfgDed="0" macSchedCfg="0"  valChk="0"/>
      </tapa.send>

          <tapa.delay delay="1" />

     #Expect Lower Layer configurations
      <tapa.expset>
         <tapa.dummy.crg.cfgreq  store_tid="1" ueIdPres="1" valUeId="2" rbIdx="0"/>
                 <tapa.dummy.crg.cfgreq  store_tid="1" ueIdPres="1" valUeId="2" rbIdx="1"/>
                 <tapa.dummy.crg.cfgreq  store_tid="1" ueIdPres="1" valUeId="2" rbIdx="2" cleanup="1"/>
         <tapa.dummy.ckw.cfgreq  use="1" ueIdPres="1" valUeId="2" cleanup="1"/>
                 <tapa.dummy.cpj.cfgreq  use="1" ueIdPres="1" valUeId="2" cleanup="1" />
      </tapa.expset>
     
     <tapa.send>
         <tapa.dummy.ckw.cfgcfm   use="1" ueId="2"/>
     </tapa.send>
     
     <tapa.send>
         <tapa.dummy.crg.cfgcfm   stored_tid="1" ueId="2"/>
     </tapa.send>

         <tapa.send>
         <tapa.dummy.crg.cfgcfm   stored_tid="1" ueId="2"/>
     </tapa.send>

         <tapa.send>
         <tapa.dummy.crg.cfgcfm   stored_tid="1" ueId="2"/>
     </tapa.send>

     <tapa.send>
         <tapa.dummy.cpj.cfgcfm   use="1" ueId="2"/>
     </tapa.send>

     <tapa.delay delay="1" />

          #Expect Conn Recfg PJU/PDCP
      <tapa.expect>
         <tapa.dummy.pju.datreq ueId="2" cellId="1" pdcpInstId="1"/>
      </tapa.expect>

     #Expect config cfm at NHU
     <tapa.expect>
        <tapa.nhu.cfgcfm/>
     </tapa.expect>

     <tapa.delay delay="1" />

      # Send Conn Recfg Complete
      # msgType="3" Conn Recfg Complete
      # cellId and ueId should be passed.
      <tapa.send>
        <tapa.dummy.pju.datind pdcpInstId="1" msgType="2" spId="0" suId="0"
         ueId="2" cellId="1"/>
      </tapa.send>

          <tapa.delay delay="1" />

     #Expect Conn Recfg Complete at NHU  
      <tapa.expect>
                 <tapa.nhu.datind ueId="2" cellId="1"/>
      </tapa.expect>

     #Send Mobility From E-UTRA Command to RRC from RRC user
     <tapa.send>
         <tapa.nhu.datreq spId="0" cellId="1" ueId="2" msgCategory="1" msgType="3" transId="6" rrc_transId="1"  valChk="0" pdcpId="1" ratType="0" nasSecPrmPres="FALSE"/>
     </tapa.send>

     <tapa.delay delay="1" />

     #Expect Error Indication at NHU 
     <tapa.expect>
         <tapa.nhu.errind  errorCause="44" errorType="6"/>
     </tapa.expect>

   </tapa.test>

   # Clean subsection
   <tapa.clean>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>

</tapa.testcase>
##################################################################################
#       Test:    12.29
#       Desc:    Verification of Mobility from E-UTRA Command procedure 
#                failure scenario due to Handover.SI-OrPSI-GERAN conditional
#                IE check failure.
#       Module:  rrc.cpm
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.29">
   #<tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>

      <tapa.rfc id="36.331-8.5.0" section="6.2"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
           "This test case tests the Mobility from E-UTRA Command procedure"
           "failure scenario due to Handover.SI-OrPSI-GERAN conditional IE"
           "check failure."
     
           "Pretest includes RRC layer initialization,Cell Configuration,"
           "Connection Setup and Security Activation."

           "It involves sending of the mobility from E-UTRA command message"
           "from RRC user to RRC with 
             - Handover IE present (choice set to handover).
               --> targetRAT-Type set to GERAN.
               --> 'Cond PS HO' SI-OrPSI-GERAN IE not present
                    (mobilityFromEUTRACommand-->handover-->systemInfo(SI-OrPSI-GERAN)
                        -->si/psi-->noComp is set to not present).
             - Other mandatory fields present."

           "RRC on getting this message checks whether the UE context exists"
           "and if exists, checks if security is activated.RRC then checks if"
           "SI-OrPSI-GERAN(cond PSHO) is present as target type is GERAN. As"
           "SI-OrPSI-GERAN is not present, RRC issues error indication with"
           "error cause as 'conditional IE failure' and error type as 'invalid"
           "sdu param'."


           Steps:
           "1. RRC user sends Mobility from E-UTRA Command message to RRC using
               NhUiNhuDatReq(tapa.nhu.datreq)."
           "2. Due to validation failure, RRC issues error indication to RRC 
               user using NhUiNhuErrInd(tapa.nhu.errind) with error type as 
               'NHU_ERRTYPE_INV_SDU_PARAM' and error cause as 'NHU_ERRCAUSE_COND_IE_FAIL'."
           "3. RRC user validates the error cause and type received by RRC."
      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
        <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Bring up the RRC layer using LM
      <tapa.rrc.init />
      # Configure Cell
      <tapa.rrc.cellcfg cellId="1"/>
      # Connection setup procedure
      <tapa.rrc.consetup ueId="2" cellId="1" tCrnti="2"/>
      # Security activation procedure
      <tapa.rrc.security_actv ueId="2" cellId="1"/>
   </tapa.cfg>

   <tapa.test>
          
          #Send Connection Reconfiguration For ueId 1, cellId=1
          #msgCategory="1" DLDCCH, msgType="4" Connection recfg
          #expCfgBitMask=1 Only RbConfig is given
          #Adding 1 SRB, 2 DRBs rbCfgType="1"
          #logChType="3" id logical chanel type DLDCCH=3(enum)
          #addLcIdStr logical channels wrt to RBs added
          #addBitMskStr direction UL/DL/PDCP for RBs added
          #trChCfgDed=0 indicates transport channel config not present.
          #macSchedCfg="0" indicates MAC Scheduling config not present.
          <tapa.send>
         <tapa.nhu.datreq spId="0" bitMask="2" expCfgBitMask="1"
                 msgCategory="1" msgType="4" transId="1" rrc_transId="1"
                 cellId="1" ueId="2" pdcpId="1" numAddRb="3" addRbIdStr="2,0,3,1,4,1"
                 addLcIdStr="2,3,4" addBitMskStr="7,1,1" rbCfgType="1" logChType="3"
                 trChCfgDed="0" macSchedCfg="0"  valChk="0"/>
      </tapa.send>

          <tapa.delay delay="1" />

     #Expect Lower Layer configurations
      <tapa.expset>
         <tapa.dummy.crg.cfgreq  store_tid="1" ueIdPres="1" valUeId="2" rbIdx="0"/>
                 <tapa.dummy.crg.cfgreq  store_tid="1" ueIdPres="1" valUeId="2" rbIdx="1"/>
                 <tapa.dummy.crg.cfgreq  store_tid="1" ueIdPres="1" valUeId="2" rbIdx="2" cleanup="1"/>
         <tapa.dummy.ckw.cfgreq  use="1" ueIdPres="1" valUeId="2" cleanup="1"/>
                 <tapa.dummy.cpj.cfgreq  use="1" ueIdPres="1" valUeId="2" cleanup="1" />
      </tapa.expset>
     
     <tapa.send>
         <tapa.dummy.ckw.cfgcfm   use="1" ueId="2"/>
     </tapa.send>
     
     <tapa.send>
         <tapa.dummy.crg.cfgcfm   stored_tid="1" ueId="2"/>
     </tapa.send>

         <tapa.send>
         <tapa.dummy.crg.cfgcfm   stored_tid="1" ueId="2"/>
     </tapa.send>

         <tapa.send>
         <tapa.dummy.crg.cfgcfm   stored_tid="1" ueId="2"/>
     </tapa.send>

     <tapa.send>
         <tapa.dummy.cpj.cfgcfm   use="1" ueId="2"/>
     </tapa.send>

     <tapa.delay delay="1" />

          #Expect Conn Recfg PJU/PDCP
      <tapa.expect>
         <tapa.dummy.pju.datreq ueId="2" cellId="1" pdcpInstId="1"/>
      </tapa.expect>

     #Expect config cfm at NHU
     <tapa.expect>
        <tapa.nhu.cfgcfm/>
     </tapa.expect>

     <tapa.delay delay="1" />

      # Send Conn Recfg Complete
      # msgType="3" Conn Recfg Complete
      # cellId and ueId should be passed.
      <tapa.send>
        <tapa.dummy.pju.datind pdcpInstId="1" msgType="2" spId="0" suId="0"
         ueId="2" cellId="1"/>
      </tapa.send>

          <tapa.delay delay="1" />

     #Expect Conn Recfg Complete at NHU  
      <tapa.expect>
                 <tapa.nhu.datind ueId="2" cellId="1"/>
      </tapa.expect>
     #Send Mobility From E-UTRA Command to RRC from RRC user
     <tapa.send>
	     <tapa.nhu.datreq spId="0" cellId="1" ueId="2" msgCategory="1" msgType="3" transId="6" rrc_transId="1"  valChk="0" pdcpId="1" ratType="1"
		    siPres="FALSE"/>
     </tapa.send>

     <tapa.delay delay="1" />

     #Expect Error Indication at NHU 
     <tapa.expect>
         <tapa.nhu.errind  errorCause="44" errorType="6"/>
     </tapa.expect>

   </tapa.test>

   # Clean subsection
   <tapa.clean>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>

</tapa.testcase>

##################################################################################
#       Test:    12.30
#       Desc:    Verification of Handover from E-UTRA Preparation(CDMA2000)
#                procedure failure scenario due to RAND-CDMA2000 conditional
#                IE check failure.
#       Module:  rrc.cpm
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.30">
   #<tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>

      <tapa.rfc id="36.331-8.5.0" section="6.2"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
           "This test case tests the Handover from E-UTRA Preparation(CDMA2000)"
           "procedure failure scenario due to RAND-CDMA2000 conditional IE check"
           "failure."

           "Pretest includes RRC layer initialization,Cell Configuration,"
           "Connection Setup and Security Activation."

           "It involves sending of the Handover from E-UTRA Preparation Request"
           "from RRC user to RRC with 
               - cdma2000-Type field set to 1xRTT.
               - 'Cond cdma2000-Type' rand-CDMA2000 IE not present
               (handoverFromEUTRAPreparationRequest-->rand-CDMA2000 is set to not present).
               - Other mandatory fields present and 'Cond cdma2000-Type' mobilityParameters IE(handoverFromEUTRAPreparationRequest-->rand-CDMA2000) present."

           "RRC on getting this message checks whether the UE context exists"
           "and if exists, checks if security is activated.RRC then checks if"
           "rand-CDMA2000 is present as cdma2000-Type field is set to 1xRTT."
           "As rand-CDMA2000 is not present, RRC issues error"
           "indication with error cause as 'conditional IE failure' and error"
           "type as 'invalid sdu param'."

           Steps:
           "1. RRC user sends Handover from E-UTRA Preparation Request message
               to RRC using NhUiNhuDatReq(tapa.nhu.datreq)."
           "2. Due to validation failure, RRC issues error indication to RRC 
               user using NhUiNhuErrInd(tapa.nhu.errind) with error type as 
               'NHU_ERRTYPE_INV_SDU_PARAM' and error cause as 'NHU_ERRCAUSE_COND_IE_FAIL'."
           "3. RRC user validates the error cause and type received by RRC."

      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
        <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Bring up the RRC layer using LM
      <tapa.rrc.init />
      # Configure Cell
      <tapa.rrc.cellcfg cellId="1"/>
      # Connection setup procedure
      <tapa.rrc.consetup ueId="2" cellId="1" tCrnti="2"/>
      # Security activation procedure
      <tapa.rrc.security_actv ueId="2" cellId="1"/>
   </tapa.cfg>

   <tapa.test>
      # Send HO From E-UTRA Preparation Request to RRC from RRC user
      <tapa.send>
         <tapa.nhu.datreq spId="0" cellId="1" ueId="2" msgCategory="1" msgType="2" transId="6" rrc_transId="1"  valChk="0" pdcpId="1" cdmaRandPres="FALSE" />
      </tapa.send>

     <tapa.delay delay="1" />

     #Expect Error Indication at NHU 
     <tapa.expect>
         <tapa.nhu.errind  errorCause="44" errorType="6"/>
     </tapa.expect>

   </tapa.test>

   # Clean subsection
   <tapa.clean>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>

</tapa.testcase>

##################################################################################
#       Test:    12.31
#       Desc:    Verification of Handover from E-UTRA Preparation(CDMA2000)
#                procedure failure scenario due to MobilityParametersCDMA2000
#                conditional IE check failure.
#       Module:  rrc.cpm
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.31">
   #<tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>

      <tapa.rfc id="36.331-8.5.0" section="6.2"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
           "This test case tests the Handover from E-UTRA Preparation(CDMA2000)"
           "procedure failure scenario due to MobilityParametersCDMA2000"
           "conditional IE check failure."

           "Pretest includes RRC layer initialization,Cell Configuration,"
           "Connection Setup and Security Activation."

           "It involves sending of the Handover from E-UTRA Preparation Request"
           "from RRC user to RRC with 
              - cdma2000-Type field set to 1xRTT.
              - 'Cond cdma2000-Type' MobilityParametersCDMA2000 IE not present
            (handoverFromEUTRAPreparationRequest-->mobilityParameters is set to not present).
              - Other mandatory fields present and 'Cond cdma2000-Type' 
                rand-CDMA2000 IE (handoverFromEUTRAPreparationRequest-->rand-CDMA2000) 
                present."

           "RRC on getting this message checks whether the UE context exists"
           "and if exists, checks if security is activated.RRC then checks if"
           "MobilityParametersCDMA2000 is present as cdma2000-Type field is set"
           "to 1xRTT. As MobilityParametersCDMA2000 is not present,RRC issues"
           "error indication with error cause as 'conditional IE failure' and"
           "error type as 'invalid sdu param'."

           Steps:
           "1. RRC user sends Handover from E-UTRA Preparation Request message
               to RRC using NhUiNhuDatReq(tapa.nhu.datreq)."
           "2. Due to validation failure, RRC issues error indication to RRC 
               user using NhUiNhuErrInd(tapa.nhu.errind) with error type as 
               'NHU_ERRTYPE_INV_SDU_PARAM' and error cause as 'NHU_ERRCAUSE_COND_IE_FAIL'."
           "3. RRC user validates the error cause and type received by RRC."

      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
        <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Bring up the RRC layer using LM
      <tapa.rrc.init />
      # Configure Cell
      <tapa.rrc.cellcfg cellId="1"/>
      # Connection setup procedure
      <tapa.rrc.consetup ueId="2" cellId="1" tCrnti="2"/>
      # Security activation procedure
      <tapa.rrc.security_actv ueId="2" cellId="1"/>
   </tapa.cfg>

   <tapa.test>
      # Send HO From E-UTRA Preparation Request to RRC from RRC user
      <tapa.send>
         <tapa.nhu.datreq spId="0" cellId="1" ueId="2" msgCategory="1" msgType="2" transId="6" rrc_transId="1"  valChk="0" pdcpId="1" cdmaMbPrmsPres="FALSE" />
      </tapa.send>

     <tapa.delay delay="1" />

     #Expect Error Indication at NHU 
     <tapa.expect>
         <tapa.nhu.errind  errorCause="44" errorType="6"/>
     </tapa.expect>
   </tapa.test>

   # Clean subsection
   <tapa.clean>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>

</tapa.testcase>

##################################################################################
#       Test:    12.32
#       Desc:    Verification of RRC Connection Reconfiguration message
#                validation failure due to conditional nonHO failure for 
#                DedicatedInfoNAS IE. 
#       Module:  rrc.cpm
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.32">
   #<tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>

      <tapa.rfc id="36.331-8.5.0" section="6.2"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
           "This test case tests the RRC Connection Reconfiguration message"
           "validation  failure scenario due to conditional nonHO failure for"
           "DedicatedInfoNAS IE."

           "Pretest includes RRC layer initialization,Cell Configuration,"
           "Connection Setup and Security Activation."

           "It involves sending of the RRC Connection Reconfiguration message"
           "from RRC user to RRC with 
              - MobilityControlInfo IE present(with mandatory and conditional
                IEs present within this).
              - DedicatedInfoNAS IE present(rrcConnectionReconfiguration-->dedicatedInfoNASLst-->noComp set to present. Also fill the member field).
              - RadioResourceConfigDedicated IE present(with mandatory and conditional
                IEs present within this).
              - SecurityConfigHO IE present(with mandatory and conditional
                IEs present within this)."

           "RRC on getting this message checks whether the UE context exists"
           "and if exists, checks if security is activated.RRC then checks if"
           "MobilityControlInfo IE is present. As MobilityControlInfo IE is"
           "present, RRC checks if DedicatedInfoNAS IE is present. RRC issues"
           "error indication to RRC as DedicatedInfoNAS IE is a conditional"
           "non-HO IE(DedicatedInfoNAS should not be present when MobilityControlInfo"
           "IE is present in Reconfiguration message).RRC issues error"
           "indication with error cause as 'conditional IE failure' and error"
           "type as 'invalid sdu param'."

           Steps:
           "1. RRC user sends RRC Connection Reconfiguration message to RRC
               using NhUiNhuEncodeReq(tapa.nhu.encodereq)."
           "2. Due to validation failure, RRC issues error indication to RRC 
               user using NhUiNhuErrInd(tapa.nhu.errind) with error type as 
               'NHU_ERRTYPE_INV_SDU_PARAM' and error cause as 'NHU_ERRCAUSE_COND_IE_FAIL'."
           "3. RRC user validates the error cause and type received by RRC."

      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
        <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Bring up the RRC layer using LM
      <tapa.rrc.init />
      # Configure Cell
      <tapa.rrc.cellcfg cellId="1"/>
      # Connection setup procedure
      <tapa.rrc.consetup ueId="2" cellId="1" tCrnti="2"/>
      # Security activation procedure
      <tapa.rrc.security_actv ueId="2" cellId="1"/>
   </tapa.cfg>

   <tapa.test>
      #Send Reconfiguration msg to encode to RRC
     <tapa.send>
        <tapa.nhu.encodereq ueId="2" cellId="1" transId="10" msgType="1" reCfgDedInfoPres="TRUE"
         numAddRb="2" addRbIdStr="3,1,4,1"/>
     </tapa.send>

     #Expect Error Indication at NHU 
     <tapa.expect>
         <tapa.nhu.errind  errorCause="44" errorType="6"/>
      </tapa.expect>

   </tapa.test>

   # Clean subsection
   <tapa.clean>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>

</tapa.testcase>

##################################################################################
#       Test:    12.33
#       Desc:    Verification of RRC Connection Reconfiguration message
#                validation failure due to 
#                MobilityControlInfo.carrierFreq.ul_CarrierFreq(ARFCN-ValueEUTRA)
#                conditional IE check failure when FDD is configured. 
#       Module:  rrc.ccm
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.33">
   #<tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>

      <tapa.rfc id="36.331-8.5.0" section="6.2"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
           "This test case tests the RRC Connection Reconfiguration message"
           "validation failure due to"
           "MobilityControlInfo.carrierFreq.ul_CarrierFreq(ARFCN-ValueEUTRA)"
           "conditional IE check failure when FDD is configured." 

           "Pretest includes RRC layer initialization."

           "It involves sending of the RRC Connection Reconfiguration message"
           "from RRC user to RRC with 
              - FDD mode configured for the cell in RRC.
              - MobilityControlInfo IE present(rrcConnectionReconfiguration-->mobilityCntrlInfo-->pres set to present) 
                --> CarrierFreq IE present
                    --> ARFCN_ValueEUTRA ul_CarrierFreq IE not present.
              (MobilityControlInfo-->carrierFreq-->ul_CarrierFreq(ARFCN-ValueEUTRA).
              - DedicatedInfoNAS IE not present.
              - RadioResourceConfigDedicated IE present(with mandatory and conditional
                IEs present within this).
              - SecurityConfigHO IE present(with mandatory and conditional
                IEs present within this)."

           "RRC on getting this message checks whether the UE context exists"
           "and if exists, checks if security is activated.RRC then checks if"
           "MobilityControlInfo IE is present. In MobilityControlInfo IE, RRC" 
           "RRC checks if ARFCN-ValueEUTRA IE is present as FDD mode is"
           "configured. RRC issues error indication to RRC as conditional FDD" 
           "ARFCN-ValueEUTRA IE is not present in MobilityControlInfo IE. RRC"
           "issues error indication with error cause as 'conditional IE failure'"
           "and error type as 'invalid sdu param'."

           Steps:
           "1. RRC user sends RRC Connection Reconfiguration message to RRC
               using NhUiNhuEncodeReq(tapa.nhu.encreq)."
           "2. Due to validation failure, RRC issues error indication to RRC 
               user using NhUiNhuErrInd(tapa.nhu.errind) with error type as 
               'NHU_ERRTYPE_INV_SDU_PARAM' and error cause as 'NHU_ERRCAUSE_COND_IE_FAIL'."
           "3. RRC user validates the error cause and type received by RRC."

      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
        <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Bring up the RRC layer using LM
      <tapa.rrc.init />
      # Configure Cell
      <tapa.rrc.cellcfg cellId="1" duplexMode="1"/>
      # Connection setup procedure
      <tapa.rrc.consetup ueId="2" cellId="1" tCrnti="2"/>
      # Security activation procedure
      <tapa.rrc.security_actv ueId="2" cellId="1"/>
   </tapa.cfg>

   <tapa.test>
      #Send Reconfiguration msg to encode to RRC
     <tapa.send>
        <tapa.nhu.encodereq ueId="2" cellId="1" transId="10" msgType="1" 
         numAddRb="2" addRbIdStr="3,1,4,1" ulCarrierFreqPres="FALSE"/>
     </tapa.send>

     #Expect Error Indication at NHU 
     <tapa.expect>
         <tapa.nhu.errind  errorCause="44" errorType="6"/>
     </tapa.expect>
   </tapa.test>

   # Clean subsection
   <tapa.clean>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>

</tapa.testcase>

##################################################################################
#       Test:    12.34
#       Desc:    Verification of RRC Connection Reconfiguration message
#                validation failure due to 
#                MobilityControlInfo.carrierFreq.ul_CarrierFreq(ARFCN-ValueEUTRA)
#                conditional IE check failure when TDD is configured. 
#       Module:  rrc.uim
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.34">
   #<tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>

      <tapa.rfc id="36.331-8.5.0" section="6.2"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
           "This test case tests the RRC Connection Reconfiguration message"
           "validation failure due to" 
           "MobilityControlInfo.carrierFreq.ul_CarrierFreq(ARFCN-ValueEUTRA)
           "conditional IE check failure when TDD is configured." 

           "Pretest includes RRC layer initialization."

           "It involves sending of the RRC Connection Reconfiguration message"
           "from RRC user to RRC with 
              - TDD mode configured in RRC.
              - MobilityControlInfo IE present(rrcConnectionReconfiguration-->mobilityCntrlInfo-->pres set to present) and not including srs_MaxUpPts IE in
                --> CarrierFreq IE optional.
                    --> If CarrierFreq IE present,
                        ARFCN_ValueEUTRA ul_CarrierFreq IE present.
              (MobilityControlInfo-->carrierFreq-->ul_CarrierFreq(ARFCN-ValueEUTRA).
                --> RadioResourceConfigCommon IE present.
                    --> SoundingRS-UL-ConfigCommon IE present.
                        -->srs-MaxUpPts IE not present.
              (MobilityControlInfo-->radioResourceConfigCmn-->soundingRS_UL_ConfigCmn-->setup.srs_MaxUpPts).
              - DedicatedInfoNAS IE not present.
              - RadioResourceConfigDedicated IE present(with mandatory and conditional
                IEs present within this).
              - SecurityConfigHO IE present(with mandatory and conditional
                IEs present within this)."

           "RRC on getting this message checks whether the UE context exists"
           "and if exists, checks if security is activated.RRC then checks if"
           "MobilityControlInfo IE is present. In MobilityControlInfo IE, RRC" 
           "RRC checks if 
              -  CarrierFreq IE present. 
                 --> ARFCN_ValueEUTRA IE is present for ul_CarrierFreq.
           "Since ARFCN_ValueEUTRA for ul_CarrierFreq should be present for FDD,
           "RRC issues error indication to RRC as conditional ARFCN_ValueEUTRA" 
           "FDD IE is present in MobilityControlInfo IE.RRC issues error"
           "indication with error cause as 'conditional IE failure' and error"
           "type as 'invalid sdu param'."

           Steps:
           "1. RRC user sends RRC Connection Reconfiguration message to RRC
               using NhUiNhuEncodeReq(tapa.nhu.encreq)."
           "2. Due to validation failure, RRC issues error indication to RRC 
               user using NhUiNhuErrInd(tapa.nhu.errind) with error type as 
               'NHU_ERRTYPE_INV_SDU_PARAM' and error cause as 'NHU_ERRCAUSE_COND_IE_FAIL'."
           "3. RRC user validates the error cause and type received by RRC."

      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
        <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Bring up the RRC layer using LM
      <tapa.rrc.init />
      # Configure Cell
      <tapa.rrc.cellcfg cellId="1" duplexMode="2"/>
      # Connection setup procedure
      <tapa.rrc.consetup ueId="2" cellId="1" tCrnti="2" tddPres="TRUE"/>
      # Security activation procedure
      <tapa.rrc.security_actv ueId="2" cellId="1"/>
   </tapa.cfg>

   <tapa.test>
      #Send Reconfiguration msg to encode to RRC
     <tapa.send>
        <tapa.nhu.encodereq ueId="2" cellId="1" transId="10" msgType="1" 
         numAddRb="2" addRbIdStr="3,1,4,1" />
     </tapa.send>

     #Expect Error Indication at NHU 
     <tapa.expect>
         <tapa.nhu.errind  errorCause="44" errorType="6"/>
     </tapa.expect>
   </tapa.test>

   # Clean subsection
   <tapa.clean>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>

</tapa.testcase>
##################################################################################
#       Test:    12.35
#       Desc:    Verification of RRC Connection Reconfiguration message
#                validation failure due to SecurityConfigHO conditional IE check
#                failure. 
#       Module:  rrc.uim
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.35">
   #<tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>

      <tapa.rfc id="36.331-8.5.0" section="6.2"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
           "This test case tests the RRC Connection Reconfiguration message"
           "validation failure due to SecurityConfigHO conditional IE check"
           "failure." 

           "Pretest includes RRC layer initialization."

           "It involves sending of the RRC Connection Reconfiguration message"
           "from RRC user to RRC with 
              - MobilityControlInfo IE present(rrcConnectionReconfiguration-->mobilityCntrlInfo-->pres set to present) and including all mandatory and conditional IEs within this.
              - DedicatedInfoNAS IE not present.
              - RadioResourceConfigDedicated IE present(with mandatory and conditional
                IEs present within this).
              - SecurityConfigHO IE not present(rrcConnectionReconfiguration-->securityConfigHO-->pres set to not present)."

           "RRC on getting this message checks whether the UE context exists"
           "and if exists, checks if security is activated.RRC then checks if
              - MobilityControlInfo IE is present and validates this IE for
                mandatory and conditional IEs.
              - DedicatedInfoNAS IE is not present.
              - RadioResourceConfigDedicated IE is present and validates this
                for mandatory and conditional IEs.
              - SecurityConfigHO IE is not present."

           "As SecurityConfigHO which is conditional HO IE is not present, RRC
           "issues error indication to RRC user. RRC issues error"
           "indication with error cause as 'conditional IE failure' and error"
           "type as 'invalid sdu param'."

           Steps:
           "1. RRC user sends RRC Connection Reconfiguration message to RRC
               using NhUiNhuEncodeReq(tapa.nhu.encreq)."
           "2. Due to validation failure, RRC issues error indication to RRC 
               user using NhUiNhuErrInd(tapa.nhu.errind) with error type as 
               'NHU_ERRTYPE_INV_SDU_PARAM' and error cause as 'NHU_ERRCAUSE_COND_IE_FAIL'."
           "3. RRC user validates the error cause and type received by RRC."

      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
        <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Bring up the RRC layer using LM
      <tapa.rrc.init />
      # Configure Cell
      <tapa.rrc.cellcfg cellId="1"/>
      # Connection setup procedure
      <tapa.rrc.consetup ueId="2" cellId="1" tCrnti="2"/>
      # Security activation procedure
      <tapa.rrc.security_actv ueId="2" cellId="1"/>
   </tapa.cfg>

   <tapa.test>
      #Send Reconfiguration msg to encode to RRC
     <tapa.send>
        <tapa.nhu.encodereq ueId="2" cellId="1" transId="10" msgType="1" 
         numAddRb="2" addRbIdStr="3,1,4,1" secHoPres="FALSE"/>
     </tapa.send>

     #Expect Error Indication at NHU 
     <tapa.expect>
         <tapa.nhu.errind  errorCause="44" errorType="6"/>
     </tapa.expect>
   </tapa.test>

   # Clean subsection
   <tapa.clean>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>

</tapa.testcase>

##################################################################################
#       Test:    12.36
#       Desc:    Verification of RRC Connection Reconfiguration message
#                validation failure due to MeasConfig.PreRegistrationZoneIdHRPD
#                conditional IE check failure. 
#       Module:  rrc.uim
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.36">
   #<tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>

      <tapa.rfc id="36.331-8.5.0" section="6.2"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
           "This test case tests the RRC Connection Reconfiguration message"
           "validation failure due to MeasConfig.PreRegistrationZoneIdHRPD"
           "conditional IE check failure." 

           "Pretest includes RRC layer initialization."

           "It involves sending of the RRC Connection Reconfiguration message"
           "from RRC user to RRC with 
              - MeasConfig IE present.
                --> preRegistrationInfoHRPD IE present.
                    --> Set preRegistrationAllowed(MeasConfig-->preRegistrationInfoHRPD-->preRegistrationAllowed) value to TRUE. 
                    --> PreRegistrationZoneIdHRPD(MeasConfig-->preRegistrationInfoHRPD-->preRegistrationZoneId-->pres set to not present) IE not present.
              - MobilityControlInfo IE present(rrcConnectionReconfiguration-->mobilityCntrlInfo-->pres set to present) and including all mandatory and conditional IEs within this.
              - DedicatedInfoNAS IE not present.
              - RadioResourceConfigDedicated IE present(with mandatory and conditional
                IEs present within this).
              - SecurityConfigHO IE present(with mandatory and conditional
                IEs present within this)."

           "RRC on getting this message checks whether the UE context exists"
           "and if exists, checks if security is activated.RRC then checks if
              - MobilityControlInfo IE is present and validates this IE for
                mandatory and conditional IEs.
              - DedicatedInfoNAS IE is not present.
              - RadioResourceConfigDedicated IE is present and validates this
                for mandatory and conditional IEs.
              - SecurityConfigHO IE is present."
              - MeasConfig IE is present. RRC then checks if PreRegistrationZoneIdHRPD 
                IE is present as preRegistrationAllowed flag is set to TRUE.

           "As PreRegistrationZoneIdHRPD which is conditional preRegAllowed IE"
           "is  not present, RRC issues error indication to RRC user.RRC issues error"
           "indication with error cause as 'conditional IE failure' and error"
           "type as 'invalid sdu param'."

           Steps:
           "1. RRC user sends RRC Connection Reconfiguration message to RRC
               using NhUiNhuEncodeReq(tapa.nhu.encreq)."
           "2. Due to validation failure, RRC issues error indication to RRC 
               user using NhUiNhuErrInd(tapa.nhu.errind) with error type as 
               'NHU_ERRTYPE_INV_SDU_PARAM' and error cause as 'NHU_ERRCAUSE_COND_IE_FAIL'."
           "3. RRC user validates the error cause and type received by RRC."

      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
        <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Bring up the RRC layer using LM
      <tapa.rrc.init />
      # Configure Cell
      <tapa.rrc.cellcfg cellId="1"/>
      # Connection setup procedure
      <tapa.rrc.consetup ueId="2" cellId="1" tCrnti="2"/>
      # Security activation procedure
      <tapa.rrc.security_actv ueId="2" cellId="1"/>
   </tapa.cfg>

   <tapa.test>
      #Send Reconfiguration msg to encode to RRC
     <tapa.send>
        <tapa.nhu.encodereq ueId="2" cellId="1" transId="10" msgType="1" 
         numAddRb="2" addRbIdStr="3,1,4,1" preRegAllowed="TRUE" zoneIdPres="FALSE"/>
     </tapa.send>

     #Expect Error Indication at NHU 
     <tapa.expect>
         <tapa.nhu.errind  errorCause="44" errorType="6"/>
     </tapa.expect>
   </tapa.test>

   # Clean subsection
   <tapa.clean>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>

</tapa.testcase>

##################################################################################
#       Test:    12.37
#       Desc:    Verification of Handover Preparation Information message
#                validation failure due to 
#                AS-Config.MeasConfig.PreRegistrationZoneIdHRPD conditional
#                IE check failure. 
#       Module:  rrc.uim
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.37">
   #<tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>

      <tapa.rfc id="36.331-8.5.0" section="6.2"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
           "This test case tests the Handover Preparation Information message"
           "validation failure due to AS-Config.MeasConfig.PreRegistrationZoneIdHRPD"
           "conditional IE check failure." 

           "Pretest includes RRC layer initialization."

           "It involves sending of the Handover Preparation Information message"
           "from RRC user to RRC with 
              - AS-config IE present. 
                --> MeasConfig IE present.
                    --> preRegistrationInfoHRPD IE present.
                        --> Set preRegistrationAllowed(handoverPreparationInformation-->AS-config-->MeasConfig-->preRegistrationInfoHRPD-->preRegistrationAllowed) value to TRUE. 
                        --> PreRegistrationZoneIdHRPD(handoverPreparationInformation-->AS-config-->MeasConfig-->preRegistrationInfoHRPD-->preRegistrationZoneId-->pres set to not present) IE not present.
             - UE-CapabilityRAT-ContainerList IE present.
             - RRM-Config IE optional.
             - AS-Context IE optional.

           "RRC on getting this message checks if 
              - AS-config IE is present. 
              - As AS-config IE is present, RRC validates preRegistrationAllowed flag.
                RRC checks PreRegistrationZoneIdHRPD is present as
                preRegistrationAllowed flag is set TRUE. RRC issues error
                indication as PreRegistrationZoneIdHRPD is not present.

           "RRC issues error indication with error cause as 'conditional IE failure'"
           "and error type as 'invalid sdu param'."

           Steps:
           "1. RRC user sends Handover Preparation Information message to RRC
               using NhUiNhuEncodeReq(tapa.nhu.encreq)."
           "2. Due to validation failure, RRC issues error indication to RRC 
               user using NhUiNhuErrInd(tapa.nhu.errind) with error type as 
               'NHU_ERRTYPE_INV_SDU_PARAM' and error cause as 'NHU_ERRCAUSE_COND_IE_FAIL'."
           "3. RRC user validates the error cause and type received by RRC."

      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
        <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Bring up the RRC layer using LM
      <tapa.rrc.init />
      # Configure Cell
      <tapa.rrc.cellcfg cellId="1"/>
      # Connection setup procedure
      <tapa.rrc.consetup ueId="2" cellId="1" tCrnti="2"/>
      # Security activation procedure
      <tapa.rrc.security_actv ueId="2" cellId="1"/>
   </tapa.cfg>

   <tapa.test>
      #Send Reconfiguration msg to encode to RRC
     <tapa.send>
        <tapa.nhu.encodereq ueId="2" cellId="1" transId="10" msgType="11" 
         numAddRb="2" addRbIdStr="3,1,4,1" preRegAllowed="TRUE" zoneIdPres="FALSE"/>
     </tapa.send>

     #Expect Error Indication at NHU 
     <tapa.expect>
         <tapa.nhu.errind  errorCause="44" errorType="6"/>
     </tapa.expect>
   </tapa.test>

   # Clean subsection
   <tapa.clean>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>

</tapa.testcase>

##################################################################################
#       Test:    12.38
#       Desc:    Verification of RRC Connection Reconfiguration message  
#                validation failure due to 
#                RadioResourceConfigDedicated.SRB-ToAddModList conditional
#                IE check failure. 
#       Module:  rrc.uim
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.38">
   #<tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>

      <tapa.rfc id="36.331-8.5.0" section="6.2"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
           "This test case tests the RRC Connection Reconfiguration message"
           "validation failure due to"
           "RadioResourceConfigDedicated.SRB-ToAddModList conditional IE check"
           "failure." 

           "Pretest includes RRC layer initialization."

           "It involves sending of the RRC Connection Reconfiguration message"
           "from RRC user to RRC with 
              - MeasConfig IE optional.
              - MobilityControlInfo IE present(rrcConnectionReconfiguration-->mobilityCntrlInfo-->pres set to present) and including all mandatory and conditional IEs within this.
              - DedicatedInfoNAS IE not present.
              - RadioResourceConfigDedicated IE present.
                --> SRB-ToAddModList is not present.  
                    (RRCConRecfg-->radioResourceConfigDedicated-->srb_ToAddModLst-->noComp-->pres is set to not present)
              - SecurityConfigHO IE present(with mandatory and conditional
                IEs present within this)."

           "RRC on getting this message checks if
              - MobilityControlInfo IE is present and validates this IE for
                mandatory and conditional IEs.
              - DedicatedInfoNAS IE is not present.
              - RadioResourceConfigDedicated IE is present and validates  if
                SRB-ToAddModList is present.

           "As SRB-ToAddModList which is conditional HO IE is  not present,"
           "RRC issues error indication to RRC user. RRC issues error"
           "indication with error cause as 'conditional IE failure' and error"
           "type as 'invalid sdu param'."

           Steps:
           "1. RRC user sends RRC Connection Reconfiguration message to RRC
               using NhUiNhuEncodeReq(tapa.nhu.encreq)."
           "2. Due to validation failure, RRC issues error indication to RRC 
               user using NhUiNhuErrInd(tapa.nhu.errind) with error type as 
               'NHU_ERRTYPE_INV_SDU_PARAM' and error cause as 'NHU_ERRCAUSE_COND_IE_FAIL'."
           "3. RRC user validates the error cause and type received by RRC."

      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
        <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Bring up the RRC layer using LM
      <tapa.rrc.init />
      # Configure Cell
      <tapa.rrc.cellcfg cellId="1"/>
      # Connection setup procedure
      <tapa.rrc.consetup ueId="2" cellId="1" tCrnti="2"/>
      # Security activation procedure
      <tapa.rrc.security_actv ueId="2" cellId="1"/>
   </tapa.cfg>

   <tapa.test>
      #Send Reconfiguration msg to encode to RRC
     <tapa.send>
        <tapa.nhu.encodereq ueId="2" cellId="1" transId="10" msgType="1" srbPresent="0"/>
     </tapa.send>

     #Expect Error Indication at NHU 
     <tapa.expect>
         <tapa.nhu.errind  errorCause="44" errorType="6"/>
     </tapa.expect>
   </tapa.test>

   # Clean subsection
   <tapa.clean>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>

</tapa.testcase>

##################################################################################
#       Test:    12.39
#       Desc:    Verification of RRC Connection Reconfiguration message  
#                validation failure due to 
#                RadioResourceConfigDedicated.DRB-ToAddModList conditional
#                IE check failure. 
#       Module:  rrc.uim
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.39">
   #<tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>

      <tapa.rfc id="36.331-8.5.0" section="6.2"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
           "This test case tests the RRC Connection Reconfiguration message"
           "validation failure due to"
           "RadioResourceConfigDedicated.DRB-ToAddModList conditional IE check"
           "failure." 

           "Pretest includes RRC layer initialization."

           "It involves sending of the RRC Connection Reconfiguration message"
           "from RRC user to RRC with 
              - MeasConfig IE optional.
              - MobilityControlInfo IE present(rrcConnectionReconfiguration-->mobilityCntrlInfo-->pres set to present) and including all mandatory and conditional IEs within this.
              - DedicatedInfoNAS IE not present.
              - RadioResourceConfigDedicated IE present.
                --> SRB-ToAddModList is present.  
                    (RRCConRecfg-->radioResourceConfigDedicated-->srb_ToAddModLst present)
                --> DRB-ToAddModList is not present.  
                    (RRCConRecfg-->radioResourceConfigDedicated-->drb_ToAddModLst-->noComp-->pres is set to not present)
              - SecurityConfigHO IE present(with mandatory and conditional
                IEs present within this)."

           "RRC on getting this message checks if
              - MobilityControlInfo IE is present and validates this IE for
                mandatory and conditional IEs.
              - DedicatedInfoNAS IE is not present.
              - RadioResourceConfigDedicated IE is present and validates  if
                   -- SRB-ToAddModList is present.
                   -- DRB-ToAddModList is not present.

           "As DRB-ToAddModList which is conditional HO IE is  not present,"
           "RRC issues error indication to RRC user.RRC issues error"
           "indication with error cause as 'conditional IE failure' and error"
           "type as 'invalid sdu param'."

           Steps:
           "1. RRC user sends RRC Connection Reconfiguration message to RRC
               using NhUiNhuEncodeReq(tapa.nhu.encreq)."
           "2. Due to validation failure, RRC issues error indication to RRC 
               user using NhUiNhuErrInd(tapa.nhu.errind) with error type as 
               'NHU_ERRTYPE_INV_SDU_PARAM' and error cause as 'NHU_ERRCAUSE_COND_IE_FAIL'."
           "3. RRC user validates the error cause and type received by RRC."

      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
        <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Bring up the RRC layer using LM
      <tapa.rrc.init />
      # Configure Cell
      <tapa.rrc.cellcfg cellId="1"/>
      # Connection setup procedure
      <tapa.rrc.consetup ueId="2" cellId="1" tCrnti="2"/>
      # Security activation procedure
      <tapa.rrc.security_actv ueId="2" cellId="1"/>
   </tapa.cfg>

   <tapa.test>
      #Send Reconfiguration msg to encode to RRC
     <tapa.send>
        <tapa.nhu.encodereq ueId="2" cellId="1" transId="10" msgType="1" />
     </tapa.send>

     #Expect Error Indication at NHU 
     <tapa.expect>
         <tapa.nhu.errind  errorCause="44" errorType="6"/>
     </tapa.expect>
   </tapa.test>

   # Clean subsection
   <tapa.clean>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>

</tapa.testcase>
##################################################################################
#       Test:    12.40
#       Desc:    Verification of Handover Preparation Information message  
#                validation failure due to  
#                AS-Config.RadioResourceConfigDedicated.SRB-ToAddModList 
#                conditional IE check failure. 
#       Module:  rrc.uim
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.40">
   #<tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>

      <tapa.rfc id="36.331-8.5.0" section="6.2"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
           "This test case tests the Handover Preparation Information message"
           "validation failure due to"
           "AS-Config.RadioResourceConfigDedicated.SRB-ToAddModList conditional"
           "IE check failure." 

           "Pretest includes RRC layer initialization."

           "It involves sending of the Handover Preparation Information message"
           "from RRC user to RRC with 
              - UE-CapabilityRAT-ContainerList IE present.
              - AS-config IE present. 
                --> RadioResourceConfigDedicated IE present.
                    --> SRB-ToAddModList is not present.  
                    (hoPrepInfo-->AS-Config-->radioResourceConfigDedicated-->srb_ToAddModLst-->noComp-->pres is set to not present)
              - RRM-Config IE optional.
              - AS-Context IE optional.

           "RRC on getting this message checks if 
              - AS-config IE is present. 
                As AS-config IE is present, RRC validates if SRB-ToAddModList
                is present in AS-Config-->radioResourceConfigDedicated."

           "As SRB-ToAddModList which is conditional HO IE is  not present,"
           "RRC issues error indication to RRC user. RRC issues error"
           "indication with error cause as 'conditional IE failure' and error"
           "type as 'invalid sdu param'."

           Steps:
           "1. RRC user sends Handover Preparation Information message to RRC
               using NhUiNhuEncodeReq(tapa.nhu.encreq)."
           "2. Due to validation failure, RRC issues error indication to RRC 
               user using NhUiNhuErrInd(tapa.nhu.errind) with error type as 
               'NHU_ERRTYPE_INV_SDU_PARAM' and error cause as 'NHU_ERRCAUSE_COND_IE_FAIL'."
           "3. RRC user validates the error cause and type received by RRC."

      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
        <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Bring up the RRC layer using LM
      <tapa.rrc.init />
      # Configure Cell
      <tapa.rrc.cellcfg cellId="1"/>
      # Connection setup procedure
      <tapa.rrc.consetup ueId="2" cellId="1" tCrnti="2"/>
      # Security activation procedure
      <tapa.rrc.security_actv ueId="2" cellId="1"/>
   </tapa.cfg>

   <tapa.test>
      #Send Handover Preparation Information message to encode to RRC
     <tapa.send>
        <tapa.nhu.encodereq ueId="2" cellId="1" transId="10" msgType="11" srbPresent="0"/>
     </tapa.send>

     #Expect Error Indication at NHU 
     <tapa.expect>
         <tapa.nhu.errind  errorCause="44" errorType="6"/>
     </tapa.expect>
   </tapa.test>

   # Clean subsection
   <tapa.clean>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>

</tapa.testcase>

##################################################################################
#       Test:    12.41
#       Desc:    Verification of Handover Preparation Information message  
#                validation failure due to  
#                AS-Config.RadioResourceConfigDedicated.DRB-ToAddModList 
#                conditional IE check failure. 
#       Module:  rrc.uim
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.41">
   #<tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>

      <tapa.rfc id="36.331-8.5.0" section="6.2"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
           "This test case tests the Handover Preparation Information message"
           "validation failure due to"
           "AS-Config.RadioResourceConfigDedicated.DRB-ToAddModList conditional"
           "IE check failure." 

           "Pretest includes RRC layer initialization."

           "It involves sending of the Handover Preparation Information message"
           "from RRC user to RRC with 
              - UE-CapabilityRAT-ContainerList IE present.
              - AS-config IE present. 
                --> RadioResourceConfigDedicated IE present.
                    --> SRB-ToAddModList is present.  
                    (hoPrepInfo-->AS-Config-->radioResourceConfigDedicated-->srb_ToAddModLst is present)
                    --> DRB-ToAddModList is not present.  
                    (hoPrepInfo-->AS-Config-->radioResourceConfigDedicated-->drb_ToAddModLst-->noComp-->pres is set to not present)
              - RRM-Config IE optional.
              - AS-Context IE optional.

           "RRC on getting this message checks if 
              - AS-config IE is present. 
                As AS-config IE is present, RRC validates if DRB-ToAddModList
                is present in AS-Config-->radioResourceConfigDedicated."

           "As DRB-ToAddModList which is conditional HO IE is  not present,"
           "RRC issues error indication to RRC user. RRC issues error"
           "indication with error cause as 'conditional IE failure' and error"
           "type as 'invalid sdu param'."

           Steps:
           "1. RRC user sends Handover Preparation Information message to RRC
               using NhUiNhuEncodeReq(tapa.nhu.encreq)."
           "2. Due to validation failure, RRC issues error indication to RRC 
               user using NhUiNhuErrInd(tapa.nhu.errind) with error type as 
               'NHU_ERRTYPE_INV_SDU_PARAM' and error cause as 'NHU_ERRCAUSE_COND_IE_FAIL'."
           "3. RRC user validates the error cause and type received by RRC."

      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
        <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Bring up the RRC layer using LM
      <tapa.rrc.init />
      # Configure Cell
      <tapa.rrc.cellcfg cellId="1"/>
      # Connection setup procedure
      <tapa.rrc.consetup ueId="2" cellId="1" tCrnti="2"/>
      # Security activation procedure
      <tapa.rrc.security_actv ueId="2" cellId="1"/>
   </tapa.cfg>

   <tapa.test>
      #Send Handover Preparation Information message to encode to RRC
     <tapa.send>
        <tapa.nhu.encodereq ueId="2" cellId="1" transId="10" msgType="11" />
     </tapa.send>

     #Expect Error Indication at NHU 
     <tapa.expect>
         <tapa.nhu.errind  errorCause="44" errorType="6"/>
     </tapa.expect>
   </tapa.test>

   # Clean subsection
   <tapa.clean>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>

</tapa.testcase>

##################################################################################
#       Test:    12.42
#       Desc:    Verification of RRC Connection Reconfiguration message  
#                validation failure due to 
#                RadioResourceConfigDedicated.PhysicalConfigDedicated.AntennaInfo
#                AntennaInfoDedicated.codebookSubsetRestriction conditional
#                IE check failure. 
#       Module:  rrc.uim
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.42">
   #<tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>

      <tapa.rfc id="36.331-8.5.0" section="6.2"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
           "This test case tests the RRC Connection Reconfiguration message"
           "validation failure due to"
           "RadioResourceConfigDedicated.PhysicalConfigDedicated.AntennaInfo."
           "AntennaInfoDedicated.codebookSubsetRestriction conditional IE check"
           "failure." 

           "Pretest includes RRC layer initialization."

           "It involves sending of the RRC Connection Reconfiguration message"
           "from RRC user to RRC with 
              - MeasConfig IE optional.
              - MobilityControlInfo IE present
                (rrcConnectionReconfiguration-->mobilityCntrlInfo-->pres set to present) 
                and including all mandatory and conditional IEs within this.
              - DedicatedInfoNAS IE not present.
              - RadioResourceConfigDedicated IE present.
                --> SRB-ToAddModList IE present.  
                    (RRCConRecfg-->radioResourceConfigDedicated-->srb_ToAddModLst present)
                --> DRB-ToAddModList IE present.  
                    (RRCConRecfg-->radioResourceConfigDedicated-->drb_ToAddModLst is present)
                --> PhysicalConfigDedicated IE present. 
                    --> AntennaInfo IE present.
                        --> AntennaInfoDedicated IE present.
                            --> Set transmission mode(transmissionMode) to tm3.
                            --> codebookSubsetRestriction IE not present.
                    (RRCConRecfg-->radioResourceConfigDedicated-->physicalConfigDedicated-->antennaInfo.val.explicitValue.codebookSubsetRestrn.choice.pres is set to not present)
              - SecurityConfigHO IE present(with mandatory and conditional
                IEs present within this)."

           "RRC on getting this message checks if
              - MobilityControlInfo IE is present and validates this IE for
                mandatory and conditional IEs.
              - DedicatedInfoNAS IE is not present.
              - RadioResourceConfigDedicated IE is present and validates  if
                   -- SRB-ToAddModList is present.
                   -- DRB-ToAddModList is present.
                   -- PhysicalConfigDedicated IE is present.

           "As PhysicalConfigDedicated is present, RRC validates transmission"
           "mode which is tm3. codebookSubsetRestriction IE should be present"
           "if transmission mode is tm3,tm4,tm5 or tm6. As"
           "codebookSubsetRestriction IE is not present and transmission mode"
           "mode is tm3, RRC issues error indication with error cause as"
           "'conditional IE failure' and error type as 'invalid sdu param'."

           Steps:
           "1. RRC user sends RRC Connection Reconfiguration message to RRC
               using NhUiNhuEncodeReq(tapa.nhu.encreq)."
           "2. Due to validation failure, RRC issues error indication to RRC 
               user using NhUiNhuErrInd(tapa.nhu.errind) with error type as 
               'NHU_ERRTYPE_INV_SDU_PARAM' and error cause as 'NHU_ERRCAUSE_COND_IE_FAIL'."
           "3. RRC user validates the error cause and type received by RRC."

      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
        <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Bring up the RRC layer using LM
      <tapa.rrc.init />
      # Configure Cell
      <tapa.rrc.cellcfg cellId="1"/>
      # Connection setup procedure
      <tapa.rrc.consetup ueId="2" cellId="1" tCrnti="2"/>
      # Security activation procedure
      <tapa.rrc.security_actv ueId="2" cellId="1"/>
   </tapa.cfg>

   <tapa.test>
      #Send Reconfiguration msg to encode to RRC
     <tapa.send>
        <tapa.nhu.encodereq ueId="2" cellId="1" transId="10" msgType="1" 
         numAddRb="2" addRbIdStr="3,1,4,1" txMode="2" codeBookRestnPres="FALSE"/>
     </tapa.send>

     #Expect Error Indication at NHU 
     <tapa.expect>
         <tapa.nhu.errind  errorCause="44" errorType="6"/>
     </tapa.expect>
   </tapa.test>

   # Clean subsection
   <tapa.clean>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>

</tapa.testcase>

##################################################################################
#       Test:    12.43
#       Desc:    Verification of RRC Connection Reconfiguration message  
#                validation failure due to 
#                RadioResourceConfigDedicated.PhysicalConfigDedicated.
#                PUCCH-ConfigDedicated.tdd-AckNackFeedbackMode conditional
#                IE check failure. 
#       Module:  rrc.uim
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.43">
   #<tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>

      <tapa.rfc id="36.331-8.5.0" section="6.2"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
           "This test case tests the RRC Connection Reconfiguration message"
           "validation failure due to"
           "RadioResourceConfigDedicated.PhysicalConfigDedicated."
           "PUCCH-ConfigDedicated.tdd-AckNackFeedbackMode conditional IE check"
           "failure." 

           "Pretest includes RRC layer initialization."

           "It involves sending of the RRC Connection Reconfiguration message"
           "from RRC user to RRC with 
              - TDD mode is configured and stored in cellCb in RRC.
              - MeasConfig IE optional.
              - MobilityControlInfo IE present
                (rrcConnectionReconfiguration-->mobilityCntrlInfo-->pres set to present) 
                and including all mandatory and conditional IEs within this.
              - DedicatedInfoNAS IE not present.
              - RadioResourceConfigDedicated IE present.
                --> SRB-ToAddModList IE present.  
                    (RRCConRecfg-->radioResourceConfigDedicated-->srb_ToAddModLst present)
                --> DRB-ToAddModList IE present.  
                    (RRCConRecfg-->radioResourceConfigDedicated-->drb_ToAddModLst is present)
                --> PhysicalConfigDedicated IE present. 
                    --> PUCCH-ConfigDedicated IE present.
                        --> tdd-AckNackFeedbackMode IE not present.
                    (RRCConRecfg-->radioResourceConfigDedicated-->physicalConfigDedicated-->pucch_ConfigDedicated-->tdd_AckNackFeedbackMode.pres is set to not present)
              - SecurityConfigHO IE present(with mandatory and conditional
                IEs present within this)."

           "RRC on getting this message checks if
              - MobilityControlInfo IE is present and validates this IE for
                mandatory and conditional IEs.
              - DedicatedInfoNAS IE is not present.
              - RadioResourceConfigDedicated IE is present and validates  if
                   -- SRB-ToAddModList is present.
                   -- DRB-ToAddModList is present.
                   -- PhysicalConfigDedicated IE is present.

           "As PhysicalConfigDedicated is present, RRC validates if"
           "PUCCH-ConfigDedicated is present. As PUCCH Config is present and"
           "mode is set to TDD, RRC checks if tdd-AckNackFeedbackMode IE is"
           "present as this is mandatory for TDD mode. Since IE is not present,"
           "RRC issues error indication to RRC user with error cause"
           "as 'conditional IE failure' and error cause as 'invalid sdu param'."

           Steps:
           "1. RRC user sends RRC Connection Reconfiguration message to RRC
               using NhUiNhuEncodeReq(tapa.nhu.encreq)."
           "2. Due to validation failure, RRC issues error indication to RRC 
               user using NhUiNhuErrInd(tapa.nhu.errind) with error type as 
               'NHU_ERRTYPE_INV_SDU_PARAM' and error cause as 'NHU_ERRCAUSE_COND_IE_FAIL'."
           "3. RRC user validates the error cause and type received by RRC."

      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
        <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Bring up the RRC layer using LM
      <tapa.rrc.init />
      # Configure Cell
      <tapa.rrc.cellcfg cellId="1" duplexMode="2"/>
      # Connection setup procedure
      <tapa.rrc.consetup ueId="2" cellId="1" tCrnti="2" tddPres="TRUE"/>
      # Security activation procedure
      <tapa.rrc.security_actv ueId="2" cellId="1"/>
   </tapa.cfg>

   <tapa.test>
      #Send Reconfiguration msg to encode to RRC
     <tapa.send>
        <tapa.nhu.encodereq ueId="2" cellId="1" transId="10" msgType="1" 
         numAddRb="2" addRbIdStr="3,1,4,1" ulCarrierFreqPres="FALSE"/>
     </tapa.send>

     #Expect Error Indication at NHU 
     <tapa.expect>
         <tapa.nhu.errind  errorCause="44" errorType="6"/>
     </tapa.expect>
   </tapa.test>

   # Clean subsection
   <tapa.clean>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>

</tapa.testcase>

##################################################################################
#       Test:    12.44
#       Desc:    Verification of Handover Preparation Information message  
#                validation failure due to 
#                AS-Config.RadioResourceConfigDedicated.PhysicalConfigDedicated.
#                AntennaInfo.AntennaInfoDedicated.codebookSubsetRestriction 
#                conditional IE check failure. 
#       Module:  rrc.uim
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.44">
   #<tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>

      <tapa.rfc id="36.331-8.5.0" section="6.2"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
           "This test case tests the Handover Preparation Information message"
           "validation failure due to"
           "AS-Config.RadioResourceConfigDedicated.PhysicalConfigDedicated."
           "AntennaInfo.AntennaInfoDedicated.codebookSubsetRestriction"
           "conditional IE check failure." 

           "Pretest includes RRC layer initialization."

           "It involves sending of the Handover Preparation Information message"
           "from RRC user to RRC with 
              - AS-config IE present. 
                --> RadioResourceConfigDedicated IE present.
                    --> SRB-ToAddModList IE present.  
                    (hoPrepInfo-->AS-Config-->radioResourceConfigDedicated-->srb_ToAddModLst present)
                    --> DRB-ToAddModList IE present.  
                    (hoPrepInfo-->AS-Config-->radioResourceConfigDedicated-->drb_ToAddModLst is present)
                    --> PhysicalConfigDedicated IE present. 
                        --> AntennaInfo IE present.
                            --> AntennaInfoDedicated IE present.
                                --> Set transmission mode(transmissionMode) to tm3.
                                --> codebookSubsetRestriction IE not present.
                    (hoPrepInfo-->AS-Config-->radioResourceConfigDedicated-->physicalConfigDedicated-->antennaInfo.val.explicitValue.codebookSubsetRestrn.choice.pres is set to not present)
             - UE-CapabilityRAT-ContainerList IE present.
             - RRM-Config IE optional.
             - AS-Context IE optional.

           "RRC on getting this message checks if 
              - AS-config IE is present. 
              - As AS-config IE is present, RRC checks if
                RadioResourceConfigDedicated is present. In this IE, RRC checks
                   -- SRB-ToAddModList is present.
                   -- DRB-ToAddModList is present.
                   -- PhysicalConfigDedicated IE is present.

           "As PhysicalConfigDedicated is present, RRC validates transmission"
           "mode which is tm3. codebookSubsetRestriction IE should be present"
           "if transmission mode is tm3,tm4,tm5 or tm6. As"
           "codebookSubsetRestriction IE is not present and transmission mode"
           "mode is tm3, RRC issues error indication to RRC user with error cause"
           "as 'conditional IE failure' and error cause as 'invalid sdu param'."

           Steps:
           "1. RRC user sends Handover Preparation Information message to RRC
               using NhUiNhuEncodeReq(tapa.nhu.encreq)."
           "2. Due to validation failure, RRC issues error indication to RRC 
               user using NhUiNhuErrInd(tapa.nhu.errind) with error type as 
               'NHU_ERRTYPE_INV_SDU_PARAM' and error cause as 'NHU_ERRCAUSE_COND_IE_FAIL'."
           "3. RRC user validates the error cause and type received by RRC."

      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
        <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Bring up the RRC layer using LM
      <tapa.rrc.init />
      # Configure Cell
      <tapa.rrc.cellcfg cellId="1"/>
      # Connection setup procedure
      <tapa.rrc.consetup ueId="2" cellId="1" tCrnti="2"/>
      # Security activation procedure
      <tapa.rrc.security_actv ueId="2" cellId="1"/>
   </tapa.cfg>

   <tapa.test>
      #Send Handover Preparation Information message to encode to RRC
     <tapa.send>
        <tapa.nhu.encodereq ueId="2" cellId="1" transId="10" msgType="11" 
         numAddRb="2" addRbIdStr="3,1,4,1" txMode="2" codeBookRestnPres="FALSE"/>
     </tapa.send>

     #Expect Error Indication at NHU 
     <tapa.expect>
         <tapa.nhu.errind  errorCause="44" errorType="6"/>
     </tapa.expect>
   </tapa.test>

   # Clean subsection
   <tapa.clean>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>

</tapa.testcase>

##################################################################################
#       Test:    12.45
#       Desc:    Verification of Handover Preparation Information message  
#                validation failure due to 
#                AS-Config.RadioResourceConfigDedicated.PhysicalConfigDedicated.
#                PUCCH-ConfigDedicated.tdd-AckNackFeedbackMode conditional
#                IE check failure. 
#       Module:  rrc.uim
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.45">
   #<tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>

      <tapa.rfc id="36.331-8.5.0" section="6.2"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
           "This test case tests the Handover Preparation Information message"
           "validation failure due to"
           "RadioResourceConfigDedicated.PhysicalConfigDedicated."
           "PUCCH-ConfigDedicated.tdd-AckNackFeedbackMode conditional IE check"
           "failure." 

           "Pretest includes RRC layer initialization."

           "It involves sending of the Handover Preparation Information message"
           "from RRC user to RRC with 
              - TDD mode is configured and stored in cellCb in RRC.
              - AS-config IE present. 
                --> RadioResourceConfigDedicated IE present.
                    --> SRB-ToAddModList IE present.  
                    (hoPrepInfo-->AS-Config-->radioResourceConfigDedicated-->srb_ToAddModLst present)
                    --> DRB-ToAddModList IE present.  
                    (hoPrepInfo-->AS-Config-->radioResourceConfigDedicated-->drb_ToAddModLst is present)
                    --> PUCCH-ConfigDedicated IE present.
                        --> tdd-AckNackFeedbackMode IE not present.
                    (hoPrepInfo-->AS-Config-->radioResourceConfigDedicated-->physicalConfigDedicated-->pucch_ConfigDedicated-->tdd_AckNackFeedbackMode.pres is set to not present)
             - UE-CapabilityRAT-ContainerList IE present.
             - RRM-Config IE optional.
             - AS-Context IE optional.

           "RRC on getting this message checks if 
              - AS-config IE is present. 
              - As AS-config IE is present, RRC checks if
                RadioResourceConfigDedicated is present. In this IE, RRC checks
                   -- SRB-ToAddModList is present.
                   -- DRB-ToAddModList is present.
                   -- PhysicalConfigDedicated IE is present.

           "As PhysicalConfigDedicated is present, RRC validates if"
           "PUCCH-ConfigDedicated is present. As PUCCH Config is present and"
           "mode is set to TDD, RRC checks if tdd-AckNackFeedbackMode IE is"
           "present as this is mandatory for TDD mode. Since IE is not present,"
           "RRC issues error indication to RRC user with error cause"
           "as 'conditional IE failure' and error cause as 'invalid sdu param'."

           Steps:
           "1. RRC user sends Handover Preparation Information message to RRC
               using NhUiNhuEncodeReq(tapa.nhu.encreq)."
           "2. Due to validation failure, RRC issues error indication to RRC 
               user using NhUiNhuErrInd(tapa.nhu.errind) with error type as 
               'NHU_ERRTYPE_INV_SDU_PARAM' and error cause as 'NHU_ERRCAUSE_COND_IE_FAIL'."
           "3. RRC user validates the error cause and type received by RRC."

      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
        <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      # Bring up the RRC layer using LM
      <tapa.rrc.init />
      # Configure Cell
      <tapa.rrc.cellcfg cellId="1" duplexMode="2"/>
      # Connection setup procedure
      <tapa.rrc.consetup ueId="2" cellId="1" tCrnti="2" tddPres="TRUE"/>
      # Security activation procedure
      <tapa.rrc.security_actv ueId="2" cellId="1"/>
   </tapa.cfg>

   <tapa.test>
      #Send Handover Preparation Information message to encode to RRC
     <tapa.send>
        <tapa.nhu.encodereq ueId="2" cellId="1" transId="10" msgType="11" 
         numAddRb="2" addRbIdStr="3,1,4,1" ulCarrierFreqPres="FALSE"/>
     </tapa.send>

     #Expect Error Indication at NHU 
     <tapa.expect>
         <tapa.nhu.errind  errorCause="44" errorType="6"/>
     </tapa.expect>
   </tapa.test>

   # Clean subsection
   <tapa.clean>
   </tapa.clean>

   # Shutdown subsection
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>

</tapa.testcase>

##################################################################################
#       Test:    12.46
#       Desc:    Validation of Condition IE
#                RadioResourceConfigDedicated.DRB-ToAddModList
#                .LogicalChannelConfig.ul-SpecificParameters during RRC Connection
#                Reconfiguration procedure - Test Type 1.
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.46">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE
         RadioResourceConfigDedicated.DRB-ToAddModList.LogicalChannelConfig
         during RRC Connection Reconfiguration procedure - Test Type 1.

         RRC user will send RRC Connection reconfiguration request again with
         below message fillings for configuration of SRB2, DRB1 and DRB2:

         RRCConnectionReconfigurationIEs
         |
         +--> RadioResourceConfigDedicated is Present
         |   |
         |   +--> SRB-ToAddModList is present
         |   +--> DRB-ToAddModList (DRB1 for DL and DRB2 for UL)
         |   |   |
         |   |   +-->eps-BearerIdentity is present
         |   |   +--> DRB-Identity is present
         |   |   +--> PDCP-Config is present
         |   |   +--> RLC-Config is present (DRBs in UM Uni-Directional)
         |   |   +--> logicalChannelIdentity is present
         |   |   +--> LogicalChannelConfig is present
         |   |      |
         |   |      +--> ul-SpecificParameters is NOT Present for DRB2
         |   |      +--> ul-SpecificParameters is NOT Present for DRB1
         |   |
         |   +--> MAC-MainConfig is optional
         |   +--> DRB-ToReleaseList is optional
         |   +--> SPS-Config is optional
         |   +--> PhysicalConfigDedicated is optional
         +--> MeasConfig is optional
         +--> MobilityControlInfo is NOT Present
         +--> DedicatedInfoNAS is optional
         +--> SecurityConfigHO is NOT present

         This test cases is to check only for ul-SpecificParameters element.
         "NOT rpesent" for other elements is just to make sure that this is a
         procedure for RRC Connection Reconfiguration not during HO. RRC will send
         error indidcation to RRC user as this IE is mandatory for this scenario.

         Steps:
         ------
         1. (RRC Connection is Established)
         2. (Initial Security has been activated)
         3. RRC user sends RRC Connection Reconfiguration Request (data and Cfg)
            to RRC for establishment if SRB2, DRB1 and DRB2.
         4. RRC will validate Message request before sending configuration
            request to lower layers.
         6. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: UL-SPECIFICPARAMETERS)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />

     #RRC Connection establishment procedure
     <tapa.rrc.consetup cellId="2" ueId="4" tCrnti="4" />

      # Security Activation for UE in connected mode
      <tapa.rrc.security_actv ueId="4" cellId="2"/>
   </tapa.cfg>
   <tapa.test>
      # Send Reconfiguration request
      <tapa.send>
         <tapa.nhu.datreq spId="0" bitMask="2" expCfgBitMask="1"
          msgCategory="1" msgType="4" transId="1" rrc_transId="1"
          cellId="2" ueId="4" pdcpId="1" numAddRb="3" addRbIdStr="2,0,3,1,4,1"
          addLcIdStr="2,3,4" addBitMskStr="7,1,1" rbCfgType="1" logChType="3"
          trChCfgDed="0" macSchedCfg="0"  valChk="0" rrcTransIdPres="1"
          rlcCfgUlUmDir="FALSE" rlcCfgMode="2" pdcpCfgRlcUmAbsent="0"/>
      </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.conrls ueId="4" cellId="2" />
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>

##################################################################################
#       Test:    12.47
#       Desc:    Validation of Condition IE failure due to wrong cell Id.
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.47">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="None"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
          "Validation of Condition IE failure due to wrong cell Id."
          "Pretest includes RRC layer initialization,Cell Configuration."

           Steps:
           "1. RRC user sends RRC Connection Reconfiguration message to RRC
               using NhUiNhuEncodeReq(tapa.nhu.encodereq) with cell Id =2."
           "2. Due to validation failure, RRC issues error indication to RRC 
               user using NhUiNhuErrInd(tapa.nhu.errind) with error type as 
               'NHU_ERRTYPE_INV_SDU_PARAM' and error cause as 'NHU_ERRCAUSE_COND_IE_FAIL'."
           "3. RRC user validates the error cause and type received by RRC."

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   # Configuration subsection
   <tapa.cfg>
      # Bring up the RRC layer using LM
      <tapa.rrc.init />
      # Configure Cell
      <tapa.rrc.cellcfg cellId="1"/>
   </tapa.cfg>

   <tapa.test>
      #Send Reconfiguration msg to encode to RRC
     <tapa.send>
        <tapa.nhu.encodereq ueId="2" cellId="2" transId="10" msgType="1" reCfgDedInfoPres="TRUE"
         numAddRb="2" addRbIdStr="3,1,4,1"/>
     </tapa.send>

     #Expect Error Indication at NHU 
     <tapa.expect>
         <tapa.nhu.errind  errorCause="44" errorType="6"/>
      </tapa.expect>
   </tapa.test>

   <tapa.clean>
      <tapa.rrc.cellcfg.rls cellId="1" />
   </tapa.clean>

   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>


##################################################################################
#       Test:    12.48
#       Desc:    Validation of Condition IE
#                MeasConfig.reportConfigToAddModList.reportConfigEUTRA.si-RequestForHO-r9
#                during RRC Connection Reconfiguration procedure (Not first time).
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.48">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE
         MeasConfig.reportConfigToAddModList.reportConfigEUTRA.si-RequestForHO-r9
         during RRC Connection Reconfiguration procedure (Not first time).

         RRC user will send RRC Connection Reconfigration request for measurement
         iconfiguration with below message fillings:

         RRCConnectionReconfigurationIEs
         |
         +--> RadioResourceConfigDedicated is Present
         +--> MeasConfig is optional
         |  |
         |  +--> All Measurement objects - present
         |  +--> All Reporting configurations - present
         |  +--> All Measurement identities - present
         |  +--> PreRegistrationInfoHRPD is present
         |  |  |
         |  |  +--> preRegistrationAllowed is present (set to TRUE)
         |  |  +--> preRegistrationZoneId is present
         |  |  +--> SecondaryPreRegistrationZoneIdListHRPD is present
         |  +-->ReportConfigToAddModList is present
         |     |
         |     +-->ReportConfigId is present
         |     +-->reportConfig is present
         |     +-->ReportConfigEUTRA
         |     +-->si-RequestForHO-r9 is present  and if purpose is included and
         |         purpose value is not equal to reportCGI 
         +-->All Other parameters - optional
         +--> MobilityControlInfo is NOT Present
         +--> DedicatedInfoNAS is optional
         +--> SecurityConfigHO is NOT present

         This test case is to check if purpose is not set to reportCGI then
         IE si-RequestForHO-r9 should not be present else this optinal, need OR. 
         RRC will send error indidcation to RRC user if the above condition 
         does not hold TRUE.

         Steps:
         ------
         1. (RRC Connection is Established)
         2. (Initial Security has been activated)
         4. RRC user sends RRC Connection Reconfiguration Request (data and Cfg)
            to RRC with above mentioned message filling.
         5. RRC will validate Message request before sending configuration
            request to lower layers.
         6. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type:)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
            <tapa.flag id="LTERRC_REL9"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />

     #RRC Connection establishment procedure
     <tapa.rrc.consetup cellId="2" ueId="4" tCrnti="4" />

      # Security Activation for UE in connected mode
      <tapa.rrc.security_actv ueId="4" cellId="2"/>
   </tapa.cfg>
   <tapa.test>
      # Send Reconfiguration request
      <tapa.send>
         <tapa.nhu.datreq spId="0" bitMask="2" expCfgBitMask="1"
          msgCategory="1" msgType="4" transId="1" rrc_transId="1"
          cellId="2" ueId="4" pdcpId="1" numAddRb="3" addRbIdStr="2,0,3,1,4,1"
          addLcIdStr="2,3,4" addBitMskStr="7,1,1" rbCfgType="1" logChType="3"
          trChCfgDed="0" macSchedCfg="0"  valChk="0" rrcTransIdPres="1"
          purposePres="TRUE" purposeVal="1" siReqForHOPres="TRUE" 
          siReqForHOVal="1"/>
      </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.conrls ueId="4" cellId="2" />
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>

##################################################################################
#       Test:    12.49
#       Desc:    Validation of Condition IE
#                MeasConfig.reportConfigToAddModList.reportConfigEUTRA.si-RequestForHO-r9
#                during RRC Connection Reconfiguration procedure (Not first time).
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.49">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE
         MeasConfig.reportConfigToAddModList.reportConfigEUTRA.si-RequestForHO-r9
         during RRC Connection Reconfiguration procedure (Not first time).

         RRC user will send RRC Connection Reconfigration request for measurement
         iconfiguration with below message fillings:

         RRCConnectionReconfigurationIEs
         |
         +--> RadioResourceConfigDedicated is Present
         +--> MeasConfig is optional
         |  |
         |  +--> All Measurement objects - present
         |  +--> All Reporting configurations - present
         |  +--> All Measurement identities - present
         |  +--> PreRegistrationInfoHRPD is present
         |  |  |
         |  |  +--> preRegistrationAllowed is present (set to TRUE)
         |  |  +--> preRegistrationZoneId is present
         |  |  +--> SecondaryPreRegistrationZoneIdListHRPD is present
         |  +-->ReportConfigToAddModList is present
         |     |
         |     +-->ReportConfigId is present
         |     +-->reportConfig is present
         |     +-->ReportConfigEUTRA
         |     +-->si-RequestForHO-r9 is present and if purpose is not included.
         |
         +-->All Other parameters - optional
         +--> MobilityControlInfo is NOT Present
         +--> DedicatedInfoNAS is optional
         +--> SecurityConfigHO is NOT present

         This test case is to check if purpose is not set to reportCGI then
         IE si-RequestForHO-r9 should not be present else this optinal, need OR. 
         RRC will send error indidcation to RRC user if the above condition 
         does not hold TRUE.

         Steps:
         ------
         1. (RRC Connection is Established)
         2. (Initial Security has been activated)
         4. RRC user sends RRC Connection Reconfiguration Request (data and Cfg)
            to RRC with above mentioned message filling.
         5. RRC will validate Message request before sending configuration
            request to lower layers.
         6. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type:)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />

     #RRC Connection establishment procedure
     <tapa.rrc.consetup cellId="2" ueId="4" tCrnti="4" />

      # Security Activation for UE in connected mode
      <tapa.rrc.security_actv ueId="4" cellId="2"/>
   </tapa.cfg>
   <tapa.test>
      # Send Reconfiguration request
      <tapa.send>
         <tapa.nhu.datreq spId="0" bitMask="2" expCfgBitMask="1"
          msgCategory="1" msgType="4" transId="1" rrc_transId="1"
          cellId="2" ueId="4" pdcpId="1" numAddRb="3" addRbIdStr="2,0,3,1,4,1"
          addLcIdStr="2,3,4" addBitMskStr="7,1,1" rbCfgType="1" logChType="3"
          trChCfgDed="0" macSchedCfg="0"  valChk="0" rrcTransIdPres="1"
          purposePres="FALSE" purposeVal="0" siReqForHOPres="TRUE" 
          siReqForHOVal="1"/>
      </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.conrls ueId="4" cellId="2" />
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>

##################################################################################
#       Test:    12.50
#       Desc:    Validation of Condition IE
#                RadioResourceConfigDedicated.PhysicalConfigDedicated
#                .CQI-ReportConfig-v920.cqi-mask during RRC
#                Connection Setup procedure.
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.50">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE RadioResourceConfigDedicated
         .PhysicalConfigDedicated.CQI-ReportConfig-v920.cqi-mask
         during RRC Connection setup

         RRC user will send RRC Connection Setup request with below message
         fillings:

         RRCConnectionSetupIEs
         |
         +--> RadioResourceConfigDedicated is Present
            |
            +--> SRB-ToAddModList is present
            +--> DRB-ToAddModList
            +--> PhysicalConfigDedicated is present
            |   |
            |   +--> CQI-ReportConfig-v920 is Present
            |   |   |
            |   |   +--> cqi-mask Present and cqi-ReportPeriodic is set to release
            |   |   
            |   |
            |   +--> All other elements - optional
            |
            +--> MAC-MainConfig is optional
            +--> DRB-ToReleaseList is optional
            +--> SPS-Config is optional

         This test cases is to check only for cqi-mask element.
         RRC will send error indidcation to RRC user as this IE should not be present
         when cqi-ReportPeriodic is set to release.

         Steps:
         ------
         1. RRC recieves Data indication from PDCP for RRC Connection Request
            Message sent from UE
         2. RRC will send data indication for the same to RRC user
         3. RRC user sends RRC Connection Setup Request (data and Cfg)
            to RRC with massage filing as mentioned above
         4. RRC will validate Message request before sending configuration
            request to lower layers.
         5. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: CQIMASK)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
            <tapa.flag id="LTERRC_REL9"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />

   </tapa.cfg>
   <tapa.test>
      # Send RRC Connection Request from RLC 
      <tapa.send >
         <tapa.dummy.kwu.datind suId="0" spId="0" rbId="1" msgType="1" 
         cellId="2" tCrnti="2" />
      </tapa.send>

      <tapa.delay delay="5" />
      #Expect RRC Connection Request at RRC user
      <tapa.expect >
         <tapa.nhu.datind cellId="2" tCrnti="2" />
      </tapa.expect>

     #Send RRC Connection Setup from RRC user
      <tapa.send>
        <tapa.nhu.datrsp spId="0" bitMask="2" expCfgBitMask="11"
        rbCfgType="1"   msgCategory="3" msgType="3"
         rrc_transId="0" transId="10" rbId="1" pdcpId="1"
        valChk="0"
        cellId="2" tCrnti="2"  numAddRb="1" addRbIdStr="1,0"
        addLcIdStr="2" addBitMskStr="7" txMode="4" cqiMaskPres="TRUE" 
        cqiRprtPeriodicSetupPres="FALSE"/>
     </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>

##################################################################################
#       Test:    12.51
#       Desc:    Validation of Condition IE SystemInformationBlockType8
#                .extaddgrp_r9.ac_BarringConfig1XRTT_r9
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.51">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
          Validation of Condition IE SystemInformationBlockType8
          .extaddgrp_r9.ac_BarringConfig1XRTT_r9

         RRC user will send data request to RRC for system information (SIB8) with
         below message fillings:

         SystemInformationBlockType8
         |
         +--> SystemTimeInfoCDMA2000 is optional
         +--> searchWindowSize is present
         +--> parametersHRPD is present
         |  |
         |  +--> PreRegistrationInfoHRPD is present
         |  |  |
         |  |  +--> preRegistrationAllowed is present (set to TRUE)
         |  |  +--> PreRegistrationZoneIdHRPD is NOT present
         |  |  +--> SecondaryPreRegistrationZoneIdListHRPD is optional
         |  |
         |  +--> CellReselectionParametersCDMA2000 is optional
         +--> parameters1XRTT is optional

         This test cases is to check only for PreRegistrationZoneIdHRPD element.
         RRC will send error indidcation to RRC user as this IE is mandatory for
         this scenario.

         Steps:
         ------
         1. (Perform Cell Configuration)
         2. RRC user sends data request for MIB and SIB1 transmission with
            timing info to RRC
         3. RRC will validate SI Message request before sending request to lower
            layers.
         4. RRC user sends data request for SIB8 transmission
            with timing info to RRC with above mentioned message filling.
         5. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: PREREGISTRATIONZONEIDHRPD)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
            <tapa.flag id="LTERRC_REL9"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />
   </tapa.cfg>
   <tapa.test>
    #send MIB message from NHU interface
    <tapa.send>
      <tapa.nhu.datreq msgCategory="7" msgType="0" cellId="2" rbId="1" sibNum="8"
      preRegAllowed="TRUE" zoneIdPres="FALSE"/>
    </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>

##################################################################################
#       Test:    12.52
#       Desc:    Validation of Param
#                RadioResourceConfigDedicated.SRB-ToAddModList.
#                LogicalChannelConfig.logicalChannelSR-Mask-r9
#                during RRC Connection Reconfiguration procedure
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.52">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE
         RadioResourceConfigDedicated.SRB-ToAddModList.LogicalChannelConfig.
         logicalChannelSR-Mask-r9RRLCLC-Config
         during RRC Connection Reconfiguration procedure.

         RRC user will send request for RRC Connection Reconfiguration with
         below message fillings:

         RRCConnectionReconfigurationIEs
         |
         +--> RadioResourceConfigDedicated is Present
         |   |
         |   +--> SRB-ToAddModList is present
         |   |   |
         |   |   +--> RLC-Config is present
         |   |   |
         |   |   +--> logicalChannelConfig is present
         |   |   |                                    
         |   |   +--> ul-SpecificParameters is not present
         |   |   |                                    
         |   |   +--> logicalChannelSR-Mask-r9 is present
         |   |
         |   +--> DRB-ToAddModList is optional
         |   +--> MAC-MainConfig is optional
         |   +--> DRB-ToReleaseList is optional
         |   +--> SPS-Config is optional
         |   +--> PhysicalConfigDedicated is optional
         +--> MeasConfig is optional
         +--> MobilityControlInfo is NOT Present
         +--> DedicatedInfoNAS is optional
         +--> SecurityConfigHO is NOT present

         This test cases is to check only for logicalChannelSR-Mask-r9 element.
         "NOT rpesent" for other elements is just to make sure that this is a
         procedure for RRC Connection Reconfiguration not during HO. RRC will send
         error indidcation to RRC user as this IE is mandatory for this scenario.

         Steps:
         ------
         1. (RRC Connection is Established)
         2. (Initial Security has been activated)
         3. RRC user sends RRC Connection Reconfiguration Request (data and Cfg)
            to RRC for establishment if SRB2, DRB1, DRB2 and DRB3.
         4. RRC will validate Message request before sending configuration
            request to lower layers.
         5. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: RLC-CONFIG)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
            <tapa.flag id="LTERRC_REL9"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />

     #RRC Connection establishment procedure
     <tapa.rrc.consetup cellId="2" ueId="4" tCrnti="4"/>

      # Security Activation for UE in connected mode
      <tapa.rrc.security_actv ueId="4" cellId="2"/>
   </tapa.cfg>
   <tapa.test>
      # Send Reconfiguration request
      <tapa.send>
         <tapa.nhu.datreq spId="0" bitMask="2" expCfgBitMask="1"
          msgCategory="1" msgType="4" transId="1" rrc_transId="1"
          cellId="2" ueId="4" pdcpId="1" numAddRb="3" addRbIdStr="2,0,3,1,4,1"
          addLcIdStr="2,3,4" addBitMskStr="7,1,1" rbCfgType="1" logChType="3"
          trChCfgDed="0" macSchedCfg="0"  valChk="0" rrcTransIdPres="1"
          srbRlcCfgAbsent="0" srbLogChCfgAbsent="0" srbULSpecPrmAbsent="1"
          srMaskAbsent="0" cqiMaskPres="TRUE"/>
      </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.conrls ueId="4" cellId="2" />
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>

##################################################################################
#       Test:    12.53
#       Desc:    Successfull Configuration of UE Specific Antenna configuration
#                for transmission mode 8 in RRC Connection Reconfiguration 
#                message
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.53">
   <tapa.attribute scenarioType="NORMAL"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>

         Successfull Configuration of UE Specific Antenna configuration 
         for transmission mode 8 in RRC Connection Reconfiguration 
         message
              
         RRC user will send RRC Connection Reconfigration request to establish
         SRB2 and few (DRB1 and DRB2) DRBs with below message fillings:

         RRCConnectionReconfigurationIEs
         |
         +--> RadioResourceConfigDedicated is Present
         |   |
         |   +--> SRB-ToAddModList is present
         |   +--> DRB-ToAddModList
         |   +--> PhysicalConfigDedicated is present
         |   |   |
         |   |   +--> AntennaInfoDedicated is Present
         |   |   |   |
         |   |   |   +--> transmissionMode (tm8)
         |   |   |   +--> codebookSubsetRestriction is Present
         |   |   |
         |   |   +--> All other elements - optional
         |   |
         |   +--> MAC-MainConfig is optional
         |   +--> DRB-ToReleaseList is optional
         |   +--> SPS-Config is optional
         +--> MeasConfig is optional
         +--> MobilityControlInfo is NOT Present
         +--> DedicatedInfoNAS is optional
         +--> SecurityConfigHO is NOT present

         This test cases is to check only for successfull configuration of 
         transmission mode for other elements is just to make sure that this
         is a procedure for RRC Connection Reconfiguration not during HO. 
         RRC will send error indidcation to RRC user as this IE is mandatory 
         for this scenario.

         Steps:
         ------
         1. (RRC Connection is Established)
         2. (Initial Security has been activated)
         3. RRC user sends RRC Connection Reconfiguration Request (data and Cfg)
            to RRC with above mentioned message filling.
         4. RRC will validate Message request before sending configuration
            request to lower layers.
         5. RRC will send success indication to RRC user

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
            <tapa.flag id="LTERRC_REL9"/>
            <tapa.flag id="CTF_VER1"/>
            <tapa.flag id="NHU_VER1"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />

     #RRC Connection establishment procedure
     <tapa.rrc.consetup cellId="2" ueId="4" tCrnti="4" />

      # Security Activation for UE in connected mode
      <tapa.rrc.security_actv ueId="4" cellId="2"/>
   </tapa.cfg>
   <tapa.test>
      # Send Reconfiguration request
      <tapa.send>
         <tapa.nhu.datreq spId="0" bitMask="2" expCfgBitMask="1"
          msgCategory="1" msgType="4" transId="1" rrc_transId="1"
          cellId="2" ueId="4" pdcpId="1" numAddRb="3" addRbIdStr="2,0,3,1,4,1"
          addLcIdStr="2,3,4" addBitMskStr="7,1,1" rbCfgType="1" logChType="3"
          trChCfgDed="0" macSchedCfg="0"  valChk="0" rrcTransIdPres="1" txMode="7" codeBookRestnPres="TRUE"/>
      </tapa.send>

       <tapa.delay delay="5" />
       #Expect Lower Layer configurations
       #Expect Conn Recfg Complete at NHU
          
      <tapa.expset>
              <tapa.dummy.crg.cfgreq  store_tid="1" ueIdPres="1" valUeId="4" rbIdx="0"/>
              <tapa.dummy.crg.cfgreq  store_tid="1" ueIdPres="1" valUeId="4" rbIdx="1"/>
              <tapa.dummy.crg.cfgreq  store_tid="1" ueIdPres="1" valUeId="4" rbIdx="2" cleanup="1"/>
              <tapa.dummy.ckw.cfgreq  use="1" ueIdPres="1" valUeId="4" cleanup="1"/>
              <tapa.dummy.cpj.cfgreq  use="1" ueIdPres="1" valUeId="4" cleanup="1"/>
      </tapa.expset>
     
      <tapa.send>
              <tapa.dummy.ckw.cfgcfm   use="1" ueId="4"/>
      </tapa.send>
     
      <tapa.send>
              <tapa.dummy.crg.cfgcfm   stored_tid="1" ueId="4"/>
      </tapa.send>
     
      <tapa.send>
              <tapa.dummy.crg.cfgcfm   stored_tid="1" ueId="4"/>
      </tapa.send>
     
      <tapa.send>
              <tapa.dummy.crg.cfgcfm   stored_tid="1" ueId="4"/>
      </tapa.send>
     
      <tapa.send>
              <tapa.dummy.cpj.cfgcfm   use="1" ueId="4"/>
      </tapa.send>
     
      <tapa.delay delay="5" />
     
      #Expect Conn Recfg PJU/PDCP
      <tapa.expect>
              <tapa.dummy.pju.datreq ueId="4" cellId="2" pdcpInstId="1"/>
      </tapa.expect>
     
      <tapa.expect>
              <tapa.nhu.cfgcfm/>
      </tapa.expect>
     
      <tapa.delay delay="5" />
     
      # Send Conn Recfg Complete
      # msgType="3" Conn Recfg Complete
      # cellId and ueId should be passed.
      <tapa.send>
              <tapa.dummy.pju.datind pdcpInstId="1" msgType="2" spId="0" suId="0"
                      ueId="4" cellId="2"/>
      </tapa.send>
     
      <tapa.expect>
              <tapa.nhu.datind ueId="4" cellId="2"/>
      </tapa.expect>
     
      <tapa.delay delay="5" />
   </tapa.test>
   <tapa.clean>
      <tapa.rrc.conrls ueId="4" cellId="2" />
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>

##################################################################################
#       Test:    12.54
#       Desc:    Validation of Condition IE
#                RadioResourceConfigDedicated.PhysicalConfigDedicated
#                .CQI-ReportConfig-v920.pmi-RI-Report-r9 during RRC
#                Connection Setup procedure.
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.54">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE RadioResourceConfigDedicated
         .PhysicalConfigDedicated.CQI-ReportConfig-v920.pmi-RI-Report-r9
         during RRC Connection setup

         RRC user will send RRC Connection Setup request with below message
         fillings:

         RRCConnectionSetupIEs
         |
         +--> RadioResourceConfigDedicated is Present
            |
            +--> SRB-ToAddModList is present
            +--> DRB-ToAddModList
            +--> PhysicalConfigDedicated is present
            |   |
            |   +--> CQI-ReportConfig-v920 is Present
            |   |   |
            |   |   +--> cqi-mask is Present 
            |   |   |
            |   |   +--> pmi-RI-Report-r9 is Present and cqi-ReportPeriodic 
            |   |        is set to release and cqi-ReportModeAperiodic is 
            |   |        NOT present.
            |   |   
            |   |
            |   +--> All other elements - optional
            |
            +--> MAC-MainConfig is optional
            +--> DRB-ToReleaseList is optional
            +--> SPS-Config is optional

         This test cases is to check only for cqi-mask element.
         RRC will send error indidcation to RRC user as this IE should not be present
         when cqi-ReportPeriodic is set to release.

         Steps:
         ------
         1. RRC recieves Data indication from PDCP for RRC Connection Request
            Message sent from UE
         2. RRC will send data indication for the same to RRC user
         3. RRC user sends RRC Connection Setup Request (data and Cfg)
            to RRC with massage filing as mentioned above
         4. RRC will validate Message request before sending configuration
            request to lower layers.
         5. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: CQIMASK)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
            <tapa.flag id="LTERRC_REL9"/>
            <tapa.flag id="CTF_VER1"/>
            <tapa.flag id="NHU_VER1"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />

   </tapa.cfg>
   <tapa.test>
      # Send RRC Connection Request from RLC 
      <tapa.send >
         <tapa.dummy.kwu.datind suId="0" spId="0" rbId="1" msgType="1" 
         cellId="2" tCrnti="2" />
      </tapa.send>

      <tapa.delay delay="5" />
      #Expect RRC Connection Request at RRC user
      <tapa.expect >
         <tapa.nhu.datind cellId="2" tCrnti="2" />
      </tapa.expect>

     #Send RRC Connection Setup from RRC user
      <tapa.send>
        <tapa.nhu.datrsp spId="0" bitMask="2" expCfgBitMask="11"
        rbCfgType="1"   msgCategory="3" msgType="3"
         rrc_transId="0" transId="10" rbId="1" pdcpId="1"
        valChk="0" cellId="2" tCrnti="2"  numAddRb="1" addRbIdStr="1,0"
        addLcIdStr="2" addBitMskStr="7" txMode="4" cqiMaskPres="TRUE" 
        cqiRprtPeriodicSetupPres="FALSE" cqiRprtAperiodicPres="FALSE"
        pmiRprtPres="FALSE"/>
     </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>

##################################################################################
#       Test:    12.55
#       Desc:    Validation of Condition IE
#                RadioResourceConfigDedicated.PhysicalConfigDedicated
#                .AntennaInfoDedicated.codebookSubsetRestriction-v920 during RRC
#                Connection Reconfiguration procedure.
#       Module:  CCM
#       File:    nhac_tc12.xml
##################################################################################
<tapa.testcase id="12.55">
   <tapa.attribute scenarioType="FAILURE"/>
   <tapa.doc>
      <tapa.rfc id="36.331" section="6.2 and 6.3"/>
      <tapa.module id="lterrc"/>
      <tapa.desc>
         Validation of Condition IE RadioResourceConfigDedicated
         .PhysicalConfigDedicated.AntennaInfoDedicated.
         codebookSubsetRestriction-v920 during RRC Connection 
         Reconfiguration procedure.

         RRC user will send RRC Connection Reconfigration request to establish
         SRB2 and few (DRB1 and DRB2) DRBs with below message fillings:

         RRCConnectionReconfigurationIEs
         |
         +--> RadioResourceConfigDedicated is Present
         |   |
         |   +--> SRB-ToAddModList is present
         |   +--> DRB-ToAddModList
         |   +--> PhysicalConfigDedicated is present
         |   |   |
         |   |   +--> AntennaInfoDedicated is Present
         |   |   |   |
         |   |   |   +--> transmissionMode (tm8)
         |   |   |   +--> codebookSubsetRestriction-v920 NOT Present
         |   |   |
         |   |   +--> All other elements - optional
         |   |
         |   +--> MAC-MainConfig is optional
         |   +--> DRB-ToReleaseList is optional
         |   +--> SPS-Config is optional
         +--> MeasConfig is optional
         +--> MobilityControlInfo is NOT Present
         +--> DedicatedInfoNAS is optional
         +--> SecurityConfigHO is NOT present

         This test cases is to check only for codebookSubsetRestriction-v920 element.
         "NOT rpesent" for other elements is just to make sure that this is a
         procedure for RRC Connection Reconfiguration not during HO. RRC will send
         error indidcation to RRC user as this IE is mandatory for this scenario.

         Steps:
         ------
         1. (RRC Connection is Established)
         2. (Initial Security has been activated)
         3. RRC user sends RRC Connection Reconfiguration Request (data and Cfg)
            to RRC with above mentioned message filling.
         4. RRC will validate Message request before sending configuration
            request to lower layers.
         5. RRC will send error indication to RRC user with
            (Error Cause: Conditional IEs, Error Type: CODEBOOKSUBSETRESTRICTION)

      </tapa.desc>
      <tapa.longdesc/>
   </tapa.doc>
   <tapa.require>
      <tapa.ifdef>
            <tapa.flag id="NH_ASN_COND_VALIDATE"/>
            <tapa.flag id="LTERRC_REL9"/>
            <tapa.flag id="CTF_VER1"/>
            <tapa.flag id="NHU_VER1"/>
      </tapa.ifdef>
      <tapa.ifndef>
      </tapa.ifndef>
      <tapa.mode mode="single"/>
   </tapa.require>
   <tapa.cfg>
      # Configure RRC
      <tapa.rrc.init />

      #Cell Configuration Setup
     <tapa.rrc.cellcfg transId="20" cellId="2" />

     #RRC Connection establishment procedure
     <tapa.rrc.consetup cellId="2" ueId="4" tCrnti="4" />

      # Security Activation for UE in connected mode
      <tapa.rrc.security_actv ueId="4" cellId="2"/>
   </tapa.cfg>
   <tapa.test>
      # Send Reconfiguration request
      <tapa.send>
         <tapa.nhu.datreq spId="0" bitMask="2" expCfgBitMask="1"
          msgCategory="1" msgType="4" transId="1" rrc_transId="1"
          cellId="2" ueId="4" pdcpId="1" numAddRb="3" addRbIdStr="2,0,3,1,4,1"
          addLcIdStr="2,3,4" addBitMskStr="7,1,1" rbCfgType="1" logChType="3"
          trChCfgDed="0" macSchedCfg="0"  valChk="0" rrcTransIdPres="1"
          txMode="4" codeBookRestnv920Pres="TRUE"/>
      </tapa.send>

      #Expect Error Indication at RRC user
      <tapa.expect >
         <tapa.nhu.errind errorType="6" errorCause="44" />
      </tapa.expect>

   </tapa.test>
   <tapa.clean>
      <tapa.rrc.conrls ueId="4" cellId="2" />
      <tapa.rrc.cellcfg.rls cellId="2" />
   </tapa.clean>
   <tapa.shutdown>
      <tapa.rrc.deinit/>
   </tapa.shutdown>
</tapa.testcase>

#/********************************************************************30**
#
#         End of file:     
#
#*********************************************************************31*/
#/**********************************************************************
#        Revision History:
#
#**********************************************************************/
#/********************************************************************90**
#
#     ver       pat    init                  description
#------------ -------- ---- ----------------------------------------------
#$SID$          ---    rer              1. LTE RRC Initial Release. 
#$SID$          ---    sbalakrishna     1. Updated for Release of 3.1.
#*********************************************************************91*/
#

