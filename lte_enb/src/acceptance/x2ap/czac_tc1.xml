
#/********************************************************************20**
#
#     Name:    X2AP 
#
#     Type:    XML Test File
#
#     Desc:    XML Based Test Cases Aceptance test
#
#     File:    czac_tc1.xml
#
#     Sid:     
#
#     Prg:     
#
#*********************************************************************21*/

# DO NOT DELETE THIS LINE -- TC number generation script depends on it.
# xyzabcstart=1:sy:czac_tc1.xml
#
#
#       Test:   1.1
#
#       Desc:   Verify acceptance of General Configuration.
#
#       Notes:   None
#              
#       Module:  
#
#       File:    czac_tc2.xml
#
#
<tapa.testcase id="1.1">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="x2ap"/>

      <tapa.desc>
           "Verify acceptance of General Configuration"
      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
   </tapa.cfg>

   <tapa.test>
# Send an General configuration request
      <tapa.send>
         <tapa.lcz.cfg.gen />
      </tapa.send>

      # Receive the confirm for the general configuration request.
      <tapa.expect>
         <tapa.lcz.cfgcfm />
      </tapa.expect>

   </tapa.test>

   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>
      # x2ap cleanup operations
      # Do shutdown
      <tapa.send>
         <tapa.lcz.cntrl.shutdown/>
      </tapa.send>

      # Do shutdown
      <tapa.expect>
         <tapa.lcz.cntrlcfm/>
      </tapa.expect>

   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:   1.2
#
#       Desc:    Verify the successful configuration of X2AP in
#                an integrated setup (eNb )
#
#       Notes:   None
#              
#       Module:  
#
#       File:    czac_tc1.xml
#
#
<tapa.testcase id="1.2">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="x2ap"/>

      <tapa.desc>
         "Verify the successful configuration of X2AP in "
         "an integrated setup (eNb)"
      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>
# Send an General configuration request
      <tapa.send>
         <tapa.lcz.cfg.gen />
      </tapa.send>

      # Receive the confirm for the general configuration request.
      <tapa.expect>
         <tapa.lcz.cfgcfm />
      </tapa.expect>

      # Send an protocol configuration request
      <tapa.send>
         <tapa.lcz.cfg.prot procId="CZAC_LCZ_ENB1_PRC" />
      </tapa.send>

      # Receive the confirm for the protocol configuration request.
      <tapa.expect>
         <tapa.lcz.cfgcfm />
      </tapa.expect>

      # Send an czt sap configuration request
      <tapa.send>
         <tapa.lcz.cfg.usap sapId="0"/>
      </tapa.send>

      # Receive the confirm for the czt sap request.
      <tapa.expect>
         <tapa.lcz.cfgcfm sapId="0" />
      </tapa.expect>

      <tapa.send>
         <tapa.lcz.cfg.usap sapId="1"/>
      </tapa.send>

      # Receive the confirm for the czt sap request.
      <tapa.expect>
         <tapa.lcz.cfgcfm sapId="1" />
      </tapa.expect>

     <tapa.send>
         <tapa.lcz.cfg.usap sapId="2"/>
      </tapa.send>

      # Receive the confirm for the czt sap request.
      <tapa.expect>
         <tapa.lcz.cfgcfm sapId="2" />
      </tapa.expect>

   </tapa.test>

   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>
      # Do shutdown
      <tapa.send>
         <tapa.lcz.cntrl.shutdown/>
      </tapa.send>

      # Do shutdown
      <tapa.expect>
         <tapa.lcz.cntrlcfm/>
      </tapa.expect>
   </tapa.shutdown>

</tapa.testcase>


#
#
#       Test:    1.3
#
#       Desc:    "Verify the successful Association at ENB1 in a Dummy environment "
#
#       Notes:   None
#              
#       Module:  
#
#       File:    czac_tc1.xml
#
#
<tapa.testcase id="1.3">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="x2ap"/>

      <tapa.desc>
         "Verify the successful Association at ENB1 in a Dummy environment "
         
      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
         <tapa.flag id="DM" />  
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.cz.dummyenb1.init/>
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>

       # Send the first X2 Setup from user at eNodeB1
      <tapa.send>
         <tapa.czt.gpreq procId="CZAC_ENB1_PROC" peerId="2" eventType="CZT_MSG_X2_SETUP"  />
      </tapa.send>     

      # Expect a new Association Request from eNodeB1
      <tapa.expect>
         <tapa.sct.assocreq procId="CZAC_ENB1_PROC" peerProcId="CZAC_ENB2_PROC" spId="0" 
                            suEndpId="0" 
                            spEndpId="0" 
                            suAssocId="2" 
                            assocIdx="0" type="SCT_ASSOC_IND_COOKIE"
                             />
      </tapa.expect>

      # Send back the Association confirm to eNodeB1
      <tapa.send>
         <tapa.sct.assoccfm procId="CZAC_ENB1_PROC" suId="0" 
                           suEndpId="0" 
                           spEndpId="0" 
                           suAssocId="2" 
                           spAssocId="2" 
                           assocIdx="0" type="SCT_ASSOC_IND_COOKIE"/>
      </tapa.send>

      # Send Status Indication to eNodeB1 that ASSOC UP 
      <tapa.send>
         <tapa.sct.staind procId="CZAC_ENB1_PROC" suId="0" 
                          suAssocId="0" 
                          spAssocId="2" 
                          status="SCT_STATUS_COMM_UP"/> 
      </tapa.send>
      #Second start the X2 interface setup  
      #Now receive the first X2 Setup from eNodeB1
      <tapa.expset>
         <tapa.sct.datreq procId="CZAC_ENB1_PROC" spId="0" 
                          spAssocId="2" 
                          assocIdx="0" 
                          eventType="CZT_MSG_X2_SETUP" />
       <tapa.lcz.staInd category="LCM_CATEGORY_PROTOCOL"
                       event = "LCZ_EVENT_LI_COMM_UP"
                       cause = "LCZ_CAUSE_SCT_NOT_APPL"
                       type   =  "LCZ_USTA_DGNVAL_PEER"
                       typeId =  "2"      
                       procId="300" />

#        <tapa.czt.staind peerId="2" staType="CZT_STA_TYPE_ASSOC"  
#              status="CZT_STATUS_ASSOC_UP" reason="CZT_REASON_RCVD_COMM_UP"/>

                                                                 
     </tapa.expset>


   </tapa.test>

   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>
      #Deinitialize eNB1 with dummy SCTP
       <tapa.cz.dummy.enb1.deinit />  
   </tapa.shutdown>

</tapa.testcase>



#
#
#       Test:    1.4
#
#       Desc:  "Verify the successful completion of X2AP Setup"
#              " in the Dummy Environment"
#           
#
#       Notes:   None
#              
#       Module:  
#
#       File:    czac_tc1.xml
#
#
<tapa.testcase id="1.4">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="x2ap"/>

      <tapa.desc>
         "Verify the successful completion of X2AP Setup"
         " in the Dummy Environment"
      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
         <tapa.flag id="DM" />  
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
    <tapa.cz.dummyenb1.init/>

   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>
        #Bring up X2 Interface 
      <tapa.cz.dummy.enb1.x2.init/>

   </tapa.test>

   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>

      #Deinitialize eNB1 with dummy SCTP
       <tapa.cz.dummy.enb1.deinit />  

   </tapa.shutdown>

</tapa.testcase>


#
#
#       Test:    1.5
#
#       Desc:    Multiple "CZAC_START" requests.
#                eNB1 --->> Rsrc sts req with "CZAC_START" regn rqst. --->> eNB2
#                eNB2 --->> Rsrc sts rsp  ------>> eNB1
#                eNB1 --->> Rsrc sts req with "CZAC_START" regn rqst. --->> eNB2
#                eNB2 --->> Rsrc sts failure  ------>> eNB1
#               
#
#       Notes:   None
#              
#       Module:  
#
#       File:    czac_tc1.xml
#
#
<tapa.testcase id="1.5">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="x2ap"/>

      <tapa.desc>
         Unsuccessful Resource status report initiation.
         
      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

       <tapa.ifdef>
         <tapa.flag id="DM" />  
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.cz.dummyenb2.init/>
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>

      <tapa.cz.dummy.enb2.x2.init/>

      # send resource status request from eNB1 with "CZAC_START" 
      # registration request
      <tapa.send>
       <tapa.sct.datind procId="CZAC_LCZ_ENB2_PRC" peerId="1" 
                        eventType="CZT_MSG_RSRC_ST_REQ" suId="0"
                        suAssocId="0" 
                        assocIdx="0"
                        streamId="1" eNb1MeasId="1" 
                        regReqType="CZAC_START"/>
      </tapa.send>

      <tapa.expect>
       <tapa.czt.gpind procId="CZAC_LCZ_ENB2_PRC" peerId="1" 
                       eventType="CZT_MSG_RSRC_ST_REQ"
                       eNb1MeasId="1" />
      </tapa.expect>
   
      # send resource status response from eNB2
      <tapa.send>
       <tapa.czt.gprsp procId="CZAC_LCZ_ENB2_PRC" peerId="1" 
                       eventType="CZT_MSG_RSRC_ST_RSP" 
                       eNb1MeasId="1" eNb2MeasId="2"/>
      </tapa.send>

      <tapa.expect>
       <tapa.sct.datreq procId="CZAC_LCZ_ENB2_PRC" peerId="1" 
                        eventType="CZT_MSG_RSRC_ST_RSP" spId="0"
                        suAssocId="0" 
                        assocIdx="0"
                        streamId="1"
                        eNb1MeasId="1" eNb2MeasId="2" />
      </tapa.expect>
   
      # send resource status request from eNB1 with "CZAC_START" 
      # registration request
      <tapa.send>
       <tapa.sct.datind procId="CZAC_LCZ_ENB2_PRC" peerId="1" 
                        eventType="CZT_MSG_RSRC_ST_REQ" 
                        eNb1MeasId="1"  
                        suId="0"
                        suAssocId="0" 
                        assocIdx="0"
                        streamId="1"  
                        regReqType="CZAC_START"/>
      </tapa.send>

      <tapa.expect>
       <tapa.sct.datreq procId="CZAC_LCZ_ENB2_PRC" peerId="1" 
                        eventType="CZT_MSG_RSRC_ST_FAIL" spId="0"
                        suAssocId="0" 
                        assocIdx="0"
                        streamId="1"  
                        eNb1MeasId="1" eNb2MeasId="2" 
                        causeType="CAUSE_RADIONW"
                        causeVal="18" />
          #CztCauseRadioNwexistingMeasurementIDEnum
      </tapa.expect>
   
      <tapa.expect>
       <tapa.czt.errind procId="CZAC_LCZ_ENB2_PRC" peerId="1" 
                        eventType="CZT_MSG_RSRC_ST_REQ" 
                        errType="CZT_ERRTYPE_INV_PARAM" 
                        errCause="CZT_ERRCAUSE_DUPLICATE_ENB1_MEAS_ID"/>
      </tapa.expect>

   </tapa.test>

   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>

      # x2ap cleanup operations
      <tapa.cz.dummy.enb2.deinit/>

   </tapa.shutdown>
</tapa.testcase>

#
#
#       Test:    1.6
#
#       Desc:   "Verify the successful completion X2AP Configuration Request"
#                " with Dummy Environment"
#
#       Notes:   None
#              
#       Module:  
#
#       File:    czac_tc1.xml
#
#
<tapa.testcase id="1.6">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="x2ap"/>

      <tapa.desc>
         "Verify the successful  completion X2AP Configuration Request"
         " with  Dummy Environment"
      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
         <tapa.flag id="DM" />  
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.cz.dummyenb1.init/>

   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>

      #Bring up X2 Interface 
      <tapa.cz.dummy.enb1.x2.init/>

      # Send the first X2 Setup from user at eNodeB1
      <tapa.send>
         <tapa.czt.gpreq procId="CZAC_ENB1_PROC" peerId="2" eventType="CZT_MSG_CFG_UPD_REQ"  />
      </tapa.send>     

           
      #Second start the X2 interface setup  
      #Now receive the first X2 Setup from eNodeB1
      <tapa.expect>
         <tapa.sct.datreq procId="CZAC_ENB1_PROC" spId="0" 
                          spAssocId="1" 
                          eventType="CZT_MSG_CFG_UPD_REQ" />
                                                                
     </tapa.expect>


      # Respond back with X2 Setup Response to eNodeB1
      <tapa.send>
         <tapa.sct.datind  procId="CZT_PROC_ENB1" suId="0" 
                           suAssocId="0" 
                           strmId="1"
                           eventType="CZT_MSG_CFG_UPD_ACK" />
      </tapa.send>

      # Expect X2 Setup Response with user at eNodeB1
      <tapa.expect>
         <tapa.czt.gpcfm procId="CZT_PROC_ENB1" peerId="2" 
         eventType="CZT_MSG_CFG_UPD_ACK"   />
      </tapa.expect>   

   </tapa.test>

   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>

      #Deinitialize eNB1 with dummy SCTP
       <tapa.cz.dummy.enb1.deinit />  

   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.7
#
#       Desc:   "Verify the unsuccessful  completion X2AP Configuration Request"
#                " with  Failure Response Dummy Environment"
#
#       Notes:   None
#              
#       Module:  
#
#       File:    czac_tc1.xml
#
#
<tapa.testcase id="1.7">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="x2ap"/>

      <tapa.desc>
         "Verify the unsuccessful  completion X2AP Configuration Request"
         " with  Failure Response Dummy Environment"
      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
         <tapa.flag id="DM" />  
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.cz.dummyenb1.init/>

   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>

      #Bring up X2 Interface 
      <tapa.cz.dummy.enb1.x2.init/>

      # Send the first X2 Setup from user at eNodeB1
      <tapa.send>
         <tapa.czt.gpreq procId="CZAC_ENB1_PROC" peerId="2" eventType="CZT_MSG_CFG_UPD_REQ"  />
      </tapa.send>     

           
      #Second start the X2 interface setup  
      #Now receive the first X2 Setup from eNodeB1
      <tapa.expect>
         <tapa.sct.datreq procId="CZAC_ENB1_PROC" spId="0" 
                          spAssocId="1" 
                          eventType="CZT_MSG_CFG_UPD_REQ" />
                                                                
     </tapa.expect>


      # Respond back with X2 Setup Response to eNodeB1
      <tapa.send>
         <tapa.sct.datind  procId="CZT_PROC_ENB1" suId="0" 
                           suAssocId="0" 
                           strmId="1"
                           eventType="CZT_MSG_CFG_UPD_FAIL" />
      </tapa.send>

      # Expect X2 Setup Response with user at eNodeB1
      <tapa.expect>
         <tapa.czt.gpcfm procId="CZT_PROC_ENB1" peerId="2" 
         eventType="CZT_MSG_CFG_UPD_FAIL"   />
      </tapa.expect>   

   </tapa.test>

   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>

      #Deinitialize eNB1 with dummy SCTP
       <tapa.cz.dummy.enb1.deinit />  

   </tapa.shutdown>

</tapa.testcase>
#
#
#       Test:    1.8
#
#         Desc :"Verify the Failure Response for the incoming Set Up Request by "
#                "the user"
#
#       Notes:   None
#              
#       Module:  
#
#       File:    czac_tc1.xml
#
#
<tapa.testcase id="1.8">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="x2ap"/>

      <tapa.desc>
         "Verify the Failure Response for the incoming Set Up Request by "
         "the user"
      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
         <tapa.flag id="DM" />  
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.cz.dummyenb2.init/>

   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>
       
      # Send a new Association Indication to eNodeB2
      <tapa.send>
         <tapa.sct.assocind procId="CZAC_ENB2_PROC" suId="0" 
                            suEndpId="0" 
                            assocIdx="0" type="SCT_ASSOC_IND_COOKIE" />
      </tapa.send>

      # Receive back the Association Response from eNodeB2
      <tapa.expect>
         <tapa.sct.assocrsp procId="CZAC_ENB2_PROC" spId="0" 
                           spEndpId="0" 
                           assocIdx="0" type="SCT_ASSOC_IND_COOKIE"/>
      </tapa.expect>

      # Send Status Indication to eNB2 that ASSOC UP 
      <tapa.send>
         <tapa.sct.staind procId="CZAC_ENB2_PROC" suId="0" 
                          suAssocId="1" 
                          spAssocId="1" 
                          status="SCT_STATUS_COMM_UP"/> 
      </tapa.send>
      
      
      # Expect Status Indication ASSOC UP with user at eNodeB2 
      <tapa.expset>

         <tapa.lcz.staInd category="LCM_CATEGORY_PROTOCOL"
                          event = "LCZ_EVENT_LI_COMM_UP"
                          cause = "LCZ_CAUSE_SCT_NOT_APPL"
                          type   = "LCZ_USTA_DGNVAL_PEER"
                          typeId =  "1"
                          procId="300"               />
                                   
#         <tapa.czt.staind procId="CZAC_ENB2_PROC" peerId="1" suId="0" 
#                          staType="CZT_STA_TYPE_ASSOC" 
#                          status="CZT_STATUS_ASSOC_UP"
#                          reason="CZT_REASON_RCVD_COMM_UP"  />
      </tapa.expset>         

      # Second start the X2 Interface setup
      # Now send the first X2 Setup message to eNodeB2
      <tapa.send>
         <tapa.sct.datind  procId="CZAC_ENB2_PROC" suId="0" 
                           suAssocId="1" 
                           assocIdx="0" 
                           strmId="1"
                           eventType="CZT_MSG_X2_SETUP" />
      </tapa.send>

      # Expect a new X2 Setup with user at eNodeB2 
      <tapa.expect>
         <tapa.czt.gpind procId="CZAC_ENB2_PROC" peerId="1" eventType="CZT_MSG_X2_SETUP"   />
      </tapa.expect>     


     # Send back the successful X2 Setup Response from user at eNodeB2 
      <tapa.send>
         <tapa.czt.gprsp procId="CZAC_ENB2_PROC" peerId="1" eventType="CZT_MSG_X2_SETUP_FAIL"  />
      </tapa.send>     


      # Receive back the X2 Setup Response from eNodeB2
      <tapa.expect>
        <tapa.sct.datreq  procId="CZAC_ENB2_PROC" spId="0" 
                          spAssocId="1" 
                          assocIdx="1" 
                          eventType="CZT_MSG_X2_SETUP_FAIL" />
      </tapa.expect>
        

   </tapa.test>

   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>

      #Deinitialize eNB1 with dummy SCTP
       <tapa.cz.dummy.enb2.deinit />  

   </tapa.shutdown>

</tapa.testcase>
#
#
#       Test:    1.9
#
#       Desc:   "Verify that for the New Peer Assoc Ind is passed to the User and "
#                "User will responsd and confiure that as the Dynamic Peer"
#
#       Notes:   None
#              
#       Module:  
#
#       File:    czac_tc1.xml
#
#
<tapa.testcase id="1.9">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="x2ap"/>

      <tapa.desc>
         "Verify that for the New Peer Assoc Ind is passed to the User and "
         "User will responsd and confiure that as the Dynamic Peer"
      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
         <tapa.flag id="DM" />  
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.cz.dummyenb2.init/>

   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>
       
      # Send a new Association Indication to eNodeB2
      <tapa.send>
         <tapa.sct.assocind procId="CZAC_LCZ_ENB2_PRC" peerProcId="CZAC_LCZ_ENB3_PRC"  
                            suId="0" suEndpId="0" 
                            assocIdx="0" type="SCT_ASSOC_IND_COOKIE" 
                            Ipaddr="172.26.0.25"/>
      </tapa.send>

      # Receive the Association Indication eNodeB2
      <tapa.expect>
           <tapa.czt.assocind procId="CZAC_LCZ_ENB2_PRC" peerId="0" suId="0"/>
      </tapa.expect>

      # Send an assoc response from eNB2 
      <tapa.send>
         <tapa.czt.assocrsp procId="CZAC_LCZ_ENB2_PRC" peerId="2" 
                            spId="0" addressType="4" 
                            priDstAddr="172.26.0.25" 
                            dstPort="10002" comProcStrm="1" 
                            locOutStrms="5" status="CZT_PRIM_OK" 
                            cause="CZT_STACAUSE_NOT_APPL"/>
      </tapa.send>

 # Expect Status Indication ASSOC UP with user at eNodeB2 
      <tapa.expset>
       
          <tapa.lcz.staInd category="LCM_CATEGORY_PROTOCOL"
                       event = "LCZ_EVENT_UI_PEERASSOC_RSP"
                       cause = "LCZ_CAUSE_DYNAM_PEERCFG_OK"
                       type   =  "LCZ_USTA_DGNVAL_PEER"
                       typeId =  "2"      
                       procId="CZAC_LCZ_ENB2_PRC" />

            <tapa.sct.assocrsp procId="CZAC_ENB2_PROC" spId="0" 
                           spEndpId="0" 
                           assocIdx="0" type="SCT_ASSOC_IND_COOKIE"/>
                                   
            </tapa.expset> 

     
      # Send Status Indication to eNB2 that ASSOC UP 
      <tapa.send>
         <tapa.sct.staind procId="CZAC_ENB2_PROC" suId="0" 
                          suAssocId="1" 
                          spAssocId="1" 
                          status="SCT_STATUS_COMM_UP"/> 
      </tapa.send>
      
      
      # Expect Status Indication ASSOC UP with user at eNodeB2 
#      <tapa.expect>
#          <tapa.czt.staind procId="CZAC_ENB2_PROC" peerId="2" suId="0" 
#                          staType="CZT_STA_TYPE_PEER" 
#                          status="CZT_STATUS_ASSOC_UP"
#                          reason="CZT_REASON_RCVD_COMM_UP"  />
#
#        </tapa.expect>         

      # Second start the X2 Interface setup
      # Now send the first X2 Setup message to eNodeB2
      <tapa.send>
         <tapa.sct.datind  procId="CZAC_ENB2_PROC" suId="0" 
                           suAssocId="1" 
                           assocIdx="0" 
                           strmId="1"
                           eventType="CZT_MSG_X2_SETUP" />
      </tapa.send>

      # Expect a new X2 Setup with user at eNodeB2 
      <tapa.expset>
         
         <tapa.lcz.staInd category="LCM_CATEGORY_PROTOCOL"
                          event = "LCZ_EVENT_LI_COMM_UP"
                          cause = "LCZ_CAUSE_SCT_NOT_APPL"
                          type   = "LCZ_USTA_DGNVAL_PEER"
                          typeId =  "2"
                          procId="300"               />

          <tapa.czt.staind procId="CZAC_ENB2_PROC" peerId="2" suId="0" 
                          staType="CZT_STA_TYPE_PEER" 
                          status="CZT_STATUS_ASSOC_UP"
                          reason="CZT_REASON_RCVD_COMM_UP"  />

         <tapa.czt.gpind procId="CZAC_ENB2_PROC" peerId="2" 
                              eventType="CZT_MSG_X2_SETUP"   />
      </tapa.expset>     


     # Send back the successful X2 Setup Response from user at eNodeB2 
      <tapa.send>
         <tapa.czt.gprsp procId="CZAC_ENB2_PROC" peerId="2" 
                             eventType="CZT_MSG_X2_SETUP_FAIL"  />
      </tapa.send>     


      # Receive back the X2 Setup Response from eNodeB2
      <tapa.expect>
        <tapa.sct.datreq  procId="CZAC_ENB2_PROC" spId="0" 
                          spAssocId="1" 
                          assocIdx="1" 
                          eventType="CZT_MSG_X2_SETUP_FAIL" />
      </tapa.expect>
        

   </tapa.test>

   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>

      #Deinitialize eNB1 with dummy SCTP
       <tapa.cz.dummy.enb2.deinit />  

   </tapa.shutdown>

</tapa.testcase>


###############################################################################
# All successful cases for BMP at target eNodeB
###############################################################################


#
#
#       Test:    1.10
#
#       Desc:    Verify the successful completion of 
#                handover at target eNodeB.
#
#       Notes:   None
#              
#       Module:  None
#
#       File:    czac_tc1.xml
#
#
<tapa.testcase id="1.10">

   # Document subsection
   <tapa.doc>

      <tapa.rfc />
      <tapa.module />

#
#   S eNodeB-----Handover Request----------------------->T eNodeB
#   S eNodeB-----Handover Request Ack------------------- T eNodeB
#   S eNodeB-----SN Status Transfer-------------------->T eNodeB
#   S eNodeB-----UE Context Release-------------------->T eNodeB
#

      <tapa.desc>
       Verify the successful completion of complete 
       handover at target eNodeB.
     </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>


   # Require features and flags subsection
   <tapa.require>
       <tapa.ifdef>
         <tapa.flag id="DM" />  
      </tapa.ifdef>
       <tapa.ifndef/>
       <tapa.mode mode="single"/>
   </tapa.require>


   # Configuration subsection
   <tapa.cfg>
       #Initialize eNB2 with dummy SCTP
      <tapa.cz.dummyenb2.init/>  
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>

      #Bring up X2 Interface 
      <tapa.cz.dummy.enb2.x2.init/>

     # Start the actual handover now  -> Send HO Request to eNB2
      <tapa.send>
         <tapa.sct.datind procId="CZAC_LCZ_ENB2_PRC" suId="0"
                               suAssocId="0" 
                               assocIdx="0"
                               streamId="1"
                               eventType="CZT_MSG_HO_REQ" oldUEX2APId="1" />
      </tapa.send>

      #Expect the HO Request at eNB2
      <tapa.expect>
       <tapa.czt.bmpind procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_HO_REQ" />
      </tapa.expect>

      #Send the HO Request Ack back
      <tapa.send>
       <tapa.czt.bmprsp procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_HO_ACK" 
                        oldUEX2APId="1" newUEX2APId="2"/>
      </tapa.send>

      #Expect HO Request Ack from eNodeB2. 
      <tapa.expect>
         <tapa.sct.datreq procId="CZAC_LCZ_ENB2_PRC" spId="0"
                          spAssocId="1"
                          assocIdx="0"
                          eventType="CZT_MSG_HO_ACK" oldUEX2APId="1" newUEX2APId="2"/>
      </tapa.expect>

      # Send SN Status Transfer to eNB2
      <tapa.send>
         <tapa.sct.datind procId="CZAC_LCZ_ENB2_PRC" suId="0"
                               suAssocId="0" 
                               assocIdx="0"
                               streamId="1"
                               eventType="CZT_MSG_SN_STATUS_TRFR" oldUEX2APId="1" 
                               newUEX2APId="2"/>
      </tapa.send>

      #Expect the SN Status Transfer at eNB2
      <tapa.expect>
       <tapa.czt.bmpind procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_SN_STATUS_TRFR" />
      </tapa.expect>

      
     # Send UE Context Release from eNB2
      <tapa.send>
       <tapa.czt.bmpreq procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_UE_CXT_RELEASE" 
                        oldUEX2APId="1" newUEX2APId="2"/>
      </tapa.send>

      #Expect the UE Context Release from eNB2
      <tapa.expect>
         <tapa.sct.datreq procId="CZAC_LCZ_ENB2_PRC" spId="0"
                          spAssocId="1"
                          assocIdx="0"
                          eventType="CZT_MSG_UE_CXT_RELEASE" 
                          oldUEX2APId="1" newUEX2APId="2" />
      </tapa.expect>
 
   </tapa.test>

   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>
       #Deinitialize eNB2 with dummy SCTP
       <tapa.cz.dummy.enb2.deinit />  
   </tapa.shutdown>

</tapa.testcase>


#
#
#       Test:    1.11
#
#       Desc:    Verify the successful cancellation of handover before the 
#                completion of handover at target eNodeB.
#
#       Notes:   None
#              
#       Module:  None
#
#       File:    czac_tc1.xml
#
#
<tapa.testcase id="1.11">

   # Document subsection
   <tapa.doc>

      <tapa.rfc />
      <tapa.module />

#
#   S eNodeB-----Handover Request----------------------->T eNodeB
#   S eNodeB-----Handover Request Ack------------------- T eNodeB
#   S eNodeB-----Handover Cancel------------------------>T eNodeB
#

      <tapa.desc>
       Verify the successful completion of complete 
       handover at target eNodeB.
     </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>


   # Require features and flags subsection
   <tapa.require>
       <tapa.ifdef>
         <tapa.flag id="DM" />  
      </tapa.ifdef>
       <tapa.ifndef/>
       <tapa.mode mode="single"/>
   </tapa.require>


   # Configuration subsection
   <tapa.cfg>
       #Initialize eNB2 with dummy SCTP
      <tapa.cz.dummyenb2.init/>  
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>

      #Bring up X2 Interface 
      <tapa.cz.dummy.enb2.x2.init/>

     # Start the actual handover now  -> Send HO Request to eNB2
      <tapa.send>
         <tapa.sct.datind procId="CZAC_LCZ_ENB2_PRC" suId="0"
                               suAssocId="0" 
                               assocIdx="0"
                               streamId="1"
                               eventType="CZT_MSG_HO_REQ" oldUEX2APId="1" />
      </tapa.send>

      #Expect the HO Request at eNB2
      <tapa.expect>
       <tapa.czt.bmpind procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_HO_REQ" />
      </tapa.expect>

      #Send the HO Request Ack back
      <tapa.send>
       <tapa.czt.bmprsp procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_HO_ACK" 
                        oldUEX2APId="1" newUEX2APId="2"/>
      </tapa.send>

      #Expect HO Request Ack from eNodeB2. 
      <tapa.expect>
         <tapa.sct.datreq procId="CZAC_LCZ_ENB2_PRC" spId="0"
                          spAssocId="1"
                          assocIdx="0"
                          eventType="CZT_MSG_HO_ACK" oldUEX2APId="1" newUEX2APId="2"/>
      </tapa.expect>

      # Send HO Cancel to eNB2
      <tapa.send>
         <tapa.sct.datind procId="CZAC_LCZ_ENB2_PRC" suId="0"
                               suAssocId="0" 
                               assocIdx="0"
                               streamId="1"
                               eventType="CZT_MSG_HO_CANCEL" oldUEX2APId="1" />
      </tapa.send>

      #Expect the HO Cancel at eNB2
      <tapa.expect>
       <tapa.czt.bmpind procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_HO_CANCEL" />
      </tapa.expect>

   </tapa.test>

   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>
       #Deinitialize eNB2 with dummy SCTP
       <tapa.cz.dummy.enb2.deinit />  
   </tapa.shutdown>

</tapa.testcase>



#
#
#       Test:    1.12
#
#       Desc:    Verify the successful failure of handover at target eNodeB.
#
#       Notes:   None
#              
#       Module:  None
#
#       File:    czac_tc1.xml
#
#
<tapa.testcase id="1.12">

   # Document subsection
   <tapa.doc>

      <tapa.rfc />
      <tapa.module />

#
#   S eNodeB-----Handover Request----------------------->T eNodeB
#   S eNodeB-----Handover Preparation Failure----------- T eNodeB
#

      <tapa.desc>
        Verify the successful failure of handover at target eNodeB.
     </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>


   # Require features and flags subsection
   <tapa.require>
       <tapa.ifdef>
         <tapa.flag id="DM" />  
      </tapa.ifdef>
       <tapa.ifndef/>
       <tapa.mode mode="single"/>
   </tapa.require>


   # Configuration subsection
   <tapa.cfg>
       #Initialize eNB2 with dummy SCTP
      <tapa.cz.dummyenb2.init/>  
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>

      #Bring up X2 Interface 
      <tapa.cz.dummy.enb2.x2.init/>

     # Start the actual handover now  -> Send HO Request to eNB2
      <tapa.send>
         <tapa.sct.datind procId="CZAC_LCZ_ENB2_PRC" suId="0"
                               suAssocId="0" 
                               assocIdx="0"
                               streamId="1"
                               eventType="CZT_MSG_HO_REQ" oldUEX2APId="1" />
      </tapa.send>

      #Expect the HO Request at eNB2
      <tapa.expect>
       <tapa.czt.bmpind procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_HO_REQ" />
      </tapa.expect>

      #Send the HO Preparation Failure back
      <tapa.send>
       <tapa.czt.bmprsp procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_HO_FAIL" 
                        oldUEX2APId="1" />
      </tapa.send>

      #Expect HO Preparation Failure from eNodeB2. 
      <tapa.expect>
         <tapa.sct.datreq procId="CZAC_LCZ_ENB2_PRC" spId="0"
                          spAssocId="1"
                          assocIdx="0"
                          eventType="CZT_MSG_HO_FAIL" oldUEX2APId="1" />
      </tapa.expect>

   </tapa.test>

   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>
       #Deinitialize eNB2 with dummy SCTP
       <tapa.cz.dummy.enb2.deinit />  
   </tapa.shutdown>

</tapa.testcase>

###############################################################################
# End of All successful cases for BMP at target eNodeB
###############################################################################

 
###############################################################################
# All successful cases for BMP at source eNodeB
###############################################################################



#
#
#       Test:    1.13
#
#       Desc:    Verify the successful completion of 
#                handover at source eNodeB.
#
#       Notes:   None
#              
#       Module:  None
#
#       File:    czac_tc1.xml
#
#
<tapa.testcase id="1.13">

   # Document subsection
   <tapa.doc>

      <tapa.rfc />
      <tapa.module />

#   S eNodeB-----Handover Request----------------------->T eNodeB
#   S eNodeB-----Handover Request Ack------------------- T eNodeB
#   S eNodeB-----SN Status Transfer-------------------->T eNodeB
#   S eNodeB-----UE Context Release-------------------->T eNodeB
#

      <tapa.desc>
        Verify the successful completion of complete 
        handover at source eNodeB.
      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>


   # Require features and flags subsection
   <tapa.require>
       <tapa.ifdef>
         <tapa.flag id="DM" />  
      </tapa.ifdef>
       <tapa.ifndef/>
       <tapa.mode mode="single"/>
   </tapa.require>


   # Configuration subsection
   <tapa.cfg>

       #Initialize eNB1 with dummy SCTP
       <tapa.cz.dummyenb1.init />  
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>

      #Bring up X2 Interface 
      <tapa.cz.dummy.enb1.x2.init/>

     # Start the actual handover now 
      # Send HO Request to eNB2
      <tapa.send>
       <tapa.czt.bmpreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_HO_REQ" 
                        oldUEX2APId="1"/>
      </tapa.send>

      #Expect an HO Request from eNB1.
      <tapa.expect>
         <tapa.sct.datreq procId="CZAC_LCZ_ENB1_PRC" spId="0"
                               spAssocId="2" 
                               assocIdx="0"
                               streamId="1"
                               eventType="CZT_MSG_HO_REQ" oldUEX2APId="1" />
      </tapa.expect>

   
      #Send an HO Request ACK back to eNB1 
      <tapa.send>
         <tapa.sct.datind procId="CZAC_LCZ_ENB1_PRC" suId="0"
                               suAssocId="0" 
                               assocIdx="0"
                               streamId="1"
                               eventType="CZT_MSG_HO_ACK" oldUEX2APId="1" newUEX2APId="2"/>
      </tapa.send>

      #Expect an HO Request Ack at eNB1.
      <tapa.expect>
       <tapa.czt.bmpcfm procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_HO_ACK" 
                        oldUEX2APId="1"
                        newUEX2APId="2"/>
      </tapa.expect>
   
     # Send SN Status Transfer to eNB2
      <tapa.send>
       <tapa.czt.bmpreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_SN_STATUS_TRFR" 
                        oldUEX2APId="1" newUEX2APId="2"/>
      </tapa.send>

      #Expect SN Status Transfer from eNB1.
      <tapa.expect>
         <tapa.sct.datreq procId="CZAC_LCZ_ENB1_PRC" spId="0"
                               spAssocId="2" 
                               assocIdx="0"
                               streamId="1"
                               eventType="CZT_MSG_SN_STATUS_TRFR" oldUEX2APId="1" 
                               newUEX2APId="2"/>
      </tapa.expect>

      #Send an UE Context Release back to eNB1 
      <tapa.send>
         <tapa.sct.datind procId="CZAC_LCZ_ENB1_PRC" suId="0"
                               suAssocId="0" 
                               assocIdx="0"
                               streamId="1"
                               eventType="CZT_MSG_UE_CXT_RELEASE" oldUEX2APId="1" 
                               newUEX2APId="2"/>
      </tapa.send>

      #Expect UE Context Release at eNB1.
      <tapa.expect>
       <tapa.czt.bmpind procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_UE_CXT_RELEASE" 
                        oldUEX2APId="1"
                        newUEX2APId="2"/>
      </tapa.expect>
   
   </tapa.test>


   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>
       #Deinitialize eNB1 with dummy SCTP
       <tapa.cz.dummy.enb1.deinit />  
   </tapa.shutdown>

</tapa.testcase>



#
#
#       Test:    1.14
#
#       Desc:    Verify the successful cancellation of complete 
#                handover at source eNodeB.
#
#       Notes:   None
#              
#       Module:  None
#
#       File:    czac_tc1.xml
#
#
<tapa.testcase id="1.14">

   # Document subsection
   <tapa.doc>

      <tapa.rfc />
      <tapa.module />

#   S eNodeB-----Handover Request----------------------->T eNodeB
#   S eNodeB-----Handover Request Ack------------------- T eNodeB
#   S eNodeB-----Handover Cancel----------------------->T eNodeB
#

      <tapa.desc>
        Verify the successful completion of complete 
        handover at source eNodeB.
      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>


   # Require features and flags subsection
   <tapa.require>
       <tapa.ifdef>
         <tapa.flag id="DM" />  
      </tapa.ifdef>
       <tapa.ifndef/>
       <tapa.mode mode="single"/>
   </tapa.require>


   # Configuration subsection
   <tapa.cfg>

       #Initialize eNB1 with dummy SCTP
       <tapa.cz.dummyenb1.init />  
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>

      #Bring up X2 Interface 
      <tapa.cz.dummy.enb1.x2.init/>

     # Start the actual handover now 
      # Send HO Request to eNB2
      <tapa.send>
       <tapa.czt.bmpreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_HO_REQ" 
                        oldUEX2APId="1"/>
      </tapa.send>

      #Expect an HO Request from eNB1.
      <tapa.expect>
         <tapa.sct.datreq procId="CZAC_LCZ_ENB1_PRC" spId="0"
                               spAssocId="2" 
                               assocIdx="0"
                               streamId="1"
                               eventType="CZT_MSG_HO_REQ" oldUEX2APId="1" />
      </tapa.expect>

      #Send an HO Request ACK back to eNB1 
      <tapa.send>
         <tapa.sct.datind procId="CZAC_LCZ_ENB1_PRC" suId="0"
                               suAssocId="0" 
                               assocIdx="0"
                               streamId="1"
                               eventType="CZT_MSG_HO_ACK" oldUEX2APId="1" newUEX2APId="2"/>
      </tapa.send>

      #Expect an HO Request Ack at eNB1.
      <tapa.expect>
       <tapa.czt.bmpcfm procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_HO_ACK" 
                        oldUEX2APId="1"
                        newUEX2APId="2"/>
      </tapa.expect>

     # Send HO Cancel to eNB2
      <tapa.send>
       <tapa.czt.bmpreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_HO_CANCEL" 
                         oldUEX2APId="1" newUEX2APId="2"/>
      </tapa.send>

      #Expect HO Cancel from eNB1.
      <tapa.expect>
         <tapa.sct.datreq procId="CZAC_LCZ_ENB1_PRC" spId="0"
                               spAssocId="2" 
                               assocIdx="0"
                               streamId="1"
                               eventType="CZT_MSG_HO_CANCEL" oldUEX2APId="1" newUEX2APId="2"/>
      </tapa.expect>

   </tapa.test>


   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>
       #Deinitialize eNB1 with dummy SCTP
       <tapa.cz.dummy.enb1.deinit />  
   </tapa.shutdown>

</tapa.testcase>


#
#
#       Test:    1.15
#
#       Desc:    Verify the successful failure of handover preparation 
#                at source eNodeB.
#
#       Notes:   None
#              
#       Module:  None
#
#       File:    czac_tc1.xml
#
#
<tapa.testcase id="1.15">

   # Document subsection
   <tapa.doc>

      <tapa.rfc />
      <tapa.module />

#   S eNodeB-----Handover Request----------------------->T eNodeB
#   S eNodeB-----Handover Preparation Failure---------- T eNodeB
#

      <tapa.desc>
       Verify the successful failure of handover preparation 
       at source eNodeB.
      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>


   # Require features and flags subsection
   <tapa.require>
       <tapa.ifdef>
         <tapa.flag id="DM" />  
      </tapa.ifdef>
       <tapa.ifndef/>
       <tapa.mode mode="single"/>
   </tapa.require>


   # Configuration subsection
   <tapa.cfg>

       #Initialize eNB1 with dummy SCTP
       <tapa.cz.dummyenb1.init />  
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>

      #Bring up X2 Interface 
      <tapa.cz.dummy.enb1.x2.init/>

     # Start the actual handover now 
      # Send HO Request to eNB2
      <tapa.send>
       <tapa.czt.bmpreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_HO_REQ" 
                        oldUEX2APId="1"/>
      </tapa.send>

      #Expect an HO Request from eNB1.
      <tapa.expect>
         <tapa.sct.datreq procId="CZAC_LCZ_ENB1_PRC" spId="0"
                               spAssocId="2" 
                               assocIdx="0"
                               streamId="1"
                               eventType="CZT_MSG_HO_REQ" oldUEX2APId="1" />
      </tapa.expect>

      #Send an HO Preparation Failure back to eNB1 
      <tapa.send>
         <tapa.sct.datind procId="CZAC_LCZ_ENB1_PRC" suId="0"
                               suAssocId="0" 
                               assocIdx="0"
                               streamId="1"
                               eventType="CZT_MSG_HO_FAIL" oldUEX2APId="1"/>
      </tapa.send>

      #Expect an HO Preparation Failure at eNB1.
      <tapa.expect>
       <tapa.czt.bmpcfm procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_HO_FAIL" 
                        oldUEX2APId="1"/>
      </tapa.expect>

   </tapa.test>


   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>
       #Deinitialize eNB1 with dummy SCTP
       <tapa.cz.dummy.enb1.deinit />  
   </tapa.shutdown>

</tapa.testcase>

###############################################################################
# End of All successful cases for BMP at source eNodeB
###############################################################################

#
#
#       Test:    1.16
#
#       Desc:    Verify that when in X2 Reset from peer, 
#                HO Procedure cannot be processed for same peer.
#                If TRelocprep timer expires the HO cancel shall not be sent 
#                to peer, instead user will be informed
#
#       Notes:   None
#              
#       Module:  None
#
#       File:    czac_tc1.xml
#
#
<tapa.testcase id="1.16">

   # Document subsection
   <tapa.doc>

      <tapa.rfc />
      <tapa.module />

#
#   S eNodeB-----Handover Request----------------------->T eNodeB
#   S eNodeB-----Reset ---------------------------------T eNodeB
#  Expect Error Indication at source eNodeB application also. 
#

      <tapa.desc>
       Verify that when in X2 Reset from peer, 
       HO Procedure cannot be processed for same peer.
       If TRelocprep timer expires the HO cancel shall not be sent 
       to peer, instead user will be informed
     </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>


   # Require features and flags subsection
   <tapa.require>
       <tapa.ifdef>
         <tapa.flag id="DM" />  
      </tapa.ifdef>
       <tapa.ifndef/>
       <tapa.mode mode="single"/>
   </tapa.require>


   # Configuration subsection
   <tapa.cfg>
       #Initialize eNB1 with dummy SCTP
      <tapa.cz.dummyenb1.init/>  
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>

      #Set the TRelocprep timer to 3 units explicitly
      <tapa.send>
         <tapa.lcz.cfg.prot procId="CZAC_LCZ_ENB1_PRC" tRELOCprep="3000"/>
      </tapa.send>

      # Receive the confirm for the protocol configuration request.
      <tapa.expect>
         <tapa.lcz.cfgcfm procId="CZAC_LCZ_ENB1_PRC"/>
      </tapa.expect>

      #Bring up X2 Interface 
      <tapa.cz.dummy.enb1.x2.init/>

      # Start the actual handover now 
      # Send HO Request to eNB2
      <tapa.send>
       <tapa.czt.bmpreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_HO_REQ" oldUEX2APId="1"/>
      </tapa.send>

      #Expect an HO Request from eNB1.
      <tapa.expect>
         <tapa.sct.datreq procId="CZAC_LCZ_ENB1_PRC" spId="0"
                               spAssocId="2" 
                               assocIdx="0"
                               streamId="1"
                               eventType="CZT_MSG_HO_REQ" oldUEX2APId="1" />
      </tapa.expect>

     # Send Reset to eNB1
      <tapa.send>
         <tapa.sct.datind procId="CZAC_LCZ_ENB1_PRC" suId="0"
                               suAssocId="0" 
                               assocIdx="0"
                               streamId="1"
                               eventType="CZT_MSG_RESET"/>
      </tapa.send>

      #Expect the Reset Response at eNB1
      <tapa.expect>
       <tapa.czt.gpind procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_RESET" />
      </tapa.expect>

   <!-- <tapa.delay delay="50" /> -->

      <tapa.expect gaurdTmr="100">
      <tapa.czt.staind procId="CZAC_LCZ_ENB1_PRC" peerId="2" suId="0" 
                          staType="CZT_STA_TYPE_TMR_EXPIRY" 
                          status="CZT_STATUS_UE_TRELOCPREP_EXPIRY"
                          reason="CZT_REASON_NOT_APPL"  />
      </tapa.expect>

     
   </tapa.test>

   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>
       #Deinitialize eNB1 with dummy SCTP
       <tapa.cz.dummy.enb1.deinit />  
   </tapa.shutdown>

</tapa.testcase>



#
#
#       Test:    1.17
#
#       Desc:    Verify that when X2 Reset is complete in the midst of HO Procedure
#                SN Status Transfer receieved after that is informed absorbed by stack.
#                Reset is initiated by source towards the target eNodeB.

#
#       Notes:   None
#              
#       Module:  None
#
#       File:    czac_tc1.xml
#
#
<tapa.testcase id="1.17">

   # Document subsection
   <tapa.doc>

      <tapa.rfc />
      <tapa.module />

#
#   S eNodeB-----Handover Request----------------------->T eNodeB
#   S eNodeB-----Handover Request Ack------------------- T eNodeB
#   S eNodeB-----Reset --------------------------------->T eNodeB
#   S eNodeB-----Reset Response--------------------------T eNodeB
#   S eNodeB-----SN Status Transfer--------------------->T eNodeB
#

      <tapa.desc>
       Verify that when X2 Reset is complete in the midst of HO Procedure
       SN Status Transfer receieved after that is absorbed by stack.
       Reset is initiated by source towards the target eNodeB.
     </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>


   # Require features and flags subsection
   <tapa.require>
       <tapa.ifdef>
         <tapa.flag id="DM" />  
      </tapa.ifdef>
       <tapa.ifndef/>
       <tapa.mode mode="single"/>
   </tapa.require>


   # Configuration subsection
   <tapa.cfg>
       #Initialize eNB2 with dummy SCTP
      <tapa.cz.dummyenb2.init/>  
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>

      #Bring up X2 Interface 
      <tapa.cz.dummy.enb2.x2.init/>

     # Start the actual handover now  -> Send HO Request to eNB2
      <tapa.send>
         <tapa.sct.datind procId="CZAC_LCZ_ENB2_PRC" suId="0"
                               suAssocId="0" 
                               assocIdx="0"
                               streamId="1"
                               eventType="CZT_MSG_HO_REQ" oldUEX2APId="1" />
      </tapa.send>

      #Expect the HO Request at eNB2
      <tapa.expect>
       <tapa.czt.bmpind procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_HO_REQ" />
      </tapa.expect>

      #Send the HO Request Ack back
      <tapa.send>
       <tapa.czt.bmprsp procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_HO_ACK" 
                        oldUEX2APId="1" newUEX2APId="2"/>
      </tapa.send>

      #Expect HO Request Ack from eNodeB2. 
      <tapa.expect>
         <tapa.sct.datreq procId="CZAC_LCZ_ENB2_PRC" spId="0"
                          spAssocId="1"
                          assocIdx="0"
                          eventType="CZT_MSG_HO_ACK" oldUEX2APId="1" newUEX2APId="2"/>
      </tapa.expect>

      # Send Reset to eNB2
      <tapa.send>
         <tapa.sct.datind procId="CZAC_LCZ_ENB2_PRC" suId="0"
                               suAssocId="0" 
                               assocIdx="0"
                               streamId="1"
                               eventType="CZT_MSG_RESET"/>
      </tapa.send>

      #Expect the Reset at eNB2
      <tapa.expect>
       <tapa.czt.gpind procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_RESET" />
      </tapa.expect>

     #Send the Reset Response to peer from eNodeB2
      <tapa.send>
       <tapa.czt.gprsp procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_RESET_RSP" />
      </tapa.send>

      #Expect Reset Response from eNodeB2. 
      <tapa.expect>
         <tapa.sct.datreq procId="CZAC_LCZ_ENB2_PRC" spId="0"
                          spAssocId="1"
                          assocIdx="0"
                          eventType="CZT_MSG_RESET_RSP" />
      </tapa.expect>

      # Send SN Status Transfer to eNB2
      <tapa.send>
         <tapa.sct.datind procId="CZAC_LCZ_ENB2_PRC" suId="0"
                               suAssocId="0" 
                               assocIdx="0"
                               streamId="1"
                               eventType="CZT_MSG_SN_STATUS_TRFR" oldUEX2APId="1" newUEX2APId="2"/>
      </tapa.send>

     # Spec says if the target eNB receives SN Status Transfer message
     # for an UE for which no prepared handover exists at the
     # target eNB, the target eNB shall ignore the message. */
      #Expect Error Indication from eNodeB2. 
 
   </tapa.test>

   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>
       #Deinitialize eNB2 with dummy SCTP
       <tapa.cz.dummy.enb2.deinit />  
   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.18
#
#       Desc:    Resource status update received in after failure response.
#                eNB1 --->> Rsrc sts req with "CZAC_START" regn rqst. --->> eNB2
#                eNB2 --->> Rsrc sts failure  ------>> eNB1
#                eNB2 --->> Rsrc sts upd  ------>> eNB1
#                eNB1 X2AP ------>> X2AP Error indication  ------>> eNB2
#                eNB1 X2AP ------>> Local Error indication  ------>> eNB1
#               
#
#       Notes:   None
#              
#       Module:  
#
#       File:    czac_tc1.xml
#
#
<tapa.testcase id="1.18">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="x2ap"/>

      <tapa.desc>
         Resource status update sent in invalid state.
         
      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

       <tapa.ifdef>
         <tapa.flag id="DM" />  
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.cz.dummyenb1.init/>
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>

      <tapa.cz.dummy.enb1.x2.init/>

      # send resource status request from eNB1 with "CZAC_START" 
      # registration request
      <tapa.send>
         <tapa.czt.gpreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                         eventType="CZT_MSG_RSRC_ST_REQ" 
                         eNb1MeasId="1" regReqType="CZAC_START"/>
      </tapa.send>

      <tapa.expect>
         <tapa.sct.datreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          spId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eventType="CZT_MSG_RSRC_ST_REQ"
                          eNb1MeasId="1" regReqType="CZAC_START"/>
      </tapa.expect>
   
      # send resource status response from eNB2
      <tapa.send>
         <tapa.sct.datind procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          suId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eventType="CZT_MSG_RSRC_ST_FAIL" 
                                                                  causeType="CAUSE_MISC"
                                                                  causeVal="2"
                          eNb1MeasId="1" eNb2MeasId="2"/>
      </tapa.send>

      <tapa.expect>
         <tapa.czt.gpcfm procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                         eventType="CZT_MSG_RSRC_ST_FAIL"
                                                                 causeType="CAUSE_MISC"
                                                                 causeVal="2"
                         eNb1MeasId="1" eNb2MeasId="2"/>
      </tapa.expect>
   
      # send resource status update from eNB2
      <tapa.send>
         <tapa.sct.datind procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          suId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eventType="CZT_MSG_RSRC_ST_UPD" 
                          eNb1MeasId="1" eNb2MeasId="2"/>
      </tapa.send>

      <tapa.expect>
         <tapa.sct.datreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          spId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eventType="CZT_MSG_ERR_IND" 
                          causeType="CAUSE_RADIONW" 
                          causeVal="19" />
   #CztCauseRadioNwunknown_eNB_Measurement_IDEnum
      </tapa.expect>
   
      <tapa.expect>
         <tapa.czt.errind procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          eventType="CZT_MSG_RSRC_ST_UPD" 
                          errType="CZT_ERRTYPE_INV_PARAM" 
                          errCause="CZT_ERRCAUSE_INV_ENB1_MEAS_ID"/>
      </tapa.expect>
   
   </tapa.test>

   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>

      # x2ap cleanup operations
      <tapa.cz.dummy.enb1.deinit/>

   </tapa.shutdown>
</tapa.testcase>




#
#
#       Test:    1.19
#
#       Desc:    Resource status update received in "CZAC_STOP_PROGRESS" state.
#                eNB1 --->> Rsrc sts req with "CZAC_START" regn rqst. --->> eNB2
#                eNB2 --->> Rsrc sts rsp  ------>> eNB1
#                eNB1 --->> Rsrc sts req with "CZAC_STOP" regn rqst. --->> eNB2
#                eNB2 --->> Rsrc sts rsp  ------>> eNB1
#                eNB2 --->> Rsrc sts upd  ------>> eNB1
#                eNB1 X2AP ------>> X2AP Error indication  ------>> eNB2
#                eNB1 X2AP ------>> Local Error indication  ------>> eNB1
#               
#
#       Notes:   None
#              
#       Module:  
#
#       File:    czac_tc1.xml
#
#
<tapa.testcase id="1.19">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="x2ap"/>

      <tapa.desc>
         Resource status update sent in invalid "CZAC_STOP_PROGRESS" state.
         
      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

       <tapa.ifdef>
         <tapa.flag id="DM" />  
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.cz.dummyenb1.init/>
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>

      <tapa.cz.dummy.enb1.x2.init/>

      # send resource status request from eNB1 with "CZAC_START" 
      # registration request
      <tapa.send>
         <tapa.czt.gpreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                         eventType="CZT_MSG_RSRC_ST_REQ" 
                         eNb1MeasId="1" regReqType="CZAC_START"/>
      </tapa.send>

      <tapa.expect>
         <tapa.sct.datreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          spId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eventType="CZT_MSG_RSRC_ST_REQ"
                          eNb1MeasId="1" regReqType="CZAC_START"/>
      </tapa.expect>
   
      # send resource status response from eNB2
      <tapa.send>
         <tapa.sct.datind procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          suId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eventType="CZT_MSG_RSRC_ST_RSP" 
                          eNb1MeasId="1" eNb2MeasId="2"/>
      </tapa.send>

      <tapa.expect>
         <tapa.czt.gpcfm procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                         eventType="CZT_MSG_RSRC_ST_RSP"
                         eNb1MeasId="1" eNb2MeasId="2"/>
      </tapa.expect>
   
      # send resource status request from eNB1 with "CZAC_STOP" 
      # registration request
      <tapa.send>
         <tapa.czt.gpreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                         eventType="CZT_MSG_RSRC_ST_REQ" 
                         eNb1MeasId="1" eNb2MeasId="2" 
                         regReqType="CZAC_STOP"/>
      </tapa.send>

      <tapa.expect>
         <tapa.sct.datreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          spId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eventType="CZT_MSG_RSRC_ST_REQ"
                          eNb1MeasId="1" eNb2MeasId="2" 
                          regReqType="CZAC_STOP"/>
      </tapa.expect>
   
      # send resource status response from eNB2
      <tapa.send>
         <tapa.sct.datind procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          suId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eventType="CZT_MSG_RSRC_ST_RSP" 
                          eNb1MeasId="1" eNb2MeasId="2"/>
      </tapa.send>

      <tapa.expect>
         <tapa.czt.gpcfm procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                         eventType="CZT_MSG_RSRC_ST_RSP"
                         eNb1MeasId="1" eNb2MeasId="2"/>
      </tapa.expect>
   
      # send resource status update from eNB2
      <tapa.send>
         <tapa.sct.datind procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          suId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eventType="CZT_MSG_RSRC_ST_UPD" 
                          eNb1MeasId="1" eNb2MeasId="2"/>
      </tapa.send>

      <tapa.expect>
         <tapa.sct.datreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          spId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eventType="CZT_MSG_ERR_IND" 
                          causeType="CAUSE_RADIONW" 
                          causeVal="19" />
   #CztCauseRadioNwunknown_eNB_Measurement_IDEnum
      </tapa.expect>
   
      <tapa.expect>
         <tapa.czt.errind procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          eventType="CZT_MSG_RSRC_ST_UPD" 
                          errType="CZT_ERRTYPE_INV_PARAM" 
                          errCause="CZT_ERRCAUSE_INV_ENB1_MEAS_ID"/>
      </tapa.expect>
   
   </tapa.test>

   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>

      # x2ap cleanup operations
      <tapa.cz.dummy.enb1.deinit/>

   </tapa.shutdown>
</tapa.testcase>


#
#
#       Test:    1.20
#
#       Desc:    Resource status request retransmission after 
#                Response is received.
#                eNB1 --->> Rsrc sts req with "CZAC_START" regn rqst. --->> eNB2
#                eNB2 --->> Rsrc sts rsp --->> eNB1
#                eNB1 --->> Rsrc sts req retransmitted   ------>> eNB2
#                eNB2 --->> Rsrc sts failure ------>> eNB1
#                eNB2 X2AP --->> Local error indication ------>> eNB2
#               
#
#       Notes:   None
#              
#       Module:  
#
#       File:    czac_tc1.xml
#
#
<tapa.testcase id="1.20">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="x2ap"/>

      <tapa.desc>
         Resource status failure sent from eNB1.
         
      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

       <tapa.ifdef>
         <tapa.flag id="DM" />  
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.cz.dummyenb2.init/>
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>

      <tapa.cz.dummy.enb2.x2.init/>

      # send resource status request from eNB1 with "CZAC_START" 
      # registration request
      <tapa.send>
         <tapa.sct.datind procId="CZAC_LCZ_ENB2_PRC" peerId="1" 
                          suId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eventType="CZT_MSG_RSRC_ST_REQ" 
                          eNb1MeasId="1" regReqType="CZAC_START"/>
      </tapa.send>

      <tapa.expect>
         <tapa.czt.gpind procId="CZAC_LCZ_ENB2_PRC" peerId="1" 
                         eventType="CZT_MSG_RSRC_ST_REQ"
                         eNb1MeasId="1" regReqType="CZAC_START"/>
      </tapa.expect>
   
      # send resource status response from eNB1
      <tapa.send>
         <tapa.czt.gprsp procId="CZAC_LCZ_ENB2_PRC" peerId="1" 
                         eventType="CZT_MSG_RSRC_ST_RSP" 
                         eNb1MeasId="1" eNb2MeasId="2"/>
      </tapa.send>

      <tapa.expect>
         <tapa.sct.datreq procId="CZAC_LCZ_ENB2_PRC" peerId="1" 
                          spId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eventType="CZT_MSG_RSRC_ST_RSP"
                          eNb1MeasId="1" eNb2MeasId="2"/>
      </tapa.expect>
   
      # send resource status request from eNB1 with "CZAC_START" 
      # registration request
      <tapa.send>
         <tapa.sct.datind procId="CZAC_LCZ_ENB2_PRC" peerId="1" 
                          suId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eventType="CZT_MSG_RSRC_ST_REQ" 
                          eNb1MeasId="1" regReqType="CZAC_START"/>
      </tapa.send>

      <tapa.expect>
         <tapa.sct.datreq procId="CZAC_LCZ_ENB2_PRC" peerId="1" 
                          eventType="CZT_MSG_RSRC_ST_FAIL" 
                          spId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eNb1MeasId="1" eNb2MeasId="2" 
                          causeType="CAUSE_RADIONW"
                          causeVal="18"/>
      </tapa.expect>

      <tapa.expect>
         <tapa.czt.errind procId="CZAC_LCZ_ENB2_PRC" peerId="1" 
                          eventType="CZT_MSG_RSRC_ST_REQ"
                          errType="CZT_ERRTYPE_INV_PARAM"
                          errCause="CZT_ERRCAUSE_DUPLICATE_ENB1_MEAS_ID" />
      </tapa.expect>
   
   </tapa.test>

   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>

      # x2ap cleanup operations
      <tapa.cz.dummy.enb2.deinit/>

   </tapa.shutdown>
</tapa.testcase>
#
#
#       Test:    1.21
#
#         Desc : "Usage of SCT_ASSOC_IND_INIT in Association formation."
#
#       Notes:   None
#              
#       Module:  
#
#       File:    czac_tc1.xml
#
#
<tapa.testcase id="1.21">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="x2ap"/>

      <tapa.desc>
         "Usage of SCT_ASSOC_IND_INIT in Association formation."
      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
         <tapa.flag id="DM" />  
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.cz.dummyenb2.init/>

   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>
       
      # Send a new Association Indication to eNodeB2
      <tapa.send>
         <tapa.sct.assocind procId="CZAC_ENB2_PROC" suId="0" 
                            suEndpId="0" 
                            assocIdx="0" type="SCT_ASSOC_IND_INIT" />
      </tapa.send>

      # Receive back the Association Response from eNodeB2
      <tapa.expect>
         <tapa.sct.assocrsp procId="CZAC_ENB2_PROC" spId="0" 
                           spEndpId="0" 
                           assocIdx="0" type="SCT_ASSOC_IND_INIT"/>
      </tapa.expect>

      # Send Status Indication to eNB2 that ASSOC UP 
      <tapa.send>
         <tapa.sct.staind procId="CZAC_ENB2_PROC" suId="0" 
                          suAssocId="1" 
                          spAssocId="1" 
                          status="SCT_STATUS_COMM_UP"/> 
      </tapa.send>
      
      
      # Expect Status Indication ASSOC UP with user at eNodeB2 
      <tapa.expset>

         <tapa.lcz.staInd category="LCM_CATEGORY_PROTOCOL"
                          event = "LCZ_EVENT_LI_COMM_UP"
                          cause = "LCZ_CAUSE_SCT_NOT_APPL"
                          type   = "LCZ_USTA_DGNVAL_PEER"
                          typeId =  "1"
                          procId="300"               />
                                   
      </tapa.expset>         

      # Second start the X2 Interface setup
      # Now send the first X2 Setup message to eNodeB2
      <tapa.send>
         <tapa.sct.datind  procId="CZAC_ENB2_PROC" suId="0" 
                           suAssocId="1" 
                           assocIdx="0" 
                           strmId="1"
                           eventType="CZT_MSG_X2_SETUP" />
      </tapa.send>

      # Expect a new X2 Setup with user at eNodeB2 
      <tapa.expect>
         <tapa.czt.gpind procId="CZAC_ENB2_PROC" peerId="1" eventType="CZT_MSG_X2_SETUP"   />
      </tapa.expect>     


     # Send back the successful X2 Setup Response from user at eNodeB2 
      <tapa.send>
         <tapa.czt.gprsp procId="CZAC_ENB2_PROC" peerId="1" eventType="CZT_MSG_X2_SETUP_FAIL"  />
      </tapa.send>     


      # Receive back the X2 Setup Response from eNodeB2
      <tapa.expect>
        <tapa.sct.datreq  procId="CZAC_ENB2_PROC" spId="0" 
                          spAssocId="1" 
                          assocIdx="1" 
                          eventType="CZT_MSG_X2_SETUP_FAIL" />
      </tapa.expect>
        

   </tapa.test>

   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>

      #Deinitialize eNB1 with dummy SCTP
      <tapa.delay delay="1"/>

      <tapa.send>
         <tapa.lcz.cntrl.shutdown procId="CZAC_ENB2_PROC"/>
      </tapa.send>

      # Expect Term Req to dummy SCTP
      <tapa.expect guardTmr="100">
           <tapa.sct.termreq procId="CZAC_ENB2_PROC" spId="0" assocIdx="0"
              spAssocId="0" assocIdType="2"/>
      </tapa.expect>
      # Expect EndpClose Req to dummy SCTP
      <tapa.expect>
       <tapa.sct.endpclosereq procId="CZAC_ENB2_PROC" spId="0" suEndpId="0" endpIdType="2"/>
      </tapa.expect>
      # Do shutdown
      <tapa.expect>
      <tapa.lcz.cntrlcfm procId="CZAC_ENB2_PROC"/>
      </tapa.expect>
      <tapa.delay delay="1"/>

   </tapa.shutdown>

</tapa.testcase>
#
#
#       Test:    1.22
#
#       Desc:  "Verify the Net Down Indication from the SCTP through X2AP"
#           
#
#       Notes:   None
#              
#       Module:  
#
#       File:    czac_tc1.xml
#
#
<tapa.testcase id="1.22">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="x2ap"/>

      <tapa.desc>
         "Verify the Net Down Indication from the SCTP through X2AP"
      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
         <tapa.flag id="DM" />  
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
    <tapa.cz.dummyenb1.init/>

   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>
        #Bring up X2 Interface 
      <tapa.cz.dummy.enb1.x2.init/>
      # Send Status Indication to eNodeB1 that ASSOC UP
      <tapa.send>
         <tapa.sct.staind procId="CZAC_ENB1_PROC" suId="0"
            suAssocId="2"
            spAssocId="2"
            status="SCT_STATUS_NET_DOWN"/>
      </tapa.send>
      
      <tapa.expect>
      <tapa.lcz.staInd category="LCM_CATEGORY_PROTOCOL"
            event = "LCZ_EVENT_LI_NET_DOWN"
            cause = "LCZ_CAUSE_SCT_NOT_APPL"
            type   =  "LCZ_USTA_DGNVAL_PEER"
            typeId =  "2"
            ipAddrType = "CM_IPV4ADDR_TYPE"
            ipAddress = "172.25.0.27"
            procId="300" />
      </tapa.expect>

      <tapa.delay delay="5" />
      
   </tapa.test>

   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>

      #Deinitialize eNB1 with dummy SCTP
       <tapa.cz.dummy.enb1.deinit />  

   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.23
#
#       Desc:    Resource status update received in "CZAC_STOP_PROGRESS" state.
#                eNB1 --->> Rsrc sts req with "CZAC_START" regn rqst. --->> eNB2
#                eNB2 --->> Rsrc sts rsp  ------>> eNB1
#                eNB1 --->> Rsrc sts req with "CZAC_STOP" regn rqst. --->> eNB2
#                eNB2 --->> Rsrc sts rsp  ------>> eNB1
#                eNB2 --->> Rsrc sts upd  ------>> eNB1
#                eNB1 X2AP ------>> X2AP Error indication  ------>> eNB2
#                eNB1 X2AP ------>> Local Error indication  ------>> eNB1
#               
#
#       Notes:   None
#              
#       Module:  
#
#       File:    czac_tc1.xml
#
#
<tapa.testcase id="1.23">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="x2ap"/>

      <tapa.desc>
         Resource status update sent in invalid "CZAC_STOP_PROGRESS" state.
         
      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

       <tapa.ifdef>
         <tapa.flag id="DM" />  
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.cz.dummyenb1.init/>
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>

      <tapa.cz.dummy.enb1.x2.init/>

      # send resource status request from eNB1 with "CZAC_START" 
      # registration request
      <tapa.send>
         <tapa.czt.gpreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                         eventType="CZT_MSG_RSRC_ST_REQ" 
                         eNb1MeasId="1" regReqType="CZAC_START"/>
      </tapa.send>

      <tapa.expect>
         <tapa.sct.datreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          spId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eventType="CZT_MSG_RSRC_ST_REQ"
                          eNb1MeasId="1" regReqType="CZAC_START"/>
      </tapa.expect>
   
      # send resource status response from eNB2
      <tapa.send>
         <tapa.sct.datind procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          suId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eventType="CZT_MSG_RSRC_ST_RSP" 
                          eNb1MeasId="1" eNb2MeasId="2"/>
      </tapa.send>

      <tapa.expect>
         <tapa.czt.gpcfm procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                         eventType="CZT_MSG_RSRC_ST_RSP"
                         eNb1MeasId="1" eNb2MeasId="2"/>
      </tapa.expect>
   
      # send resource status request from eNB1 with "CZAC_STOP" 
      # registration request
      <tapa.send>
         <tapa.czt.gpreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                         eventType="CZT_MSG_RSRC_ST_REQ" 
                         eNb1MeasId="1" eNb2MeasId="2" 
                         regReqType="CZAC_STOP"/>
      </tapa.send>

      <tapa.expect>
         <tapa.sct.datreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          spId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eventType="CZT_MSG_RSRC_ST_REQ"
                          eNb1MeasId="1" eNb2MeasId="2" 
                          regReqType="CZAC_STOP"/>
      </tapa.expect>
   
      # send resource status response from eNB2
      <tapa.send>
         <tapa.sct.datind procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          suId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eventType="CZT_MSG_RSRC_ST_RSP" 
                          eNb1MeasId="1" eNb2MeasId="2"/>
      </tapa.send>

      <tapa.expect>
         <tapa.czt.gpcfm procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                         eventType="CZT_MSG_RSRC_ST_RSP"
                         eNb1MeasId="1" eNb2MeasId="2"/>
      </tapa.expect>
   
      # send resource status update from eNB2
      <tapa.send>
         <tapa.sct.datind procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          suId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eventType="CZT_MSG_RSRC_ST_UPD" 
                          eNb1MeasId="4097" eNb2MeasId="2"/>
      </tapa.send>

      <tapa.expect>
         <tapa.sct.datreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          spId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eventType="CZT_MSG_ERR_IND" 
                          causeType="CAUSE_RADIONW" 
                          causeVal="19" />
   #CztCauseRadioNwunknown_eNB_Measurement_IDEnum
      </tapa.expect>
   
      <tapa.expect>
         <tapa.czt.errind procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          eventType="CZT_MSG_RSRC_ST_UPD" 
                          errType="CZT_ERRTYPE_INV_PARAM" 
                          errCause="CZT_ERRCAUSE_INV_ENB1_MEAS_ID"/>
      </tapa.expect>
   
   </tapa.test>

   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>

      # x2ap cleanup operations
      <tapa.cz.dummy.enb1.deinit/>

   </tapa.shutdown>
</tapa.testcase>

#
#
#       Test:    1.24
#
#       Desc:    Resource status update received in "CZAC_STOP_PROGRESS" state.
#                eNB1 --->> Rsrc sts req with "CZAC_START" regn rqst. --->> eNB2
#                eNB2 --->> Rsrc sts rsp  ------>> eNB1
#                eNB1 --->> Rsrc sts req with "CZAC_STOP" regn rqst. --->> eNB2
#                eNB2 --->> Rsrc sts rsp  ------>> eNB1
#                eNB2 --->> Rsrc sts upd  ------>> eNB1
#                eNB1 X2AP ------>> X2AP Error indication  ------>> eNB2
#                eNB1 X2AP ------>> Local Error indication  ------>> eNB1
#               
#
#       Notes:   None
#              
#       Module:  
#
#       File:    czac_tc1.xml
#
#
<tapa.testcase id="1.24">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="x2ap"/>

      <tapa.desc>
         Resource status update sent in invalid "CZAC_STOP_PROGRESS" state.
         
      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

       <tapa.ifdef>
         <tapa.flag id="DM" />  
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.cz.dummyenb1.init/>
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>

      <tapa.cz.dummy.enb1.x2.init/>

      # send resource status request from eNB1 with "CZAC_START" 
      # registration request
      <tapa.send>
         <tapa.czt.gpreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                         eventType="CZT_MSG_RSRC_ST_REQ" 
                         eNb1MeasId="1" regReqType="CZAC_START"/>
      </tapa.send>

      <tapa.expect>
         <tapa.sct.datreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          spId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eventType="CZT_MSG_RSRC_ST_REQ"
                          eNb1MeasId="1" regReqType="CZAC_START"/>
      </tapa.expect>
   
      # send resource status response from eNB2
      <tapa.send>
         <tapa.sct.datind procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          suId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eventType="CZT_MSG_RSRC_ST_RSP" 
                          eNb1MeasId="1" eNb2MeasId="2"/>
      </tapa.send>

      <tapa.expect>
         <tapa.czt.gpcfm procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                         eventType="CZT_MSG_RSRC_ST_RSP"
                         eNb1MeasId="1" eNb2MeasId="2"/>
      </tapa.expect>
   
      # send resource status request from eNB1 with "CZAC_STOP" 
      # registration request
      <tapa.send>
         <tapa.czt.gpreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                         eventType="CZT_MSG_RSRC_ST_REQ" 
                         eNb1MeasId="1" eNb2MeasId="2" 
                         regReqType="CZAC_STOP"/>
      </tapa.send>

      <tapa.expect>
         <tapa.sct.datreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          spId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eventType="CZT_MSG_RSRC_ST_REQ"
                          eNb1MeasId="1" eNb2MeasId="2" 
                          regReqType="CZAC_STOP"/>
      </tapa.expect>
   
      # send resource status response from eNB2
      <tapa.send>
         <tapa.sct.datind procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          suId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eventType="CZT_MSG_RSRC_ST_RSP" 
                          eNb1MeasId="1" eNb2MeasId="2"/>
      </tapa.send>

      <tapa.expect>
         <tapa.czt.gpcfm procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                         eventType="CZT_MSG_RSRC_ST_RSP"
                         eNb1MeasId="1" eNb2MeasId="2"/>
      </tapa.expect>
   
      # send resource status update from eNB2
      <tapa.send>
         <tapa.sct.datind procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          suId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eventType="CZT_MSG_RSRC_ST_UPD" 
                          eNb1MeasId="1" eNb2MeasId="4097"/>
      </tapa.send>

      <tapa.expect>
         <tapa.sct.datreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          spId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eventType="CZT_MSG_ERR_IND" 
                          causeType="CAUSE_RADIONW" 
                          causeVal="19" />
   #CztCauseRadioNwunknown_eNB_Measurement_IDEnum
      </tapa.expect>
   
      <tapa.expect>
         <tapa.czt.errind procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          eventType="CZT_MSG_RSRC_ST_UPD" 
                          errType="CZT_ERRTYPE_INV_PARAM" 
                          errCause="CZT_ERRCAUSE_INV_ENB1_MEAS_ID"/>
      </tapa.expect>
   
   </tapa.test>

   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>

      # x2ap cleanup operations
      <tapa.cz.dummy.enb1.deinit/>

   </tapa.shutdown>
</tapa.testcase>
#
#
#       Test:    1.25
#
#       Desc:    Resource status update received in "CZAC_STOP_PROGRESS" state.
#                eNB1 --->> Rsrc sts req with "CZAC_START" regn rqst. --->> eNB2
#                eNB2 --->> Rsrc sts rsp  ------>> eNB1
#                eNB1 --->> Rsrc sts req with "CZAC_STOP" regn rqst. --->> eNB2
#                eNB2 --->> Rsrc sts rsp  ------>> eNB1
#                eNB2 --->> Rsrc sts upd  ------>> eNB1
#                eNB1 X2AP ------>> X2AP Error indication  ------>> eNB2
#                eNB1 X2AP ------>> Local Error indication  ------>> eNB1
#               
#
#       Notes:   None
#              
#       Module:  
#
#       File:    czac_tc1.xml
#
#
<tapa.testcase id="1.25">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="x2ap"/>

      <tapa.desc>
         Resource status update sent in invalid "CZAC_STOP_PROGRESS" state.
         
      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

       <tapa.ifdef>
         <tapa.flag id="DM" />  
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.cz.dummyenb1.init/>
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>

      <tapa.cz.dummy.enb1.x2.init/>

      # send resource status request from eNB1 with "CZAC_START" 
      # registration request
      <tapa.send>
         <tapa.czt.gpreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                         eventType="CZT_MSG_RSRC_ST_REQ" 
                         eNb1MeasId="1" regReqType="CZAC_START"/>
      </tapa.send>

      <tapa.expect>
         <tapa.sct.datreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          spId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eventType="CZT_MSG_RSRC_ST_REQ"
                          eNb1MeasId="1" regReqType="CZAC_START"/>
      </tapa.expect>
   
      # send resource status response from eNB2
      <tapa.send>
         <tapa.sct.datind procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          suId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eventType="CZT_MSG_RSRC_ST_RSP" 
                          eNb1MeasId="1" eNb2MeasId="2"/>
      </tapa.send>

      <tapa.expect>
         <tapa.czt.gpcfm procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                         eventType="CZT_MSG_RSRC_ST_RSP"
                         eNb1MeasId="1" eNb2MeasId="2"/>
      </tapa.expect>
   
      # send resource status request from eNB1 with "CZAC_STOP" 
      # registration request
      <tapa.send>
         <tapa.czt.gpreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                         eventType="CZT_MSG_RSRC_ST_REQ" 
                         eNb1MeasId="1" eNb2MeasId="2" 
                         regReqType="CZAC_STOP"/>
      </tapa.send>

      <tapa.expect>
         <tapa.sct.datreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          spId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eventType="CZT_MSG_RSRC_ST_REQ"
                          eNb1MeasId="1" eNb2MeasId="2" 
                          regReqType="CZAC_STOP"/>
      </tapa.expect>
   
      # send resource status response from eNB2
      <tapa.send>
         <tapa.sct.datind procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          suId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eventType="CZT_MSG_RSRC_ST_RSP" 
                          eNb1MeasId="1" eNb2MeasId="2"/>
      </tapa.send>

      <tapa.expect>
         <tapa.czt.gpcfm procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                         eventType="CZT_MSG_RSRC_ST_RSP"
                         eNb1MeasId="1" eNb2MeasId="2"/>
      </tapa.expect>
   
      # send resource status update from eNB2
      <tapa.send>
         <tapa.sct.datind procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          suId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eventType="CZT_MSG_RSRC_ST_FAIL" 
                          eNb1MeasId="1" eNb2MeasId="2"/>
      </tapa.send>

      <tapa.expect>
         <tapa.sct.datreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          spId="0"
                          suAssocId="0" 
                          assocIdx="0"
                          streamId="1"  
                          eventType="CZT_MSG_ERR_IND" 
                          causeType="CAUSE_RADIONW" 
                          causeVal="19" />
   #CztCauseRadioNwunknown_eNB_Measurement_IDEnum
      </tapa.expect>
   
      <tapa.expect>
         <tapa.czt.errind procId="CZAC_LCZ_ENB1_PRC" peerId="2" 
                          eventType="CZT_MSG_RSRC_ST_FAIL" 
                          errType="CZT_ERRTYPE_INV_PARAM" 
                          errCause="CZT_ERRCAUSE_INV_ENB1_MEAS_ID"/>
      </tapa.expect>
   
   </tapa.test>

   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>

      # x2ap cleanup operations
      <tapa.cz.dummy.enb1.deinit/>

   </tapa.shutdown>
</tapa.testcase>


#
#
#       Test:    1.26
#
#       Desc:    "Verify the successful Association at ENB1 in a Dummy environment "
#
#       Notes:   None
#              
#       Module:  
#
#       File:    czac_tc1.xml
#
#
<tapa.testcase id="1.26">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="x2ap"/>

      <tapa.desc>
         "Verify the successful Association at ENB1 in a Dummy environment "
         
      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
         <tapa.flag id="DM" />  
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.cz.dummyenb1.init/>
   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>

       # Send the first X2 Setup from user at eNodeB1
      <tapa.send>
         <tapa.czt.gpreq procId="CZAC_ENB1_PROC" peerId="2" eventType="CZT_MSG_X2_SETUP" encodeFail="TRUE"/>
      </tapa.send>     

      # Expect a new Association Request from eNodeB1

      <tapa.expect>
       <tapa.czt.errind procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_X2_SETUP" 
                          errType="CZT_ERRTYPE_MSG_SEND_FAILED" 
                          errCause="CZT_ERRCAUSE_ENC_FAILED"/>
      </tapa.expect>


   </tapa.test>

   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>
      # Do shutdown
      <tapa.delay delay="1"/>

      <tapa.send>
         <tapa.lcz.cntrl.shutdown/>
      </tapa.send>

      # Expect EndpClose Req to dummy SCTP
         <tapa.expset>
         <tapa.sct.termreq procId="CZAC_ENB_PROC" spId="0" assocIdx="0" assocIdType="1"/> 
         <tapa.sct.endpclosereq procId="CZAC_ENB_PROC" spId="0" suEndpId="0" endpIdType="2"/> 
      </tapa.expset>

      # Do shutdown
      <tapa.expect>
         <tapa.lcz.cntrlcfm/>
      </tapa.expect>

      <tapa.delay delay="1"/>

   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.27
#
#       Desc:    
#
#       Notes:   None
#              
#       Module:  
#
#       File:    czac_tc2.xml
#
#
<tapa.testcase id="1.27">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="x2ap"/>

      <tapa.desc>
         "Verify Successful Completion of Mobility Setting Chanage Request "
            
      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
         <tapa.flag id="CZAC_INTSCTP" />  
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.hi.init/>
      <tapa.sb.init/>
      <tapa.cz.enb1.init/>
      <tapa.cz.enb2.init/>
      <tapa.cz.x2.init/>

   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>
  <tapa.delay delay="10"/>
   
     # Send an Mobility Change Request Message from eNB1 to ENB2
      <tapa.send>
         <tapa.czt.gpreq eventType="CZT_MSG_MOB_CHANGE_REQ" procId="CZAC_LCZ_ENB1_PRC" peerId="2" />
      </tapa.send>

     #Expect this Mobility Change Request Message at target eNodeB
     <tapa.expect>
        <tapa.czt.gpind procId="CZAC_LCZ_ENB2_PRC" peerId="1"
           eventType="CZT_MSG_MOB_CHANGE_REQ" />
     </tapa.expect>

#ENB2 sends the Mobility Change ACK at target eNodeB
       <tapa.send>
         <tapa.czt.gprsp eventType="CZT_MSG_MOB_CHANGE_ACK"
            procId="CZAC_LCZ_ENB2_PRC" peerId="1" spId="0" />
      </tapa.send>
      
     #Expect this Mobility Change ACK at target eNodeB
     <tapa.expect>
        <tapa.czt.gpcfm procId="CZAC_LCZ_ENB1_PRC" peerId="2"
           eventType="CZT_MSG_MOB_CHANGE_ACK" />
     </tapa.expect>

     <tapa.delay delay="2" />

</tapa.test>
   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>

      # x2ap cleanup operations
       <tapa.cz.enb2.deinit/>
       <tapa.cz.enb1.deinit/>
      <tapa.sb.deinit/>
      <tapa.hi.deinit/>

   </tapa.shutdown>

</tapa.testcase>



#
#
#       Test:    1.28
#
#       Desc:    
#
#       Notes:   None
#              
#       Module:  
#
#       File:    czac_tc2.xml
#
#
<tapa.testcase id="1.28">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="x2ap"/>

      <tapa.desc>
         "Verfiy Failed Mobility Setting Change procedure."

      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
         <tapa.flag id="CZAC_INTSCTP" />  
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.hi.init/>
      <tapa.sb.init/>
      <tapa.cz.enb1.init/>
      <tapa.cz.enb2.init/>
      <tapa.cz.x2.init/>

   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>
  <tapa.delay delay="10"/>
      # Send an Mobility Change Request Message from eNB1 to ENB2
      <tapa.send>
         <tapa.czt.gpreq eventType="CZT_MSG_MOB_CHANGE_REQ" procId="CZAC_LCZ_ENB1_PRC" peerId="2" />
      </tapa.send>

     <tapa.delay delay="2" />
     #Expect this Mobility Change Request Message at target eNodeB
     <tapa.expect>
        <tapa.czt.gpind procId="CZAC_LCZ_ENB2_PRC" peerId="1"
           eventType="CZT_MSG_MOB_CHANGE_REQ" />
     </tapa.expect>
    
     #ENB2 sends the Mobility Change Failure Message  at target eNodeB
       <tapa.send>
         <tapa.czt.gprsp eventType="CZT_MSG_MOB_CHANGE_FAIL"
            procId="CZAC_LCZ_ENB2_PRC" peerId="1" spId="0" />
      </tapa.send>
      
     #Expect this Mobility Change Failure Message at target eNodeB
     <tapa.expect>
        <tapa.czt.gpcfm procId="CZAC_LCZ_ENB1_PRC" peerId="2"
           eventType="CZT_MSG_MOB_CHANGE_FAIL" />
     </tapa.expect>
   </tapa.test>

   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>

      # x2ap cleanup operations
       <tapa.cz.enb2.deinit/>
       <tapa.cz.enb1.deinit/>
      <tapa.sb.deinit/>
      <tapa.hi.deinit/>

   </tapa.shutdown>

</tapa.testcase>


#
#
#       Test:    1.29
#
#       Desc:    Verify the successful completion of 
#                Cell Activation Request at Source EnodeB.
#
#       Notes:   Neha
#              
#       Module:  None
#
#       File:    czac_tc2.xml
#
#
<tapa.testcase id="1.29">

   # Document subsection
   <tapa.doc>

      <tapa.rfc />
      <tapa.module />

#   S eNodeB-----Cell Actv Request----------------------->T eNodeB
#   S eNodeB-----Cell Actv Response ------------------- T eNodeB

      <tapa.desc>
        Verify the successful completion of complete 
        Cell Actv Request at source eNodeB.
      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>


   # Require features and flags subsection
   <tapa.require>
      <tapa.ifdef>
        <tapa.flag id="CZ_INITSCTP" />  
      </tapa.ifdef>
       <tapa.ifndef/>
       <tapa.mode mode="single"/>
   </tapa.require>


   # Configuration subsection
   <tapa.cfg>
     
      <tapa.hi.init/>
      <tapa.sb.init/>
      <tapa.cz.enb1.init/>
      <tapa.cz.enb2.init/>

   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>

  <tapa.cz.x2.init/>

       # Send Cell Actv Request to eNB2
    <tapa.send>
       <tapa.czt.gpreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_CELL_ACTIVATION_REQ"/>
      </tapa.send>

      <tapa.expect>
       <tapa.czt.gpind procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_CELL_ACTIVATION_REQ"/>
      </tapa.expect>
   
      # send cell Actv response from eNB2
      <tapa.send>
       <tapa.czt.gprsp procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_CELL_ACTIVATION_RES"/>
      </tapa.send>

      <tapa.expect>
       <tapa.czt.gpcfm procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_CELL_ACTIVATION_RES" />
      </tapa.expect>

   
   </tapa.test>


   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>
   
      # x2ap cleanup operations
      <tapa.cz.enb2.deinit/>
      <tapa.cz.enb1.deinit/>
      <tapa.sb.deinit/>
      <tapa.hi.deinit/>

   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.30
#
#       Desc:    Verify the Failure case of Cell Activation Request at Source EnodeB.
#
#       Notes:   Neha
#              
#       Module:  Neha
#
#       File:    czac_tc2.xml
#
#
<tapa.testcase id="1.30">

   # Document subsection
   <tapa.doc>

      <tapa.rfc />
      <tapa.module />

#   S eNodeB-----Cell Actv Request----------------------->T eNodeB
#   S eNodeB-----Cell Actv Response Fails ------------------- T eNodeB

      <tapa.desc>
        Verify the Failure case of Cell Actv Request at source eNodeB.
      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>


   # Require features and flags subsection
   <tapa.require>
      <tapa.ifdef>
         <tapa.flag id="CZAC_INTSCTP" />  
      </tapa.ifdef>
       <tapa.ifndef/>
       <tapa.mode mode="single"/>
   </tapa.require>


   # Configuration subsection
   <tapa.cfg>
      <tapa.hi.init/>
      <tapa.sb.init/>
      <tapa.cz.enb1.init/>
      <tapa.cz.enb2.init/>

   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>
 <tapa.cz.x2.init/>

      # Send Cell Actv Request to eNB2
      # Send Cell Actv Request to eNB2 with eNb2servedCellActvLst="2" cell Actv Req

    <tapa.send>
       <tapa.czt.gpreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_CELL_ACTIVATION_REQ"/>
      </tapa.send>

 <tapa.expect>
       <tapa.czt.gpind procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_CELL_ACTIVATION_REQ"/>
      </tapa.expect>

        <tapa.send>
       <tapa.czt.gprsp procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_CELL_ACTIVATION_FAIL"/>
      </tapa.send>

      <tapa.expect>
       <tapa.czt.gpcfm procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_CELL_ACTIVATION_FAIL"/>
      </tapa.expect>
   
   </tapa.test>


   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>
   
      # x2ap cleanup operations
      <tapa.cz.enb2.deinit/>
      <tapa.cz.enb1.deinit/>
      <tapa.sb.deinit/>
      <tapa.hi.deinit/>

   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.31
#
#       Desc:    
#
#       Notes:   None
#              
#       Module:  
#
#       File:    czac_tc2.xml
#
#
<tapa.testcase id="1.31">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="x2ap"/>

      <tapa.desc>
         "Successful RLF indication procedure."

      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
         <tapa.flag id="CZAC_INTSCTP" />  
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.hi.init/>
      <tapa.sb.init/>
      <tapa.cz.enb1.init/>
      <tapa.cz.enb2.init/>
      <tapa.cz.x2.init/>

   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>
      <tapa.send>
       <tapa.czt.bmpreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_HO_REQ" oldUEX2APId="1" />
      </tapa.send>

      <tapa.expect>
       <tapa.czt.bmpind procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_HO_REQ" />
      </tapa.expect>
   
      <tapa.send>
     <tapa.czt.bmprsp procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_HO_ACK" oldUEX2APId="1" newUEX2APId="2" />
      </tapa.send>

      <tapa.expect>
       <tapa.czt.bmpcfm  procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_HO_ACK" />
      </tapa.expect>

      <tapa.send>
     <tapa.czt.bmpreq procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_UE_CXT_RELEASE" oldUEX2APId="1" newUEX2APId="2" />
      </tapa.send>

      <tapa.expect>
       <tapa.czt.bmpind  procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_UE_CXT_RELEASE" />
      </tapa.expect>

      # Send an Mobility Change Request Message from eNB1 to ENB2
      <tapa.send>
         <tapa.czt.gpreq eventType="CZT_MSG_RLF_INDICATION" procId="CZAC_LCZ_ENB2_PRC" peerId="1" spId="0"/>
      </tapa.send>

     #Expect this Mobility Change Request Message at target eNodeB
     <tapa.expect>
        <tapa.czt.gpind procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_RLF_INDICATION" />
     </tapa.expect>

   </tapa.test>

   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>

      # x2ap cleanup operations
       <tapa.cz.enb2.deinit/>
       <tapa.cz.enb1.deinit/>
      <tapa.sb.deinit/>
      <tapa.hi.deinit/>

   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.32
#
#       Desc:    
#
#       Notes:   None
#              
#       Module:  
#
#       File:    czac_tc2.xml
#
#
<tapa.testcase id="1.32">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="x2ap"/>

      <tapa.desc>
         "Successful RLF indication procedure."

      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
         <tapa.flag id="CZAC_INTSCTP" />  
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.hi.init/>
      <tapa.sb.init/>
      <tapa.cz.enb1.init/>
      <tapa.cz.enb2.init/>
      <tapa.cz.x2.init/>

   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>
      <tapa.send>
       <tapa.czt.bmpreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_HO_REQ" oldUEX2APId="1" />
      </tapa.send>

      <tapa.expect>
       <tapa.czt.bmpind procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_HO_REQ" />
      </tapa.expect>
   
      <tapa.send>
     <tapa.czt.bmprsp procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_HO_ACK" oldUEX2APId="1" newUEX2APId="2" />
      </tapa.send>

      <tapa.expect>
       <tapa.czt.bmpcfm  procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_HO_ACK" />
      </tapa.expect>

      <tapa.send>
     <tapa.czt.bmpreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_SN_STATUS_TRFR" 
                      oldUEX2APId="1" newUEX2APId="2"/>
      </tapa.send>

      <tapa.expect>
         <tapa.czt.bmpind procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_SN_STATUS_TRFR"/>
      </tapa.expect>
      
      <tapa.send>
     <tapa.czt.bmpreq procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_UE_CXT_RELEASE" oldUEX2APId="1" newUEX2APId="2" />
      </tapa.send>

      <tapa.expect>
       <tapa.czt.bmpind  procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_UE_CXT_RELEASE" />
      </tapa.expect>

      
      # Send an Mobility Change Request Message from eNB1 to ENB2
      <tapa.send>
         <tapa.czt.gpreq eventType="CZT_MSG_RLF_INDICATION" procId="CZAC_LCZ_ENB2_PRC" peerId="1" spId="0"/>
      </tapa.send>

     #Expect this Mobility Change Request Message at target eNodeB
     <tapa.expect>
        <tapa.czt.gpind procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_RLF_INDICATION" />
     </tapa.expect>

   </tapa.test>

   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>

      # x2ap cleanup operations
       <tapa.cz.enb2.deinit/>
       <tapa.cz.enb1.deinit/>
      <tapa.sb.deinit/>
      <tapa.hi.deinit/>

   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.33
#
#       Desc:    
#
#       Notes:   None
#              
#       Module:  
#
#       File:    czac_tc2.xml
#
#
<tapa.testcase id="1.33">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="x2ap"/>

      <tapa.desc>
         "Successful RLF indication procedure."

      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
         <tapa.flag id="CZAC_INTSCTP" />  
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.hi.init/>
      <tapa.sb.init/>
      <tapa.cz.enb1.init/>
      <tapa.cz.enb2.init/>
      <tapa.cz.x2.init/>

   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>
      <tapa.send>
       <tapa.czt.bmpreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_HO_REQ" oldUEX2APId="1" />
      </tapa.send>

      <tapa.expect>
       <tapa.czt.bmpind procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_HO_REQ" />
      </tapa.expect>
   
      <tapa.send>
     <tapa.czt.bmprsp procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_HO_ACK" oldUEX2APId="1" newUEX2APId="2" />
      </tapa.send>

      <tapa.expect>
       <tapa.czt.bmpcfm  procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_HO_ACK" />
      </tapa.expect>

      <tapa.send>
     <tapa.czt.bmpreq procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_UE_CXT_RELEASE" oldUEX2APId="1" newUEX2APId="2" />
      </tapa.send>

      <tapa.expect>
       <tapa.czt.bmpind  procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_UE_CXT_RELEASE" />
      </tapa.expect>

      # Send an Mobility Change Request Message from eNB1 to ENB2
      <tapa.send>
         <tapa.czt.gpreq eventType="CZT_MSG_RLF_INDICATION" procId="CZAC_LCZ_ENB1_PRC" peerId="2"/>
      </tapa.send>

     #Expect this Mobility Change Request Message at target eNodeB
     <tapa.expect>
        <tapa.czt.gpind procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_RLF_INDICATION"/>
     </tapa.expect>

      # Send an Mobility Change Request Message from eNB1 to ENB2
      <tapa.send>
         <tapa.czt.gpreq eventType="CZT_MSG_HO_REPORT" procId="CZAC_LCZ_ENB2_PRC" peerId="1" spId="0" cause="HO_TOO_EARLY"/>
      </tapa.send>

     #Expect this Mobility Change Request Message at target eNodeB
     <tapa.expect>
        <tapa.czt.gpind procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_HO_REPORT" />
     </tapa.expect>
   </tapa.test>

   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>

      # x2ap cleanup operations
       <tapa.cz.enb2.deinit/>
       <tapa.cz.enb1.deinit/>
      <tapa.sb.deinit/>
      <tapa.hi.deinit/>

   </tapa.shutdown>

</tapa.testcase>

#
#
#       Test:    1.34
#
#       Desc:    
#
#       Notes:   None
#              
#       Module:  
#
#       File:    czac_tc2.xml
#
#
<tapa.testcase id="1.34">

   # Document subsection
   <tapa.doc>

      <tapa.rfc id="None" section="None"/>
      <tapa.module id="x2ap"/>

      <tapa.desc>
         "Successful RLF indication procedure."

      </tapa.desc>

      <tapa.longdesc/>

   </tapa.doc>

   # Require features and flags subsection
   <tapa.require>

      <tapa.ifdef>
         <tapa.flag id="CZAC_INTSCTP" />  
      </tapa.ifdef>

      <tapa.ifndef/>
      <tapa.mode mode="single"/>

   </tapa.require>

   # Configuration subsection
   <tapa.cfg>
      <tapa.hi.init/>
      <tapa.sb.init/>
      <tapa.cz.enb1.init/>
      <tapa.cz.enb2.init/>
      <tapa.cz.x2.init/>

   </tapa.cfg>

   # Test Steps subsection
   <tapa.test>
      <tapa.send>
       <tapa.czt.bmpreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_HO_REQ" oldUEX2APId="1" />
      </tapa.send>

      <tapa.expect>
       <tapa.czt.bmpind procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_HO_REQ" />
      </tapa.expect>
   
      <tapa.send>
     <tapa.czt.bmprsp procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_HO_ACK" oldUEX2APId="1" newUEX2APId="2" />
      </tapa.send>

      <tapa.expect>
       <tapa.czt.bmpcfm  procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_HO_ACK" />
      </tapa.expect>

      <tapa.send>
     <tapa.czt.bmpreq procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_SN_STATUS_TRFR" 
                      oldUEX2APId="1" newUEX2APId="2"/>
      </tapa.send>

      <tapa.expect>
         <tapa.czt.bmpind procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_SN_STATUS_TRFR"/>
      </tapa.expect>
      
      <tapa.send>
     <tapa.czt.bmpreq procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_UE_CXT_RELEASE" oldUEX2APId="1" newUEX2APId="2" />
      </tapa.send>

      <tapa.expect>
       <tapa.czt.bmpind  procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_UE_CXT_RELEASE" />
      </tapa.expect>

      # Send an Mobility Change Request Message from eNB1 to ENB2
      <tapa.send>
         <tapa.czt.gpreq eventType="CZT_MSG_RLF_INDICATION" procId="CZAC_LCZ_ENB1_PRC" peerId="2"/>
      </tapa.send>

     #Expect this Mobility Change Request Message at target eNodeB
     <tapa.expect>
        <tapa.czt.gpind procId="CZAC_LCZ_ENB2_PRC" peerId="1" eventType="CZT_MSG_RLF_INDICATION"/>
     </tapa.expect>

      # Send an Mobility Change Request Message from eNB1 to ENB2
      <tapa.send>
         <tapa.czt.gpreq eventType="CZT_MSG_HO_REPORT" procId="CZAC_LCZ_ENB2_PRC" peerId="1" spId="0" cause="HO_TOO_EARLY"/>
      </tapa.send>

     #Expect this Mobility Change Request Message at target eNodeB
     <tapa.expect>
        <tapa.czt.gpind procId="CZAC_LCZ_ENB1_PRC" peerId="2" eventType="CZT_MSG_HO_REPORT" />
     </tapa.expect>
      
   </tapa.test>

   # Clean subsection
   <tapa.clean/>

   # Shutdown subsection
   <tapa.shutdown>

      # x2ap cleanup operations
       <tapa.cz.enb2.deinit/>
       <tapa.cz.enb1.deinit/>
      <tapa.sb.deinit/>
      <tapa.hi.deinit/>

   </tapa.shutdown>

</tapa.testcase>
#
#

# DO NOT DELETE THIS LINE -- TC number generation script depends on it.
# xyzabcend

#/********************************************************************30**
#
#         End of file:     czac_tc1.xml
#
#*********************************************************************31*/
#
#
#/********************************************************************40**
#
#        Notes:
#
#*********************************************************************41*/
#
#/********************************************************************50**
#
#*********************************************************************51*/
#
#
#/********************************************************************60**
#
#        Revision history:
#
#*********************************************************************61*/
#
#/********************************************************************90**
#
#     ver       pat    init                  description
#------------ -------- ---- ----------------------------------------------
#$SID$         ---      sy                   1. X2AP Initial Release.
#$SID$         ---      pt                   1. LTE-X2AP 3.1 release.
#*********************************************************************91*/
